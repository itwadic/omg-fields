!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return u(n,t.onDrag),o(n,t.onRemove),{add:function(e){var r=t.listTemplate(e),i=document.createRange().createContextualFragment(r);n.appendChild(i)}}};var r=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var r=n.target.closest("li"),i=r.querySelector("span").innerHTML;e.removeChild(r),t(i)}}),n},u=function(e,t){(0,i.default)([e]).on("dragend",function(n){var r=e.querySelectorAll("li");t(e,r)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),r=function(){return JSON.parse(n.value)},i=function(e){return r().concat(e)},o=function(e,t){return t(r(),e)};return{add:function(e){n.value=JSON.stringify(i(e))},remove:function(e,t){n.value=JSON.stringify(o(e,t))},update:function(e){n.value=JSON.stringify(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeItems=function(e,t){return function(n){e.remove(n,t)}},t.dragItems=function(e,t){return function(n,r){var i=t(n,r);e.update(i)}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,u){if(!e)return!1;var a=!1;e.addEventListener("keyup",function(n){if(0===n.target.value.length&&u&&u(),3>n.target.value.length)return!1;e.classList.add("show"),a=i(a,o,e,t)}),e.addEventListener("input",function(t){var i=r(t);i&&n(i,e)})};var r=function(e){var t=e.target,n=t.value,r=t.getAttribute("list"),i=document.getElementById(r).childNodes,o=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==o.length&&o[0]},i=function(e,t,n,r){var i=l(n.value),o=r+i;return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){4===e.readyState&&c(e.responseText)?t(!1,{results:JSON.parse(e.responseText),input:n}):e.responseText&&c(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",o,!0),e.send(),e},o=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;u(t.results,t.input)}},u=function(e,t){var n=t.getAttribute("list"),r=document.getElementById(n),i=e.reduce(function(e,t){var n=a(t);return e.concat(n)},"");t.classList.remove("show"),r.innerHTML=i},a=function(e){return"<option data-id="+e.id+' value="'+e.title.rendered+'">'},c=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},l=function(e){return encodeURIComponent(e.toLowerCase())}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(6),o=(r(i),n(7)),u=r(o),a=n(20),c=r(a),l=n(1),s=(r(l),n(21)),f=r(s),d=n(22),v=r(d),p=function(e){return'<li class="text-list-item">\n        <span>'+e+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'},m=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,v.default)(),(0,u.default)({parent:".text-list",button:".text-list-add",list:".text-list-list",hidden:".text-list-hidden",listTemplate:p}),(0,c.default)({parent:".autosuggest-list",input:"autosuggest-list-input",list:".autosuggest-list-list",hidden:".autosuggest-list-hidden",listTemplate:m}),(0,f.default)({parent:".autosuggest-wrapper",input:".autosuggest-input",hidden:".autosuggest-hidden"})})},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector("input[type=text]"),r=t.querySelector(e.button),i=(0,a.default)(t,e.hidden),u=(0,c.removeItems)(i,c.onRemoveText),l=(0,c.dragItems)(i,c.onDragText),s=(0,o.default)(t,Object.assign(e,{onDrag:l,onRemove:u}));t.addEventListener("keypress",function(e){13===e.keyCode&&(e.preventDefault(),s.add(n.value),i.add(n.value),n.value="")}),r.addEventListener("click",function(e){e.preventDefault(),s.add(n.value),i.add(n.value),n.value=""})})};var i=n(1),o=r(i),u=n(2),a=r(u),c=n(3)},function(e,t,n){"use strict";(function(t){function r(e,t){function n(e){return-1!==le.containers.indexOf(e)||ce.isContainer(e)}function r(e){var t=e?"remove":"add";i(E,t,"mousedown",O),i(E,t,"mouseup",q)}function a(e){i(E,e?"remove":"add","mousemove",_)}function m(e){var t=e?"remove":"add";w[t](E,"selectstart",x),w[t](E,"click",x)}function h(){r(!0),q({})}function x(e){ue&&e.preventDefault()}function O(e){if(ee=e.clientX,te=e.clientY,!(1!==o(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=L(t);n&&(ue=n,a(),"mousedown"===e.type&&(p(t)?t.focus():e.preventDefault()))}}function _(e){if(ue){if(0===o(e))return void q({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(ce.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(p(S.elementFromPoint(t,n)))return}var r=ue;a(!0),m(),j(),I(r);var i=u(Q);W=y("pageX",e)-i.left,Z=y("pageY",e)-i.top,T.add(ie||Q,"gu-transit"),z(),F(e)}}}function L(e){if(!(le.dragging&&K||n(e))){for(var t=e;v(e)&&!1===n(v(e));){if(ce.invalid(e,t))return;if(!(e=v(e)))return}var r=v(e);if(r&&!ce.invalid(e,t)){if(ce.moves(e,r,t,g(e)))return{item:e,source:r}}}}function M(e){return!!L(e)}function C(e){var t=L(e);t&&I(t)}function I(e){$(e.item,e.source)&&(ie=e.item.cloneNode(!0),le.emit("cloned",ie,e.item,"copy")),V=e.source,Q=e.item,ne=re=g(e.item),le.dragging=!0,le.emit("drag",Q,V)}function N(){return!1}function j(){if(le.dragging){var e=ie||Q;P(e,v(e))}}function A(){ue=!1,a(!0),m(!0)}function q(e){if(A(),le.dragging){var t=ie||Q,n=y("clientX",e),r=y("clientY",e),i=c(K,n,r),o=X(i,n,r);o&&(ie&&ce.copySortSource||!ie||o!==V)?P(t,o):ce.removeOnSpill?k():D()}}function P(e,t){var n=v(e);ie&&ce.copySortSource&&t===V&&n.removeChild(Q),B(t)?le.emit("cancel",e,V,V):le.emit("drop",e,t,V,re),R()}function k(){if(le.dragging){var e=ie||Q,t=v(e);t&&t.removeChild(e),le.emit(ie?"cancel":"remove",e,t,V),R()}}function D(e){if(le.dragging){var t=arguments.length>0?e:ce.revertOnSpill,n=ie||Q,r=v(n),i=B(r);!1===i&&t&&(ie?r&&r.removeChild(ie):V.insertBefore(n,ne)),i||t?le.emit("cancel",n,V,V):le.emit("drop",n,r,V,re),R()}}function R(){var e=ie||Q;A(),H(),e&&T.rm(e,"gu-transit"),oe&&clearTimeout(oe),le.dragging=!1,ae&&le.emit("out",e,ae,V),le.emit("dragend",e),V=Q=ie=ne=re=oe=ae=null}function B(e,t){var n;return n=void 0!==t?t:K?re:g(ie||Q),e===V&&n===ne}function X(e,t,r){for(var i=e;i&&!function(){if(!1===n(i))return!1;var o=U(i,e),u=G(i,o,t,r);return!!B(i,u)||ce.accepts(Q,i,V,u)}();)i=v(i);return i}function F(e){function t(e){le.emit(e,u,ae,V)}if(K){e.preventDefault();var n=y("clientX",e),r=y("clientY",e),i=n-W,o=r-Z;K.style.left=i+"px",K.style.top=o+"px";var u=ie||Q,a=c(K,n,r),l=X(a,n,r),s=null!==l&&l!==ae;(s||null===l)&&(function(){ae&&t("out")}(),ae=l,function(){s&&t("over")}());var f=v(u);if(l===V&&ie&&!ce.copySortSource)return void(f&&f.removeChild(u));var d,p=U(l,a);if(null!==p)d=G(l,p,n,r);else{if(!0!==ce.revertOnSpill||ie)return void(ie&&f&&f.removeChild(u));d=ne,l=V}(null===d&&s||d!==u&&d!==g(u))&&(re=d,l.insertBefore(u,d),le.emit("shadow",u,l,V))}}function Y(e){T.rm(e,"gu-hide")}function J(e){le.dragging&&T.add(e,"gu-hide")}function z(){if(!K){var e=Q.getBoundingClientRect();K=Q.cloneNode(!0),K.style.width=f(e)+"px",K.style.height=d(e)+"px",T.rm(K,"gu-transit"),T.add(K,"gu-mirror"),ce.mirrorContainer.appendChild(K),i(E,"add","mousemove",F),T.add(ce.mirrorContainer,"gu-unselectable"),le.emit("cloned",K,Q,"mirror")}}function H(){K&&(T.rm(ce.mirrorContainer,"gu-unselectable"),i(E,"remove","mousemove",F),v(K).removeChild(K),K=null)}function U(e,t){for(var n=t;n!==e&&v(n)!==e;)n=v(n);return n===E?null:n}function G(e,t,n,r){function i(e){return e?g(t):t}var o="horizontal"===ce.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(o?n>e.left+f(e)/2:r>e.top+d(e)/2)}():function(){var t,i,u,a=e.children.length;for(t=0;t<a;t++){if(i=e.children[t],u=i.getBoundingClientRect(),o&&u.left+u.width/2>n)return i;if(!o&&u.top+u.height/2>r)return i}return null}()}function $(e,t){return"boolean"==typeof ce.copy?ce.copy:ce.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var K,V,Q,W,Z,ee,te,ne,re,ie,oe,ue,ae=null,ce=t||{};void 0===ce.moves&&(ce.moves=s),void 0===ce.accepts&&(ce.accepts=s),void 0===ce.invalid&&(ce.invalid=N),void 0===ce.containers&&(ce.containers=e||[]),void 0===ce.isContainer&&(ce.isContainer=l),void 0===ce.copy&&(ce.copy=!1),void 0===ce.copySortSource&&(ce.copySortSource=!1),void 0===ce.revertOnSpill&&(ce.revertOnSpill=!1),void 0===ce.removeOnSpill&&(ce.removeOnSpill=!1),void 0===ce.direction&&(ce.direction="vertical"),void 0===ce.ignoreInputTextSelection&&(ce.ignoreInputTextSelection=!0),void 0===ce.mirrorContainer&&(ce.mirrorContainer=S.body);var le=b({containers:ce.containers,start:C,end:j,cancel:D,remove:k,destroy:h,canMove:M,dragging:!1});return!0===ce.removeOnSpill&&le.on("over",Y).on("out",J),r(),le}function i(e,n,r,i){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},u={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,u[r],i):t.navigator.msPointerEnabled?w[n](e,a[r],i):(w[n](e,o[r],i),w[n](e,r,i))}function o(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function u(e){var t=e.getBoundingClientRect();return{left:t.left+a("scrollLeft","pageXOffset"),top:t.top+a("scrollTop","pageYOffset")}}function a(e,n){return void 0!==t[n]?t[n]:E.clientHeight?E[e]:S.body[e]}function c(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=S.elementFromPoint(t,n),i.className=o,r}function l(){return!1}function s(){return!0}function f(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===S?null:e.parentNode}function p(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||m(e)}function m(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||m(v(e))))}function g(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var b=n(9),w=n(16),T=n(19),S=document,E=S.documentElement;e.exports=r}).call(t,n(0))},function(e,t,n){"use strict";var r=n(10),i=n(11);e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var i=o[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var u=(o[t]||[]).slice(0);return function(){var o=r(arguments),a=this||e;if("error"===t&&!1!==n.throws&&!u.length)throw 1===o.length?o[0]:o;return u.forEach(function(r){n.async?i(r,o,a):r.apply(a,o),r._once&&e.off(t,r)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(13).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(14),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[c]=r,a(c),c++}function i(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function u(e){if(s)setTimeout(u,0,e);else{var t=l[e];if(t){s=!0;try{o(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var a,c=1,l={},s=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){u(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},a=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;a=function(t){var n=f.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){a=function(e){setTimeout(u,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){m&&v&&(m=!1,v.length?p=v.concat(p):g=-1,p.length&&a())}function a(){if(!m){var e=i(u);m=!0;for(var t=p.length;t;){for(v=p,p=[];++g<t;)v&&v[g].run();g=-1,t=p.length}v=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var s,f,d=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var v,p=[],m=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){return e.addEventListener(t,n,r)}function i(e,t,n){return e.attachEvent("on"+t,l(e,t,n))}function o(e,t,n,r){return e.removeEventListener(t,n,r)}function u(e,t,n){var r=s(e,t,n);if(r)return e.detachEvent("on"+t,r)}function a(e,t,n){var r=-1===v.indexOf(t)?function(){return new d(t,{detail:n})}():function(){var e;return p.createEvent?(e=p.createEvent("Event"),e.initEvent(t,!0,!0)):p.createEventObject&&(e=p.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function c(e,n,r){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}function l(e,t,n){var r=s(e,t,n)||c(e,t,n);return h.push({wrapper:r,element:e,type:t,fn:n}),r}function s(e,t,n){var r=f(e,t,n);if(r){var i=h[r].wrapper;return h.splice(r,1),i}}function f(e,t,n){var r,i;for(r=0;r<h.length;r++)if(i=h[r],i.element===e&&i.type===t&&i.fn===n)return r}var d=n(17),v=n(18),p=t.document,m=r,g=o,h=[];t.addEventListener||(m=i,g=u),e.exports={add:m,remove:g,fabricate:a}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],r="",i=/^on/;for(r in t)i.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function r(e){var t=u[e];return t?t.lastIndex=0:u[e]=t=new RegExp(a+e+c,"g"),t}function i(e,t){var n=e.className;n.length?r(t).test(n)||(e.className+=" "+t):e.className=t}function o(e,t){e.className=e.className.replace(r(t)," ").trim()}var u={},a="(?:^|\\s)",c="(?:\\s|$)";e.exports={add:i,rm:o}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,l.default)(t,e.hidden),r=(0,s.removeItems)(n,s.onRemoveObject),i=(0,s.dragItems)(n,s.onDragObject),u=(0,o.default)(t,Object.assign(e,{onDrag:i,onRemove:r})),c=t.querySelector(".autosuggest-list-input"),f="autoList_"+c.getAttribute("list"),d=OMGFields.baseURL+"/wp-json/wp/v2/"+window[f].resource+"?search=";(0,a.default)(c,d,function(e,t){u.add(e),t.value="",n.add(e)})})};var i=n(1),o=r(i),u=n(4),a=r(u),c=n(2),l=r(c),s=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden),r=t.querySelector(".autosuggest-input"),o="autoList_"+r.getAttribute("list"),u=OMGFields.baseURL+"/wp-json/wp/v2/"+window[o].resource+"?search=";(0,i.default)(r,u,function(e,t){n.value=JSON.stringify(e)},function(){n.value=""})})};var r=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(){var e=document.querySelectorAll(".custom-media-upload");0!==e.length&&[].map.call(e,function(e){var t=e.querySelector(".remove-image"),n=e.querySelector(".replace-image"),r=e.querySelector(".set-image"),i=e.querySelector("a.replace-image img"),o=e.querySelector('input[type="hidden"]'),u=e.querySelector(".thumbnail-title"),a=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!1});a.on("select",function(){var t=a.state().get("selection").first().toJSON();e.classList.toggle("has-image"),o.value=t.id,t.hasOwnProperty("sizes")?i.setAttribute("src",t.sizes.thumbnail.url):i.setAttribute("src",t.icon),u&&(u.innerHTML=t.filename)}),t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("has-image"),i.setAttribute("src",""),o.value=""}),n.addEventListener("click",function(e){e.preventDefault(),a.open()}),r.addEventListener("click",function(e){e.preventDefault(),a.open()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwOGRkMzA5NzYxNTdjMjU2NWZkNSIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc2VyaWFsaXplZC1pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vdGV4dC1saXN0LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2RyYWd1bGEvZHJhZ3VsYS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jb250cmEvZW1pdHRlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3BsdWdpbnMvbXVzZXVtLWFwcC92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2RlYm91bmNlLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3BsdWdpbnMvbXVzZXVtLWFwcC92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jdXN0b20tZXZlbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3BsdWdpbnMvbXVzZXVtLWFwcC92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9ldmVudG1hcC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9hdXRvLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vaW1hZ2UtdXBsb2Fkcy5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwidmFsdWUiLCJkZWZhdWx0IiwicGFyZW50IiwiYXJncyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yIiwicmVnaXN0ZXJEcmFnRXZlbnRzIiwib25EcmFnIiwicmVnaXN0ZXJSZW1vdmVFdmVudHMiLCJvblJlbW92ZSIsImFkZCIsImh0bWwiLCJsaXN0VGVtcGxhdGUiLCJsaXN0SXRlbSIsImRvY3VtZW50IiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCJhcHBlbmRDaGlsZCIsIl9kcmFndWxhIiwiX2RyYWd1bGEyIiwib2JqIiwibGlzdEl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsImlubmVySFRNTCIsInJlbW92ZUNoaWxkIiwiY2FsbGJhY2siLCJvbiIsImVsIiwiaGlkZGVuSW5wdXQiLCJoaWRkZW5FbCIsImdldEN1cnJlbnRWYWx1ZSIsIkpTT04iLCJwYXJzZSIsImFkZFZhbHVlIiwiY29uY2F0IiwicmVtb3ZlVmFsdWUiLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJ1cGRhdGUiLCJ2YWx1ZXMiLCJyZW1vdmVJdGVtcyIsIkhpZGRlbiIsImRyYWdJdGVtcyIsIm9uRHJhZ09iamVjdCIsInJlZHVjZSIsImFjYyIsImlkIiwiZGF0YXNldCIsInRpdGxlIiwib25EcmFnVGV4dCIsIm9uUmVtb3ZlT2JqZWN0IiwiY3VycmVudFZhbHVlIiwibmV3VmFsdWUiLCJmaWx0ZXIiLCJjdXJyZW50Iiwib25SZW1vdmVUZXh0IiwiYXV0b3N1Z2dlc3QiLCJlbmRwb2ludCIsIm9uU2VsZWN0Iiwib25FbXB0eSIsInhociIsImxlbmd0aCIsImNsYXNzTGlzdCIsImdldE9wdGlvbnMiLCJ1cGRhdGVPcHRpb25zIiwib25BdXRvU3VnZ2VzdElucHV0IiwiaW5wdXQiLCJpbnB1dFZhbHVlIiwibGlzdE5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJsaXN0T3B0aW9ucyIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsIm1hdGNoIiwib3B0aW9uIiwicXVlcnkiLCJidWlsZFF1ZXJ5IiwidXJsIiwiYWJvcnQiLCJYTUxIdHRwUmVxdWVzdCIsImV2dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJpc0pTT04iLCJyZXNwb25zZVRleHQiLCJyZXN1bHRzIiwibWVzc2FnZSIsIm9wZW4iLCJzZW5kIiwiZXJyb3IiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJ3YXJuIiwiQXJyYXkiLCJpc0FycmF5IiwiY3JlYXRlT3B0aW9ucyIsImRhdGFsaXN0IiwibmV3T3B0aW9ucyIsInJlc3VsdCIsImNyZWF0ZU9wdGlvbiIsInJlbmRlcmVkIiwic3RyIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidG9Mb3dlckNhc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2luZGV4IiwiX3RleHRMaXN0IiwiX3RleHRMaXN0MiIsIl9hdXRvc3VnZ2VzdExpc3QiLCJfYXV0b3N1Z2dlc3RMaXN0MiIsIl9saXN0IiwiX2F1dG9JdGVtIiwiX2F1dG9JdGVtMiIsIl9pbWFnZVVwbG9hZHMiLCJfaW1hZ2VVcGxvYWRzMiIsImNyZWF0ZVRleHRJdGVtIiwiY3JlYXRlQXV0b1N1Z2dlc3RJdGVtIiwiYnV0dG9uIiwiaGlkZGVuIiwibGlzdEZpZWxkcyIsImZvckVhY2giLCJsaXN0RmllbGQiLCJ0ZXh0SW5wdXQiLCJhZGRCdXR0b24iLCJfc2VyaWFsaXplZElucHV0MiIsIl91dGlsaXRpZXMiLCJkcmFnIiwiTGlzdCIsIl9saXN0MiIsImFzc2lnbiIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXJpYWxpemVkSW5wdXQiLCJnbG9iYWwiLCJkcmFndWxhIiwiaW5pdGlhbENvbnRhaW5lcnMiLCJvcHRpb25zIiwiaXNDb250YWluZXIiLCJkcmFrZSIsImNvbnRhaW5lcnMiLCJpbmRleE9mIiwiZXZlbnRzIiwib3AiLCJ0b3VjaHkiLCJkb2N1bWVudEVsZW1lbnQiLCJncmFiIiwicmVsZWFzZSIsImV2ZW50dWFsTW92ZW1lbnRzIiwic3RhcnRCZWNhdXNlTW91c2VNb3ZlZCIsIm1vdmVtZW50cyIsImNyb3NzdmVudCIsInByZXZlbnRHcmFiYmVkIiwiZGVzdHJveSIsIl9ncmFiYmVkIiwiX21vdmVYIiwiY2xpZW50WCIsIl9tb3ZlWSIsImNsaWVudFkiLCJ3aGljaE1vdXNlQnV0dG9uIiwibWV0YUtleSIsImN0cmxLZXkiLCJpdGVtIiwiY29udGV4dCIsImNhblN0YXJ0IiwidHlwZSIsImlzSW5wdXQiLCJmb2N1cyIsImlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiIsImdldENvb3JkIiwiZG9jIiwiZWxlbWVudEZyb21Qb2ludCIsImdyYWJiZWQiLCJlbmQiLCJzdGFydCIsIm9mZnNldCIsImdldE9mZnNldCIsIl9pdGVtIiwiX29mZnNldFgiLCJsZWZ0IiwiX29mZnNldFkiLCJ0b3AiLCJjbGFzc2VzIiwiX2NvcHkiLCJyZW5kZXJNaXJyb3JJbWFnZSIsImRyYWdnaW5nIiwiX21pcnJvciIsImhhbmRsZSIsImdldFBhcmVudCIsImludmFsaWQiLCJzb3VyY2UiLCJtb3ZlcyIsIm5leHRFbCIsImNhbk1vdmUiLCJtYW51YWxTdGFydCIsImlzQ29weSIsImNsb25lTm9kZSIsImVtaXQiLCJfc291cmNlIiwiX2luaXRpYWxTaWJsaW5nIiwiX2N1cnJlbnRTaWJsaW5nIiwiaW52YWxpZFRhcmdldCIsImRyb3AiLCJ1bmdyYWIiLCJlbGVtZW50QmVoaW5kQ3Vyc29yIiwiZ2V0RWxlbWVudEJlaGluZFBvaW50IiwiZHJvcFRhcmdldCIsImZpbmREcm9wVGFyZ2V0IiwiY29weVNvcnRTb3VyY2UiLCJyZW1vdmVPblNwaWxsIiwiY2FuY2VsIiwiaXNJbml0aWFsUGxhY2VtZW50IiwiY2xlYW51cCIsInJldmVydCIsInJldmVydHMiLCJhcmd1bWVudHMiLCJyZXZlcnRPblNwaWxsIiwiaW5pdGlhbCIsImluc2VydEJlZm9yZSIsInJlbW92ZU1pcnJvckltYWdlIiwicm0iLCJfcmVuZGVyVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfbGFzdERyb3BUYXJnZXQiLCJzaWJsaW5nIiwiaW1tZWRpYXRlIiwiZ2V0SW1tZWRpYXRlQ2hpbGQiLCJyZWZlcmVuY2UiLCJnZXRSZWZlcmVuY2UiLCJhY2NlcHRzIiwibW92ZWQiLCJ4IiwieSIsInN0eWxlIiwiY2hhbmdlZCIsInNwaWxsT3ZlciIsInNwaWxsT3V0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiZ2V0UmVjdFdpZHRoIiwiaGVpZ2h0IiwiZ2V0UmVjdEhlaWdodCIsIm1pcnJvckNvbnRhaW5lciIsInJlc29sdmUiLCJhZnRlciIsImhvcml6b250YWwiLCJkaXJlY3Rpb24iLCJsZW4iLCJjaGlsZHJlbiIsImNvbnRhaW5lciIsImNvcHkiLCJhbHdheXMiLCJuZXZlciIsImJvZHkiLCJlbWl0dGVyIiwiZm4iLCJ0b3VjaCIsIm1vdXNldXAiLCJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJwb2ludGVycyIsIm1pY3Jvc29mdCIsIm5hdmlnYXRvciIsInBvaW50ZXJFbmFibGVkIiwibXNQb2ludGVyRW5hYmxlZCIsInRvdWNoZXMiLCJ3aGljaCIsImJ1dHRvbnMiLCJnZXRTY3JvbGwiLCJzY3JvbGxQcm9wIiwib2Zmc2V0UHJvcCIsImNsaWVudEhlaWdodCIsInBvaW50Iiwic3RhdGUiLCJjbGFzc05hbWUiLCJyaWdodCIsImJvdHRvbSIsInBhcmVudE5vZGUiLCJpc0VkaXRhYmxlIiwiY29udGVudEVkaXRhYmxlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsImdldEV2ZW50SG9zdCIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNvb3JkIiwiaG9zdCIsIm1pc3NNYXAiLCJwYWdlWCIsInBhZ2VZIiwiYXRvYSIsImRlYm91bmNlIiwidGhpbmciLCJvcHRzIiwidW5kZWZpbmVkIiwicHVzaCIsIm9uY2UiLCJfb25jZSIsIm9mZiIsImV0Iiwic3BsaWNlIiwiZW1pdHRlclNuYXBzaG90Iiwic2hpZnQiLCJhcHBseSIsInNsaWNlIiwiY3R4IiwidGhyb3dzIiwibGlzdGVuIiwiYXN5bmMiLCJhIiwidGlja3kiLCJzZXRJbW1lZGlhdGUiLCJ0aWNrIiwic2kiLCJzZXRUaW1lb3V0IiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVvdXQiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsImNsZWFySW1tZWRpYXRlIiwicHJvY2VzcyIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwicnVuIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwibmV4dFRpY2siLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwibWVzc2FnZVByZWZpeCIsIk1hdGgiLCJyYW5kb20iLCJvbkdsb2JhbE1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJjcmVhdGVFbGVtZW50Iiwic2NyaXB0Iiwic2VsZiIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJhZGRFdmVudEVhc3kiLCJjYXB0dXJpbmciLCJhZGRFdmVudEhhcmQiLCJ3cmFwIiwicmVtb3ZlRXZlbnRFYXN5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50SGFyZCIsImxpc3RlbmVyIiwidW53cmFwIiwiZGV0YWNoRXZlbnQiLCJmYWJyaWNhdGVFdmVudCIsIm1vZGVsIiwiZXZlbnRtYXAiLCJjdXN0b21FdmVudCIsImRldGFpbCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJkaXNwYXRjaEV2ZW50IiwiZmlyZUV2ZW50Iiwid3JhcHBlckZhY3RvcnkiLCJvcmlnaW5hbEV2ZW50Iiwic3JjRWxlbWVudCIsInJldHVyblZhbHVlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwid3JhcHBlciIsImhhcmRDYWNoZSIsImVsZW1lbnQiLCJmaW5kIiwiYWRkRXZlbnQiLCJyZW1vdmVFdmVudCIsImZhYnJpY2F0ZSIsIk5hdGl2ZUN1c3RvbUV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJmb28iLCJwYXJhbXMiLCJpbml0Q3VzdG9tRXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsIkJvb2xlYW4iLCJldmVudG5hbWUiLCJyb24iLCJ0ZXN0IiwibG9va3VwQ2xhc3MiLCJjYWNoZWQiLCJjYWNoZSIsImxhc3RJbmRleCIsIlJlZ0V4cCIsImFkZENsYXNzIiwicm1DbGFzcyIsInJlcGxhY2UiLCJ0cmltIiwiZmllbGRzIiwiYXV0b0xpc3QiLCJlbE5hbWUiLCJPTUdGaWVsZHMiLCJiYXNlVVJMIiwicmVzb3VyY2UiLCJfYXV0b3N1Z2dlc3QyIiwiX2F1dG9zdWdnZXN0IiwiYXV0b0l0ZW0iLCJpbWFnZVVwbG9hZHMiLCJmZWF0dXJlZEltYWdlV3JhcCIsIm1hcCIsInJlbW92ZUltYWdlIiwicmVwbGFjZUltYWdlIiwic2V0SW1hZ2UiLCJmZWF0dXJlZEltYWdlVGFnIiwiZmVhdHVyZWRJbWFnZUlEIiwiZmVhdHVyZWRJbWFnZVRpdGxlIiwibWVkaWFGcmFtZSIsIndwIiwibWVkaWEiLCJ0ZXh0IiwibXVsdGlwbGUiLCJhdHRhY2htZW50IiwiZmlyc3QiLCJ0b0pTT04iLCJ0b2dnbGUiLCJzZXRBdHRyaWJ1dGUiLCJzaXplcyIsInRodW1ibmFpbCIsImljb24iLCJmaWxlbmFtZSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxF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QU8sYUFDdEJWLEVBQWdCemQsTUFBUWdlLEVBQVc5YSxHQUMvQjhhLEVBQVd6ZSxlQUFlLFNBQzdCaWUsRUFBaUJZLGFBQWEsTUFBT0osRUFBV0ssTUFBTUMsVUFBVXJaLEtBRWhFdVksRUFBaUJZLGFBQWEsTUFBT0osRUFBV08sTUFHNUNiLElBQ0pBLEVBQW1CL2IsVUFBWXFjLEVBQVdRLFlBSzVDbkIsRUFBWTliLGlCQUFpQixRQUFTLFNBQVNpVixHQUM5Q0EsRUFBTWpPLGlCQUNOOEIsRUFBS25HLFVBQVVpYSxPQUFPLGFBQ3RCWCxFQUFpQlksYUFBYSxNQUFPLElBQ3JDWCxFQUFnQnpkLE1BQVEsS0FHekJzZCxFQUFhL2IsaUJBQWlCLFFBQVMsU0FBU2lWLEdBQy9DQSxFQUFNak8saUJBQ05vVixFQUFXaFksU0FHWjRYLEVBQVNoYyxpQkFBaUIsUUFBUyxTQUFTaVYsR0FDM0NBLEVBQU1qTyxpQkFDTm9WLEVBQVdoWSxXdkI2NURkOUcsT0FBT0MsZUFBZVosRUFBUyxjQUM5QjhCLE9BQU8sSUFFUjlCLEVBQVErQixRdUJ0OURnQmlkIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGFyZ3MpIHtcbiAgICB2YXIgbGlzdCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGFyZ3MubGlzdCk7XG5cbiAgICByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgYXJncy5vbkRyYWcpO1xuICAgIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzKGxpc3QsIGFyZ3Mub25SZW1vdmUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBodG1sID0gYXJncy5saXN0VGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG5cbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbnZhciBfZHJhZ3VsYSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZHJhZ3VsYTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kcmFndWxhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gZnVuY3Rpb24gcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgb25SZW1vdmUpIHtcbiAgICB2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSAnc3ZnJyA9PT0gZS50YXJnZXQudGFnTmFtZSA/IGUudGFyZ2V0IDogZS50YXJnZXQuY2xvc2VzdCgnc3ZnJyk7XG5cbiAgICAgICAgaWYgKCdzdmcnID09PSB0YXJnZXQudGFnTmFtZSkge1xuICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGxpc3RJdGVtKTtcbiAgICAgICAgICAgIG9uUmVtb3ZlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxpc3RJdGVtcztcbn07XG5cbnZhciByZWdpc3RlckRyYWdFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZHJha2UgPSAoMCwgX2RyYWd1bGEyLmRlZmF1bHQpKFtsaXN0XSk7XG5cbiAgICBkcmFrZS5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICBjYWxsYmFjayhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmVudCwgaGlkZGVuSW5wdXQpIHtcbiAgICB2YXIgaGlkZGVuRWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihoaWRkZW5JbnB1dCk7XG5cbiAgICB2YXIgZ2V0Q3VycmVudFZhbHVlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShoaWRkZW5FbC52YWx1ZSk7XG4gICAgfTtcblxuICAgIHZhciBhZGRWYWx1ZSA9IGZ1bmN0aW9uIGFkZFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5jb25jYXQodmFsdWUpO1xuICAgIH07XG5cbiAgICB2YXIgcmVtb3ZlVmFsdWUgPSBmdW5jdGlvbiByZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgICAgICByZXR1cm4gb25SZW1vdmUoY3VycmVudFZhbHVlLCB2YWx1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgICAgICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGFkZFZhbHVlKHZhbHVlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHZhbHVlLCBvblJlbW92ZSkge1xuICAgICAgICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShyZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWVzKSB7XG4gICAgICAgICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlcyk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbnZhciByZW1vdmVJdGVtcyA9IGV4cG9ydHMucmVtb3ZlSXRlbXMgPSBmdW5jdGlvbiByZW1vdmVJdGVtcyhIaWRkZW4sIG9uUmVtb3ZlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBIaWRkZW4ucmVtb3ZlKHZhbHVlLCBvblJlbW92ZSk7XG4gICAgfTtcbn07XG5cbnZhciBkcmFnSXRlbXMgPSBleHBvcnRzLmRyYWdJdGVtcyA9IGZ1bmN0aW9uIGRyYWdJdGVtcyhIaWRkZW4sIG9uRHJhZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAobGlzdCwgbGlzdEl0ZW1zKSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSBvbkRyYWcobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICAgICAgSGlkZGVuLnVwZGF0ZSh2YWx1ZXMpO1xuICAgIH07XG59O1xuXG52YXIgb25EcmFnT2JqZWN0ID0gZXhwb3J0cy5vbkRyYWdPYmplY3QgPSBmdW5jdGlvbiBvbkRyYWdPYmplY3QobGlzdCwgbGlzdEl0ZW1zKSB7XG4gICAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICAgICAgdmFyIHZhbHVlID0ge1xuICAgICAgICAgICAgaWQ6IGxpc3RJdGVtLmRhdGFzZXQuaWQsXG4gICAgICAgICAgICB0aXRsZTogbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgICB9LCBbXSk7XG59O1xuXG52YXIgb25EcmFnVGV4dCA9IGV4cG9ydHMub25EcmFnVGV4dCA9IGZ1bmN0aW9uIG9uRHJhZ1RleHQobGlzdCwgbGlzdEl0ZW1zKSB7XG4gICAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcbiAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gICAgfSwgW10pO1xufTtcblxudmFyIG9uUmVtb3ZlT2JqZWN0ID0gZXhwb3J0cy5vblJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlT2JqZWN0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuICAgICAgICByZXR1cm4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWU7XG4gICAgfSk7XG59O1xuXG52YXIgb25SZW1vdmVUZXh0ID0gZXhwb3J0cy5vblJlbW92ZVRleHQgPSBmdW5jdGlvbiBvblJlbW92ZVRleHQoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChjdXJyZW50KSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50ICE9PSBuZXdWYWx1ZTtcbiAgICB9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhdXRvc3VnZ2VzdCwgZW5kcG9pbnQsIG9uU2VsZWN0LCBvbkVtcHR5KSB7XG5cbiAgICBpZiAoIWF1dG9zdWdnZXN0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gZmFsc2U7XG5cbiAgICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICgwID09PSBlLnRhcmdldC52YWx1ZS5sZW5ndGggJiYgb25FbXB0eSkge1xuICAgICAgICAgICAgb25FbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKDMgPiBlLnRhcmdldC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF1dG9zdWdnZXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgeGhyID0gZ2V0T3B0aW9ucyh4aHIsIHVwZGF0ZU9wdGlvbnMsIGF1dG9zdWdnZXN0LCBlbmRwb2ludCk7XG4gICAgfSk7XG4gICAgYXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBvblNlbGVjdCh2YWx1ZSwgYXV0b3N1Z2dlc3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG52YXIgb25BdXRvU3VnZ2VzdElucHV0ID0gZnVuY3Rpb24gb25BdXRvU3VnZ2VzdElucHV0KGUpIHtcbiAgICB2YXIgaW5wdXQgPSBlLnRhcmdldDtcbiAgICB2YXIgaW5wdXRWYWx1ZSA9IGlucHV0LnZhbHVlO1xuICAgIHZhciBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICAgIHZhciBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG4gICAgdmFyIG1hdGNoID0gW10ucmVkdWNlLmNhbGwobGlzdE9wdGlvbnMsIGZ1bmN0aW9uIChhY2MsIG9wdGlvbikge1xuICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdCh7XG4gICAgICAgICAgICAgICAgaWQ6IG9wdGlvbi5kYXRhc2V0LmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb24udmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIDAgPT09IG1hdGNoLmxlbmd0aCA/IGZhbHNlIDogbWF0Y2hbMF07XG59O1xuXG52YXIgZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoeGhyLCBjYWxsYmFjaywgaW5wdXQsIGVuZHBvaW50KSB7XG4gICAgdmFyIHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG4gICAgdmFyIHVybCA9IGVuZHBvaW50ICsgcXVlcnk7XG5cbiAgICBpZiAoeGhyKSB7XG4gICAgICAgIHhoci5hYm9ydCgpO1xuICAgIH1cblxuICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY2FsbGJhY2soZmFsc2UsIGV2dCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIHsgcmVzdWx0czogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgaW5wdXQ6IGlucHV0IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZVRleHQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soeyBtZXNzYWdlOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBjYWxsYmFjayhldnQsIGZhbHNlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY2FsbGJhY2sodHJ1ZSwgZmFsc2UpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gICAgeGhyLnNlbmQoKTtcblxuICAgIHJldHVybiB4aHI7XG59O1xuXG52YXIgdXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoZXJyb3IsIHJlc3BvbnNlKSB7XG4gICAgaWYgKGVycm9yKSB7XG5cbiAgICAgICAgaWYgKHRydWUgPT09IGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBlcnJvci5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZXNwb25zZS5yZXN1bHRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCk7XG4gICAgfVxufTtcblxudmFyIGNyZWF0ZU9wdGlvbnMgPSBmdW5jdGlvbiBjcmVhdGVPcHRpb25zKHJlc3VsdHMsIGlucHV0KSB7XG4gICAgdmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgdmFyIGRhdGFsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpO1xuXG4gICAgdmFyIG5ld09wdGlvbnMgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCByZXN1bHQpIHtcbiAgICAgICAgdmFyIG9wdGlvbiA9IGNyZWF0ZU9wdGlvbihyZXN1bHQpO1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChvcHRpb24pO1xuICAgIH0sICcnKTtcblxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBkYXRhbGlzdC5pbm5lckhUTUwgPSBuZXdPcHRpb25zO1xufTtcblxudmFyIGNyZWF0ZU9wdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAnPG9wdGlvbiBkYXRhLWlkPScgKyB2YWx1ZS5pZCArICcgdmFsdWU9XCInICsgdmFsdWUudGl0bGUucmVuZGVyZWQgKyAnXCI+Jztcbn07XG5cbnZhciBpc0pTT04gPSBmdW5jdGlvbiBpc0pTT04oc3RyKSB7XG5cbiAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbnZhciBidWlsZFF1ZXJ5ID0gZnVuY3Rpb24gYnVpbGRRdWVyeSh2YWx1ZSkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9Mb3dlckNhc2UoKSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXG52YXIgX3RleHRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF90ZXh0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0TGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0TGlzdCk7XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9hdXRvSXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX2F1dG9JdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9JdGVtKTtcblxudmFyIF9pbWFnZVVwbG9hZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxudmFyIF9pbWFnZVVwbG9hZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW1hZ2VVcGxvYWRzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZVRleHRJdGVtID0gZnVuY3Rpb24gY3JlYXRlVGV4dEl0ZW0odmFsdWUpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59O1xuXG52YXIgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gZnVuY3Rpb24gY3JlYXRlQXV0b1N1Z2dlc3RJdGVtKHZhbHVlKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIiBkYXRhLWlkPVwiJyArIHZhbHVlLmlkICsgJ1wiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlLnRpdGxlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAoMCwgX2ltYWdlVXBsb2FkczIuZGVmYXVsdCkoKTtcbiAgKDAsIF90ZXh0TGlzdDIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy50ZXh0LWxpc3QnLFxuICAgIGJ1dHRvbjogJy50ZXh0LWxpc3QtYWRkJyxcbiAgICBsaXN0OiAnLnRleHQtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcudGV4dC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVUZXh0SXRlbVxuICB9KTtcblxuICAoMCwgX2F1dG9zdWdnZXN0TGlzdDIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgICBpbnB1dDogJ2F1dG9zdWdnZXN0LWxpc3QtaW5wdXQnLFxuICAgIGxpc3Q6ICcuYXV0b3N1Z2dlc3QtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtXG4gIH0pO1xuXG4gICgwLCBfYXV0b0l0ZW0yLmRlZmF1bHQpKHtcbiAgICBwYXJlbnQ6ICcuYXV0b3N1Z2dlc3Qtd3JhcHBlcicsXG4gICAgaW5wdXQ6ICcuYXV0b3N1Z2dlc3QtaW5wdXQnLFxuICAgIGhpZGRlbjogJy5hdXRvc3VnZ2VzdC1oaWRkZW4nXG4gIH0pO1xufSk7XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBsaXN0RmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoIWxpc3RGaWVsZHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbChsaXN0RmllbGRzLCBmdW5jdGlvbiAobGlzdEZpZWxkKSB7XG4gICAgICAgIHZhciB0ZXh0SW5wdXQgPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT10ZXh0XScpO1xuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoYXJncy5idXR0b24pO1xuICAgICAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGxpc3RGaWVsZCwgYXJncy5oaWRkZW4pO1xuICAgICAgICB2YXIgcmVtb3ZlID0gKDAsIF91dGlsaXRpZXMucmVtb3ZlSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vblJlbW92ZVRleHQpO1xuICAgICAgICB2YXIgZHJhZyA9ICgwLCBfdXRpbGl0aWVzLmRyYWdJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uRHJhZ1RleHQpO1xuICAgICAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkobGlzdEZpZWxkLCBPYmplY3QuYXNzaWduKGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlIH0pKTtcblxuICAgICAgICBsaXN0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKDEzID09PSBlLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgTGlzdC5hZGQodGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBIaWRkZW4uYWRkKHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBMaXN0LmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc2VyaWFsaXplZElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcmlhbGl6ZWRJbnB1dCk7XG5cbnZhciBfdXRpbGl0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgZW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG52YXIgY3Jvc3N2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG52YXIgY2xhc3NlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgYXRvYSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xudmFyIGRlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHRpY2t5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UgKGZuLCBhcmdzLCBjdHgpIHtcbiAgaWYgKCFmbikgeyByZXR1cm47IH1cbiAgdGlja3koZnVuY3Rpb24gcnVuICgpIHtcbiAgICBmbi5hcHBseShjdHggfHwgbnVsbCwgYXJncyB8fCBbXSk7XG4gIH0pO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUpIHt2YXIgc2kgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nLCB0aWNrO1xuaWYgKHNpKSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcbn0gZWxzZSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0VGltZW91dChmbiwgMCk7IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGljaztcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxuX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSkpXG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgY3VzdG9tRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcbnZhciBldmVudG1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xudmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBhZGRFdmVudCA9IGFkZEV2ZW50RWFzeTtcbnZhciByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50RWFzeTtcbnZhciBoYXJkQ2FjaGUgPSBbXTtcblxuaWYgKCFnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICBhZGRFdmVudCA9IGFkZEV2ZW50SGFyZDtcbiAgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEhhcmQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZEV2ZW50LFxuICByZW1vdmU6IHJlbW92ZUV2ZW50LFxuICBmYWJyaWNhdGU6IGZhYnJpY2F0ZUV2ZW50XG59O1xuXG5mdW5jdGlvbiBhZGRFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHdyYXAoZWwsIHR5cGUsIGZuKSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBsaXN0ZW5lciA9IHVud3JhcChlbCwgdHlwZSwgZm4pO1xuICBpZiAobGlzdGVuZXIpIHtcbiAgICByZXR1cm4gZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmYWJyaWNhdGVFdmVudCAoZWwsIHR5cGUsIG1vZGVsKSB7XG4gIHZhciBlID0gZXZlbnRtYXAuaW5kZXhPZih0eXBlKSA9PT0gLTEgPyBtYWtlQ3VzdG9tRXZlbnQoKSA6IG1ha2VDbGFzc2ljRXZlbnQoKTtcbiAgaWYgKGVsLmRpc3BhdGNoRXZlbnQpIHtcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmZpcmVFdmVudCgnb24nICsgdHlwZSwgZSk7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUNsYXNzaWNFdmVudCAoKSB7XG4gICAgdmFyIGU7XG4gICAgaWYgKGRvYy5jcmVhdGVFdmVudCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDdXN0b21FdmVudCAoKSB7XG4gICAgcmV0dXJuIG5ldyBjdXN0b21FdmVudCh0eXBlLCB7IGRldGFpbDogbW9kZWwgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JhcHBlckZhY3RvcnkgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcHBlciAob3JpZ2luYWxFdmVudCkge1xuICAgIHZhciBlID0gb3JpZ2luYWxFdmVudCB8fCBnbG9iYWwuZXZlbnQ7XG4gICAgZS50YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCA9IGUucHJldmVudERlZmF1bHQgfHwgZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCkgeyBlLnJldHVyblZhbHVlID0gZmFsc2U7IH07XG4gICAgZS5zdG9wUHJvcGFnYXRpb24gPSBlLnN0b3BQcm9wYWdhdGlvbiB8fCBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24gKCkgeyBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7IH07XG4gICAgZS53aGljaCA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xuICAgIGZuLmNhbGwoZWwsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB3cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIHdyYXBwZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKSB8fCB3cmFwcGVyRmFjdG9yeShlbCwgdHlwZSwgZm4pO1xuICBoYXJkQ2FjaGUucHVzaCh7XG4gICAgd3JhcHBlcjogd3JhcHBlcixcbiAgICBlbGVtZW50OiBlbCxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGZuOiBmblxuICB9KTtcbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbmZ1bmN0aW9uIHVud3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpID0gZmluZChlbCwgdHlwZSwgZm4pO1xuICBpZiAoaSkge1xuICAgIHZhciB3cmFwcGVyID0gaGFyZENhY2hlW2ldLndyYXBwZXI7XG4gICAgaGFyZENhY2hlLnNwbGljZShpLCAxKTsgLy8gZnJlZSB1cCBhIHRhZCBvZiBtZW1vcnlcbiAgICByZXR1cm4gd3JhcHBlcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGksIGl0ZW07XG4gIGZvciAoaSA9IDA7IGkgPCBoYXJkQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBpdGVtID0gaGFyZENhY2hlW2ldO1xuICAgIGlmIChpdGVtLmVsZW1lbnQgPT09IGVsICYmIGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBpdGVtLmZuID09PSBmbikge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG59XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuXG4gICAgdmFyIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCFmaWVsZHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGZ1bmN0aW9uIChhdXRvTGlzdCkge1xuICAgICAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGF1dG9MaXN0LCBhcmdzLmhpZGRlbik7XG4gICAgICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlT2JqZWN0KTtcbiAgICAgICAgdmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdPYmplY3QpO1xuICAgICAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkoYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmUgfSkpO1xuICAgICAgICB2YXIgaW5wdXQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtbGlzdC1pbnB1dCcpO1xuICAgICAgICB2YXIgZWxOYW1lID0gJ2F1dG9MaXN0XycgKyBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICAgICAgdmFyIGVuZHBvaW50ID0gT01HRmllbGRzLmJhc2VVUkwgKyAnL3dwLWpzb24vd3AvdjIvJyArIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlICsgJz9zZWFyY2g9JztcblxuICAgICAgICAoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShpbnB1dCwgZW5kcG9pbnQsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXQpIHtcbiAgICAgICAgICAgIExpc3QuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICBIaWRkZW4uYWRkKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICAgIGlmICghZmllbGRzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBmdW5jdGlvbiAoYXV0b0l0ZW0pIHtcbiAgICAgICAgdmFyIGhpZGRlbiA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoYXJncy5oaWRkZW4pO1xuICAgICAgICB2YXIgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtaW5wdXQnKTtcbiAgICAgICAgdmFyIGVsTmFtZSA9ICdhdXRvTGlzdF8nICsgaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgICAgIHZhciBlbmRwb2ludCA9IE9NR0ZpZWxkcy5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyB3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG5cbiAgICAgICAgKDAsIF9hdXRvc3VnZ2VzdDIuZGVmYXVsdCkoaW5wdXQsIGVuZHBvaW50LCBmdW5jdGlvbiAodmFsdWUsIGlucHV0KSB7XG4gICAgICAgICAgICBoaWRkZW4udmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGhpZGRlbi52YWx1ZSA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gaW1hZ2VVcGxvYWRzO1xuZnVuY3Rpb24gaW1hZ2VVcGxvYWRzKCkge1xuXHR2YXIgZmVhdHVyZWRJbWFnZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLW1lZGlhLXVwbG9hZCcpO1xuXG5cdGlmIChmZWF0dXJlZEltYWdlV3JhcC5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRbXS5tYXAuY2FsbChmZWF0dXJlZEltYWdlV3JhcCwgZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHQvLyB2YXIgSW1hZ2VXcmFwSWQgPSBpdGVtLmF0dHJpYnV0ZS5pZDtcblx0XHR2YXIgcmVtb3ZlSW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUtaW1hZ2UnKTtcblx0XHR2YXIgcmVwbGFjZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVwbGFjZS1pbWFnZScpO1xuXHRcdHZhciBzZXRJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnNldC1pbWFnZScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGFnID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdhLnJlcGxhY2UtaW1hZ2UgaW1nJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VJRCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGl0bGUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy50aHVtYm5haWwtdGl0bGUnKTtcblx0XHR2YXIgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcblx0XHRcdHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcblx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHR0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJ1xuXHRcdFx0fSxcblx0XHRcdG11bHRpcGxlOiBmYWxzZVxuXHRcdH0pO1xuXG5cdFx0bWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS5maXJzdCgpLnRvSlNPTigpO1xuXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gYXR0YWNobWVudC5pZDtcblx0XHRcdGlmIChhdHRhY2htZW50Lmhhc093blByb3BlcnR5KCdzaXplcycpKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50LnNpemVzLnRodW1ibmFpbC51cmwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuaWNvbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChmZWF0dXJlZEltYWdlVGl0bGUpIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRpdGxlLmlubmVySFRNTCA9IGF0dGFjaG1lbnQuZmlsZW5hbWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZW1vdmVJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gJyc7XG5cdFx0fSk7XG5cblx0XHRyZXBsYWNlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtZWRpYUZyYW1lLm9wZW4oKTtcblx0XHR9KTtcblxuXHRcdHNldEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleC5idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAwOGRkMzA5NzYxNTdjMjU2NWZkNSIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZHJhZ3VsYSBmcm9tICdkcmFndWxhJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIHBhcmVudCwgYXJncyApIHtcbiAgICBjb25zdCBsaXN0ID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoYXJncy5saXN0KTtcblxuICAgIHJlZ2lzdGVyRHJhZ0V2ZW50cyhsaXN0LCBhcmdzLm9uRHJhZyk7XG4gICAgcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgYXJncy5vblJlbW92ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBodG1sID0gYXJncy5saXN0VGVtcGxhdGUoIHZhbHVlICk7XG4gICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpO1xuXG4gICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKCBsaXN0SXRlbSApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCByZWdpc3RlclJlbW92ZUV2ZW50cyA9IChsaXN0LCBvblJlbW92ZSkgPT4ge1xuICAgIGNvbnN0IGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblxuICAgIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSAoJ3N2ZycgPT09IGUudGFyZ2V0LnRhZ05hbWUpID8gZS50YXJnZXQgOiBlLnRhcmdldC5jbG9zZXN0KCdzdmcnKTtcblxuICAgICAgICBpZiAoICdzdmcnID09PSB0YXJnZXQudGFnTmFtZSApIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcbiAgICAgICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQoIGxpc3RJdGVtICk7XG4gICAgICAgICAgICBvblJlbW92ZSggdmFsdWUgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxpc3RJdGVtcztcbn1cblxuY29uc3QgcmVnaXN0ZXJEcmFnRXZlbnRzID0gKGxpc3QsIGNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgZHJha2UgPSBkcmFndWxhKFtsaXN0XSk7XG5cbiAgICBkcmFrZS5vbignZHJhZ2VuZCcsIChlbCkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG4gICAgICAgIGNhbGxiYWNrKGxpc3QsIGxpc3RJdGVtcyk7XG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saXN0LmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIHBhcmVudCwgaGlkZGVuSW5wdXQgKSB7XG4gICAgY29uc3QgaGlkZGVuRWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihoaWRkZW5JbnB1dCk7XG5cbiAgICBjb25zdCBnZXRDdXJyZW50VmFsdWUgPSAoKSA9PiBKU09OLnBhcnNlKCBoaWRkZW5FbC52YWx1ZSApO1xuXG4gICAgY29uc3QgYWRkVmFsdWUgPSAodmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgICAgIHJldHVybiBjdXJyZW50VmFsdWUuY29uY2F0KCB2YWx1ZSApO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbW92ZVZhbHVlID0gKHZhbHVlLCBvblJlbW92ZSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICAgICAgcmV0dXJuIG9uUmVtb3ZlKCBjdXJyZW50VmFsdWUsIHZhbHVlICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShhZGRWYWx1ZSh2YWx1ZSkpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKHZhbHVlLCBvblJlbW92ZSkge1xuICAgICAgICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShyZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgICAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWVzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NlcmlhbGl6ZWQtaW5wdXQuanMiLCJleHBvcnQgY29uc3QgcmVtb3ZlSXRlbXMgPSAoIEhpZGRlbiwgb25SZW1vdmUgKSA9PiB7XG4gICAgcmV0dXJuICh2YWx1ZSkgPT4ge1xuICAgICAgICBIaWRkZW4ucmVtb3ZlKHZhbHVlLCBvblJlbW92ZSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgZHJhZ0l0ZW1zID0gKCBIaWRkZW4sIG9uRHJhZyApID0+IHtcbiAgICByZXR1cm4gKCBsaXN0LCBsaXN0SXRlbXMgKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IG9uRHJhZyhsaXN0LCBsaXN0SXRlbXMpO1xuICAgICAgICBIaWRkZW4udXBkYXRlKHZhbHVlcyk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3Qgb25EcmFnT2JqZWN0ID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICAgIHJldHVybiBbXS5yZWR1Y2UuY2FsbCggbGlzdEl0ZW1zLCAoYWNjLCBsaXN0SXRlbSkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHtcbiAgICAgICAgICAgIGlkOiBsaXN0SXRlbS5kYXRhc2V0LmlkLFxuICAgICAgICAgICAgdGl0bGU6IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUxcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgICB9LCBbXSApO1xufVxuXG5leHBvcnQgY29uc3Qgb25EcmFnVGV4dCA9IChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgICByZXR1cm4gW10ucmVkdWNlLmNhbGwoIGxpc3RJdGVtcywgKGFjYywgbGlzdEl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgICB9LCBbXSApO1xufVxuXG5leHBvcnQgY29uc3Qgb25SZW1vdmVPYmplY3QgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKCAoY3VycmVudCkgPT4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWUgKTtcbn1cblxuZXhwb3J0IGNvbnN0IG9uUmVtb3ZlVGV4dCA9IChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoIChjdXJyZW50KSA9PiBjdXJyZW50ICE9PSBuZXdWYWx1ZSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdXRpbGl0aWVzLmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIGF1dG9zdWdnZXN0LCBlbmRwb2ludCwgb25TZWxlY3QsIG9uRW1wdHkgKSB7XG5cbiAgICBpZiAoICEgYXV0b3N1Z2dlc3QgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgeGhyID0gZmFsc2U7XG5cbiAgICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCAna2V5dXAnLCAoZSkgPT4ge1xuICAgICAgICBpZiAoIDAgPT09IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCAgJiYgb25FbXB0eSkge1xuICAgICAgICAgICAgb25FbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCAzID4gZS50YXJnZXQudmFsdWUubGVuZ3RoICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgYXV0b3N1Z2dlc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgICAgICB4aHIgPSBnZXRPcHRpb25zKCB4aHIsIHVwZGF0ZU9wdGlvbnMsIGF1dG9zdWdnZXN0LCBlbmRwb2ludCApO1xuXG4gICAgfSApO1xuICAgIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoICdpbnB1dCcsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gb25BdXRvU3VnZ2VzdElucHV0KGUpO1xuXG4gICAgICAgIGlmICggdmFsdWUgKSB7XG4gICAgICAgICAgICBvblNlbGVjdCggdmFsdWUsIGF1dG9zdWdnZXN0ICk7XG4gICAgICAgIH1cbiAgICB9ICk7XG59XG5cbmNvbnN0IG9uQXV0b1N1Z2dlc3RJbnB1dCA9IChlKSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcbiAgICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXQudmFsdWU7XG4gICAgY29uc3QgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICBjb25zdCBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzXG5cbiAgICBjb25zdCBtYXRjaCA9IFtdLnJlZHVjZS5jYWxsKCBsaXN0T3B0aW9ucywgKCBhY2MsIG9wdGlvbiApID0+IHtcbiAgICAgICAgaWYgKCBvcHRpb24udmFsdWUgPT09IGlucHV0VmFsdWUgKSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdCh7XG4gICAgICAgICAgICAgICAgaWQ6IG9wdGlvbi5kYXRhc2V0LmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb24udmFsdWVcbiAgICAgICAgICAgIH0pIDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiAoIDAgPT09IG1hdGNoLmxlbmd0aCApID8gZmFsc2UgOiAgbWF0Y2hbMF07XG59XG5cbmNvbnN0IGdldE9wdGlvbnMgPSAoIHhociwgY2FsbGJhY2ssIGlucHV0LCBlbmRwb2ludCApID0+IHtcbiAgICBjb25zdCBxdWVyeSA9IGJ1aWxkUXVlcnkoaW5wdXQudmFsdWUpO1xuICAgIGNvbnN0IHVybCA9IGVuZHBvaW50ICsgcXVlcnk7XG5cbiAgICBpZiAoIHhociApIHtcbiAgICAgICAgeGhyLmFib3J0KCk7XG4gICAgfVxuXG4gICAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGV2dCkgPT4ge1xuICAgICAgICBjYWxsYmFjayggZmFsc2UsIGV2dCApO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gNCAmJiBpc0pTT04oIHhoci5yZXNwb25zZVRleHQgKSApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCB7IHJlc3VsdHM6IEpTT04ucGFyc2UoIHhoci5yZXNwb25zZVRleHQgKSwgaW5wdXQ6IGlucHV0IH0gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICggeGhyLnJlc3BvbnNlVGV4dCAmJiBpc0pTT04oIHhoci5yZXNwb25zZVRleHQgKSApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayggeyBtZXNzYWdlOiBKU09OLnBhcnNlKCB4aHIucmVzcG9uc2VUZXh0ICksIGlucHV0OiBpbnB1dCB9LCBmYWxzZSApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKCBldnQsIGZhbHNlICk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKCB0cnVlLCBmYWxzZSApO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gICAgeGhyLnNlbmQoKTtcblxuICAgIHJldHVybiB4aHI7XG59XG5cbmNvbnN0IHVwZGF0ZU9wdGlvbnMgPSAoIGVycm9yLCByZXNwb25zZSApID0+IHtcbiAgICBpZiAoIGVycm9yICkge1xuXG4gICAgICAgIGlmICggdHJ1ZSA9PT0gZXJyb3IgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBlcnJvci5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIGNvbnNvbGUud2FybiggZXJyb3IgKTtcbiAgICB9XG5cbiAgICBpZiAoIHJlc3BvbnNlICkge1xuICAgICAgICBpZiAoICEgQXJyYXkuaXNBcnJheSggcmVzcG9uc2UucmVzdWx0cyApICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlT3B0aW9ucyggcmVzcG9uc2UucmVzdWx0cywgcmVzcG9uc2UuaW5wdXQgKTtcbiAgICB9XG59XG5cbmNvbnN0IGNyZWF0ZU9wdGlvbnMgPSAoIHJlc3VsdHMsIGlucHV0ICkgPT4ge1xuICAgIGNvbnN0IGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgY29uc3QgZGF0YWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0TmFtZSk7XG5cbiAgICBjb25zdCBuZXdPcHRpb25zID0gcmVzdWx0cy5yZWR1Y2UoIChhY2MsIHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBjcmVhdGVPcHRpb24oIHJlc3VsdCApO1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdCggb3B0aW9uICk7XG4gICAgfSwgJycgKTtcblxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBkYXRhbGlzdC5pbm5lckhUTUwgPSBuZXdPcHRpb25zO1xufVxuXG5jb25zdCBjcmVhdGVPcHRpb24gPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gYDxvcHRpb24gZGF0YS1pZD0ke3ZhbHVlLmlkfSB2YWx1ZT1cIiR7dmFsdWUudGl0bGUucmVuZGVyZWR9XCI+YDtcbn1cblxuY29uc3QgaXNKU09OID0gKHN0cikgPT4ge1xuXG4gICAgaWYoIHR5cGVvZiggc3RyICkgIT09ICdzdHJpbmcnICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIEpTT04ucGFyc2Uoc3RyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5jb25zdCBidWlsZFF1ZXJ5ID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG9zdWdnZXN0LmpzIiwiaW1wb3J0IGJhc2VDc3MgZnJvbSAnLi4vY3NzL2luZGV4LmNzcyc7XG5pbXBvcnQgdGV4dExpc3QgZnJvbSAnLi90ZXh0LWxpc3QnO1xuaW1wb3J0IGF1dG9MaXN0IGZyb20gJy4vYXV0b3N1Z2dlc3QtbGlzdCc7XG5pbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGF1dG9JdGVtIGZyb20gJy4vYXV0by1pdGVtJztcbmltcG9ydCBpbWFnZVVwbG9hZHMgZnJvbSAnLi9pbWFnZS11cGxvYWRzJztcblxuY29uc3QgY3JlYXRlVGV4dEl0ZW0gPSAodmFsdWUpID0+IHtcblx0cmV0dXJuIGA8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiPlxuICAgICAgICA8c3Bhbj4ke3ZhbHVlfTwvc3Bhbj5cbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG4gICAgICAgIDwvc3ZnPlxuICAgIDwvbGk+YDtcbn1cblxuY29uc3QgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gKHZhbHVlKSA9PiB7XG5cdHJldHVybiBgPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIiBkYXRhLWlkPVwiJHt2YWx1ZS5pZH1cIj5cbiAgICAgICAgPHNwYW4+JHt2YWx1ZS50aXRsZX08L3NwYW4+XG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxuICAgICAgICA8L3N2Zz5cbiAgICA8L2xpPmA7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIGltYWdlVXBsb2FkcygpO1xuICB0ZXh0TGlzdCh7XG5cdCAgcGFyZW50OiAnLnRleHQtbGlzdCcsXG5cdCAgYnV0dG9uOiAnLnRleHQtbGlzdC1hZGQnLFxuXHQgIGxpc3Q6ICcudGV4dC1saXN0LWxpc3QnLFxuXHQgIGhpZGRlbjogJy50ZXh0LWxpc3QtaGlkZGVuJyxcblx0ICBsaXN0VGVtcGxhdGU6IGNyZWF0ZVRleHRJdGVtXG4gIH0pO1xuXG4gIGF1dG9MaXN0KHtcbiAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgIGlucHV0OiAnYXV0b3N1Z2dlc3QtbGlzdC1pbnB1dCcsXG4gICBsaXN0OiAnLmF1dG9zdWdnZXN0LWxpc3QtbGlzdCcsXG4gICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVBdXRvU3VnZ2VzdEl0ZW1cbiAgfSk7XG5cbiAgYXV0b0l0ZW0oe1xuXHQgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC13cmFwcGVyJyxcbiAgICAgIGlucHV0OiAnLmF1dG9zdWdnZXN0LWlucHV0Jyxcblx0ICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtaGlkZGVuJ1xuICB9KTtcbn0gKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2luZGV4LmpzIiwiaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7IHJlbW92ZUl0ZW1zLCBkcmFnSXRlbXMsIG9uRHJhZ1RleHQsIG9uUmVtb3ZlVGV4dCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIGFyZ3MgKSB7XG4gICAgY29uc3QgbGlzdEZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCAhIGxpc3RGaWVsZHMgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBbXS5mb3JFYWNoLmNhbGwoIGxpc3RGaWVsZHMsICggbGlzdEZpZWxkICkgPT4ge1xuICAgICAgICBjb25zdCB0ZXh0SW5wdXQgPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvciggJ2lucHV0W3R5cGU9dGV4dF0nICk7XG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGxpc3RGaWVsZC5xdWVyeVNlbGVjdG9yKCBhcmdzLmJ1dHRvbiApO1xuICAgICAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oIGxpc3RGaWVsZCwgYXJncy5oaWRkZW4gKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoIEhpZGRlbiwgb25SZW1vdmVUZXh0ICk7XG4gICAgICAgIGNvbnN0IGRyYWcgPSBkcmFnSXRlbXMoIEhpZGRlbiwgb25EcmFnVGV4dCApO1xuICAgICAgICBjb25zdCBMaXN0ID0gbGlzdCggbGlzdEZpZWxkLCBPYmplY3QuYXNzaWduKCBhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZX0gKSApO1xuXG4gICAgICAgIGxpc3RGaWVsZC5hZGRFdmVudExpc3RlbmVyKCAna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCAxMyA9PT0gZS5rZXlDb2RlICkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBMaXN0LmFkZCggdGV4dElucHV0LnZhbHVlICk7XG4gICAgICAgICAgICAgICAgSGlkZGVuLmFkZCggdGV4dElucHV0LnZhbHVlICk7XG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIExpc3QuYWRkKCB0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCggdGV4dElucHV0LnZhbHVlICk7XG4gICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdGV4dC1saXN0LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJ2NvbnRyYS9lbWl0dGVyJyk7XG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XG52YXIgY2xhc3NlcyA9IHJlcXVpcmUoJy4vY2xhc3NlcycpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2RyYWd1bGEuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXRvYSA9IHJlcXVpcmUoJ2F0b2EnKTtcbnZhciBkZWJvdW5jZSA9IHJlcXVpcmUoJy4vZGVib3VuY2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbWl0dGVyICh0aGluZywgb3B0aW9ucykge1xuICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBldnQgPSB7fTtcbiAgaWYgKHRoaW5nID09PSB1bmRlZmluZWQpIHsgdGhpbmcgPSB7fTsgfVxuICB0aGluZy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIGlmICghZXZ0W3R5cGVdKSB7XG4gICAgICBldnRbdHlwZV0gPSBbZm5dO1xuICAgIH0gZWxzZSB7XG4gICAgICBldnRbdHlwZV0ucHVzaChmbik7XG4gICAgfVxuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub25jZSA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIGZuLl9vbmNlID0gdHJ1ZTsgLy8gdGhpbmcub2ZmKGZuKSBzdGlsbCB3b3JrcyFcbiAgICB0aGluZy5vbih0eXBlLCBmbik7XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vZmYgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYgKGMgPT09IDEpIHtcbiAgICAgIGRlbGV0ZSBldnRbdHlwZV07XG4gICAgfSBlbHNlIGlmIChjID09PSAwKSB7XG4gICAgICBldnQgPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGV0ID0gZXZ0W3R5cGVdO1xuICAgICAgaWYgKCFldCkgeyByZXR1cm4gdGhpbmc7IH1cbiAgICAgIGV0LnNwbGljZShldC5pbmRleE9mKGZuKSwgMSk7XG4gICAgfVxuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcuZW1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdGhpbmcuZW1pdHRlclNuYXBzaG90KGFyZ3Muc2hpZnQoKSkuYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG4gIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIGV0ID0gKGV2dFt0eXBlXSB8fCBbXSkuc2xpY2UoMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgICAgdmFyIGN0eCA9IHRoaXMgfHwgdGhpbmc7XG4gICAgICBpZiAodHlwZSA9PT0gJ2Vycm9yJyAmJiBvcHRzLnRocm93cyAhPT0gZmFsc2UgJiYgIWV0Lmxlbmd0aCkgeyB0aHJvdyBhcmdzLmxlbmd0aCA9PT0gMSA/IGFyZ3NbMF0gOiBhcmdzOyB9XG4gICAgICBldC5mb3JFYWNoKGZ1bmN0aW9uIGVtaXR0ZXIgKGxpc3Rlbikge1xuICAgICAgICBpZiAob3B0cy5hc3luYykgeyBkZWJvdW5jZShsaXN0ZW4sIGFyZ3MsIGN0eCk7IH0gZWxzZSB7IGxpc3Rlbi5hcHBseShjdHgsIGFyZ3MpOyB9XG4gICAgICAgIGlmIChsaXN0ZW4uX29uY2UpIHsgdGhpbmcub2ZmKHR5cGUsIGxpc3Rlbik7IH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaW5nO1xuICAgIH07XG4gIH07XG4gIHJldHVybiB0aGluZztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXRvYSAoYSwgbikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgbik7IH1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3BsdWdpbnMvbXVzZXVtLWFwcC92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvYXRvYS9hdG9hLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB0aWNreSA9IHJlcXVpcmUoJ3RpY2t5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UgKGZuLCBhcmdzLCBjdHgpIHtcbiAgaWYgKCFmbikgeyByZXR1cm47IH1cbiAgdGlja3koZnVuY3Rpb24gcnVuICgpIHtcbiAgICBmbi5hcHBseShjdHggfHwgbnVsbCwgYXJncyB8fCBbXSk7XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3BsdWdpbnMvbXVzZXVtLWFwcC92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2RlYm91bmNlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgc2kgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nLCB0aWNrO1xuaWYgKHNpKSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcbn0gZWxzZSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0VGltZW91dChmbiwgMCk7IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGljaztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC9wbHVnaW5zL211c2V1bS1hcHAvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3VzdG9tRXZlbnQgPSByZXF1aXJlKCdjdXN0b20tZXZlbnQnKTtcbnZhciBldmVudG1hcCA9IHJlcXVpcmUoJy4vZXZlbnRtYXAnKTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jdXN0b20tZXZlbnQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvcGx1Z2lucy9tdXNldW0tYXBwL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgYXV0b1N1Z2dlc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQgeyByZW1vdmVJdGVtcywgZHJhZ0l0ZW1zLCBvbkRyYWdPYmplY3QsIG9uUmVtb3ZlT2JqZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiggYXJncyApIHtcblxuICAgIGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCAhIGZpZWxkcyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbCggZmllbGRzLCAoIGF1dG9MaXN0ICkgPT4ge1xuICAgICAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oIGF1dG9MaXN0LCBhcmdzLmhpZGRlbiApO1xuICAgICAgICBjb25zdCByZW1vdmUgPSByZW1vdmVJdGVtcyggSGlkZGVuLCBvblJlbW92ZU9iamVjdCApO1xuICAgICAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKCBIaWRkZW4sIG9uRHJhZ09iamVjdCApO1xuICAgICAgICBjb25zdCBMaXN0ID0gbGlzdCggYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oIGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlfSApICk7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvciggJy5hdXRvc3VnZ2VzdC1saXN0LWlucHV0JyApO1xuICAgICAgICBjb25zdCBlbE5hbWUgPSBgYXV0b0xpc3RfJHtpbnB1dC5nZXRBdHRyaWJ1dGUoICdsaXN0JyApfWA7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vd3AvdjIvJHt3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZX0/c2VhcmNoPWA7XG5cbiAgICAgICAgYXV0b1N1Z2dlc3QoIGlucHV0LCBlbmRwb2ludCwgKHZhbHVlLCBpbnB1dCkgPT4ge1xuICAgICAgICAgICAgTGlzdC5hZGQodmFsdWUpO1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIEhpZGRlbi5hZGQoIHZhbHVlICk7XG4gICAgICAgIH0pO1xuICAgIH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG9zdWdnZXN0LWxpc3QuanMiLCJpbXBvcnQgYXV0b1N1Z2dlc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCBhcmdzICkge1xuICAgIGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCAhIGZpZWxkcyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbCggZmllbGRzLCAoIGF1dG9JdGVtICkgPT4ge1xuICAgICAgICBjb25zdCBoaWRkZW4gPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKGFyZ3MuaGlkZGVuKTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCAnLmF1dG9zdWdnZXN0LWlucHV0JyApO1xuICAgICAgICBjb25zdCBlbE5hbWUgPSBgYXV0b0xpc3RfJHtpbnB1dC5nZXRBdHRyaWJ1dGUoICdsaXN0JyApfWA7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vd3AvdjIvJHt3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZX0/c2VhcmNoPWA7XG5cbiAgICAgICAgYXV0b1N1Z2dlc3QoXG4gICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgIGVuZHBvaW50LFxuICAgICAgICAgICAgKHZhbHVlLCBpbnB1dCkgPT4ge1xuICAgICAgICAgICAgICAgIGhpZGRlbi52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KCB2YWx1ZSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICBoaWRkZW4udmFsdWUgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9ICk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hdXRvLWl0ZW0uanMiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbWFnZVVwbG9hZHMoKSB7XG5cdHZhciBmZWF0dXJlZEltYWdlV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdXN0b20tbWVkaWEtdXBsb2FkJyk7XG5cblx0aWYgKCBmZWF0dXJlZEltYWdlV3JhcC5sZW5ndGggPT09IDAgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0W10ubWFwLmNhbGwoIGZlYXR1cmVkSW1hZ2VXcmFwLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0Ly8gdmFyIEltYWdlV3JhcElkID0gaXRlbS5hdHRyaWJ1dGUuaWQ7XG5cdFx0dmFyIHJlbW92ZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWltYWdlJyk7XG5cdFx0dmFyIHJlcGxhY2VJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnJlcGxhY2UtaW1hZ2UnKTtcblx0XHR2YXIgc2V0SW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zZXQtaW1hZ2UnKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRhZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignYS5yZXBsYWNlLWltYWdlIGltZycpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlSUQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRpdGxlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCAnLnRodW1ibmFpbC10aXRsZScgKTtcblx0XHR2YXIgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcblx0XHRcdHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcblx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHR0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJ1xuXHRcdFx0fSxcblx0XHRcdG11bHRpcGxlOiBmYWxzZVxuXHRcdH0pO1xuXG5cdFx0bWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgYXR0YWNobWVudCA9IG1lZGlhRnJhbWUuc3RhdGUoKS5nZXQoJ3NlbGVjdGlvbicpLmZpcnN0KCkudG9KU09OKCk7XG5cblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlSUQudmFsdWUgPSBhdHRhY2htZW50LmlkO1xuXHRcdFx0aWYgKGF0dGFjaG1lbnQuaGFzT3duUHJvcGVydHkoJ3NpemVzJykpIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuc2l6ZXMudGh1bWJuYWlsLnVybCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYXR0YWNobWVudC5pY29uKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBmZWF0dXJlZEltYWdlVGl0bGUgKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSBhdHRhY2htZW50LmZpbGVuYW1lO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0XHRyZW1vdmVJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtaW1hZ2UnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCAnJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlSUQudmFsdWUgPSAnJztcblx0XHR9KTtcblxuXHRcdHJlcGxhY2VJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cblx0XHRzZXRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2ltYWdlLXVwbG9hZHMuanMiXSwic291cmNlUm9vdCI6IiJ9