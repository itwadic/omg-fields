!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return o(n,t.onDrag),r(n,t.onRemove),{add:function(e){var a=t.listTemplate(e),i=document.createRange().createContextualFragment(a);n.appendChild(i)}}};var a=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(a),r=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var a=n.target.closest("li"),i=a.querySelector("span").innerHTML;e.removeChild(a),t(i)}}),n},o=function(e,t){(0,i.default)([e]).on("dragend",function(n){var a=e.querySelectorAll("li");t(e,a)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),a=function(){return n.value?JSON.parse(n.value):[]},i=function(e){return a().concat(e)},r=function(e,t){return t(a(),e)};return{add:function(e){n.value=JSON.stringify(i(e))},remove:function(e,t){n.value=JSON.stringify(r(e,t))},update:function(e){n.value=JSON.stringify(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeItems=function(e,t){return function(n){e.remove(n,t)}},t.dragItems=function(e,t){return function(n,a){var i=t(n,a);e.update(i)}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onDragImage=function(e,t){return[].reduce.call(t,function(e,t){var n=parseInt(t.querySelector("span").innerHTML);return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})},t.onRemoveImage=function(e,t){return e.filter(function(e){return e!==parseInt(t)})},t.onDragTable=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector(".table-list-key").innerHTML,a=t.querySelector(".table-list-value").innerHTML;return e.concat([{key:n,value:a}])},[])},t.onRemoveTable=function(e,t){return e.filter(function(e){return e.key!==t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){var c=void 0;if(!e)return!1;var l=!1;e.addEventListener("keyup",function(u){if(0===u.target.value.length&&o&&(c=u.target.value,o()),3>u.target.value.length)return c=u.target.value,!1;if(u.target.value===c){var s=a(u);return s&&n(s,e),!1}c=u.target.value,e.classList.add("show"),l=i(l,r,e,t)}),e.addEventListener("input",function(t){var i=a(t);i&&n(i,e)})};var a=function(e){var t=e.target,n=t.value,a=t.getAttribute("list"),i=document.getElementById(a).childNodes,r=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==r.length&&r[0]},i=function(e,t,n,a){var i=u(n.value),r=a+i+"&orderby=relevance";return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){4===e.readyState&&l(e.responseText)?t(!1,{results:JSON.parse(e.responseText),input:n}):e.responseText&&l(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",r,!0),e.send(),e},r=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;o(t.results,t.input)}},o=function(e,t){var n=t.getAttribute("list"),a=document.getElementById(n),i=e.reduce(function(e,t){var n=c(t);return e.concat(n)},"");t.classList.remove("show"),a.innerHTML=i},c=function(e){return e.title?"<option data-id="+e.id+' value="'+e.title.rendered+'">':e.name?"<option data-id="+e.id+' value="'+e.name+'">':void 0},l=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},u=function(e){return encodeURIComponent(e.toLowerCase())}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(6),r=(a(i),n(7)),o=a(r),c=n(20),l=a(c),u=n(1),s=(a(u),n(21)),d=a(s),f=n(22),m=a(f),g=n(23),p=a(g),v=n(25),h=a(v),y=n(26),b=a(y),w=function(e){return'<li class="text-list-item">\n        <span>'+e+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'},D=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,m.default)(),(0,o.default)({parent:".text-list",button:".text-list-add",list:".text-list-list",hidden:".text-list-hidden",listTemplate:w}),(0,l.default)({parent:".autosuggest-list",input:"autosuggest-list-input",list:".autosuggest-list-list",hidden:".autosuggest-list-hidden",listTemplate:D}),(0,d.default)({parent:".autosuggest-wrapper",input:".autosuggest-input",hidden:".autosuggest-hidden"}),(0,p.default)(),(0,h.default)(),(0,b.default)()})},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector("input[type=text]"),a=t.querySelector(e.button),i=(0,c.default)(t,e.hidden),o=(0,l.removeItems)(i,l.onRemoveText),u=(0,l.dragItems)(i,l.onDragText),s=(0,r.default)(t,Object.assign(e,{onDrag:u,onRemove:o}));t.addEventListener("keypress",function(e){13===e.keyCode&&(e.preventDefault(),s.add(n.value),i.add(n.value),n.value="")}),a.addEventListener("click",function(e){e.preventDefault(),s.add(n.value),i.add(n.value),n.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3)},function(e,t,n){"use strict";(function(t){function a(e,t){function n(e){return-1!==ue.containers.indexOf(e)||le.isContainer(e)}function a(e){var t=e?"remove":"add";i(C,t,"mousedown",x),i(C,t,"mouseup",j)}function c(e){i(C,e?"remove":"add","mousemove",E)}function p(e){var t=e?"remove":"add";w[t](C,"selectstart",T),w[t](C,"click",T)}function h(){a(!0),j({})}function T(e){oe&&e.preventDefault()}function x(e){if(ee=e.clientX,te=e.clientY,!(1!==r(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=S(t);n&&(oe=n,c(),"mousedown"===e.type&&(g(t)?t.focus():e.preventDefault()))}}function E(e){if(oe){if(0===r(e))return void j({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(le.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(g(M.elementFromPoint(t,n)))return}var a=oe;c(!0),p(),P(),k(a);var i=o(V);Z=y("pageX",e)-i.left,Q=y("pageY",e)-i.top,D.add(ie||V,"gu-transit"),J(),q(e)}}}function S(e){if(!(ue.dragging&&$||n(e))){for(var t=e;m(e)&&!1===n(m(e));){if(le.invalid(e,t))return;if(!(e=m(e)))return}var a=m(e);if(a&&!le.invalid(e,t)){if(le.moves(e,a,t,v(e)))return{item:e,source:a}}}}function O(e){return!!S(e)}function I(e){var t=S(e);t&&k(t)}function k(e){X(e.item,e.source)&&(ie=e.item.cloneNode(!0),ue.emit("cloned",ie,e.item,"copy")),G=e.source,V=e.item,ne=ae=v(e.item),ue.dragging=!0,ue.emit("drag",V,G)}function _(){return!1}function P(){if(ue.dragging){var e=ie||V;N(e,m(e))}}function A(){oe=!1,c(!0),p(!0)}function j(e){if(A(),ue.dragging){var t=ie||V,n=y("clientX",e),a=y("clientY",e),i=l($,n,a),r=R(i,n,a);r&&(ie&&le.copySortSource||!ie||r!==G)?N(t,r):le.removeOnSpill?F():L()}}function N(e,t){var n=m(e);ie&&le.copySortSource&&t===G&&n.removeChild(V),H(t)?ue.emit("cancel",e,G,G):ue.emit("drop",e,t,G,ae),Y()}function F(){if(ue.dragging){var e=ie||V,t=m(e);t&&t.removeChild(e),ue.emit(ie?"cancel":"remove",e,t,G),Y()}}function L(e){if(ue.dragging){var t=arguments.length>0?e:le.revertOnSpill,n=ie||V,a=m(n),i=H(a);!1===i&&t&&(ie?a&&a.removeChild(ie):G.insertBefore(n,ne)),i||t?ue.emit("cancel",n,G,G):ue.emit("drop",n,a,G,ae),Y()}}function Y(){var e=ie||V;A(),U(),e&&D.rm(e,"gu-transit"),re&&clearTimeout(re),ue.dragging=!1,ce&&ue.emit("out",e,ce,G),ue.emit("dragend",e),G=V=ie=ne=ae=re=ce=null}function H(e,t){var n;return n=void 0!==t?t:$?ae:v(ie||V),e===G&&n===ne}function R(e,t,a){for(var i=e;i&&!function(){if(!1===n(i))return!1;var r=z(i,e),o=K(i,r,t,a);return!!H(i,o)||le.accepts(V,i,G,o)}();)i=m(i);return i}function q(e){function t(e){ue.emit(e,o,ce,G)}if($){e.preventDefault();var n=y("clientX",e),a=y("clientY",e),i=n-Z,r=a-Q;$.style.left=i+"px",$.style.top=r+"px";var o=ie||V,c=l($,n,a),u=R(c,n,a),s=null!==u&&u!==ce;(s||null===u)&&(function(){ce&&t("out")}(),ce=u,function(){s&&t("over")}());var d=m(o);if(u===G&&ie&&!le.copySortSource)return void(d&&d.removeChild(o));var f,g=z(u,c);if(null!==g)f=K(u,g,n,a);else{if(!0!==le.revertOnSpill||ie)return void(ie&&d&&d.removeChild(o));f=ne,u=G}(null===f&&s||f!==o&&f!==v(o))&&(ae=f,u.insertBefore(o,f),ue.emit("shadow",o,u,G))}}function B(e){D.rm(e,"gu-hide")}function W(e){ue.dragging&&D.add(e,"gu-hide")}function J(){if(!$){var e=V.getBoundingClientRect();$=V.cloneNode(!0),$.style.width=d(e)+"px",$.style.height=f(e)+"px",D.rm($,"gu-transit"),D.add($,"gu-mirror"),le.mirrorContainer.appendChild($),i(C,"add","mousemove",q),D.add(le.mirrorContainer,"gu-unselectable"),ue.emit("cloned",$,V,"mirror")}}function U(){$&&(D.rm(le.mirrorContainer,"gu-unselectable"),i(C,"remove","mousemove",q),m($).removeChild($),$=null)}function z(e,t){for(var n=t;n!==e&&m(n)!==e;)n=m(n);return n===C?null:n}function K(e,t,n,a){function i(e){return e?v(t):t}var r="horizontal"===le.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(r?n>e.left+d(e)/2:a>e.top+f(e)/2)}():function(){var t,i,o,c=e.children.length;for(t=0;t<c;t++){if(i=e.children[t],o=i.getBoundingClientRect(),r&&o.left+o.width/2>n)return i;if(!r&&o.top+o.height/2>a)return i}return null}()}function X(e,t){return"boolean"==typeof le.copy?le.copy:le.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var $,G,V,Z,Q,ee,te,ne,ae,ie,re,oe,ce=null,le=t||{};void 0===le.moves&&(le.moves=s),void 0===le.accepts&&(le.accepts=s),void 0===le.invalid&&(le.invalid=_),void 0===le.containers&&(le.containers=e||[]),void 0===le.isContainer&&(le.isContainer=u),void 0===le.copy&&(le.copy=!1),void 0===le.copySortSource&&(le.copySortSource=!1),void 0===le.revertOnSpill&&(le.revertOnSpill=!1),void 0===le.removeOnSpill&&(le.removeOnSpill=!1),void 0===le.direction&&(le.direction="vertical"),void 0===le.ignoreInputTextSelection&&(le.ignoreInputTextSelection=!0),void 0===le.mirrorContainer&&(le.mirrorContainer=M.body);var ue=b({containers:le.containers,start:I,end:P,cancel:L,remove:F,destroy:h,canMove:O,dragging:!1});return!0===le.removeOnSpill&&ue.on("over",B).on("out",W),a(),ue}function i(e,n,a,i){var r={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,o[a],i):t.navigator.msPointerEnabled?w[n](e,c[a],i):(w[n](e,r[a],i),w[n](e,a,i))}function r(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e){var t=e.getBoundingClientRect();return{left:t.left+c("scrollLeft","pageXOffset"),top:t.top+c("scrollTop","pageYOffset")}}function c(e,n){return void 0!==t[n]?t[n]:C.clientHeight?C[e]:M.body[e]}function l(e,t,n){var a,i=e||{},r=i.className;return i.className+=" gu-hide",a=M.elementFromPoint(t,n),i.className=r,a}function u(){return!1}function s(){return!0}function d(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function m(e){return e.parentNode===M?null:e.parentNode}function g(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(m(e))))}function v(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in n)&&a[e]in n&&(e=a[e]),n[e]}var b=n(9),w=n(16),D=n(19),M=document,C=M.documentElement;e.exports=a}).call(t,n(0))},function(e,t,n){"use strict";var a=n(10),i=n(11);e.exports=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var a=arguments.length;if(1===a)delete r[t];else if(0===a)r={};else{var i=r[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=a(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(r[t]||[]).slice(0);return function(){var r=a(arguments),c=this||e;if("error"===t&&!1!==n.throws&&!o.length)throw 1===r.length?r[0]:r;return o.forEach(function(a){n.async?i(a,r,c):a.apply(c,r),a._once&&e.off(t,a)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var a=n(12);e.exports=function(e,t,n){e&&a(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,a="function"==typeof t;n=a?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(13).setImmediate)},function(e,t,n){(function(e){function a(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(14),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function a(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,c(l),l++}function i(e){delete u[e]}function r(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}function o(e){if(s)setTimeout(o,0,e);else{var t=u[e];if(t){s=!0;try{r(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var c,l=1,u={},s=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},c=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;c=function(t){var n=d.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(o,0,e)}}(),f.setImmediate=a,f.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===a||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){p&&m&&(p=!1,m.length?g=m.concat(g):v=-1,g.length&&c())}function c(){if(!p){var e=i(o);p=!0;for(var t=g.length;t;){for(m=g,g=[];++v<t;)m&&m[v].run();v=-1,t=g.length}m=null,p=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var s,d,f=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{d="function"==typeof clearTimeout?clearTimeout:a}catch(e){d=a}}();var m,g=[],p=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||p||i(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function a(e,t,n,a){return e.addEventListener(t,n,a)}function i(e,t,n){return e.attachEvent("on"+t,u(e,t,n))}function r(e,t,n,a){return e.removeEventListener(t,n,a)}function o(e,t,n){var a=s(e,t,n);if(a)return e.detachEvent("on"+t,a)}function c(e,t,n){var a=-1===m.indexOf(t)?function(){return new f(t,{detail:n})}():function(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,n,a){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,a.call(e,i)}}function u(e,t,n){var a=s(e,t,n)||l(e,t,n);return h.push({wrapper:a,element:e,type:t,fn:n}),a}function s(e,t,n){var a=d(e,t,n);if(a){var i=h[a].wrapper;return h.splice(a,1),i}}function d(e,t,n){var a,i;for(a=0;a<h.length;a++)if(i=h[a],i.element===e&&i.type===t&&i.fn===n)return a}var f=n(17),m=n(18),g=t.document,p=a,v=r,h=[];t.addEventListener||(p=i,v=o),e.exports={add:p,remove:v,fabricate:c}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],a="",i=/^on/;for(a in t)i.test(a)&&n.push(a.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function a(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(c+e+l,"g"),t}function i(e,t){var n=e.className;n.length?a(t).test(n)||(e.className+=" "+t):e.className=t}function r(e,t){e.className=e.className.replace(a(t)," ").trim()}var o={},c="(?:^|\\s)",l="(?:\\s|$)";e.exports={add:i,rm:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,u.default)(t,e.hidden),a=(0,s.removeItems)(n,s.onRemoveObject),i=(0,s.dragItems)(n,s.onDragObject),o=(0,r.default)(t,Object.assign(e,{onDrag:i,onRemove:a})),l=t.querySelector(".autosuggest-list-input"),d="autoList_"+l.getAttribute("list"),f=void 0;f=window[d].namespace?OMGFields.baseURL+"/wp-json/"+window[d].namespace+"/"+window[d].resource+"?search=":OMGFields.baseURL+"/wp-json/wp/v2/"+window[d].resource+"?search=",(0,c.default)(l,f,function(e,t){o.add(e),t.value="",n.add(e)})})};var i=n(1),r=a(i),o=n(4),c=a(o),l=n(2),u=a(l),s=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden),a=t.querySelector(".autosuggest-input"),r="autoList_"+a.getAttribute("list"),o=void 0;o=window[r].namespace?OMGFields.baseURL+"/wp-json/"+window[r].namespace+"/"+window[r].resource+"?search=":OMGFields.baseURL+"/wp-json/wp/v2/"+window[r].resource+"?search=",(0,i.default)(a,o,function(e,t){n.value=JSON.stringify(e)},function(){n.value=""})})};var a=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function a(){var e=document.querySelectorAll(".custom-media-upload");0!==e.length&&[].map.call(e,function(e){var t=e.querySelector(".remove-image"),n=e.querySelector(".replace-image"),a=e.querySelector(".set-image"),i=e.querySelector("a.replace-image img"),r=e.querySelector('input[type="hidden"]'),o=e.querySelector(".thumbnail-title"),c=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!1});c.on("select",function(){var t=c.state().get("selection").first().toJSON();e.classList.toggle("has-image"),r.value=t.id,t.hasOwnProperty("sizes")?i.setAttribute("src",t.sizes.thumbnail.url):i.setAttribute("src",t.icon),o&&(o.innerHTML=t.filename)}),t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("has-image"),i.setAttribute("src",""),r.value="",o&&(o.innerHTML="")}),n.addEventListener("click",function(e){e.preventDefault(),c.open()}),a.addEventListener("click",function(e){e.preventDefault(),c.open()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".datepicker-input");if(!e)return!1;[].forEach.call(e,function(e){var t=e.dataset.date;(0,i.default)(e,{altInput:!0,altFormat:"F j, Y",dateFormat:"U",defaultDate:t||""})})};var a=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){/* flatpickr v4.4.3, @license MIT */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t,n){void 0===n&&(n=!1);var a;return function(){var i=this,r=arguments;null!==a&&clearTimeout(a),a=window.setTimeout(function(){a=null,n||e.apply(i,r)},t),n&&!a&&e.apply(i,r)}}function t(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function n(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function a(e,t,n){var a=window.document.createElement(e);return t=t||"",n=n||"",a.className=t,void 0!==n&&(a.textContent=n),a}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t){return t(e)?e:e.parentNode?r(e.parentNode,t):void 0}function o(e,t){var n=a("div","numInputWrapper"),i=a("input","numInput "+e),r=a("span","arrowUp"),o=a("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var c in t)i.setAttribute(c,t[c]);return n.appendChild(i),n.appendChild(r),n.appendChild(o),n}function c(c,l){function f(){Ie.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=Ie.currentMonth),void 0===t&&(t=Ie.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:Ie.l10n.daysInMonth[e]}}}function g(e){return e.bind(Ie)}function v(e){0!==Ie.selectedDates.length&&(Oe(e),"input"!==e.type?(E(),Ee()):setTimeout(function(){E(),Ee()},T))}function w(e,t){return e%12+12*s(t===Ie.l10n.amPM[1])}function C(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function E(){if(void 0!==Ie.hourElement&&void 0!==Ie.minuteElement){var e=(parseInt(Ie.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(Ie.minuteElement.value,10)||0)%60,a=void 0!==Ie.secondElement?(parseInt(Ie.secondElement.value,10)||0)%60:0;void 0!==Ie.amPM&&(e=w(e,Ie.amPM.textContent));var i=void 0!==Ie.config.minTime||Ie.config.minDate&&Ie.minDateHasTime&&Ie.latestSelectedDateObj&&0===t(Ie.latestSelectedDateObj,Ie.config.minDate,!0);if(void 0!==Ie.config.maxTime||Ie.config.maxDate&&Ie.maxDateHasTime&&Ie.latestSelectedDateObj&&0===t(Ie.latestSelectedDateObj,Ie.config.maxDate,!0)){var r=void 0!==Ie.config.maxTime?Ie.config.maxTime:Ie.config.maxDate;e=Math.min(e,r.getHours()),e===r.getHours()&&(n=Math.min(n,r.getMinutes())),n===r.getMinutes()&&(a=Math.min(a,r.getSeconds()))}if(i){var o=void 0!==Ie.config.minTime?Ie.config.minTime:Ie.config.minDate;e=Math.max(e,o.getHours()),e===o.getHours()&&(n=Math.max(n,o.getMinutes())),n===o.getMinutes()&&(a=Math.max(a,o.getSeconds()))}O(e,n,a)}}function S(e){var t=e||Ie.latestSelectedDateObj;t&&O(t.getHours(),t.getMinutes(),t.getSeconds())}function O(e,t,n){void 0!==Ie.latestSelectedDateObj&&Ie.latestSelectedDateObj.setHours(e%24,t,n||0,0),Ie.hourElement&&Ie.minuteElement&&!Ie.isMobile&&(Ie.hourElement.value=u(Ie.config.time_24hr?e:(12+e)%12+12*s(e%12==0)),Ie.minuteElement.value=u(t),void 0!==Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[s(e>=12)]),void 0!==Ie.secondElement&&(Ie.secondElement.value=u(n)))}function I(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(e.target.blur(),/[^\d]/.test(t.toString())||ee(t))}function k(e,t,n,a){return t instanceof Array?t.forEach(function(t){return k(e,t,n,a)}):e instanceof Array?e.forEach(function(e){return k(e,t,n,a)}):(e.addEventListener(t,n,a),void Ie._handlers.push({element:e,event:t,handler:n}))}function _(e){return function(t){1===t.which&&e(t)}}function P(){De("onChange")}function A(){if(Ie.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(Ie.element.querySelectorAll("[data-"+e+"]"),function(t){return k(t,"click",Ie[e])})}),Ie.isMobile)return void be();var t=e(ie,50);if(Ie._debouncedChange=e(P,T),Ie.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&k(Ie.daysContainer,"mouseover",function(e){"range"===Ie.config.mode&&ae(e.target)}),k(window.document.body,"keydown",ne),Ie.config.static||k(Ie._input,"keydown",ne),Ie.config.inline||Ie.config.static||k(window,"resize",t),void 0!==window.ontouchstart&&k(window.document,"touchstart",Q),k(window.document,"mousedown",_(Q)),k(window.document,"focus",Q,{capture:!0}),!0===Ie.config.clickOpens&&(k(Ie._input,"focus",Ie.open),k(Ie._input,"mousedown",_(Ie.open))),void 0!==Ie.daysContainer&&(k(Ie.monthNav,"mousedown",_(Se)),k(Ie.monthNav,["keyup","increment"],I),k(Ie.daysContainer,"mousedown",_(fe))),void 0!==Ie.timeContainer&&void 0!==Ie.minuteElement&&void 0!==Ie.hourElement){var n=function(e){return e.target.select()};k(Ie.timeContainer,["input","increment"],v),k(Ie.timeContainer,"mousedown",_(N)),k(Ie.timeContainer,["input","increment"],Ie._debouncedChange,{passive:!0}),k([Ie.hourElement,Ie.minuteElement],["focus","click"],n),void 0!==Ie.secondElement&&k(Ie.secondElement,"focus",function(){return Ie.secondElement&&Ie.secondElement.select()}),void 0!==Ie.amPM&&k(Ie.amPM,"mousedown",_(function(e){v(e),P()}))}}function j(e){var t=void 0!==e?Ie.parseDate(e):Ie.latestSelectedDateObj||(Ie.config.minDate&&Ie.config.minDate>Ie.now?Ie.config.minDate:Ie.config.maxDate&&Ie.config.maxDate<Ie.now?Ie.config.maxDate:Ie.now);try{void 0!==t&&(Ie.currentYear=t.getFullYear(),Ie.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,Ie.config.errorHandler(e)}Ie.redraw()}function N(e){~e.target.className.indexOf("arrow")&&F(e,e.target.classList.contains("arrowUp")?1:-1)}function F(e,t,n){var a=e&&e.target,i=n||a&&a.parentNode&&a.parentNode.firstChild,r=Me("increment");r.delta=t,i&&i.dispatchEvent(r)}function L(){var e=window.document.createDocumentFragment();if(Ie.calendarContainer=a("div","flatpickr-calendar"),Ie.calendarContainer.tabIndex=-1,!Ie.config.noCalendar){if(e.appendChild(W()),Ie.innerContainer=a("div","flatpickr-innerContainer"),Ie.config.weekNumbers){var t=K(),i=t.weekWrapper,r=t.weekNumbers;Ie.innerContainer.appendChild(i),Ie.weekNumbers=r,Ie.weekWrapper=i}Ie.rContainer=a("div","flatpickr-rContainer"),Ie.rContainer.appendChild(U()),Ie.daysContainer||(Ie.daysContainer=a("div","flatpickr-days"),Ie.daysContainer.tabIndex=-1),q(),Ie.rContainer.appendChild(Ie.daysContainer),Ie.innerContainer.appendChild(Ie.rContainer),e.appendChild(Ie.innerContainer)}Ie.config.enableTime&&e.appendChild(J()),n(Ie.calendarContainer,"rangeMode","range"===Ie.config.mode),n(Ie.calendarContainer,"animate",!0===Ie.config.animate),n(Ie.calendarContainer,"multiMonth",Ie.config.showMonths>1),Ie.calendarContainer.appendChild(e);var o=void 0!==Ie.config.appendTo&&void 0!==Ie.config.appendTo.nodeType;if((Ie.config.inline||Ie.config.static)&&(Ie.calendarContainer.classList.add(Ie.config.inline?"inline":"static"),Ie.config.inline&&(!o&&Ie.element.parentNode?Ie.element.parentNode.insertBefore(Ie.calendarContainer,Ie._input.nextSibling):void 0!==Ie.config.appendTo&&Ie.config.appendTo.appendChild(Ie.calendarContainer)),Ie.config.static)){var c=a("div","flatpickr-wrapper");Ie.element.parentNode&&Ie.element.parentNode.insertBefore(c,Ie.element),c.appendChild(Ie.element),Ie.altInput&&c.appendChild(Ie.altInput),c.appendChild(Ie.calendarContainer)}Ie.config.static||Ie.config.inline||(void 0!==Ie.config.appendTo?Ie.config.appendTo:window.document.body).appendChild(Ie.calendarContainer)}function Y(e,i,r,o){var c=te(i,!0),l=a("span","flatpickr-day "+e,i.getDate().toString());return l.dateObj=i,l.$i=o,l.setAttribute("aria-label",Ie.formatDate(i,Ie.config.ariaDateFormat)),0===t(i,Ie.now)&&(Ie.todayDateElem=l,l.classList.add("today")),c?(l.tabIndex=-1,Ce(i)&&(l.classList.add("selected"),Ie.selectedDateElem=l,"range"===Ie.config.mode&&(n(l,"startRange",Ie.selectedDates[0]&&0===t(i,Ie.selectedDates[0],!0)),n(l,"endRange",Ie.selectedDates[1]&&0===t(i,Ie.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("disabled"),"range"===Ie.config.mode&&Te(i)&&!Ce(i)&&l.classList.add("inRange"),Ie.weekNumbers&&1===Ie.config.showMonths&&"prevMonthDay"!==e&&r%7==1&&Ie.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+Ie.config.getWeek(i)+"</span>"),De("onDayCreate",l),l}function H(e,t){var n=void 0!==e?e:document.activeElement.$i,a=(n||0)+t||0,i=Array.prototype.find.call(Ie.days.children,function(e,t){return t>=a&&-1===e.className.indexOf("MonthDay")&&te(e.dateObj)});void 0!==i&&(i.focus(),"range"===Ie.config.mode&&ae(i))}function R(e,t){for(var n=(new Date(e,t,1).getDay()-Ie.l10n.firstDayOfWeek+7)%7,i=Ie.utils.getDaysInMonth((t-1+12)%12),r=Ie.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),c=i+1-n,l=0;c<=i;c++,l++)o.appendChild(Y("prevMonthDay",new Date(e,t-1,c),c,l));for(c=1;c<=r;c++,l++)o.appendChild(Y("",new Date(e,t,c),c,l));for(var u=r+1;u<=42-n&&(1===Ie.config.showMonths||l%7!=0);u++,l++)o.appendChild(Y("nextMonthDay",new Date(e,t+1,u%r),u,l));var s=a("div","dayContainer");return s.appendChild(o),s}function q(){if(void 0!==Ie.daysContainer){i(Ie.daysContainer),Ie.weekNumbers&&i(Ie.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<Ie.config.showMonths;t++){var n=new Date(Ie.currentYear,Ie.currentMonth,1);n.setMonth(Ie.currentMonth+t),e.appendChild(R(n.getFullYear(),n.getMonth()))}Ie.daysContainer.appendChild(e),Ie.days=Ie.daysContainer.firstChild}}function B(){var e=a("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=a("span","cur-month");n.title=Ie.l10n.scrollTitle;var i=o("cur-year",{tabindex:"-1"}),r=i.childNodes[0];r.title=Ie.l10n.scrollTitle,r.setAttribute("aria-label",Ie.l10n.yearAriaLabel),Ie.config.minDate&&r.setAttribute("data-min",Ie.config.minDate.getFullYear().toString()),Ie.config.maxDate&&(r.setAttribute("data-max",Ie.config.maxDate.getFullYear().toString()),r.disabled=!!Ie.config.minDate&&Ie.config.minDate.getFullYear()===Ie.config.maxDate.getFullYear());var c=a("div","flatpickr-current-month");return c.appendChild(n),c.appendChild(i),t.appendChild(c),e.appendChild(t),{container:e,yearElement:r,monthElement:n}}function W(){Ie.monthNav=a("div","flatpickr-months"),Ie.yearElements=[],Ie.monthElements=[],Ie.prevMonthNav=a("span","flatpickr-prev-month"),Ie.prevMonthNav.innerHTML=Ie.config.prevArrow,Ie.nextMonthNav=a("span","flatpickr-next-month"),Ie.nextMonthNav.innerHTML=Ie.config.nextArrow,Ie.monthNav.appendChild(Ie.prevMonthNav);for(var e=Ie.config.showMonths;e--;){var t=B();Ie.yearElements.push(t.yearElement),Ie.monthElements.push(t.monthElement),Ie.monthNav.appendChild(t.container)}return Ie.monthNav.appendChild(Ie.nextMonthNav),Object.defineProperty(Ie,"_hidePrevMonthArrow",{get:function(){return Ie.__hidePrevMonthArrow},set:function(e){Ie.__hidePrevMonthArrow!==e&&(n(Ie.prevMonthNav,"disabled",e),Ie.__hidePrevMonthArrow=e)}}),Object.defineProperty(Ie,"_hideNextMonthArrow",{get:function(){return Ie.__hideNextMonthArrow},set:function(e){Ie.__hideNextMonthArrow!==e&&(n(Ie.nextMonthNav,"disabled",e),Ie.__hideNextMonthArrow=e)}}),Ie.currentYearElement=Ie.yearElements[0],xe(),Ie.monthNav}function J(){Ie.calendarContainer.classList.add("hasTime"),Ie.config.noCalendar&&Ie.calendarContainer.classList.add("noCalendar"),Ie.timeContainer=a("div","flatpickr-time"),Ie.timeContainer.tabIndex=-1;var e=a("span","flatpickr-time-separator",":"),t=o("flatpickr-hour");Ie.hourElement=t.childNodes[0];var n=o("flatpickr-minute");if(Ie.minuteElement=n.childNodes[0],Ie.hourElement.tabIndex=Ie.minuteElement.tabIndex=-1,Ie.hourElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getHours():Ie.config.time_24hr?Ie.config.defaultHour:C(Ie.config.defaultHour)),Ie.minuteElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getMinutes():Ie.config.defaultMinute),Ie.hourElement.setAttribute("data-step",Ie.config.hourIncrement.toString()),Ie.minuteElement.setAttribute("data-step",Ie.config.minuteIncrement.toString()),Ie.hourElement.setAttribute("data-min",Ie.config.time_24hr?"0":"1"),Ie.hourElement.setAttribute("data-max",Ie.config.time_24hr?"23":"12"),Ie.minuteElement.setAttribute("data-min","0"),Ie.minuteElement.setAttribute("data-max","59"),Ie.timeContainer.appendChild(t),Ie.timeContainer.appendChild(e),Ie.timeContainer.appendChild(n),Ie.config.time_24hr&&Ie.timeContainer.classList.add("time24hr"),Ie.config.enableSeconds){Ie.timeContainer.classList.add("hasSeconds");var i=o("flatpickr-second");Ie.secondElement=i.childNodes[0],Ie.secondElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getSeconds():Ie.config.defaultSeconds),Ie.secondElement.setAttribute("data-step",Ie.minuteElement.getAttribute("data-step")),Ie.secondElement.setAttribute("data-min",Ie.minuteElement.getAttribute("data-min")),Ie.secondElement.setAttribute("data-max",Ie.minuteElement.getAttribute("data-max")),Ie.timeContainer.appendChild(a("span","flatpickr-time-separator",":")),Ie.timeContainer.appendChild(i)}return Ie.config.time_24hr||(Ie.amPM=a("span","flatpickr-am-pm",Ie.l10n.amPM[s((Ie.latestSelectedDateObj?Ie.hourElement.value:Ie.config.defaultHour)>11)]),Ie.amPM.title=Ie.l10n.toggleTitle,Ie.amPM.tabIndex=-1,Ie.timeContainer.appendChild(Ie.amPM)),Ie.timeContainer}function U(){Ie.weekdayContainer||(Ie.weekdayContainer=a("div","flatpickr-weekdays"));for(var e=Ie.config.showMonths;e--;){var t=a("div","flatpickr-weekdaycontainer");Ie.weekdayContainer.appendChild(t)}return z(),Ie.weekdayContainer}function z(){var e=Ie.l10n.firstDayOfWeek,t=Ie.l10n.weekdays.shorthand.concat();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=Ie.config.showMonths;n--;)Ie.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function K(){Ie.calendarContainer.classList.add("hasWeeks");var e=a("div","flatpickr-weekwrapper");e.appendChild(a("span","flatpickr-weekday",Ie.l10n.weekAbbreviation));var t=a("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function X(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var a=t?e:e-Ie.currentMonth;a<0&&!0===Ie._hidePrevMonthArrow||a>0&&!0===Ie._hideNextMonthArrow||(Ie.currentMonth+=a,(Ie.currentMonth<0||Ie.currentMonth>11)&&(Ie.currentYear+=Ie.currentMonth>11?1:-1,Ie.currentMonth=(Ie.currentMonth+12)%12,De("onYearChange")),q(),De("onMonthChange"),xe(),!0===n&&H(void 0,0))}function $(e){void 0===e&&(e=!0),Ie.input.value="",void 0!==Ie.altInput&&(Ie.altInput.value=""),void 0!==Ie.mobileInput&&(Ie.mobileInput.value=""),Ie.selectedDates=[],Ie.latestSelectedDateObj=void 0,Ie.showTimeInput=!1,!0===Ie.config.enableTime&&(void 0!==Ie.config.minDate?S(Ie.config.minDate):O(Ie.config.defaultHour,Ie.config.defaultMinute,Ie.config.defaultSeconds)),Ie.redraw(),e&&De("onChange")}function G(){Ie.isOpen=!1,Ie.isMobile||(Ie.calendarContainer.classList.remove("open"),Ie._input.classList.remove("active")),De("onClose")}function V(){void 0!==Ie.config&&De("onDestroy");for(var e=Ie._handlers.length;e--;){var t=Ie._handlers[e];t.element.removeEventListener(t.event,t.handler)}Ie._handlers=[],Ie.mobileInput?(Ie.mobileInput.parentNode&&Ie.mobileInput.parentNode.removeChild(Ie.mobileInput),Ie.mobileInput=void 0):Ie.calendarContainer&&Ie.calendarContainer.parentNode&&Ie.calendarContainer.parentNode.removeChild(Ie.calendarContainer),Ie.altInput&&(Ie.input.type="text",Ie.altInput.parentNode&&Ie.altInput.parentNode.removeChild(Ie.altInput),delete Ie.altInput),Ie.input&&(Ie.input.type=Ie.input._type,Ie.input.classList.remove("flatpickr-input"),Ie.input.removeAttribute("readonly"),Ie.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete Ie[e]}catch(e){}})}function Z(e){return!(!Ie.config.appendTo||!Ie.config.appendTo.contains(e))||Ie.calendarContainer.contains(e)}function Q(e){if(Ie.isOpen&&!Ie.config.inline){var t=Z(e.target),n=e.target===Ie.input||e.target===Ie.altInput||Ie.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(Ie.input)||~e.path.indexOf(Ie.altInput)),a="blur"===e.type?n&&e.relatedTarget&&!Z(e.relatedTarget):!n&&!t,i=!Ie.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});a&&i&&(Ie.close(),"range"===Ie.config.mode&&1===Ie.selectedDates.length&&(Ie.clear(!1),Ie.redraw()))}}function ee(e){if(!(!e||Ie.config.minDate&&e<Ie.config.minDate.getFullYear()||Ie.config.maxDate&&e>Ie.config.maxDate.getFullYear())){var t=e,n=Ie.currentYear!==t;Ie.currentYear=t||Ie.currentYear,Ie.config.maxDate&&Ie.currentYear===Ie.config.maxDate.getFullYear()?Ie.currentMonth=Math.min(Ie.config.maxDate.getMonth(),Ie.currentMonth):Ie.config.minDate&&Ie.currentYear===Ie.config.minDate.getFullYear()&&(Ie.currentMonth=Math.max(Ie.config.minDate.getMonth(),Ie.currentMonth)),n&&(Ie.redraw(),De("onYearChange"))}}function te(e,n){void 0===n&&(n=!0);var a=Ie.parseDate(e,void 0,n);if(Ie.config.minDate&&a&&t(a,Ie.config.minDate,void 0!==n?n:!Ie.minDateHasTime)<0||Ie.config.maxDate&&a&&t(a,Ie.config.maxDate,void 0!==n?n:!Ie.maxDateHasTime)>0)return!1;if(0===Ie.config.enable.length&&0===Ie.config.disable.length)return!0;if(void 0===a)return!1;for(var i,r=Ie.config.enable.length>0,o=r?Ie.config.enable:Ie.config.disable,c=0;c<o.length;c++){if("function"==typeof(i=o[c])&&i(a))return r;if(i instanceof Date&&void 0!==a&&i.getTime()===a.getTime())return r;if("string"==typeof i&&void 0!==a){var l=Ie.parseDate(i,void 0,!0);return l&&l.getTime()===a.getTime()?r:!r}if("object"==typeof i&&void 0!==a&&i.from&&i.to&&a.getTime()>=i.from.getTime()&&a.getTime()<=i.to.getTime())return r}return!r}function ne(e){var t=e.target===Ie._input,n=Z(e.target),a=Ie.config.allowInput,i=Ie.isOpen&&(!a||!t),r=Ie.config.inline&&t&&!a;if(13===e.keyCode&&t){if(a)return Ie.setDate(Ie._input.value,!0,e.target===Ie.altInput?Ie.config.altFormat:Ie.config.dateFormat),e.target.blur();Ie.open()}else if(n||i||r){var o=!!Ie.timeContainer&&Ie.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?Ee():fe(e);break;case 27:e.preventDefault(),de();break;case 8:case 46:t&&!Ie.config.allowInput&&(e.preventDefault(),Ie.clear());break;case 37:case 39:if(o)Ie.hourElement&&Ie.hourElement.focus();else if(e.preventDefault(),Ie.daysContainer){var c=t?0:39===e.keyCode?1:-1;e.ctrlKey?X(c,!0,!0):H(void 0,c)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;Ie.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(ee(Ie.currentYear-l),H(e.target.$i,0)):o||H(e.target.$i,7*l):Ie.config.enableTime&&(!o&&Ie.hourElement&&Ie.hourElement.focus(),v(e),Ie._debouncedChange());break;case 9:e.target===Ie.hourElement?(e.preventDefault(),Ie.minuteElement.select()):e.target===Ie.minuteElement&&(Ie.secondElement||Ie.amPM)?(e.preventDefault(),void 0!==Ie.secondElement?Ie.secondElement.focus():void 0!==Ie.amPM&&Ie.amPM.focus()):e.target===Ie.secondElement&&Ie.amPM&&(e.preventDefault(),Ie.amPM.focus())}switch(e.key){case Ie.l10n.amPM[0].charAt(0):case Ie.l10n.amPM[0].charAt(0).toLowerCase():void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[0],E(),Ee());break;case Ie.l10n.amPM[1].charAt(0):case Ie.l10n.amPM[1].charAt(0).toLowerCase():void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[1],E(),Ee())}De("onKeyDown",e)}}function ae(e){if(1===Ie.selectedDates.length&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")){for(var t=e.dateObj.getTime(),n=Ie.parseDate(Ie.selectedDates[0],void 0,!0).getTime(),a=Math.min(t,Ie.selectedDates[0].getTime()),i=Math.max(t,Ie.selectedDates[0].getTime()),r=Ie.daysContainer.children,o=r[0].children[0].dateObj.getTime(),c=r[r.length-1].lastChild.dateObj.getTime(),l=!1,u=0,s=0,d=o;d<c;d+=M.DAY)te(new Date(d),!0)||(l=l||d>a&&d<i,d<n&&(!u||d>u)?u=d:d>n&&(!s||d<s)&&(s=d));for(var f=0;f<Ie.config.showMonths;f++)for(var m=Ie.daysContainer.children[f],g=Ie.daysContainer.children[f-1],p=0,v=m.children.length;p<v;p++){(function(a,i){var r=m.children[a],o=r.dateObj,c=o.getTime(),d=u>0&&c<u||s>0&&c>s;d?(r.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){r.classList.remove(e)})):l&&!d||(["startRange","inRange","endRange","notAllowed"].forEach(function(e){r.classList.remove(e)}),e.classList.add(t<Ie.selectedDates[0].getTime()?"startRange":"endRange"),!m.contains(e)&&f>0&&g&&g.lastChild.dateObj.getTime()>=c||(n<t&&c===n?r.classList.add("startRange"):n>t&&c===n&&r.classList.add("endRange"),c>=u&&(0===s||c<=s)&&D(c,n,t)&&r.classList.add("inRange")))})(p)}}}function ie(){!Ie.isOpen||Ie.config.static||Ie.config.inline||ue()}function re(e,t){if(void 0===t&&(t=Ie._input),!0===Ie.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==Ie.mobileInput&&Ie.mobileInput.click()},0),void De("onOpen");if(!Ie._input.disabled&&!Ie.config.inline){var n=Ie.isOpen;Ie.isOpen=!0,n||(Ie.calendarContainer.classList.add("open"),Ie._input.classList.add("active"),De("onOpen"),ue(t)),!0===Ie.config.enableTime&&!0===Ie.config.noCalendar&&(0===Ie.selectedDates.length&&(Ie.setDate(void 0!==Ie.config.minDate?new Date(Ie.config.minDate.getTime()):(new Date).setHours(Ie.config.defaultHour,Ie.config.defaultMinute,Ie.config.defaultSeconds,0),!1),E(),Ee()),setTimeout(function(){return Ie.hourElement.select()},50))}}function oe(e){return function(t){var n=Ie.config["_"+e+"Date"]=Ie.parseDate(t,Ie.config.dateFormat),a=Ie.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(Ie["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),Ie.selectedDates&&(Ie.selectedDates=Ie.selectedDates.filter(function(e){return te(e)}),Ie.selectedDates.length||"min"!==e||S(n),Ee()),Ie.daysContainer&&(se(),void 0!==n?Ie.currentYearElement[e]=n.getFullYear().toString():Ie.currentYearElement.removeAttribute(e),Ie.currentYearElement.disabled=!!a&&void 0!==n&&a.getFullYear()===n.getFullYear())}}function ce(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n=Object.assign({},l,JSON.parse(JSON.stringify(c.dataset||{}))),a={};Ie.config.parseDate=n.parseDate,Ie.config.formatDate=n.formatDate,Object.defineProperty(Ie.config,"enable",{get:function(){return Ie.config._enable},set:function(e){Ie.config._enable=ve(e)}}),Object.defineProperty(Ie.config,"disable",{get:function(){return Ie.config._disable},set:function(e){Ie.config._disable=ve(e)}}),!n.dateFormat&&n.enableTime&&(a.dateFormat=n.noCalendar?"H:i"+(n.enableSeconds?":S":""):x.defaultConfig.dateFormat+" H:i"+(n.enableSeconds?":S":"")),n.altInput&&n.enableTime&&!n.altFormat&&(a.altFormat=n.noCalendar?"h:i"+(n.enableSeconds?":S K":" K"):x.defaultConfig.altFormat+" h:i"+(n.enableSeconds?":S":"")+" K"),Object.defineProperty(Ie.config,"minDate",{get:function(){return Ie.config._minDate},set:oe("min")}),Object.defineProperty(Ie.config,"maxDate",{get:function(){return Ie.config._maxDate},set:oe("max")});var i=function(e){return function(t){Ie.config["min"===e?"_minTime":"_maxTime"]=Ie.parseDate(t,"H:i")}};Object.defineProperty(Ie.config,"minTime",{get:function(){return Ie.config._minTime},set:i("min")}),Object.defineProperty(Ie.config,"maxTime",{get:function(){return Ie.config._maxTime},set:i("max")}),Object.assign(Ie.config,a,n);for(var r=0;r<e.length;r++)Ie.config[e[r]]=!0===Ie.config[e[r]]||"true"===Ie.config[e[r]];for(var o=t.length;o--;)void 0!==Ie.config[t[o]]&&(Ie.config[t[o]]=d(Ie.config[t[o]]||[]).map(g));"time"===Ie.config.mode&&(Ie.config.noCalendar=!0,Ie.config.enableTime=!0);for(var u=0;u<Ie.config.plugins.length;u++){var s=Ie.config.plugins[u](Ie)||{};for(var f in s)~t.indexOf(f)?Ie.config[f]=d(s[f]).map(g).concat(Ie.config[f]):void 0===n[f]&&(Ie.config[f]=s[f])}Ie.isMobile=!Ie.config.disableMobile&&!Ie.config.inline&&"single"===Ie.config.mode&&!Ie.config.disable.length&&!Ie.config.enable.length&&!Ie.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),De("onParseConfig")}function le(){"object"!=typeof Ie.config.locale&&void 0===x.l10ns[Ie.config.locale]&&Ie.config.errorHandler(new Error("flatpickr: invalid locale "+Ie.config.locale)),Ie.l10n=Object.assign({},x.l10ns.default,"object"==typeof Ie.config.locale?Ie.config.locale:"default"!==Ie.config.locale?x.l10ns[Ie.config.locale]:void 0),p.K="("+Ie.l10n.amPM[0]+"|"+Ie.l10n.amPM[1]+"|"+Ie.l10n.amPM[0].toLowerCase()+"|"+Ie.l10n.amPM[1].toLowerCase()+")",Ie.formatDate=y(Ie)}function ue(e){if(void 0!==Ie.calendarContainer){De("onPreCalendarPosition");var t=e||Ie._positionElement,a=Array.prototype.reduce.call(Ie.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=Ie.calendarContainer.offsetWidth,r=Ie.config.position,o=t.getBoundingClientRect(),c=window.innerHeight-o.bottom,l="above"===r||"below"!==r&&c<a&&o.top>a,u=window.pageYOffset+o.top+(l?-a-2:t.offsetHeight+2);if(n(Ie.calendarContainer,"arrowTop",!l),n(Ie.calendarContainer,"arrowBottom",l),!Ie.config.inline){var s=window.pageXOffset+o.left,d=window.document.body.offsetWidth-o.right,f=s+i>window.document.body.offsetWidth;n(Ie.calendarContainer,"rightMost",f),Ie.config.static||(Ie.calendarContainer.style.top=u+"px",f?(Ie.calendarContainer.style.left="auto",Ie.calendarContainer.style.right=d+"px"):(Ie.calendarContainer.style.left=s+"px",Ie.calendarContainer.style.right="auto"))}}}function se(){Ie.config.noCalendar||Ie.isMobile||(z(),xe(),q())}function de(){Ie._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(Ie.close,0):Ie.close()}function fe(e){e.preventDefault(),e.stopPropagation();var n=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},a=r(e.target,n);if(void 0!==a){var i=a,o=Ie.latestSelectedDateObj=new Date(i.dateObj.getTime()),c=(o.getMonth()<Ie.currentMonth||o.getMonth()>Ie.currentMonth+Ie.config.showMonths-1)&&"range"!==Ie.config.mode;if(Ie.selectedDateElem=i,"single"===Ie.config.mode)Ie.selectedDates=[o];else if("multiple"===Ie.config.mode){var l=Ce(o);l?Ie.selectedDates.splice(parseInt(l),1):Ie.selectedDates.push(o)}else"range"===Ie.config.mode&&(2===Ie.selectedDates.length&&Ie.clear(!1),Ie.selectedDates.push(o),0!==t(o,Ie.selectedDates[0],!0)&&Ie.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(E(),c){var u=Ie.currentYear!==o.getFullYear();Ie.currentYear=o.getFullYear(),Ie.currentMonth=o.getMonth(),u&&De("onYearChange"),De("onMonthChange")}if(xe(),q(),Ie.config.minDate&&Ie.minDateHasTime&&Ie.config.enableTime&&0===t(o,Ie.config.minDate)&&S(Ie.config.minDate),Ee(),Ie.config.enableTime&&setTimeout(function(){return Ie.showTimeInput=!0},50),"range"===Ie.config.mode&&(1===Ie.selectedDates.length?ae(i):xe()),c||"range"===Ie.config.mode||1!==Ie.config.showMonths?Ie.selectedDateElem&&Ie.selectedDateElem.focus():H(i.$i,0),void 0!==Ie.hourElement&&setTimeout(function(){return void 0!==Ie.hourElement&&Ie.hourElement.select()},451),Ie.config.closeOnSelect){var s="single"===Ie.config.mode&&!Ie.config.enableTime,d="range"===Ie.config.mode&&2===Ie.selectedDates.length&&!Ie.config.enableTime;(s||d)&&de()}P()}}function me(e,t){null!==e&&"object"==typeof e?Object.assign(Ie.config,e):(Ie.config[e]=t,void 0!==ke[e]&&ke[e].forEach(function(e){return e()})),Ie.redraw(),j()}function ge(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return Ie.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[Ie.parseDate(e,t)];else if("string"==typeof e)switch(Ie.config.mode){case"single":n=[Ie.parseDate(e,t)];break;case"multiple":n=e.split(Ie.config.conjunction).map(function(e){return Ie.parseDate(e,t)});break;case"range":n=e.split(Ie.l10n.rangeSeparator).map(function(e){return Ie.parseDate(e,t)})}else Ie.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));Ie.selectedDates=n.filter(function(e){return e instanceof Date&&te(e,!1)}),"range"===Ie.config.mode&&Ie.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function pe(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=Ie.config.dateFormat),0!==e&&!e)return Ie.clear(t);ge(e,n),Ie.showTimeInput=Ie.selectedDates.length>0,Ie.latestSelectedDateObj=Ie.selectedDates[0],Ie.redraw(),j(),S(),Ee(t),t&&De("onChange")}function ve(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?Ie.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:Ie.parseDate(e.from,void 0),to:Ie.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function he(){Ie.selectedDates=[],Ie.now=Ie.parseDate(Ie.config.now)||new Date;var e=Ie.config.defaultDate||Ie.input.value;e&&ge(e,Ie.config.dateFormat);var t=Ie.selectedDates.length>0?Ie.selectedDates[0]:Ie.config.minDate&&Ie.config.minDate.getTime()>Ie.now.getTime()?Ie.config.minDate:Ie.config.maxDate&&Ie.config.maxDate.getTime()<Ie.now.getTime()?Ie.config.maxDate:Ie.now;Ie.currentYear=t.getFullYear(),Ie.currentMonth=t.getMonth(),Ie.selectedDates.length>0&&(Ie.latestSelectedDateObj=Ie.selectedDates[0]),void 0!==Ie.config.minTime&&(Ie.config.minTime=Ie.parseDate(Ie.config.minTime,"H:i")),void 0!==Ie.config.maxTime&&(Ie.config.maxTime=Ie.parseDate(Ie.config.maxTime,"H:i")),Ie.minDateHasTime=!!Ie.config.minDate&&(Ie.config.minDate.getHours()>0||Ie.config.minDate.getMinutes()>0||Ie.config.minDate.getSeconds()>0),Ie.maxDateHasTime=!!Ie.config.maxDate&&(Ie.config.maxDate.getHours()>0||Ie.config.maxDate.getMinutes()>0||Ie.config.maxDate.getSeconds()>0),Object.defineProperty(Ie,"showTimeInput",{get:function(){return Ie._showTimeInput},set:function(e){Ie._showTimeInput=e,Ie.calendarContainer&&n(Ie.calendarContainer,"showTimeInput",e),Ie.isOpen&&ue()}})}function ye(){if(Ie.input=Ie.config.wrap?c.querySelector("[data-input]"):c,!Ie.input)return void Ie.config.errorHandler(new Error("Invalid input element specified"));Ie.input._type=Ie.input.type,Ie.input.type="text",Ie.input.classList.add("flatpickr-input"),Ie._input=Ie.input,Ie.config.altInput&&(Ie.altInput=a(Ie.input.nodeName,Ie.input.className+" "+Ie.config.altInputClass),Ie._input=Ie.altInput,Ie.altInput.placeholder=Ie.input.placeholder,Ie.altInput.disabled=Ie.input.disabled,Ie.altInput.required=Ie.input.required,Ie.altInput.tabIndex=Ie.input.tabIndex,Ie.altInput.type="text",Ie.input.type="hidden",!Ie.config.static&&Ie.input.parentNode&&Ie.input.parentNode.insertBefore(Ie.altInput,Ie.input.nextSibling)),Ie.config.allowInput||Ie._input.setAttribute("readonly","readonly"),Ie._positionElement=Ie.config.positionElement||Ie._input}function be(){var e=Ie.config.enableTime?Ie.config.noCalendar?"time":"datetime-local":"date";Ie.mobileInput=a("input",Ie.input.className+" flatpickr-mobile"),Ie.mobileInput.step=Ie.input.getAttribute("step")||"any",Ie.mobileInput.tabIndex=1,Ie.mobileInput.type=e,Ie.mobileInput.disabled=Ie.input.disabled,Ie.mobileInput.required=Ie.input.required,Ie.mobileInput.placeholder=Ie.input.placeholder,Ie.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",Ie.selectedDates.length>0&&(Ie.mobileInput.defaultValue=Ie.mobileInput.value=Ie.formatDate(Ie.selectedDates[0],Ie.mobileFormatStr)),Ie.config.minDate&&(Ie.mobileInput.min=Ie.formatDate(Ie.config.minDate,"Y-m-d")),Ie.config.maxDate&&(Ie.mobileInput.max=Ie.formatDate(Ie.config.maxDate,"Y-m-d")),Ie.input.type="hidden",void 0!==Ie.altInput&&(Ie.altInput.type="hidden");try{Ie.input.parentNode&&Ie.input.parentNode.insertBefore(Ie.mobileInput,Ie.input.nextSibling)}catch(e){}k(Ie.mobileInput,"change",function(e){Ie.setDate(e.target.value,!1,Ie.mobileFormatStr),De("onChange"),De("onClose")})}function we(){if(Ie.isOpen)return Ie.close();Ie.open()}function De(e,t){var n=Ie.config[e];if(void 0!==n&&n.length>0)for(var a=0;n[a]&&a<n.length;a++)n[a](Ie.selectedDates,Ie.input.value,Ie,t);"onChange"===e&&(Ie.input.dispatchEvent(Me("change")),Ie.input.dispatchEvent(Me("input")))}function Me(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function Ce(e){for(var n=0;n<Ie.selectedDates.length;n++)if(0===t(Ie.selectedDates[n],e))return""+n;return!1}function Te(e){return!("range"!==Ie.config.mode||Ie.selectedDates.length<2)&&(t(e,Ie.selectedDates[0])>=0&&t(e,Ie.selectedDates[1])<=0)}function xe(){Ie.config.noCalendar||Ie.isMobile||!Ie.monthNav||(Ie.yearElements.forEach(function(e,t){var n=new Date(Ie.currentYear,Ie.currentMonth,1);n.setMonth(Ie.currentMonth+t),Ie.monthElements[t].textContent=m(n.getMonth(),Ie.config.shorthandCurrentMonth,Ie.l10n)+" ",e.value=n.getFullYear().toString()}),Ie._hidePrevMonthArrow=void 0!==Ie.config.minDate&&(Ie.currentYear===Ie.config.minDate.getFullYear()?Ie.currentMonth<=Ie.config.minDate.getMonth():Ie.currentYear<Ie.config.minDate.getFullYear()),Ie._hideNextMonthArrow=void 0!==Ie.config.maxDate&&(Ie.currentYear===Ie.config.maxDate.getFullYear()?Ie.currentMonth+1>Ie.config.maxDate.getMonth():Ie.currentYear>Ie.config.maxDate.getFullYear()))}function Ee(e){if(void 0===e&&(e=!0),0===Ie.selectedDates.length)return Ie.clear(e);void 0!==Ie.mobileInput&&Ie.mobileFormatStr&&(Ie.mobileInput.value=void 0!==Ie.latestSelectedDateObj?Ie.formatDate(Ie.latestSelectedDateObj,Ie.mobileFormatStr):"");var t="range"!==Ie.config.mode?Ie.config.conjunction:Ie.l10n.rangeSeparator;Ie.input.value=Ie.selectedDates.map(function(e){return Ie.formatDate(e,Ie.config.dateFormat)}).join(t),void 0!==Ie.altInput&&(Ie.altInput.value=Ie.selectedDates.map(function(e){return Ie.formatDate(e,Ie.config.altFormat)}).join(t)),!1!==e&&De("onValueUpdate")}function Se(e){var t=Ie.prevMonthNav.contains(e.target),n=Ie.nextMonthNav.contains(e.target);t||n?X(t?-1:1):Ie.yearElements.indexOf(e.target)>=0?(e.preventDefault(),e.target.select()):e.target.classList.contains("arrowUp")?Ie.changeYear(Ie.currentYear+1):e.target.classList.contains("arrowDown")&&Ie.changeYear(Ie.currentYear-1)}function Oe(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[s(Ie.amPM.textContent===Ie.l10n.amPM[0])]);var a=parseFloat(n.getAttribute("data-min")),i=parseFloat(n.getAttribute("data-max")),r=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),c=e.delta||(t?38===e.which?1:-1:0),l=o+r*c;if(void 0!==n.value&&2===n.value.length){var d=n===Ie.hourElement,f=n===Ie.minuteElement;l<a?(l=i+l+s(!d)+(s(d)&&s(!Ie.amPM)),f&&F(void 0,-1,Ie.hourElement)):l>i&&(l=n===Ie.hourElement?l-i-s(!Ie.amPM):a,f&&F(void 0,1,Ie.hourElement)),Ie.amPM&&d&&(1===r?l+o===23:Math.abs(l-o)>r)&&(Ie.amPM.textContent=Ie.l10n.amPM[s(Ie.amPM.textContent===Ie.l10n.amPM[0])]),n.value=u(l)}}var Ie={config:Object.assign({},x.defaultConfig),l10n:h};Ie.parseDate=b({config:Ie.config,l10n:Ie.l10n}),Ie._handlers=[],Ie._bind=k,Ie._setHoursFromDate=S,Ie.changeMonth=X,Ie.changeYear=ee,Ie.clear=$,Ie.close=G,Ie._createElement=a,Ie.destroy=V,Ie.isEnabled=te,Ie.jumpToDate=j,Ie.open=re,Ie.redraw=se,Ie.set=me,Ie.setDate=pe,Ie.toggle=we;var ke={locale:[le]};return function(){if(Ie.element=Ie.input=c,Ie.isOpen=!1,ce(),le(),ye(),he(),f(),Ie.isMobile||L(),A(),(Ie.selectedDates.length||Ie.config.noCalendar)&&(Ie.config.enableTime&&S(Ie.config.noCalendar?Ie.latestSelectedDateObj||Ie.config.minDate:void 0),Ee(!1)),Ie.showTimeInput=Ie.selectedDates.length>0||Ie.config.noCalendar,void 0!==Ie.daysContainer){Ie.calendarContainer.style.visibility="hidden",Ie.calendarContainer.style.display="block";var e=(Ie.daysContainer.offsetWidth+1)*Ie.config.showMonths;Ie.daysContainer.style.width=e+"px",Ie.calendarContainer.style.width=e+"px",void 0!==Ie.weekWrapper&&(Ie.calendarContainer.style.width=e+Ie.weekWrapper.offsetWidth+"px"),Ie.calendarContainer.style.visibility="visible",Ie.calendarContainer.style.display=null}var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!Ie.isMobile&&t&&ue(),De("onReady")}(),Ie}function l(e,t){for(var n=Array.prototype.slice.call(e),a=[],i=0;i<n.length;i++){var r=n[i];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=c(r,t||{}),a.push(r._flatpickr)}catch(e){console.error(e)}}return 1===a.length?a[0]:a}var u=function(e){return("0"+e).slice(-2)},s=function(e){return!0===e?1:0},d=function(e){return e instanceof Array?e:[e]},f=function(){},m=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},g={D:f,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*s(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:f,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:f,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},p={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},v={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[v.w(e,t,n)]},F:function(e,t,n){return m(v.n(e,t,n)-1,!1,t)},G:function(e,t,n){return u(v.h(e,t,n))},H:function(e){return u(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[s(e.getHours()>11)]},M:function(e,t){return m(e.getMonth(),!0,t)},S:function(e){return u(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return u(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return u(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return u(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},h={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},y=function(e){var t=e.config,n=void 0===t?C:t,a=e.l10n,i=void 0===a?h:a;return function(e,t,a){if(void 0!==n.formatDate)return n.formatDate(e,t);var r=a||i;return t.split("").map(function(t,a,i){return v[t]&&"\\"!==i[a-1]?v[t](e,r,n):"\\"!==t?t:""}).join("")}},b=function(e){var t=e.config,n=void 0===t?C:t,a=e.l10n,i=void 0===a?h:a;return function(e,t,a){if(0===e||e){var r,o=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"==typeof e){var c=t||(n||C).dateFormat,l=String(e).trim();if("today"===l)r=new Date,a=!0;else if(/Z$/.test(l)||/GMT$/.test(l))r=new Date(e);else if(n&&n.parseDate)r=n.parseDate(e,c);else{r=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var u,s=[],d=0,f=0,m="";d<c.length;d++){var v=c[d],h="\\"===v,y="\\"===c[d-1]||h;if(p[v]&&!y){m+=p[v];var b=new RegExp(m).exec(e);b&&(u=!0)&&s["Y"!==v?"push":"unshift"]({fn:g[v],val:b[++f]})}else h||(m+=".");s.forEach(function(e){var t=e.fn,n=e.val;return r=t(r,n,i)||r})}r=u?r:void 0}}return r instanceof Date?(!0===a&&r.setHours(0,0,0,0),r):void n.errorHandler(new Error("Invalid date provided: "+o))}}},w=function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},D=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},M={DAY:864e5},C={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:w,hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};"function"!=typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var r=n[i];!function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})}(r)}return e});var T=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return l(this,e)},HTMLElement.prototype.flatpickr=function(e){return l([this],e)});var x=function(e,t){return e instanceof NodeList?l(e,t):"string"==typeof e?l(window.document.querySelectorAll(e),t):l([e],t)};return x.defaultConfig=C,x.l10ns={en:Object.assign({},h),default:Object.assign({},h)},x.localize=function(e){x.l10ns.default=Object.assign({},x.l10ns.default,e)},x.setDefaults=function(e){x.defaultConfig=Object.assign({},x.defaultConfig,e)},x.parseDate=b({}),x.formatDate=y({}),x.compareDates=t,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return l(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},x})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".gallery-wrapper");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".add-gallery-images"),n=(0,c.default)(e,".image-gallery-hidden"),a=(0,l.removeItems)(n,l.onRemoveImage),i=(0,l.dragItems)(n,l.onDragImage),o=(0,r.default)(e,{list:".gallery-images",onDrag:i,onRemove:a,listTemplate:u}),s=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!0});t.addEventListener("click",function(e){e.preventDefault(),s.open()}),s.on("select",function(){s.state().get("selection").toJSON().forEach(function(e){o.add(e),n.add(e.id)})})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="gallery-image-item"><span class="gallery-iamge-id">'+e.id+'</span><img src="'+e.url+'" class="gallery-image"/><span><svg class="remove-gallery-image" viewBox="0 0 20 20">\n  <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n</svg></span></li>'}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".table-list");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".table-list-add"),n=(0,c.default)(e,".table-list-hidden"),a=(0,l.removeItems)(n,l.onRemoveTable),i=(0,l.dragItems)(n,l.onDragTable),o=(0,r.default)(e,{list:".table-list-list",onDrag:i,onRemove:a,listTemplate:u}),s=e.querySelector(".text-list-wrapper"),d=s.querySelector(".table-list-key"),f=s.querySelector(".table-list-value");t.addEventListener("click",function(e){e.preventDefault();var t={key:d.value,value:f.value};o.add(t),n.add(t),d.value="",f.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="text-list-item table-list-item">\n    <span class="table-list-key">'+e.key+'</span>\n    <span class="table-list-value">'+e.value+'</span>\n    <svg viewBox="0 0 20 20">\n        <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n    </svg>\n</li>'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2NWQ0ODAyZDFjYzJjNWEyNzhmZiIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc2VyaWFsaXplZC1pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vdGV4dC1saXN0LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZHJhZ3VsYS9kcmFndWxhLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jb250cmEvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy90aWNreS90aWNreS1icm93c2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvZXZlbnRtYXAuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9hdXRvLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vaW1hZ2UtdXBsb2Fkcy5qcyIsIndlYnBhY2s6Ly8vLi9kYXRlcGlja2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLmpzIiwid2VicGFjazovLy8uL2dhbGxlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vdGFibGUtbGlzdC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwidmFsdWUiLCJkZWZhdWx0IiwicGFyZW50IiwiYXJncyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yIiwicmVnaXN0ZXJEcmFnRXZlbnRzIiwib25EcmFnIiwicmVnaXN0ZXJSZW1vdmVFdmVudHMiLCJvblJlbW92ZSIsImFkZCIsImh0bWwiLCJsaXN0VGVtcGxhdGUiLCJsaXN0SXRlbSIsImRvY3VtZW50IiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCJhcHBlbmRDaGlsZCIsIl9kcmFndWxhIiwiX2RyYWd1bGEyIiwib2JqIiwibGlzdEl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsImlubmVySFRNTCIsInJlbW92ZUNoaWxkIiwiY2FsbGJhY2siLCJvbiIsImVsIiwiaGlkZGVuSW5wdXQiLCJoaWRkZW5FbCIsImdldEN1cnJlbnRWYWx1ZSIsIkpTT04iLCJwYXJzZSIsImFkZFZhbHVlIiwiY29uY2F0IiwicmVtb3ZlVmFsdWUiLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJ1cGRhdGUiLCJ2YWx1ZXMiLCJyZW1vdmVJdGVtcyIsIkhpZGRlbiIsImRyYWdJdGVtcyIsIm9uRHJhZ09iamVjdCIsInJlZHVjZSIsImFjYyIsImlkIiwiZGF0YXNldCIsInRpdGxlIiwib25EcmFnVGV4dCIsIm9uRHJhZ0ltYWdlIiwicGFyc2VJbnQiLCJvblJlbW92ZU9iamVjdCIsImN1cnJlbnRWYWx1ZSIsIm5ld1ZhbHVlIiwiZmlsdGVyIiwiY3VycmVudCIsIm9uUmVtb3ZlVGV4dCIsIm9uUmVtb3ZlSW1hZ2UiLCJvbkRyYWdUYWJsZSIsImtleSIsIm9uUmVtb3ZlVGFibGUiLCJhdXRvc3VnZ2VzdCIsImVuZHBvaW50Iiwib25TZWxlY3QiLCJvbkVtcHR5Iiwic2VhcmNoVGVybSIsInhociIsImxlbmd0aCIsIm9uQXV0b1N1Z2dlc3RJbnB1dCIsImNsYXNzTGlzdCIsImdldE9wdGlvbnMiLCJ1cGRhdGVPcHRpb25zIiwiaW5wdXQiLCJpbnB1dFZhbHVlIiwibGlzdE5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJsaXN0T3B0aW9ucyIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsIm1hdGNoIiwib3B0aW9uIiwicXVlcnkiLCJidWlsZFF1ZXJ5IiwidXJsIiwiYWJvcnQiLCJYTUxIdHRwUmVxdWVzdCIsImV2dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJpc0pTT04iLCJyZXNwb25zZVRleHQiLCJyZXN1bHRzIiwibWVzc2FnZSIsIm9wZW4iLCJzZW5kIiwiZXJyb3IiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJ3YXJuIiwiQXJyYXkiLCJpc0FycmF5IiwiY3JlYXRlT3B0aW9ucyIsImRhdGFsaXN0IiwibmV3T3B0aW9ucyIsInJlc3VsdCIsImNyZWF0ZU9wdGlvbiIsInJlbmRlcmVkIiwic3RyIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidG9Mb3dlckNhc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2luZGV4IiwiX3RleHRMaXN0IiwiX3RleHRMaXN0MiIsIl9hdXRvc3VnZ2VzdExpc3QiLCJfYXV0b3N1Z2dlc3RMaXN0MiIsIl9saXN0IiwiX2F1dG9JdGVtIiwiX2F1dG9JdGVtMiIsIl9pbWFnZVVwbG9hZHMiLCJfaW1hZ2VVcGxvYWRzMiIsIl9kYXRlcGlja2VyIiwiX2RhdGVwaWNrZXIyIiwiX2dhbGxlcnkiLCJfZ2FsbGVyeTIiLCJfdGFibGVMaXN0IiwiX3RhYmxlTGlzdDIiLCJjcmVhdGVUZXh0SXRlbSIsImNyZWF0ZUF1dG9TdWdnZXN0SXRlbSIsImJ1dHRvbiIsImhpZGRlbiIsImxpc3RGaWVsZHMiLCJmb3JFYWNoIiwibGlzdEZpZWxkIiwidGV4dElucHV0IiwiYWRkQnV0dG9uIiwiX3NlcmlhbGl6ZWRJbnB1dDIiLCJfdXRpbGl0aWVzIiwiZHJhZyIsIkxpc3QiLCJfbGlzdDIiLCJhc3NpZ24iLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJfc2VyaWFsaXplZElucHV0IiwiZ2xvYmFsIiwiZHJhZ3VsYSIsImluaXRpYWxDb250YWluZXJzIiwib3B0aW9ucyIsImlzQ29udGFpbmVyIiwiZHJha2UiLCJjb250YWluZXJzIiwiaW5kZXhPZiIsImV2ZW50cyIsIm9wIiwidG91Y2h5IiwiZG9jdW1lbnRFbGVtZW50IiwiZ3JhYiIsInJlbGVhc2UiLCJldmVudHVhbE1vdmVtZW50cyIsInN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQiLCJtb3ZlbWVudHMiLCJjcm9zc3ZlbnQiLCJwcmV2ZW50R3JhYmJlZCIsImRlc3Ryb3kiLCJfZ3JhYmJlZCIsIl9tb3ZlWCIsImNsaWVudFgiLCJfbW92ZVkiLCJjbGllbnRZIiwid2hpY2hNb3VzZUJ1dHRvbiIsIm1ldGFLZXkiLCJjdHJsS2V5IiwiaXRlbSIsImNvbnRleHQiLCJjYW5TdGFydCIsInR5cGUiLCJpc0lucHV0IiwiZm9jdXMiLCJpZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24iLCJnZXRDb29yZCIsImRvYyIsImVsZW1lbnRGcm9tUG9pbnQiLCJncmFiYmVkIiwiZW5kIiwic3RhcnQiLCJvZmZzZXQiLCJnZXRPZmZzZXQiLCJfaXRlbSIsIl9vZmZzZXRYIiwibGVmdCIsIl9vZmZzZXRZIiwidG9wIiwiY2xhc3NlcyIsIl9jb3B5IiwicmVuZGVyTWlycm9ySW1hZ2UiLCJkcmFnZ2luZyIsIl9taXJyb3IiLCJoYW5kbGUiLCJnZXRQYXJlbnQiLCJpbnZhbGlkIiwic291cmNlIiwibW92ZXMiLCJuZXh0RWwiLCJjYW5Nb3ZlIiwibWFudWFsU3RhcnQiLCJpc0NvcHkiLCJjbG9uZU5vZGUiLCJlbWl0IiwiX3NvdXJjZSIsIl9pbml0aWFsU2libGluZyIsIl9jdXJyZW50U2libGluZyIsImludmFsaWRUYXJnZXQiLCJkcm9wIiwidW5ncmFiIiwiZWxlbWVudEJlaGluZEN1cnNvciIsImdldEVsZW1lbnRCZWhpbmRQb2ludCIsImRyb3BUYXJnZXQiLCJmaW5kRHJvcFRhcmdldCIsImNvcHlTb3J0U291cmNlIiwicmVtb3ZlT25TcGlsbCIsImNhbmNlbCIsImlzSW5pdGlhbFBsYWNlbWVudCIsImNsZWFudXAiLCJyZXZlcnQiLCJyZXZlcnRzIiwiYXJndW1lbnRzIiwicmV2ZXJ0T25TcGlsbCIsImluaXRpYWwiLCJpbnNlcnRCZWZvcmUiLCJyZW1vdmVNaXJyb3JJbWFnZSIsInJtIiwiX3JlbmRlclRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiX2xhc3REcm9wVGFyZ2V0Iiwic2libGluZyIsImltbWVkaWF0ZSIsImdldEltbWVkaWF0ZUNoaWxkIiwicmVmZXJlbmNlIiwiZ2V0UmVmZXJlbmNlIiwiYWNjZXB0cyIsIm1vdmVkIiwieCIsInkiLCJzdHlsZSIsImNoYW5nZWQiLCJzcGlsbE92ZXIiLCJzcGlsbE91dCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImdldFJlY3RXaWR0aCIsImhlaWdodCIsImdldFJlY3RIZWlnaHQiLCJtaXJyb3JDb250YWluZXIiLCJyZXNvbHZlIiwiYWZ0ZXIiLCJob3Jpem9udGFsIiwiZGlyZWN0aW9uIiwibGVuIiwiY2hpbGRyZW4iLCJjb250YWluZXIiLCJjb3B5IiwiYWx3YXlzIiwibmV2ZXIiLCJib2R5IiwiZW1pdHRlciIsImZuIiwidG91Y2giLCJtb3VzZXVwIiwibW91c2Vkb3duIiwibW91c2Vtb3ZlIiwicG9pbnRlcnMiLCJtaWNyb3NvZnQiLCJuYXZpZ2F0b3IiLCJwb2ludGVyRW5hYmxlZCIsIm1zUG9pbnRlckVuYWJsZWQiLCJ0b3VjaGVzIiwid2hpY2giLCJidXR0b25zIiwiZ2V0U2Nyb2xsIiwic2Nyb2xsUHJvcCIsIm9mZnNldFByb3AiLCJjbGllbnRIZWlnaHQiLCJwb2ludCIsInN0YXRlIiwiY2xhc3NOYW1lIiwicmlnaHQiLCJib3R0b20iLCJwYXJlbnROb2RlIiwiaXNFZGl0YWJsZSIsImNvbnRlbnRFZGl0YWJsZSIsIm5leHRFbGVtZW50U2libGluZyIsIm5leHRTaWJsaW5nIiwibm9kZVR5cGUiLCJnZXRFdmVudEhvc3QiLCJ0YXJnZXRUb3VjaGVzIiwiY2hhbmdlZFRvdWNoZXMiLCJjb29yZCIsImhvc3QiLCJtaXNzTWFwIiwicGFnZVgiLCJwYWdlWSIsImF0b2EiLCJkZWJvdW5jZSIsInRoaW5nIiwib3B0cyIsInVuZGVmaW5lZCIsInB1c2giLCJvbmNlIiwiX29uY2UiLCJvZmYiLCJldCIsInNwbGljZSIsImVtaXR0ZXJTbmFwc2hvdCIsInNoaWZ0IiwiYXBwbHkiLCJzbGljZSIsImN0eCIsInRocm93cyIsImxpc3RlbiIsImFzeW5jIiwiYSIsInRpY2t5Iiwic2V0SW1tZWRpYXRlIiwidGljayIsInNpIiwic2V0VGltZW91dCIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJ0aW1lb3V0IiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsImFjdGl2ZSIsIl9vblRpbWVvdXQiLCJzZWxmIiwiY2xlYXJJbW1lZGlhdGUiLCJwcm9jZXNzIiwidGFzayIsInRhc2tzQnlIYW5kbGUiLCJuZXh0SGFuZGxlIiwicmVnaXN0ZXJJbW1lZGlhdGUiLCJydW4iLCJydW5JZlByZXNlbnQiLCJjdXJyZW50bHlSdW5uaW5nQVRhc2siLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwidG9TdHJpbmciLCJuZXh0VGljayIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlUHJlZml4IiwiTWF0aCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImV2ZW50IiwiZGF0YSIsImF0dGFjaEV2ZW50IiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImNyZWF0ZUVsZW1lbnQiLCJzY3JpcHQiLCJkZWZhdWx0U2V0VGltb3V0IiwiRXJyb3IiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJtYXJrZXIiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJJdGVtIiwiYXJyYXkiLCJub29wIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiYWRkRXZlbnRFYXN5IiwiY2FwdHVyaW5nIiwiYWRkRXZlbnRIYXJkIiwid3JhcCIsInJlbW92ZUV2ZW50RWFzeSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudEhhcmQiLCJsaXN0ZW5lciIsInVud3JhcCIsImRldGFjaEV2ZW50IiwiZmFicmljYXRlRXZlbnQiLCJtb2RlbCIsImV2ZW50bWFwIiwiY3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJjcmVhdGVFdmVudCIsImluaXRFdmVudCIsImNyZWF0ZUV2ZW50T2JqZWN0IiwiZGlzcGF0Y2hFdmVudCIsImZpcmVFdmVudCIsIndyYXBwZXJGYWN0b3J5Iiwib3JpZ2luYWxFdmVudCIsInNyY0VsZW1lbnQiLCJyZXR1cm5WYWx1ZSIsInN0b3BQcm9wYWdhdGlvbiIsImNhbmNlbEJ1YmJsZSIsIndyYXBwZXIiLCJoYXJkQ2FjaGUiLCJlbGVtZW50IiwiZmluZCIsImFkZEV2ZW50IiwicmVtb3ZlRXZlbnQiLCJmYWJyaWNhdGUiLCJOYXRpdmVDdXN0b21FdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9vIiwicGFyYW1zIiwiaW5pdEN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJCb29sZWFuIiwiZXZlbnRuYW1lIiwicm9uIiwidGVzdCIsImxvb2t1cENsYXNzIiwiY2FjaGVkIiwiY2FjaGUiLCJsYXN0SW5kZXgiLCJSZWdFeHAiLCJhZGRDbGFzcyIsInJtQ2xhc3MiLCJyZXBsYWNlIiwidHJpbSIsImZpZWxkcyIsImF1dG9MaXN0IiwiZWxOYW1lIiwibmFtZXNwYWNlIiwiT01HRmllbGRzIiwiYmFzZVVSTCIsInJlc291cmNlIiwiX2F1dG9zdWdnZXN0MiIsIl9hdXRvc3VnZ2VzdCIsImF1dG9JdGVtIiwiaW1hZ2VVcGxvYWRzIiwiZmVhdHVyZWRJbWFnZVdyYXAiLCJtYXAiLCJyZW1vdmVJbWFnZSIsInJlcGxhY2VJbWFnZSIsInNldEltYWdlIiwiZmVhdHVyZWRJbWFnZVRhZyIsImZlYXR1cmVkSW1hZ2VJRCIsImZlYXR1cmVkSW1hZ2VUaXRsZSIsIm1lZGlhRnJhbWUiLCJ3cCIsIm1lZGlhIiwidGV4dCIsIm11bHRpcGxlIiwiYXR0YWNobWVudCIsImZpcnN0IiwidG9KU09OIiwidG9nZ2xlIiwic2V0QXR0cmlidXRlIiwic2l6ZXMiLCJ0aHVtYm5haWwiLCJpY29uIiwiZmlsZW5hbWUiLCJkYXRlcGlja2VycyIsImRhdGVGaWVsZCIsImN1cnJlbnREYXRlIiwiZGF0ZSIsIl9mbGF0cGlja3IyIiwiYWx0SW5wdXQiLCJhbHRGb3JtYXQiLCJkYXRlRm9ybWF0IiwiZGVmYXVsdERhdGUiLCJfZmxhdHBpY2tyIiwiZmFjdG9yeSIsImZ1bmMiLCJ3YWl0IiwiY29tcGFyZURhdGVzIiwiZGF0ZTEiLCJkYXRlMiIsInRpbWVsZXNzIiwiRGF0ZSIsImdldFRpbWUiLCJzZXRIb3VycyIsInRvZ2dsZUNsYXNzIiwiZWxlbSIsImJvb2wiLCJ0YWciLCJjb250ZW50IiwidGV4dENvbnRlbnQiLCJjbGVhck5vZGUiLCJub2RlIiwiZmlyc3RDaGlsZCIsImZpbmRQYXJlbnQiLCJjb25kaXRpb24iLCJjcmVhdGVOdW1iZXJJbnB1dCIsImlucHV0Q2xhc3NOYW1lIiwibnVtSW5wdXQiLCJhcnJvd1VwIiwiYXJyb3dEb3duIiwicGF0dGVybiIsIkZsYXRwaWNrckluc3RhbmNlIiwiaW5zdGFuY2VDb25maWciLCJzZXR1cEhlbHBlckZ1bmN0aW9ucyIsInV0aWxzIiwiZ2V0RGF5c0luTW9udGgiLCJtb250aCIsInlyIiwiY3VycmVudE1vbnRoIiwiY3VycmVudFllYXIiLCJsMTBuIiwiZGF5c0luTW9udGgiLCJiaW5kVG9JbnN0YW5jZSIsImJpbmQiLCJ1cGRhdGVUaW1lIiwic2VsZWN0ZWREYXRlcyIsInRpbWVXcmFwcGVyIiwic2V0SG91cnNGcm9tSW5wdXRzIiwidXBkYXRlVmFsdWUiLCJERUJPVU5DRURfQ0hBTkdFX01TIiwiYW1wbTJtaWxpdGFyeSIsImhvdXIiLCJhbVBNIiwiaW50IiwibWlsaXRhcnkyYW1wbSIsImhvdXJFbGVtZW50IiwibWludXRlRWxlbWVudCIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJzZWNvbmRFbGVtZW50IiwibGltaXRNaW5Ib3VycyIsImNvbmZpZyIsIm1pblRpbWUiLCJtaW5EYXRlIiwibWluRGF0ZUhhc1RpbWUiLCJsYXRlc3RTZWxlY3RlZERhdGVPYmoiLCJtYXhUaW1lIiwibWF4RGF0ZSIsIm1heERhdGVIYXNUaW1lIiwibWluIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsIm1heCIsInNldEhvdXJzRnJvbURhdGUiLCJkYXRlT2JqIiwiaXNNb2JpbGUiLCJwYWQiLCJ0aW1lXzI0aHIiLCJvblllYXJJbnB1dCIsInllYXIiLCJkZWx0YSIsImJsdXIiLCJjaGFuZ2VZZWFyIiwiaGFuZGxlciIsImV2IiwiX2hhbmRsZXJzIiwib25DbGljayIsInRyaWdnZXJDaGFuZ2UiLCJ0cmlnZ2VyRXZlbnQiLCJiaW5kRXZlbnRzIiwic2V0dXBNb2JpbGUiLCJkZWJvdW5jZWRSZXNpemUiLCJvblJlc2l6ZSIsIl9kZWJvdW5jZWRDaGFuZ2UiLCJkYXlzQ29udGFpbmVyIiwidXNlckFnZW50IiwibW9kZSIsIm9uTW91c2VPdmVyIiwib25LZXlEb3duIiwic3RhdGljIiwiX2lucHV0IiwiaW5saW5lIiwib250b3VjaHN0YXJ0IiwiZG9jdW1lbnRDbGljayIsImNhcHR1cmUiLCJjbGlja09wZW5zIiwibW9udGhOYXYiLCJvbk1vbnRoTmF2Q2xpY2siLCJzZWxlY3REYXRlIiwidGltZUNvbnRhaW5lciIsInNlbFRleHQiLCJzZWxlY3QiLCJ0aW1lSW5jcmVtZW50IiwicGFzc2l2ZSIsImp1bXBUb0RhdGUiLCJqdW1wRGF0ZSIsImp1bXBUbyIsInBhcnNlRGF0ZSIsIm5vdyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJlcnJvckhhbmRsZXIiLCJyZWRyYXciLCJpbmNyZW1lbnROdW1JbnB1dCIsImNvbnRhaW5zIiwiaW5wdXRFbGVtIiwiYnVpbGQiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjYWxlbmRhckNvbnRhaW5lciIsInRhYkluZGV4Iiwibm9DYWxlbmRhciIsImJ1aWxkTW9udGhOYXYiLCJpbm5lckNvbnRhaW5lciIsIndlZWtOdW1iZXJzIiwiX2J1aWxkV2Vla3MiLCJidWlsZFdlZWtzIiwid2Vla1dyYXBwZXIiLCJyQ29udGFpbmVyIiwiYnVpbGRXZWVrZGF5cyIsImJ1aWxkRGF5cyIsImVuYWJsZVRpbWUiLCJidWlsZFRpbWUiLCJhbmltYXRlIiwic2hvd01vbnRocyIsImN1c3RvbUFwcGVuZCIsImFwcGVuZFRvIiwiY3JlYXRlRGF5IiwiZGF5TnVtYmVyIiwiZGF0ZUlzRW5hYmxlZCIsImlzRW5hYmxlZCIsImRheUVsZW1lbnQiLCJnZXREYXRlIiwiJGkiLCJmb3JtYXREYXRlIiwiYXJpYURhdGVGb3JtYXQiLCJ0b2RheURhdGVFbGVtIiwiaXNEYXRlU2VsZWN0ZWQiLCJzZWxlY3RlZERhdGVFbGVtIiwiaXNEYXRlSW5SYW5nZSIsImluc2VydEFkamFjZW50SFRNTCIsImdldFdlZWsiLCJmb2N1c09uRGF5IiwiY3VycmVudEluZCIsImN1cnJlbnRJbmRleCIsImFjdGl2ZUVsZW1lbnQiLCJuZXdJbmRleCIsInRhcmdldE5vZGUiLCJkYXlzIiwiYnVpbGRNb250aERheXMiLCJmaXJzdE9mTW9udGgiLCJnZXREYXkiLCJmaXJzdERheU9mV2VlayIsInByZXZNb250aERheXMiLCJkYXlJbmRleCIsImRheU51bSIsImRheUNvbnRhaW5lciIsImZyYWciLCJzZXRNb250aCIsImJ1aWxkTW9udGgiLCJtb250aE5hdkZyYWdtZW50IiwibW9udGhFbGVtZW50Iiwic2Nyb2xsVGl0bGUiLCJ5ZWFySW5wdXQiLCJ0YWJpbmRleCIsInllYXJFbGVtZW50IiwieWVhckFyaWFMYWJlbCIsImRpc2FibGVkIiwieWVhckVsZW1lbnRzIiwibW9udGhFbGVtZW50cyIsInByZXZNb250aE5hdiIsInByZXZBcnJvdyIsIm5leHRNb250aE5hdiIsIm5leHRBcnJvdyIsIl9faGlkZVByZXZNb250aEFycm93Iiwic2V0IiwiX19oaWRlTmV4dE1vbnRoQXJyb3ciLCJjdXJyZW50WWVhckVsZW1lbnQiLCJ1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoIiwic2VwYXJhdG9yIiwiaG91cklucHV0IiwibWludXRlSW5wdXQiLCJkZWZhdWx0SG91ciIsImRlZmF1bHRNaW51dGUiLCJob3VySW5jcmVtZW50IiwibWludXRlSW5jcmVtZW50IiwiZW5hYmxlU2Vjb25kcyIsInNlY29uZElucHV0IiwiZGVmYXVsdFNlY29uZHMiLCJ0b2dnbGVUaXRsZSIsIndlZWtkYXlDb250YWluZXIiLCJ1cGRhdGVXZWVrZGF5cyIsIndlZWtkYXlzIiwic2hvcnRoYW5kIiwiam9pbiIsIndlZWtBYmJyZXZpYXRpb24iLCJjaGFuZ2VNb250aCIsImlzX29mZnNldCIsImZyb21fa2V5Ym9hcmQiLCJfaGlkZVByZXZNb250aEFycm93IiwiX2hpZGVOZXh0TW9udGhBcnJvdyIsImNsZWFyIiwidHJpZ2dlckNoYW5nZUV2ZW50IiwibW9iaWxlSW5wdXQiLCJzaG93VGltZUlucHV0IiwiaXNPcGVuIiwiaCIsIl90eXBlIiwicmVtb3ZlQXR0cmlidXRlIiwiayIsIl8iLCJpc0NhbGVuZGFyRWxlbSIsImlzQ2FsZW5kYXJFbGVtZW50IiwicGF0aCIsImxvc3RGb2N1cyIsInJlbGF0ZWRUYXJnZXQiLCJpc0lnbm9yZWQiLCJpZ25vcmVkRm9jdXNFbGVtZW50cyIsInNvbWUiLCJuZXdZZWFyIiwibmV3WWVhck51bSIsImlzTmV3WWVhciIsImRhdGVUb0NoZWNrIiwiZW5hYmxlIiwiZGlzYWJsZSIsInBhcnNlZCIsImZyb20iLCJ0byIsImNhbGVuZGFyRWxlbSIsImFsbG93SW5wdXQiLCJhbGxvd0tleWRvd24iLCJhbGxvd0lubGluZUtleWRvd24iLCJzZXREYXRlIiwiaXNUaW1lT2JqIiwiZm9jdXNBbmRDbG9zZSIsIl9kZWx0YSIsImNoYXJBdCIsImhvdmVyRGF0ZSIsImluaXRpYWxEYXRlIiwicmFuZ2VTdGFydERhdGUiLCJyYW5nZUVuZERhdGUiLCJtb250aHMiLCJmaXJzdERheSIsImxhc3REYXkiLCJsYXN0Q2hpbGQiLCJjb250YWluc0Rpc2FibGVkIiwibWluUmFuZ2UiLCJtYXhSYW5nZSIsInQiLCJkdXJhdGlvbiIsIkRBWSIsInByZXZNb250aCIsImRheUVsZW0iLCJ0aW1lc3RhbXAiLCJvdXRPZlJhbmdlIiwiaXNCZXR3ZWVuIiwicG9zaXRpb25DYWxlbmRhciIsInBvc2l0aW9uRWxlbWVudCIsImNsaWNrIiwid2FzT3BlbiIsIm1pbk1heERhdGVTZXR0ZXIiLCJpbnZlcnNlRGF0ZU9iaiIsInBhcnNlQ29uZmlnIiwiYm9vbE9wdHMiLCJob29rcyIsInVzZXJDb25maWciLCJmb3JtYXRzJCQxIiwiX2VuYWJsZSIsImRhdGVzIiwicGFyc2VEYXRlUnVsZXMiLCJfZGlzYWJsZSIsImZsYXRwaWNrciIsImRlZmF1bHRDb25maWciLCJfbWluRGF0ZSIsIl9tYXhEYXRlIiwibWluTWF4VGltZVNldHRlciIsInZhbCIsIl9taW5UaW1lIiwiX21heFRpbWUiLCJfaSIsImFycmF5aWZ5IiwiX2kyIiwicGx1Z2lucyIsInBsdWdpbkNvbmYiLCJkaXNhYmxlTW9iaWxlIiwic2V0dXBMb2NhbGUiLCJsb2NhbGUiLCJsMTBucyIsInRva2VuUmVnZXgiLCJLIiwiY3JlYXRlRGF0ZUZvcm1hdHRlciIsImN1c3RvbVBvc2l0aW9uRWxlbWVudCIsIl9wb3NpdGlvbkVsZW1lbnQiLCJjYWxlbmRhckhlaWdodCIsImNoaWxkIiwib2Zmc2V0SGVpZ2h0IiwiY2FsZW5kYXJXaWR0aCIsIm9mZnNldFdpZHRoIiwiY29uZmlnUG9zIiwicG9zaXRpb24iLCJpbnB1dEJvdW5kcyIsImRpc3RhbmNlRnJvbUJvdHRvbSIsImlubmVySGVpZ2h0Iiwic2hvd09uVG9wIiwicGFnZVlPZmZzZXQiLCJwYWdlWE9mZnNldCIsInJpZ2h0TW9zdCIsIm1zTWF4VG91Y2hQb2ludHMiLCJpc1NlbGVjdGFibGUiLCJkYXkiLCJzZWxlY3RlZERhdGUiLCJzaG91bGRDaGFuZ2VNb250aCIsInNlbGVjdGVkSW5kZXgiLCJzb3J0IiwiYiIsImNsb3NlT25TZWxlY3QiLCJzaW5nbGUiLCJyYW5nZSIsIkNBTExCQUNLUyIsInNldFNlbGVjdGVkRGF0ZSIsImlucHV0RGF0ZSIsImZvcm1hdCIsInNwbGl0IiwiY29uanVuY3Rpb24iLCJyYW5nZVNlcGFyYXRvciIsImFyciIsInJ1bGUiLCJzZXR1cERhdGVzIiwicHJlbG9hZGVkRGF0ZSIsIl9zaG93VGltZUlucHV0Iiwic2V0dXBJbnB1dHMiLCJub2RlTmFtZSIsImFsdElucHV0Q2xhc3MiLCJwbGFjZWhvbGRlciIsInJlcXVpcmVkIiwiaW5wdXRUeXBlIiwic3RlcCIsIm1vYmlsZUZvcm1hdFN0ciIsImRlZmF1bHRWYWx1ZSIsIl9hIiwibW9udGhUb1N0ciIsInNob3J0aGFuZEN1cnJlbnRNb250aCIsImpvaW5DaGFyIiwiZE9iaiIsImlzUHJldk1vbnRoIiwiaXNOZXh0TW9udGgiLCJpc0tleURvd24iLCJwYXJzZUZsb2F0IiwiY3VyVmFsdWUiLCJpc0hvdXJFbGVtIiwiaXNNaW51dGVFbGVtIiwiYWJzIiwiZW5nbGlzaCIsImNyZWF0ZURhdGVQYXJzZXIiLCJfYmluZCIsIl9zZXRIb3Vyc0Zyb21EYXRlIiwiX2NyZWF0ZUVsZW1lbnQiLCJ2aXNpYmlsaXR5IiwiZGlzcGxheSIsImRheXNXaWR0aCIsImlzU2FmYXJpIiwibm9kZUxpc3QiLCJub2RlcyIsImluc3RhbmNlcyIsIm51bWJlciIsImRvX25vdGhpbmciLCJtb250aE51bWJlciIsInJldkZvcm1hdCIsIkQiLCJGIiwibW9udGhOYW1lIiwibG9uZ2hhbmQiLCJHIiwiSCIsIkoiLCJNIiwic2hvcnRNb250aCIsIlMiLCJzZXRTZWNvbmRzIiwiVSIsInVuaXhTZWNvbmRzIiwiVyIsIndlZWtOdW0iLCJ3ZWVrTnVtYmVyIiwiWSIsInNldEZ1bGxZZWFyIiwiWiIsIklTT0RhdGUiLCJzZXRNaW51dGVzIiwiaiIsInciLCJmb3JtYXRzIiwidG9JU09TdHJpbmciLCJvcmRpbmFsIiwiU3RyaW5nIiwic3Vic3RyaW5nIiwibnRoIiwiX3JlZiIsIl9yZWYkY29uZmlnIiwiZGVmYXVsdHMiLCJfcmVmJGwxMG4iLCJmcm10Iiwib3ZlcnJpZGVMb2NhbGUiLCJfcmVmMiIsIl9yZWYyJGNvbmZpZyIsIl9yZWYyJGwxMG4iLCJnaXZlbkZvcm1hdCIsInBhcnNlZERhdGUiLCJkYXRlX29yaWciLCJ0b0ZpeGVkIiwiZGF0ZXN0ciIsIm1hdGNoZWQiLCJvcHMiLCJtYXRjaEluZGV4IiwicmVnZXhTdHIiLCJ0b2tlbiIsImlzQmFja1NsYXNoIiwiZXNjYXBlZCIsImV4ZWMiLCJfcmVmMyIsImdpdmVuRGF0ZSIsIndlZWsxIiwicm91bmQiLCJ0cyIsInRzMSIsInRzMiIsIm9uQ2hhbmdlIiwib25DbG9zZSIsIm9uRGF5Q3JlYXRlIiwib25EZXN0cm95Iiwib25Nb250aENoYW5nZSIsIm9uT3BlbiIsIm9uUGFyc2VDb25maWciLCJvblJlYWR5Iiwib25WYWx1ZVVwZGF0ZSIsIm9uWWVhckNoYW5nZSIsIm9uUHJlQ2FsZW5kYXJQb3NpdGlvbiIsIlR5cGVFcnJvciIsIl9sZW4iLCJfa2V5Iiwia2V5cyIsIkhUTUxFbGVtZW50IiwiSFRNTENvbGxlY3Rpb24iLCJOb2RlTGlzdCIsInNlbGVjdG9yIiwiZW4iLCJsb2NhbGl6ZSIsInNldERlZmF1bHRzIiwialF1ZXJ5IiwiZnBfaW5jciIsImdhbGxlcnlTZWN0aW9ucyIsImdhbGxlcnkiLCJhZGRJbWFnZSIsImltYWdlSXRlbSIsImltYWdlIiwidGFibGVMaXN0cyIsInRhYmxlTGlzdCIsImFkZFJvdyIsInRhYmxlSXRlbSIsInJvd0RhdGEiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVB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QSxNQUdmZ0osR0FBS3RJLElBQUlvOUIsR0FDVGo3QixFQUFPbkMsSUFBSW85QixHQUVYOTVCLEVBQUloRSxNQUFRLEdBQ1pBLEVBQU1BLE1BQVEsT0E1Q3BCLElBQUF5SCxHQUFBMUosRUFBQSxHM0JreElJa0wsRUFBUzlCLEVBQXVCTSxHMkJqeElwQzRCLEVBQUF0TCxFQUFBLEczQnF4SUk4SyxFQUFvQjFCLEVBQXVCa0MsRzJCcHhJL0NQLEVBQUEvSyxFQUFBLEdBK0NNOC9CLEVBQVksU0FBQUMsR0FDaEIsdUZBQ2lDQSxFQUFROTVCLElBRHpDLCtDQUVtQzg1QixFQUFROTlCLE1BRjNDIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGFyZ3MpIHtcbiAgICB2YXIgbGlzdCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGFyZ3MubGlzdCk7XG5cbiAgICByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgYXJncy5vbkRyYWcpO1xuICAgIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzKGxpc3QsIGFyZ3Mub25SZW1vdmUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBodG1sID0gYXJncy5saXN0VGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG5cbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbnZhciBfZHJhZ3VsYSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZHJhZ3VsYTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kcmFndWxhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gZnVuY3Rpb24gcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgb25SZW1vdmUpIHtcbiAgICB2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSAnc3ZnJyA9PT0gZS50YXJnZXQudGFnTmFtZSA/IGUudGFyZ2V0IDogZS50YXJnZXQuY2xvc2VzdCgnc3ZnJyk7XG5cbiAgICAgICAgaWYgKCdzdmcnID09PSB0YXJnZXQudGFnTmFtZSkge1xuICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGxpc3RJdGVtKTtcbiAgICAgICAgICAgIG9uUmVtb3ZlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxpc3RJdGVtcztcbn07XG5cbnZhciByZWdpc3RlckRyYWdFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZHJha2UgPSAoMCwgX2RyYWd1bGEyLmRlZmF1bHQpKFtsaXN0XSk7XG5cbiAgICBkcmFrZS5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICBjYWxsYmFjayhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGhpZGRlbklucHV0KSB7XG4gIHZhciBoaWRkZW5FbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGhpZGRlbklucHV0KTtcblxuICB2YXIgZ2V0Q3VycmVudFZhbHVlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlKCkge1xuICAgIHJldHVybiBoaWRkZW5FbC52YWx1ZSA/IEpTT04ucGFyc2UoaGlkZGVuRWwudmFsdWUpIDogW107XG4gIH07XG5cbiAgdmFyIGFkZFZhbHVlID0gZnVuY3Rpb24gYWRkVmFsdWUodmFsdWUpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5jb25jYXQodmFsdWUpO1xuICB9O1xuXG4gIHZhciByZW1vdmVWYWx1ZSA9IGZ1bmN0aW9uIHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkge1xuICAgIHZhciBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICByZXR1cm4gb25SZW1vdmUoY3VycmVudFZhbHVlLCB2YWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShhZGRWYWx1ZSh2YWx1ZSkpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUodmFsdWUsIG9uUmVtb3ZlKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkpO1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWVzKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlcyk7XG4gICAgfVxuICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgcmVtb3ZlSXRlbXMgPSBleHBvcnRzLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgSGlkZGVuLnJlbW92ZSh2YWx1ZSwgb25SZW1vdmUpO1xuICB9O1xufTtcblxudmFyIGRyYWdJdGVtcyA9IGV4cG9ydHMuZHJhZ0l0ZW1zID0gZnVuY3Rpb24gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobGlzdCwgbGlzdEl0ZW1zKSB7XG4gICAgdmFyIHZhbHVlcyA9IG9uRHJhZyhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIEhpZGRlbi51cGRhdGUodmFsdWVzKTtcbiAgfTtcbn07XG5cbnZhciBvbkRyYWdPYmplY3QgPSBleHBvcnRzLm9uRHJhZ09iamVjdCA9IGZ1bmN0aW9uIG9uRHJhZ09iamVjdChsaXN0LCBsaXN0SXRlbXMpIHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICB2YXIgdmFsdWUgPSB7XG4gICAgICBpZDogbGlzdEl0ZW0uZGF0YXNldC5pZCxcbiAgICAgIHRpdGxlOiBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MXG4gICAgfTtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgfSwgW10pO1xufTtcblxudmFyIG9uRHJhZ1RleHQgPSBleHBvcnRzLm9uRHJhZ1RleHQgPSBmdW5jdGlvbiBvbkRyYWdUZXh0KGxpc3QsIGxpc3RJdGVtcykge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwobGlzdEl0ZW1zLCBmdW5jdGlvbiAoYWNjLCBsaXN0SXRlbSkge1xuICAgIHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBvbkRyYWdJbWFnZSA9IGV4cG9ydHMub25EcmFnSW1hZ2UgPSBmdW5jdGlvbiBvbkRyYWdJbWFnZShsaXN0LCBsaXN0SXRlbXMpIHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICB2YXIgdmFsdWUgPSBwYXJzZUludChsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MKTtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgfSwgW10pO1xufTtcblxudmFyIG9uUmVtb3ZlT2JqZWN0ID0gZXhwb3J0cy5vblJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlT2JqZWN0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWU7XG4gIH0pO1xufTtcblxudmFyIG9uUmVtb3ZlVGV4dCA9IGV4cG9ydHMub25SZW1vdmVUZXh0ID0gZnVuY3Rpb24gb25SZW1vdmVUZXh0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudCAhPT0gbmV3VmFsdWU7XG4gIH0pO1xufTtcblxudmFyIG9uUmVtb3ZlSW1hZ2UgPSBleHBvcnRzLm9uUmVtb3ZlSW1hZ2UgPSBmdW5jdGlvbiBvblJlbW92ZUltYWdlKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudCAhPT0gcGFyc2VJbnQobmV3VmFsdWUpO1xuICB9KTtcbn07XG5cbnZhciBvbkRyYWdUYWJsZSA9IGV4cG9ydHMub25EcmFnVGFibGUgPSBmdW5jdGlvbiBvbkRyYWdUYWJsZShsaXN0LCBsaXN0SXRlbXMpIHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICB2YXIga2V5ID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3Qta2V5JykuaW5uZXJIVE1MO1xuICAgIHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LXZhbHVlJykuaW5uZXJIVE1MO1xuICAgIHJldHVybiBhY2MuY29uY2F0KFt7IGtleToga2V5LCB2YWx1ZTogdmFsdWUgfV0pO1xuICB9LCBbXSk7XG59O1xuXG52YXIgb25SZW1vdmVUYWJsZSA9IGV4cG9ydHMub25SZW1vdmVUYWJsZSA9IGZ1bmN0aW9uIG9uUmVtb3ZlVGFibGUoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuICAgIHJldHVybiBjdXJyZW50LmtleSAhPT0gbmV3VmFsdWU7XG4gIH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhdXRvc3VnZ2VzdCwgZW5kcG9pbnQsIG9uU2VsZWN0LCBvbkVtcHR5KSB7XG4gIHZhciBzZWFyY2hUZXJtID0gdm9pZCAwO1xuICBpZiAoIWF1dG9zdWdnZXN0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHhociA9IGZhbHNlO1xuXG4gIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoMCA9PT0gZS50YXJnZXQudmFsdWUubGVuZ3RoICYmIG9uRW1wdHkpIHtcbiAgICAgIHNlYXJjaFRlcm0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIG9uRW1wdHkoKTtcbiAgICB9XG5cbiAgICBpZiAoMyA+IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCkge1xuICAgICAgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gc2VhcmNoVGVybSkge1xuICAgICAgdmFyIHZhbHVlID0gb25BdXRvU3VnZ2VzdElucHV0KGUpO1xuXG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgb25TZWxlY3QodmFsdWUsIGF1dG9zdWdnZXN0KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHNlYXJjaFRlcm0gPSBlLnRhcmdldC52YWx1ZTtcblxuICAgIGF1dG9zdWdnZXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB4aHIgPSBnZXRPcHRpb25zKHhociwgdXBkYXRlT3B0aW9ucywgYXV0b3N1Z2dlc3QsIGVuZHBvaW50KTtcbiAgfSk7XG4gIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIG9uU2VsZWN0KHZhbHVlLCBhdXRvc3VnZ2VzdCk7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciBvbkF1dG9TdWdnZXN0SW5wdXQgPSBmdW5jdGlvbiBvbkF1dG9TdWdnZXN0SW5wdXQoZSkge1xuICB2YXIgaW5wdXQgPSBlLnRhcmdldDtcbiAgdmFyIGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgdmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gIHZhciBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG4gIHZhciBtYXRjaCA9IFtdLnJlZHVjZS5jYWxsKGxpc3RPcHRpb25zLCBmdW5jdGlvbiAoYWNjLCBvcHRpb24pIHtcbiAgICBpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdCh7XG4gICAgICAgIGlkOiBvcHRpb24uZGF0YXNldC5pZCxcbiAgICAgICAgdGl0bGU6IG9wdGlvbi52YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gMCA9PT0gbWF0Y2gubGVuZ3RoID8gZmFsc2UgOiBtYXRjaFswXTtcbn07XG5cbnZhciBnZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucyh4aHIsIGNhbGxiYWNrLCBpbnB1dCwgZW5kcG9pbnQpIHtcbiAgdmFyIHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG4gIHZhciB1cmwgPSBlbmRwb2ludCArIHF1ZXJ5ICsgJyZvcmRlcmJ5PXJlbGV2YW5jZSc7XG5cbiAgaWYgKHhocikge1xuICAgIHhoci5hYm9ydCgpO1xuICB9XG5cbiAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgY2FsbGJhY2soZmFsc2UsIGV2dCk7XG4gIH0sIGZhbHNlKTtcblxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCAmJiBpc0pTT04oeGhyLnJlc3BvbnNlVGV4dCkpIHtcbiAgICAgIGNhbGxiYWNrKGZhbHNlLCB7IHJlc3VsdHM6IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCksIGlucHV0OiBpbnB1dCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHhoci5yZXNwb25zZVRleHQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG4gICAgICAgIGNhbGxiYWNrKHsgbWVzc2FnZTogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgaW5wdXQ6IGlucHV0IH0sIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIGNhbGxiYWNrKGV2dCwgZmFsc2UpO1xuICB9LCBmYWxzZSk7XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZnVuY3Rpb24gKGV2dCkge1xuICAgIGNhbGxiYWNrKHRydWUsIGZhbHNlKTtcbiAgfSwgZmFsc2UpO1xuXG4gIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gIHhoci5zZW5kKCk7XG5cbiAgcmV0dXJuIHhocjtcbn07XG5cbnZhciB1cGRhdGVPcHRpb25zID0gZnVuY3Rpb24gdXBkYXRlT3B0aW9ucyhlcnJvciwgcmVzcG9uc2UpIHtcbiAgaWYgKGVycm9yKSB7XG4gICAgaWYgKHRydWUgPT09IGVycm9yKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZXJyb3IuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gIH1cblxuICBpZiAocmVzcG9uc2UpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzcG9uc2UucmVzdWx0cykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjcmVhdGVPcHRpb25zKHJlc3BvbnNlLnJlc3VsdHMsIHJlc3BvbnNlLmlucHV0KTtcbiAgfVxufTtcblxudmFyIGNyZWF0ZU9wdGlvbnMgPSBmdW5jdGlvbiBjcmVhdGVPcHRpb25zKHJlc3VsdHMsIGlucHV0KSB7XG4gIHZhciBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICB2YXIgZGF0YWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0TmFtZSk7XG5cbiAgdmFyIG5ld09wdGlvbnMgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCByZXN1bHQpIHtcbiAgICB2YXIgb3B0aW9uID0gY3JlYXRlT3B0aW9uKHJlc3VsdCk7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQob3B0aW9uKTtcbiAgfSwgJycpO1xuXG4gIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgZGF0YWxpc3QuaW5uZXJIVE1MID0gbmV3T3B0aW9ucztcbn07XG5cbnZhciBjcmVhdGVPcHRpb24gPSBmdW5jdGlvbiBjcmVhdGVPcHRpb24odmFsdWUpIHtcbiAgaWYgKHZhbHVlLnRpdGxlKSB7XG4gICAgcmV0dXJuICc8b3B0aW9uIGRhdGEtaWQ9JyArIHZhbHVlLmlkICsgJyB2YWx1ZT1cIicgKyB2YWx1ZS50aXRsZS5yZW5kZXJlZCArICdcIj4nO1xuICB9XG5cbiAgaWYgKHZhbHVlLm5hbWUpIHtcbiAgICByZXR1cm4gJzxvcHRpb24gZGF0YS1pZD0nICsgdmFsdWUuaWQgKyAnIHZhbHVlPVwiJyArIHZhbHVlLm5hbWUgKyAnXCI+JztcbiAgfVxufTtcblxudmFyIGlzSlNPTiA9IGZ1bmN0aW9uIGlzSlNPTihzdHIpIHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgSlNPTi5wYXJzZShzdHIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG52YXIgYnVpbGRRdWVyeSA9IGZ1bmN0aW9uIGJ1aWxkUXVlcnkodmFsdWUpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbn07XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cbnZhciBfdGV4dExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXG52YXIgX3RleHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RleHRMaXN0KTtcblxudmFyIF9hdXRvc3VnZ2VzdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblxudmFyIF9hdXRvc3VnZ2VzdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b3N1Z2dlc3RMaXN0KTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX2F1dG9JdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cbnZhciBfYXV0b0l0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b0l0ZW0pO1xuXG52YXIgX2ltYWdlVXBsb2FkcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXG52YXIgX2ltYWdlVXBsb2FkczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbWFnZVVwbG9hZHMpO1xuXG52YXIgX2RhdGVwaWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblxudmFyIF9kYXRlcGlja2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RhdGVwaWNrZXIpO1xuXG52YXIgX2dhbGxlcnkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblxudmFyIF9nYWxsZXJ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dhbGxlcnkpO1xuXG52YXIgX3RhYmxlTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXG52YXIgX3RhYmxlTGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJsZUxpc3QpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY3JlYXRlVGV4dEl0ZW0gPSBmdW5jdGlvbiBjcmVhdGVUZXh0SXRlbSh2YWx1ZSkge1xuICByZXR1cm4gJzxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCI+XFxuICAgICAgICA8c3Bhbj4nICsgdmFsdWUgKyAnPC9zcGFuPlxcbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XFxuICAgICAgICAgICAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbiAgICAgICAgPC9zdmc+XFxuICAgIDwvbGk+Jztcbn07XG5cbnZhciBjcmVhdGVBdXRvU3VnZ2VzdEl0ZW0gPSBmdW5jdGlvbiBjcmVhdGVBdXRvU3VnZ2VzdEl0ZW0odmFsdWUpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiIGRhdGEtaWQ9XCInICsgdmFsdWUuaWQgKyAnXCI+XFxuICAgICAgICA8c3Bhbj4nICsgdmFsdWUudGl0bGUgKyAnPC9zcGFuPlxcbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XFxuICAgICAgICAgICAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbiAgICAgICAgPC9zdmc+XFxuICAgIDwvbGk+Jztcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICgwLCBfaW1hZ2VVcGxvYWRzMi5kZWZhdWx0KSgpO1xuICAoMCwgX3RleHRMaXN0Mi5kZWZhdWx0KSh7XG4gICAgcGFyZW50OiAnLnRleHQtbGlzdCcsXG4gICAgYnV0dG9uOiAnLnRleHQtbGlzdC1hZGQnLFxuICAgIGxpc3Q6ICcudGV4dC1saXN0LWxpc3QnLFxuICAgIGhpZGRlbjogJy50ZXh0LWxpc3QtaGlkZGVuJyxcbiAgICBsaXN0VGVtcGxhdGU6IGNyZWF0ZVRleHRJdGVtXG4gIH0pO1xuXG4gICgwLCBfYXV0b3N1Z2dlc3RMaXN0Mi5kZWZhdWx0KSh7XG4gICAgcGFyZW50OiAnLmF1dG9zdWdnZXN0LWxpc3QnLFxuICAgIGlucHV0OiAnYXV0b3N1Z2dlc3QtbGlzdC1pbnB1dCcsXG4gICAgbGlzdDogJy5hdXRvc3VnZ2VzdC1saXN0LWxpc3QnLFxuICAgIGhpZGRlbjogJy5hdXRvc3VnZ2VzdC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVBdXRvU3VnZ2VzdEl0ZW1cbiAgfSk7XG5cbiAgKDAsIF9hdXRvSXRlbTIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC13cmFwcGVyJyxcbiAgICBpbnB1dDogJy5hdXRvc3VnZ2VzdC1pbnB1dCcsXG4gICAgaGlkZGVuOiAnLmF1dG9zdWdnZXN0LWhpZGRlbidcbiAgfSk7XG5cbiAgKDAsIF9kYXRlcGlja2VyMi5kZWZhdWx0KSgpO1xuICAoMCwgX2dhbGxlcnkyLmRlZmF1bHQpKCk7XG4gICgwLCBfdGFibGVMaXN0Mi5kZWZhdWx0KSgpO1xufSk7XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBsaXN0RmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoIWxpc3RGaWVsZHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbChsaXN0RmllbGRzLCBmdW5jdGlvbiAobGlzdEZpZWxkKSB7XG4gICAgICAgIHZhciB0ZXh0SW5wdXQgPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT10ZXh0XScpO1xuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoYXJncy5idXR0b24pO1xuICAgICAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGxpc3RGaWVsZCwgYXJncy5oaWRkZW4pO1xuICAgICAgICB2YXIgcmVtb3ZlID0gKDAsIF91dGlsaXRpZXMucmVtb3ZlSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vblJlbW92ZVRleHQpO1xuICAgICAgICB2YXIgZHJhZyA9ICgwLCBfdXRpbGl0aWVzLmRyYWdJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uRHJhZ1RleHQpO1xuICAgICAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkobGlzdEZpZWxkLCBPYmplY3QuYXNzaWduKGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlIH0pKTtcblxuICAgICAgICBsaXN0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKDEzID09PSBlLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgTGlzdC5hZGQodGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBIaWRkZW4uYWRkKHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBMaXN0LmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc2VyaWFsaXplZElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcmlhbGl6ZWRJbnB1dCk7XG5cbnZhciBfdXRpbGl0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgZW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG52YXIgY3Jvc3N2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG52YXIgY2xhc3NlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgYXRvYSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xudmFyIGRlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHRpY2t5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UgKGZuLCBhcmdzLCBjdHgpIHtcbiAgaWYgKCFmbikgeyByZXR1cm47IH1cbiAgdGlja3koZnVuY3Rpb24gcnVuICgpIHtcbiAgICBmbi5hcHBseShjdHggfHwgbnVsbCwgYXJncyB8fCBbXSk7XG4gIH0pO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUpIHt2YXIgc2kgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nLCB0aWNrO1xuaWYgKHNpKSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcbn0gZWxzZSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0VGltZW91dChmbiwgMCk7IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGljaztcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcbl9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVpZGF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZSk7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuY2xlYXJJbW1lZGlhdGUpO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2VzcykgeyhmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMTUpKSlcblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBjdXN0b21FdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xudmFyIGV2ZW50bWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGxpc3RlbmVyID0gdW53cmFwKGVsLCB0eXBlLCBmbik7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcbnZhciBOYXRpdmVDdXN0b21FdmVudCA9IGdsb2JhbC5DdXN0b21FdmVudDtcblxuZnVuY3Rpb24gdXNlTmF0aXZlICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcCA9IG5ldyBOYXRpdmVDdXN0b21FdmVudCgnY2F0JywgeyBkZXRhaWw6IHsgZm9vOiAnYmFyJyB9IH0pO1xuICAgIHJldHVybiAgJ2NhdCcgPT09IHAudHlwZSAmJiAnYmFyJyA9PT0gcC5kZXRhaWwuZm9vO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENyb3NzLWJyb3dzZXIgYEN1c3RvbUV2ZW50YCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQuQ3VzdG9tRXZlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VOYXRpdmUoKSA/IE5hdGl2ZUN1c3RvbUV2ZW50IDpcblxuLy8gSUUgPj0gOVxuJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID8gZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgfSBlbHNlIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UsIHZvaWQgMCk7XG4gIH1cbiAgcmV0dXJuIGU7XG59IDpcblxuLy8gSUUgPD0gOFxuZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gIGUudHlwZSA9IHR5cGU7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmJ1YmJsZXMgPSBCb29sZWFuKHBhcmFtcy5idWJibGVzKTtcbiAgICBlLmNhbmNlbGFibGUgPSBCb29sZWFuKHBhcmFtcy5jYW5jZWxhYmxlKTtcbiAgICBlLmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gIH0gZWxzZSB7XG4gICAgZS5idWJibGVzID0gZmFsc2U7XG4gICAgZS5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgZS5kZXRhaWwgPSB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGNhY2hlID0ge307XG52YXIgc3RhcnQgPSAnKD86XnxcXFxccyknO1xudmFyIGVuZCA9ICcoPzpcXFxcc3wkKSc7XG5cbmZ1bmN0aW9uIGxvb2t1cENsYXNzIChjbGFzc05hbWUpIHtcbiAgdmFyIGNhY2hlZCA9IGNhY2hlW2NsYXNzTmFtZV07XG4gIGlmIChjYWNoZWQpIHtcbiAgICBjYWNoZWQubGFzdEluZGV4ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBjYWNoZVtjbGFzc05hbWVdID0gY2FjaGVkID0gbmV3IFJlZ0V4cChzdGFydCArIGNsYXNzTmFtZSArIGVuZCwgJ2cnKTtcbiAgfVxuICByZXR1cm4gY2FjaGVkO1xufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICB2YXIgY3VycmVudCA9IGVsLmNsYXNzTmFtZTtcbiAgaWYgKCFjdXJyZW50Lmxlbmd0aCkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgfSBlbHNlIGlmICghbG9va3VwQ2xhc3MoY2xhc3NOYW1lKS50ZXN0KGN1cnJlbnQpKSB7XG4gICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBybUNsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKGxvb2t1cENsYXNzKGNsYXNzTmFtZSksICcgJykudHJpbSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRDbGFzcyxcbiAgcm06IHJtQ2xhc3Ncbn07XG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuICB2YXIgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgaWYgKCFmaWVsZHMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBmdW5jdGlvbiAoYXV0b0xpc3QpIHtcbiAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGF1dG9MaXN0LCBhcmdzLmhpZGRlbik7XG4gICAgdmFyIHJlbW92ZSA9ICgwLCBfdXRpbGl0aWVzLnJlbW92ZUl0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25SZW1vdmVPYmplY3QpO1xuICAgIHZhciBkcmFnID0gKDAsIF91dGlsaXRpZXMuZHJhZ0l0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25EcmFnT2JqZWN0KTtcbiAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkoYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmUgfSkpO1xuICAgIHZhciBpbnB1dCA9IGF1dG9MaXN0LnF1ZXJ5U2VsZWN0b3IoJy5hdXRvc3VnZ2VzdC1saXN0LWlucHV0Jyk7XG4gICAgdmFyIGVsTmFtZSA9ICdhdXRvTGlzdF8nICsgaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgdmFyIGVuZHBvaW50ID0gdm9pZCAwO1xuXG4gICAgaWYgKHdpbmRvd1tlbE5hbWVdLm5hbWVzcGFjZSkge1xuICAgICAgZW5kcG9pbnQgPSBPTUdGaWVsZHMuYmFzZVVSTCArICcvd3AtanNvbi8nICsgd2luZG93W2VsTmFtZV0ubmFtZXNwYWNlICsgJy8nICsgd2luZG93W2VsTmFtZV0ucmVzb3VyY2UgKyAnP3NlYXJjaD0nO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmRwb2ludCA9IE9NR0ZpZWxkcy5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyB3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG4gICAgfVxuXG4gICAgKDAsIF9hdXRvc3VnZ2VzdDIuZGVmYXVsdCkoaW5wdXQsIGVuZHBvaW50LCBmdW5jdGlvbiAodmFsdWUsIGlucHV0KSB7XG4gICAgICBMaXN0LmFkZCh2YWx1ZSk7XG4gICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgSGlkZGVuLmFkZCh2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX2F1dG9zdWdnZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9hdXRvc3VnZ2VzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdCk7XG5cbnZhciBfc2VyaWFsaXplZElucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VyaWFsaXplZElucHV0KTtcblxudmFyIF91dGlsaXRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gIHZhciBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICBpZiAoIWZpZWxkcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGZ1bmN0aW9uIChhdXRvSXRlbSkge1xuICAgIHZhciBoaWRkZW4gPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKGFyZ3MuaGlkZGVuKTtcbiAgICB2YXIgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtaW5wdXQnKTtcbiAgICB2YXIgZWxOYW1lID0gJ2F1dG9MaXN0XycgKyBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICB2YXIgZW5kcG9pbnQgPSB2b2lkIDA7XG5cbiAgICBpZiAod2luZG93W2VsTmFtZV0ubmFtZXNwYWNlKSB7XG4gICAgICBlbmRwb2ludCA9IE9NR0ZpZWxkcy5iYXNlVVJMICsgJy93cC1qc29uLycgKyB3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2UgKyAnLycgKyB3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVuZHBvaW50ID0gT01HRmllbGRzLmJhc2VVUkwgKyAnL3dwLWpzb24vd3AvdjIvJyArIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlICsgJz9zZWFyY2g9JztcbiAgICB9XG5cbiAgICAoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShpbnB1dCwgZW5kcG9pbnQsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXQpIHtcbiAgICAgIGhpZGRlbi52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICBoaWRkZW4udmFsdWUgPSAnJztcbiAgICB9KTtcbiAgfSk7XG59O1xuXG52YXIgX2F1dG9zdWdnZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9hdXRvc3VnZ2VzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGltYWdlVXBsb2FkcztcbmZ1bmN0aW9uIGltYWdlVXBsb2FkcygpIHtcblx0dmFyIGZlYXR1cmVkSW1hZ2VXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1c3RvbS1tZWRpYS11cGxvYWQnKTtcblxuXHRpZiAoZmVhdHVyZWRJbWFnZVdyYXAubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0W10ubWFwLmNhbGwoZmVhdHVyZWRJbWFnZVdyYXAsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0Ly8gdmFyIEltYWdlV3JhcElkID0gaXRlbS5hdHRyaWJ1dGUuaWQ7XG5cdFx0dmFyIHJlbW92ZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWltYWdlJyk7XG5cdFx0dmFyIHJlcGxhY2VJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnJlcGxhY2UtaW1hZ2UnKTtcblx0XHR2YXIgc2V0SW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zZXQtaW1hZ2UnKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRhZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignYS5yZXBsYWNlLWltYWdlIGltZycpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlSUQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRpdGxlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcudGh1bWJuYWlsLXRpdGxlJyk7XG5cdFx0dmFyIG1lZGlhRnJhbWUgPSB3cC5tZWRpYSh7XG5cdFx0XHR0aXRsZTogJ0Nob29zZSBNZWRpYScsXG5cdFx0XHRidXR0b246IHtcblx0XHRcdFx0dGV4dDogJ1VzZSBTZWxlY3RlZCBNZWRpYSdcblx0XHRcdH0sXG5cdFx0XHRtdWx0aXBsZTogZmFsc2Vcblx0XHR9KTtcblxuXHRcdG1lZGlhRnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBhdHRhY2htZW50ID0gbWVkaWFGcmFtZS5zdGF0ZSgpLmdldCgnc2VsZWN0aW9uJykuZmlyc3QoKS50b0pTT04oKTtcblxuXHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtaW1hZ2UnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VJRC52YWx1ZSA9IGF0dGFjaG1lbnQuaWQ7XG5cdFx0XHRpZiAoYXR0YWNobWVudC5oYXNPd25Qcm9wZXJ0eSgnc2l6ZXMnKSkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYXR0YWNobWVudC5zaXplcy50aHVtYm5haWwudXJsKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50Lmljb24pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmVhdHVyZWRJbWFnZVRpdGxlKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSBhdHRhY2htZW50LmZpbGVuYW1lO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmVtb3ZlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICcnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VJRC52YWx1ZSA9ICcnO1xuXG5cdFx0XHRpZiAoZmVhdHVyZWRJbWFnZVRpdGxlKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSAnJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJlcGxhY2VJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXG5cdFx0c2V0SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtZWRpYUZyYW1lLm9wZW4oKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRhdGVwaWNrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGVwaWNrZXItaW5wdXQnKTtcblxuICBpZiAoIWRhdGVwaWNrZXJzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGRhdGVwaWNrZXJzLCBmdW5jdGlvbiAoZGF0ZUZpZWxkKSB7XG4gICAgdmFyIGN1cnJlbnREYXRlID0gZGF0ZUZpZWxkLmRhdGFzZXQuZGF0ZTtcblxuICAgICgwLCBfZmxhdHBpY2tyMi5kZWZhdWx0KShkYXRlRmllbGQsIHtcbiAgICAgIGFsdElucHV0OiB0cnVlLFxuICAgICAgYWx0Rm9ybWF0OiAnRiBqLCBZJyxcbiAgICAgIGRhdGVGb3JtYXQ6ICdVJyxcbiAgICAgIGRlZmF1bHREYXRlOiAhY3VycmVudERhdGUgPyAnJyA6IGN1cnJlbnREYXRlXG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIF9mbGF0cGlja3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9mbGF0cGlja3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmxhdHBpY2tyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBmbGF0cGlja3IgdjQuNC4zLCBAbGljZW5zZSBNSVQgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgIHRydWUgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLmZsYXRwaWNrciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYWQgPSBmdW5jdGlvbiBwYWQobnVtYmVyKSB7XG4gICAgICByZXR1cm4gKFwiMFwiICsgbnVtYmVyKS5zbGljZSgtMik7XG4gICAgfTtcbiAgICB2YXIgaW50ID0gZnVuY3Rpb24gaW50KGJvb2wpIHtcbiAgICAgIHJldHVybiBib29sID09PSB0cnVlID8gMSA6IDA7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICAgIGlmIChpbW1lZGlhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBpbW1lZGlhdGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB0aW1lb3V0ICE9PSBudWxsICYmIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiBhcnJheWlmeShvYmopIHtcbiAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xuICAgIH07XG5cbiAgICB2YXIgZG9fbm90aGluZyA9IGZ1bmN0aW9uIGRvX25vdGhpbmcoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB2YXIgbW9udGhUb1N0ciA9IGZ1bmN0aW9uIG1vbnRoVG9TdHIobW9udGhOdW1iZXIsIHNob3J0aGFuZCwgbG9jYWxlKSB7XG4gICAgICByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07XG4gICAgfTtcbiAgICB2YXIgcmV2Rm9ybWF0ID0ge1xuICAgICAgRDogZG9fbm90aGluZyxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZU9iaiwgbW9udGhOYW1lLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLmxvbmdoYW5kLmluZGV4T2YobW9udGhOYW1lKSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSjogZnVuY3Rpb24gSihkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlT2JqLCBhbVBNLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhkYXRlT2JqLmdldEhvdXJzKCkgJSAxMiArIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sIFwiaVwiKS50ZXN0KGFtUE0pKSk7XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTShkYXRlT2JqLCBzaG9ydE1vbnRoLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLnNob3J0aGFuZC5pbmRleE9mKHNob3J0TW9udGgpKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIFU6IGZ1bmN0aW9uIFUoXywgdW5peFNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlRmxvYXQodW5peFNlY29uZHMpICogMTAwMCk7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlT2JqLCB3ZWVrTnVtKSB7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9LFxuICAgICAgWjogZnVuY3Rpb24gWihfLCBJU09EYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShJU09EYXRlKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbiBkKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICAgIH0sXG4gICAgICBoOiBmdW5jdGlvbiBoKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBpOiBmdW5jdGlvbiBpKGRhdGVPYmosIG1pbnV0ZXMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNaW51dGVzKHBhcnNlRmxvYXQobWludXRlcykpO1xuICAgICAgfSxcbiAgICAgIGo6IGZ1bmN0aW9uIGooZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgICAgfSxcbiAgICAgIGw6IGRvX25vdGhpbmcsXG4gICAgICBtOiBmdW5jdGlvbiBtKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBzOiBmdW5jdGlvbiBzKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIHc6IGRvX25vdGhpbmcsXG4gICAgICB5OiBmdW5jdGlvbiB5KGRhdGVPYmosIHllYXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRGdWxsWWVhcigyMDAwICsgcGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9rZW5SZWdleCA9IHtcbiAgICAgIEQ6IFwiKFxcXFx3KylcIixcbiAgICAgIEY6IFwiKFxcXFx3KylcIixcbiAgICAgIEc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBIOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICAgIEs6IFwiXCIsXG4gICAgICBNOiBcIihcXFxcdyspXCIsXG4gICAgICBTOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgVTogXCIoLispXCIsXG4gICAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgWTogXCIoXFxcXGR7NH0pXCIsXG4gICAgICBaOiBcIiguKylcIixcbiAgICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBoOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgaTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBsOiBcIihcXFxcdyspXCIsXG4gICAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgbjogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIHM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgeTogXCIoXFxcXGR7Mn0pXCJcbiAgICB9O1xuICAgIHZhciBmb3JtYXRzID0ge1xuICAgICAgWjogZnVuY3Rpb24gWihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9LFxuICAgICAgRDogZnVuY3Rpb24gRChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgICAgfSxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGZvcm1hdHMubihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIC0gMSwgZmFsc2UsIGxvY2FsZSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhZChmb3JtYXRzLmgoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTtcbiAgICAgIH0sXG4gICAgICBKOiBmdW5jdGlvbiBKKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm9yZGluYWwgIT09IHVuZGVmaW5lZCA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpIDogZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldO1xuICAgICAgfSxcbiAgICAgIE06IGZ1bmN0aW9uIE0oZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGRhdGUuZ2V0TW9udGgoKSwgdHJ1ZSwgbG9jYWxlKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24gVShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9LFxuICAgICAgZDogZnVuY3Rpb24gZChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uIGgoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpICUgMTIgPyBkYXRlLmdldEhvdXJzKCkgJSAxMiA6IDEyO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgIH0sXG4gICAgICBqOiBmdW5jdGlvbiBqKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIGw6IGZ1bmN0aW9uIGwoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgICB9LFxuICAgICAgbTogZnVuY3Rpb24gbShkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRNb250aCgpICsgMSk7XG4gICAgICB9LFxuICAgICAgbjogZnVuY3Rpb24gbihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICB9LFxuICAgICAgdzogZnVuY3Rpb24gdyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldERheSgpO1xuICAgICAgfSxcbiAgICAgIHk6IGZ1bmN0aW9uIHkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZW5nbGlzaCA9IHtcbiAgICAgIHdlZWtkYXlzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICAgICAgICBsb25naGFuZDogW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl1cbiAgICAgIH0sXG4gICAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgICAgfSxcbiAgICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgICBmaXJzdERheU9mV2VlazogMCxcbiAgICAgIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnRoKSB7XG4gICAgICAgIHZhciBzID0gbnRoICUgMTAwO1xuICAgICAgICBpZiAocyA+IDMgJiYgcyA8IDIxKSByZXR1cm4gXCJ0aFwiO1xuXG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIm5kXCI7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCJyZFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXG4gICAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgICBzY3JvbGxUaXRsZTogXCJTY3JvbGwgdG8gaW5jcmVtZW50XCIsXG4gICAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcbiAgICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgICB5ZWFyQXJpYUxhYmVsOiBcIlllYXJcIlxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlRGF0ZUZvcm1hdHRlciA9IGZ1bmN0aW9uIGNyZWF0ZURhdGVGb3JtYXR0ZXIoX3JlZikge1xuICAgICAgdmFyIF9yZWYkY29uZmlnID0gX3JlZi5jb25maWcsXG4gICAgICAgICAgY29uZmlnID0gX3JlZiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZiRjb25maWcsXG4gICAgICAgICAgX3JlZiRsMTBuID0gX3JlZi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmJGwxMG4gPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfcmVmJGwxMG47XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGVPYmosIGZybXQsIG92ZXJyaWRlTG9jYWxlKSB7XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gY29uZmlnLmZvcm1hdERhdGUoZGF0ZU9iaiwgZnJtdCk7XG4gICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuO1xuICAgICAgICByZXR1cm4gZnJtdC5zcGxpdChcIlwiKS5tYXAoZnVuY3Rpb24gKGMsIGksIGFycikge1xuICAgICAgICAgIHJldHVybiBmb3JtYXRzW2NdICYmIGFycltpIC0gMV0gIT09IFwiXFxcXFwiID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZykgOiBjICE9PSBcIlxcXFxcIiA/IGMgOiBcIlwiO1xuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBjcmVhdGVEYXRlUGFyc2VyID0gZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihfcmVmMikge1xuICAgICAgdmFyIF9yZWYyJGNvbmZpZyA9IF9yZWYyLmNvbmZpZyxcbiAgICAgICAgICBjb25maWcgPSBfcmVmMiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZjIkY29uZmlnLFxuICAgICAgICAgIF9yZWYyJGwxMG4gPSBfcmVmMi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmMiRsMTBuID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX3JlZjIkbDEwbjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyc2VkRGF0ZTtcbiAgICAgICAgdmFyIGRhdGVfb3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJiBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZCkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO2Vsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdmFyIGZvcm1hdCA9IGdpdmVuRm9ybWF0IHx8IChjb25maWcgfHwgZGVmYXVsdHMpLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuXG4gICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHwgL0dNVCQvLnRlc3QoZGF0ZXN0cikpIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhciA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMCkgOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkLFxuICAgICAgICAgICAgICAgIG9wcyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gXCJcIjsgaSA8IGZvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBmb3JtYXRbaV07XG4gICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSBcIlxcXFxcIiB8fCBpc0JhY2tTbGFzaDtcblxuICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuZXcgUmVnRXhwKHJlZ2V4U3RyKS5leGVjKGRhdGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaGVkID0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XG4gICAgICAgICAgICAgICAgICAgIGZuOiByZXZGb3JtYXRbdG9rZW5dLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCYWNrU2xhc2gpIHJlZ2V4U3RyICs9IFwiLlwiO1xuXG4gICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IF9yZWYzLmZuLFxuICAgICAgICAgICAgICAgICAgICB2YWwgPSBfcmVmMy52YWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZERhdGUgPSBmbihwYXJzZWREYXRlLCB2YWwsIGwxMG4pIHx8IHBhcnNlZERhdGU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6IFwiICsgZGF0ZV9vcmlnKSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSkgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XG4gICAgICB9O1xuICAgIH07XG4gICAgZnVuY3Rpb24gY29tcGFyZURhdGVzKGRhdGUxLCBkYXRlMiwgdGltZWxlc3MpIHtcbiAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZTEuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtIG5ldyBEYXRlKGRhdGUyLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG4gICAgfVxuICAgIHZhciBnZXRXZWVrID0gZnVuY3Rpb24gZ2V0V2VlayhnaXZlbkRhdGUpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZ2l2ZW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtIChkYXRlLmdldERheSgpICsgNikgJSA3KTtcbiAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XG4gICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XG4gICAgfTtcbiAgICB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gaXNCZXR3ZWVuKHRzLCB0czEsIHRzMikge1xuICAgICAgcmV0dXJuIHRzID4gTWF0aC5taW4odHMxLCB0czIpICYmIHRzIDwgTWF0aC5tYXgodHMxLCB0czIpO1xuICAgIH07XG4gICAgdmFyIGR1cmF0aW9uID0ge1xuICAgICAgREFZOiA4NjQwMDAwMFxuICAgIH07XG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBfZGlzYWJsZTogW10sXG4gICAgICBfZW5hYmxlOiBbXSxcbiAgICAgIGFsbG93SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0Rm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0SW5wdXRDbGFzczogXCJmb3JtLWNvbnRyb2wgaW5wdXRcIixcbiAgICAgIGFuaW1hdGU6IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xLFxuICAgICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgICAgY2xvc2VPblNlbGVjdDogdHJ1ZSxcbiAgICAgIGNvbmp1bmN0aW9uOiBcIiwgXCIsXG4gICAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgICBkZWZhdWx0SG91cjogMTIsXG4gICAgICBkZWZhdWx0TWludXRlOiAwLFxuICAgICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgICBkaXNhYmxlOiBbXSxcbiAgICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLFxuICAgICAgZW5hYmxlOiBbXSxcbiAgICAgIGVuYWJsZVNlY29uZHM6IGZhbHNlLFxuICAgICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgICBlcnJvckhhbmRsZXI6IGNvbnNvbGUud2FybixcbiAgICAgIGdldFdlZWs6IGdldFdlZWssXG4gICAgICBob3VySW5jcmVtZW50OiAxLFxuICAgICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgIGxvY2FsZTogXCJkZWZhdWx0XCIsXG4gICAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgICBtb2RlOiBcInNpbmdsZVwiLFxuICAgICAgbmV4dEFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNMTMuMjA3IDguNDcybC03Ljg1NCA3Ljg1NC0wLjcwNy0wLjcwNyA3LjE0Ni03LjE0Ni03LjE0Ni03LjE0OCAwLjcwNy0wLjcwNyA3Ljg1NCA3Ljg1NHonIC8+PC9zdmc+XCIsXG4gICAgICBub0NhbGVuZGFyOiBmYWxzZSxcbiAgICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICAgIG9uQ2hhbmdlOiBbXSxcbiAgICAgIG9uQ2xvc2U6IFtdLFxuICAgICAgb25EYXlDcmVhdGU6IFtdLFxuICAgICAgb25EZXN0cm95OiBbXSxcbiAgICAgIG9uS2V5RG93bjogW10sXG4gICAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICAgIG9uT3BlbjogW10sXG4gICAgICBvblBhcnNlQ29uZmlnOiBbXSxcbiAgICAgIG9uUmVhZHk6IFtdLFxuICAgICAgb25WYWx1ZVVwZGF0ZTogW10sXG4gICAgICBvblllYXJDaGFuZ2U6IFtdLFxuICAgICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICAgIHBsdWdpbnM6IFtdLFxuICAgICAgcG9zaXRpb246IFwiYXV0b1wiLFxuICAgICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgICBwcmV2QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J001LjIwNyA4LjQ3MWw3LjE0NiA3LjE0Ny0wLjcwNyAwLjcwNy03Ljg1My03Ljg1NCA3Ljg1NC03Ljg1MyAwLjcwNyAwLjcwNy03LjE0NyA3LjE0NnonIC8+PC9zdmc+XCIsXG4gICAgICBzaG9ydGhhbmRDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgc2hvd01vbnRoczogMSxcbiAgICAgIHN0YXRpYzogZmFsc2UsXG4gICAgICB0aW1lXzI0aHI6IGZhbHNlLFxuICAgICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgICAgd3JhcDogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7XG4gICAgICBpZiAoYm9vbCA9PT0gdHJ1ZSkgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICAgIHZhciBlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICAgIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgaWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZCkgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgICAgaWYgKGNvbmRpdGlvbihub2RlKSkgcmV0dXJuIG5vZGU7ZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSByZXR1cm4gZmluZFBhcmVudChub2RlLnBhcmVudE5vZGUsIGNvbmRpdGlvbik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVOdW1iZXJJbnB1dChpbnB1dENsYXNzTmFtZSwgb3B0cykge1xuICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwibnVtSW5wdXRXcmFwcGVyXCIpLFxuICAgICAgICAgIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksXG4gICAgICAgICAgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dVcFwiKSxcbiAgICAgICAgICBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93RG93blwiKTtcbiAgICAgIG51bUlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZCkgZm9yICh2YXIga2V5IGluIG9wdHMpIHtcbiAgICAgICAgbnVtSW5wdXQuc2V0QXR0cmlidXRlKGtleSwgb3B0c1trZXldKTtcbiAgICAgIH1cbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dEb3duKTtcbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHNvdXJjZSkge1xuICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmdzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmdzW19pXTtcblxuICAgICAgICAgIF9sb29wKHNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDtcblxuICAgIGZ1bmN0aW9uIEZsYXRwaWNrckluc3RhbmNlKGVsZW1lbnQsIGluc3RhbmNlQ29uZmlnKSB7XG4gICAgICB2YXIgc2VsZiA9IHtcbiAgICAgICAgY29uZmlnOiBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyksXG4gICAgICAgIGwxMG46IGVuZ2xpc2hcbiAgICAgIH07XG4gICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoe1xuICAgICAgICBjb25maWc6IHNlbGYuY29uZmlnLFxuICAgICAgICBsMTBuOiBzZWxmLmwxMG5cbiAgICAgIH0pO1xuICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgIHNlbGYuX2JpbmQgPSBiaW5kO1xuICAgICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7XG4gICAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgICBzZWxmLmNoYW5nZVllYXIgPSBjaGFuZ2VZZWFyO1xuICAgICAgc2VsZi5jbGVhciA9IGNsZWFyO1xuICAgICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgICAgc2VsZi5fY3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQ7XG4gICAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgICAgc2VsZi5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XG4gICAgICBzZWxmLmp1bXBUb0RhdGUgPSBqdW1wVG9EYXRlO1xuICAgICAgc2VsZi5vcGVuID0gb3BlbjtcbiAgICAgIHNlbGYucmVkcmF3ID0gcmVkcmF3O1xuICAgICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgICBzZWxmLnNldERhdGUgPSBzZXREYXRlO1xuICAgICAgc2VsZi50b2dnbGUgPSB0b2dnbGU7XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwSGVscGVyRnVuY3Rpb25zKCkge1xuICAgICAgICBzZWxmLnV0aWxzID0ge1xuICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiBnZXREYXlzSW5Nb250aChtb250aCwgeXIpIHtcbiAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHlyID0gc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1vbnRoID09PSAxICYmICh5ciAlIDQgPT09IDAgJiYgeXIgJSAxMDAgIT09IDAgfHwgeXIgJSA0MDAgPT09IDApKSByZXR1cm4gMjk7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5sMTBuLmRheXNJbk1vbnRoW21vbnRoXTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHNlbGYuZWxlbWVudCA9IHNlbGYuaW5wdXQgPSBlbGVtZW50O1xuICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICBwYXJzZUNvbmZpZygpO1xuICAgICAgICBzZXR1cExvY2FsZSgpO1xuICAgICAgICBzZXR1cElucHV0cygpO1xuICAgICAgICBzZXR1cERhdGVzKCk7XG4gICAgICAgIHNldHVwSGVscGVyRnVuY3Rpb25zKCk7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkgYnVpbGQoKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogfHwgc2VsZi5jb25maWcubWluRGF0ZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDAgfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcjtcblxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5c0NvbnRhaW5lci5vZmZzZXRXaWR0aCArIDEpICogc2VsZi5jb25maWcuc2hvd01vbnRocztcbiAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcblxuICAgICAgICAgIGlmIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRUb0luc3RhbmNlKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgdGltZVdyYXBwZXIoZSk7XG5cbiAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICB9LCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhbXBtMm1pbGl0YXJ5KGhvdXIsIGFtUE0pIHtcbiAgICAgICAgcmV0dXJuIGhvdXIgJSAxMiArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICByZXR1cm4gMTI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdXJzID0gKHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUuc2xpY2UoLTIpLCAxMCkgfHwgMCkgJSAyNCxcbiAgICAgICAgICAgIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCxcbiAgICAgICAgICAgIHNlY29uZHMgPSBzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwIDogMDtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBob3VycyA9IGFtcG0ybWlsaXRhcnkoaG91cnMsIHNlbGYuYW1QTS50ZXh0Q29udGVudCk7XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJiBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PSAwO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYubWF4RGF0ZUhhc1RpbWUgJiYgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiYgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT0gMDtcblxuICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xuICAgICAgICAgIHZhciBtYXhUaW1lID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWF4VGltZSA6IHNlbGYuY29uZmlnLm1heERhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4VGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWF4VGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGltaXRNaW5Ib3Vycykge1xuICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWluVGltZSA6IHNlbGYuY29uZmlnLm1pbkRhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWF4KG1pbnV0ZXMsIG1pblRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1heChzZWNvbmRzLCBtaW5UaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlKSBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgICAgIGlmIChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouc2V0SG91cnMoaG91cnMgJSAyNCwgbWludXRlcywgc2Vjb25kcyB8fCAwLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5ob3VyRWxlbWVudCB8fCAhc2VsZi5taW51dGVFbGVtZW50IHx8IHNlbGYuaXNNb2JpbGUpIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyID8gKDEyICsgaG91cnMpICUgMTIgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKSA6IGhvdXJzKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKG1pbnV0ZXMpO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChob3VycyA+PSAxMildO1xuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpICsgKGV2ZW50LmRlbHRhIHx8IDApO1xuXG4gICAgICAgIGlmICh5ZWFyLnRvU3RyaW5nKCkubGVuZ3RoID09PSA0IHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICBpZiAoIS9bXlxcZF0vLnRlc3QoeWVhci50b1N0cmluZygpKSkgY2hhbmdlWWVhcih5ZWFyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICByZXR1cm4gYmluZChlbGVtZW50LCBldiwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzLnB1c2goe1xuICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uQ2xpY2soaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIGV2dC53aGljaCA9PT0gMSAmJiBoYW5kbGVyKGV2dCk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgIFtcIm9wZW5cIiwgXCJjbG9zZVwiLCBcInRvZ2dsZVwiLCBcImNsZWFyXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUpIHtcbiAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3ZlcihlLnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMpIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmlubGluZSAmJiAhc2VsZi5jb25maWcuc3RhdGljKSBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZCkgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwidG91Y2hzdGFydFwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soZG9jdW1lbnRDbGljaykpO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJmb2N1c1wiLCBkb2N1bWVudENsaWNrLCB7XG4gICAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGYub3BlbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKG9uTW9udGhOYXZDbGljaykpO1xuICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgW1wia2V5dXBcIiwgXCJpbmNyZW1lbnRcIl0sIG9uWWVhcklucHV0KTtcbiAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayhzZWxlY3REYXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiYgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNlbFRleHQgPSBmdW5jdGlvbiBzZWxUZXh0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5zZWxlY3QoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCB1cGRhdGVUaW1lKTtcbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayh0aW1lSW5jcmVtZW50KSk7XG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UsIHtcbiAgICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBiaW5kKFtzZWxmLmhvdXJFbGVtZW50LCBzZWxmLm1pbnV0ZUVsZW1lbnRdLCBbXCJmb2N1c1wiLCBcImNsaWNrXCJdLCBzZWxUZXh0KTtcbiAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5zZWNvbmRFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJtb3VzZWRvd25cIiwgb25DbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUpIHtcbiAgICAgICAgdmFyIGp1bXBUbyA9IGp1bXBEYXRlICE9PSB1bmRlZmluZWQgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSkgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fCAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5taW5EYXRlIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmNvbmZpZy5tYXhEYXRlIDwgc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5tYXhEYXRlIDogc2VsZi5ub3cpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGp1bXBUbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0ganVtcFRvLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGUubWVzc2FnZSA9IFwiSW52YWxpZCBkYXRlIHN1cHBsaWVkOiBcIiArIGp1bXBUbztcbiAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcbiAgICAgICAgaWYgKH5lLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKSBpbmNyZW1lbnROdW1JbnB1dChlLCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd1VwXCIpID8gMSA6IC0xKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW5jcmVtZW50TnVtSW5wdXQoZSwgZGVsdGEsIGlucHV0RWxlbSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZSAmJiBlLnRhcmdldDtcbiAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRFbGVtIHx8IHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICAgICAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudChcImluY3JlbWVudFwiKTtcbiAgICAgICAgZXZlbnQuZGVsdGEgPSBkZWx0YTtcbiAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTW9udGhOYXYoKSk7XG4gICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgIHZhciBfYnVpbGRXZWVrcyA9IGJ1aWxkV2Vla3MoKSxcbiAgICAgICAgICAgICAgICB3ZWVrV3JhcHBlciA9IF9idWlsZFdlZWtzLndlZWtXcmFwcGVyLFxuICAgICAgICAgICAgICAgIHdlZWtOdW1iZXJzID0gX2J1aWxkV2Vla3Mud2Vla051bWJlcnM7XG5cbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1dyYXBwZXIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgc2VsZi53ZWVrV3JhcHBlciA9IHdlZWtXcmFwcGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcblxuICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuckNvbnRhaW5lcik7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmFuZ2VNb2RlXCIsIHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIik7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYW5pbWF0ZVwiLCBzZWxmLmNvbmZpZy5hbmltYXRlID09PSB0cnVlKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJtdWx0aU1vbnRoXCIsIHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIHZhciBjdXN0b21BcHBlbmQgPSBzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkICYmIHNlbGYuY29uZmlnLmFwcGVuZFRvLm5vZGVUeXBlICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7ZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCkgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcuYXBwZW5kVG8gOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIGRheU51bWJlciwgaSkge1xuICAgICAgICB2YXIgZGF0ZUlzRW5hYmxlZCA9IGlzRW5hYmxlZChkYXRlLCB0cnVlKSxcbiAgICAgICAgICAgIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1kYXkgXCIgKyBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuXG4gICAgICAgIGlmIChjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgc2VsZi50b2RheURhdGVFbGVtID0gZGF5RWxlbWVudDtcbiAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlSXNFbmFibGVkKSB7XG4gICAgICAgICAgZGF5RWxlbWVudC50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgICAgaWYgKGlzRGF0ZVNlbGVjdGVkKGRhdGUpKSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJzdGFydFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0sIHRydWUpID09PSAwKTtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gXCJuZXh0TW9udGhEYXlcIikgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKSBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJiBjbGFzc05hbWUgIT09IFwicHJldk1vbnRoRGF5XCIgJiYgZGF5TnVtYmVyICUgNyA9PT0gMSkge1xuICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheShjdXJyZW50SW5kLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGN1cnJlbnRJbmQgIT09IHVuZGVmaW5lZCA/IGN1cnJlbnRJbmQgOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LiRpO1xuICAgICAgICB2YXIgbmV3SW5kZXggPSAoY3VycmVudEluZGV4IHx8IDApICsgb2Zmc2V0IHx8IDAsXG4gICAgICAgICAgICB0YXJnZXROb2RlID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChzZWxmLmRheXMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICAgICAgcmV0dXJuIGkgPj0gbmV3SW5kZXggJiYgYy5jbGFzc05hbWUuaW5kZXhPZihcIk1vbnRoRGF5XCIpID09PSAtMSAmJiBpc0VuYWJsZWQoYy5kYXRlT2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRhcmdldE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRhcmdldE5vZGUuZm9jdXMoKTtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgpLFxuICAgICAgICAgICAgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCxcbiAgICAgICAgICAgIGRheUluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJwcmV2TW9udGhEYXlcIiwgbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIlwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGggJiYgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgfHwgZGF5SW5kZXggJSA3ICE9PSAwKTsgZGF5TnVtKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIm5leHRNb250aERheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheU51bSAlIGRheXNJbk1vbnRoKSwgZGF5TnVtLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpIGNsZWFyTm9kZShzZWxmLndlZWtOdW1iZXJzKTtcbiAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpKyspIHtcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKTtcbiAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChidWlsZE1vbnRoRGF5cyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aCgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhcIik7XG4gICAgICAgIHZhciBtb250aE5hdkZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICBtb250aEVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHZhciB5ZWFySW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImN1ci15ZWFyXCIsIHtcbiAgICAgICAgICB0YWJpbmRleDogXCItMVwiXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgeWVhckVsZW1lbnQgPSB5ZWFySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgeWVhckVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLnllYXJBcmlhTGFiZWwpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSkgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG4gICAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIHllYXJFbGVtZW50LmRpc2FibGVkID0gISFzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY3VycmVudC1tb250aFwiKTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKG1vbnRoRWxlbWVudCk7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZCh5ZWFySW5wdXQpO1xuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKGN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aE5hdkZyYWdtZW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICB5ZWFyRWxlbWVudDogeWVhckVsZW1lbnQsXG4gICAgICAgICAgbW9udGhFbGVtZW50OiBtb250aEVsZW1lbnRcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhzXCIpO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7XG4gICAgICAgIHNlbGYubmV4dE1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItbmV4dC1tb250aFwiKTtcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcblxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgIHZhciBtb250aCA9IGJ1aWxkTW9udGgoKTtcbiAgICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5wdXNoKG1vbnRoLnllYXJFbGVtZW50KTtcbiAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQobW9udGguY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgIT09IGJvb2wpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5wcmV2TW9udGhOYXYsIFwiZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3c7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLm5leHRNb250aE5hdiwgXCJkaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQgPSBzZWxmLnllYXJFbGVtZW50c1swXTtcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICByZXR1cm4gc2VsZi5tb250aE5hdjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRUaW1lKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNUaW1lXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhcikgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm9DYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKTtcbiAgICAgICAgdmFyIGhvdXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLWhvdXJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgdmFyIG1pbnV0ZUlucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItbWludXRlXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgPSBtaW51dGVJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpIDogc2VsZi5jb25maWcudGltZV8yNGhyID8gc2VsZi5jb25maWcuZGVmYXVsdEhvdXIgOiBtaWxpdGFyeTJhbXBtKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiLCBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjBcIiA6IFwiMVwiKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjIzXCIgOiBcIjEyXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgXCIwXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJJbnB1dCk7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQobWludXRlSW5wdXQpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcudGltZV8yNGhyKSBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUyNGhyXCIpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNTZWNvbmRzXCIpO1xuICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmhvdXJFbGVtZW50LnZhbHVlIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuICAgICAgICAgIHNlbGYuYW1QTS50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGYudGltZUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRXZWVrZGF5cygpIHtcbiAgICAgICAgaWYgKCFzZWxmLndlZWtkYXlDb250YWluZXIpIHNlbGYud2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcbiAgICAgICAgdmFyIHdlZWtkYXlzID0gc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5jb25jYXQoKTtcblxuICAgICAgICBpZiAoZmlyc3REYXlPZldlZWsgPiAwICYmIGZpcnN0RGF5T2ZXZWVrIDwgd2Vla2RheXMubGVuZ3RoKSB7XG4gICAgICAgICAgd2Vla2RheXMgPSB3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCkuY29uY2F0KHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cXG4gICAgICAgIFwiICsgd2Vla2RheXMuam9pbihcIjwvc3Bhbj48c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cIikgKyBcIlxcbiAgICAgIDwvc3Bhbj5cXG4gICAgICBcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFdlZWtzKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNXZWVrc1wiKTtcbiAgICAgICAgdmFyIHdlZWtXcmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrd3JhcHBlclwiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3Itd2Vla2RheVwiLCBzZWxmLmwxMG4ud2Vla0FiYnJldmlhdGlvbikpO1xuICAgICAgICB2YXIgd2Vla051bWJlcnMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtzXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZCh3ZWVrTnVtYmVycyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVyc1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNfb2Zmc2V0LCBmcm9tX2tleWJvYXJkKSB7XG4gICAgICAgIGlmIChpc19vZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGlzX29mZnNldCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZnJvbV9rZXlib2FyZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlbHRhID0gaXNfb2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoZGVsdGEgPCAwICYmIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdyA9PT0gdHJ1ZSB8fCBkZWx0YSA+IDAgJiYgc2VsZi5faGlkZU5leHRNb250aEFycm93ID09PSB0cnVlKSByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuXG4gICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG5cbiAgICAgICAgaWYgKGZyb21fa2V5Ym9hcmQgPT09IHRydWUpIHtcbiAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCkgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlKTtlbHNlIHNldEhvdXJzKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyLCBzZWxmLmNvbmZpZy5kZWZhdWx0TWludXRlLCBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcblxuICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZCkgdHJpZ2dlckV2ZW50KFwib25EZXN0cm95XCIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLl9oYW5kbGVycy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICB2YXIgaCA9IHNlbGYuX2hhbmRsZXJzW2ldO1xuICAgICAgICAgIGguZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGguZXZlbnQsIGguaGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuXG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0KSB7XG4gICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZSkgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcblxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICBkZWxldGUgc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gc2VsZi5pbnB1dC5fdHlwZTtcbiAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFtcIl9zaG93VGltZUlucHV0XCIsIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9faGlkZVByZXZNb250aEFycm93XCIsIFwiaXNNb2JpbGVcIiwgXCJpc09wZW5cIiwgXCJzZWxlY3RlZERhdGVFbGVtXCIsIFwibWluRGF0ZUhhc1RpbWVcIiwgXCJtYXhEYXRlSGFzVGltZVwiLCBcImRheXNcIiwgXCJkYXlzQ29udGFpbmVyXCIsIFwiX2lucHV0XCIsIFwiX3Bvc2l0aW9uRWxlbWVudFwiLCBcImlubmVyQ29udGFpbmVyXCIsIFwickNvbnRhaW5lclwiLCBcIm1vbnRoTmF2XCIsIFwidG9kYXlEYXRlRWxlbVwiLCBcImNhbGVuZGFyQ29udGFpbmVyXCIsIFwid2Vla2RheUNvbnRhaW5lclwiLCBcInByZXZNb250aE5hdlwiLCBcIm5leHRNb250aE5hdlwiLCBcImN1cnJlbnRNb250aEVsZW1lbnRcIiwgXCJjdXJyZW50WWVhckVsZW1lbnRcIiwgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsIFwic2VsZWN0ZWREYXRlRWxlbVwiLCBcImNvbmZpZ1wiXS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmW2tdO1xuICAgICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0NhbGVuZGFyRWxlbShlbGVtKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAmJiBzZWxmLmNvbmZpZy5hcHBlbmRUby5jb250YWlucyhlbGVtKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICB2YXIgaXNDYWxlbmRhckVsZW1lbnQgPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5pbnB1dCB8fCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCB8fCBzZWxmLmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpIHx8IGUucGF0aCAmJiBlLnBhdGguaW5kZXhPZiAmJiAofmUucGF0aC5pbmRleE9mKHNlbGYuaW5wdXQpIHx8IH5lLnBhdGguaW5kZXhPZihzZWxmLmFsdElucHV0KSk7XG4gICAgICAgICAgdmFyIGxvc3RGb2N1cyA9IGUudHlwZSA9PT0gXCJibHVyXCIgPyBpc0lucHV0ICYmIGUucmVsYXRlZFRhcmdldCAmJiAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KSA6ICFpc0lucHV0ICYmICFpc0NhbGVuZGFyRWxlbWVudDtcbiAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChsb3N0Rm9jdXMgJiYgaXNJZ25vcmVkKSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hhbmdlWWVhcihuZXdZZWFyKSB7XG4gICAgICAgIGlmICghbmV3WWVhciB8fCBzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgfHwgc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSByZXR1cm47XG4gICAgICAgIHZhciBuZXdZZWFyTnVtID0gbmV3WWVhcixcbiAgICAgICAgICAgIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IG5ld1llYXJOdW07XG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBuZXdZZWFyTnVtIHx8IHNlbGYuY3VycmVudFllYXI7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1pbihzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNFbmFibGVkKGRhdGUsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA9PT0gMCAmJiBzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBib29sID0gc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICBhcnJheSA9IGJvb2wgPyBzZWxmLmNvbmZpZy5lbmFibGUgOiBzZWxmLmNvbmZpZy5kaXNhYmxlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBkID0gYXJyYXlbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiYgZChkYXRlVG9DaGVjaykpIHJldHVybiBib29sO2Vsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSkgcmV0dXJuIGJvb2w7ZWxzZSBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHNlbGYucGFyc2VEYXRlKGQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSA/IGJvb2wgOiAhYm9vbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5mcm9tICYmIGQudG8gJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpID49IGQuZnJvbS5nZXRUaW1lKCkgJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKSByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5faW5wdXQ7XG4gICAgICAgIHZhciBjYWxlbmRhckVsZW0gPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgIHZhciBhbGxvd0lucHV0ID0gc2VsZi5jb25maWcuYWxsb3dJbnB1dDtcbiAgICAgICAgdmFyIGFsbG93S2V5ZG93biA9IHNlbGYuaXNPcGVuICYmICghYWxsb3dJbnB1dCB8fCAhaXNJbnB1dCk7XG4gICAgICAgIHZhciBhbGxvd0lubGluZUtleWRvd24gPSBzZWxmLmNvbmZpZy5pbmxpbmUgJiYgaXNJbnB1dCAmJiAhYWxsb3dJbnB1dDtcblxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7XG4gICAgICAgICAgaWYgKGFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgdHJ1ZSwgZS50YXJnZXQgPT09IHNlbGYuYWx0SW5wdXQgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5ibHVyKCk7XG4gICAgICAgICAgfSBlbHNlIHNlbGYub3BlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyRWxlbSB8fCBhbGxvd0tleWRvd24gfHwgYWxsb3dJbmxpbmVLZXlkb3duKSB7XG4gICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmIHNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCk7XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikgdXBkYXRlVmFsdWUoKTtlbHNlIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX2RlbHRhID0gaXNJbnB1dCA/IDAgOiBlLmtleUNvZGUgPT09IDM5ID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkgZm9jdXNPbkRheSh1bmRlZmluZWQsIF9kZWx0YSk7ZWxzZSBjaGFuZ2VNb250aChfZGVsdGEsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUua2V5Q29kZSA9PT0gNDAgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiBlLnRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShlLnRhcmdldC4kaSwgMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNUaW1lT2JqKSBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCBkZWx0YSAqIDcpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBzZWxmLmhvdXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5taW51dGVFbGVtZW50ICYmIChzZWxmLnNlY29uZEVsZW1lbnQgfHwgc2VsZi5hbVBNKSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC5mb2N1cygpO2Vsc2UgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMF07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzFdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbktleURvd25cIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25Nb3VzZU92ZXIoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fCAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpIHx8IGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBpbml0aWFsRGF0ZSA9IHNlbGYucGFyc2VEYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdW5kZWZpbmVkLCB0cnVlKS5nZXRUaW1lKCksXG4gICAgICAgICAgICByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksXG4gICAgICAgICAgICByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgbW9udGhzID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuLFxuICAgICAgICAgICAgZmlyc3REYXkgPSBtb250aHNbMF0uY2hpbGRyZW5bMF0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBsYXN0RGF5ID0gbW9udGhzW21vbnRocy5sZW5ndGggLSAxXS5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsXG4gICAgICAgICAgICBtYXhSYW5nZSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgdCA9IGZpcnN0RGF5OyB0IDwgbGFzdERheTsgdCArPSBkdXJhdGlvbi5EQVkpIHtcbiAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPSBjb250YWluc0Rpc2FibGVkIHx8IHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlO1xuICAgICAgICAgICAgaWYgKHQgPCBpbml0aWFsRGF0ZSAmJiAoIW1pblJhbmdlIHx8IHQgPiBtaW5SYW5nZSkpIG1pblJhbmdlID0gdDtlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKSBtYXhSYW5nZSA9IHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtKyspIHtcbiAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgdmFyIHByZXZNb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttIC0gMV07XG5cbiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpLCBsKSB7XG4gICAgICAgICAgICB2YXIgZGF5RWxlbSA9IG1vbnRoLmNoaWxkcmVuW2ldLFxuICAgICAgICAgICAgICAgIGRhdGUgPSBkYXlFbGVtLmRhdGVPYmo7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgb3V0T2ZSYW5nZSA9IG1pblJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPCBtaW5SYW5nZSB8fCBtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2U7XG5cbiAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7XG4gICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zRGlzYWJsZWQgJiYgIW91dE9mUmFuZ2UpIHJldHVybiBcImNvbnRpbnVlXCI7XG5cbiAgICAgICAgICAgIFtcInN0YXJ0UmFuZ2VcIiwgXCJpblJhbmdlXCIsIFwiZW5kUmFuZ2VcIiwgXCJub3RBbGxvd2VkXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoaG92ZXJEYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSA/IFwic3RhcnRSYW5nZVwiIDogXCJlbmRSYW5nZVwiKTtcblxuICAgICAgICAgICAgaWYgKG1vbnRoLmNvbnRhaW5zKGVsZW0pIHx8ICEobSA+IDAgJiYgcHJldk1vbnRoICYmIHByZXZNb250aC5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCkgPj0gdGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwic3RhcnRSYW5nZVwiKTtlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA+PSBtaW5SYW5nZSAmJiAobWF4UmFuZ2UgPT09IDAgfHwgdGltZXN0YW1wIDw9IG1heFJhbmdlKSAmJiBpc0JldHdlZW4odGltZXN0YW1wLCBpbml0aWFsRGF0ZSwgaG92ZXJEYXRlKSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBfcmV0ID0gX2xvb3AoaSwgbCk7XG5cbiAgICAgICAgICAgIGlmIChfcmV0ID09PSBcImNvbnRpbnVlXCIpIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvcGVuKGUsIHBvc2l0aW9uRWxlbWVudCkge1xuICAgICAgICBpZiAocG9zaXRpb25FbGVtZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9pbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUudGFyZ2V0ICYmIGUudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHJldHVybjtcbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcbiAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlO1xuXG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG5cbiAgICAgICAgICBzZWxmLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIocG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlICYmIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKSA6IG5ldyBEYXRlKCkuc2V0SG91cnMoc2VsZi5jb25maWcuZGVmYXVsdEhvdXIsIHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUsIHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzLCAwKSwgZmFsc2UpO1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgICAgfSwgNTApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICB2YXIgZGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgdHlwZSArIFwiRGF0ZVwiXSA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XG5cbiAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID0gZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fCBkYXRlT2JqLmdldE1pbnV0ZXMoKSA+IDAgfHwgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlzRW5hYmxlZChkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgaWYgKGRhdGVPYmogIT09IHVuZGVmaW5lZCkgc2VsZi5jdXJyZW50WWVhckVsZW1lbnRbdHlwZV0gPSBkYXRlT2JqLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtlbHNlIHNlbGYuY3VycmVudFllYXJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0eXBlKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID0gISFpbnZlcnNlRGF0ZU9iaiAmJiBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiYgaW52ZXJzZURhdGVPYmouZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZU9iai5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcIndyYXBcIiwgXCJ3ZWVrTnVtYmVyc1wiLCBcImFsbG93SW5wdXRcIiwgXCJjbGlja09wZW5zXCIsIFwidGltZV8yNGhyXCIsIFwiZW5hYmxlVGltZVwiLCBcIm5vQ2FsZW5kYXJcIiwgXCJhbHRJbnB1dFwiLCBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLCBcImlubGluZVwiLCBcInN0YXRpY1wiLCBcImVuYWJsZVNlY29uZHNcIiwgXCJkaXNhYmxlTW9iaWxlXCJdO1xuICAgICAgICB2YXIgaG9va3MgPSBbXCJvbkNoYW5nZVwiLCBcIm9uQ2xvc2VcIiwgXCJvbkRheUNyZWF0ZVwiLCBcIm9uRGVzdHJveVwiLCBcIm9uS2V5RG93blwiLCBcIm9uTW9udGhDaGFuZ2VcIiwgXCJvbk9wZW5cIiwgXCJvblBhcnNlQ29uZmlnXCIsIFwib25SZWFkeVwiLCBcIm9uVmFsdWVVcGRhdGVcIiwgXCJvblllYXJDaGFuZ2VcIiwgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIl07XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFuY2VDb25maWcsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpO1xuICAgICAgICB2YXIgZm9ybWF0cyQkMSA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX2VuYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZGlzYWJsZSA9IHBhcnNlRGF0ZVJ1bGVzKGRhdGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZvcm1hdHMkJDEuZGF0ZUZvcm1hdCA9IHVzZXJDb25maWcubm9DYWxlbmRhciA/IFwiSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgOiBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlckNvbmZpZy5hbHRJbnB1dCAmJiB1c2VyQ29uZmlnLmVuYWJsZVRpbWUgJiYgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XG4gICAgICAgICAgZm9ybWF0cyQkMS5hbHRGb3JtYXQgPSB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKSA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCArIChcIiBoOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKSArIFwiIEtcIik7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluRGF0ZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhEYXRlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4RGF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWluTWF4VGltZVNldHRlciA9IGZ1bmN0aW9uIG1pbk1heFRpbWVTZXR0ZXIodHlwZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSBcIm1pblwiID8gXCJfbWluVGltZVwiIDogXCJfbWF4VGltZVwiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgXCJIOmlcIik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhUaW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cyQkMSwgdXNlckNvbmZpZyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29sT3B0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9IHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fCBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSBob29rcy5sZW5ndGg7IF9pLS07KSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnW2hvb2tzW19pXV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va3NbX2ldXSA9IGFycmF5aWZ5KHNlbGYuY29uZmlnW2hvb2tzW19pXV0gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgc2VsZi5jb25maWcubm9DYWxlbmRhciA9IHRydWU7XG4gICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbX2kyXShzZWxmKSB8fCB7fTtcblxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICBpZiAofmhvb2tzLmluZGV4T2Yoa2V5KSkge1xuICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gYXJyYXlpZnkocGx1Z2luQ29uZltrZXldKS5tYXAoYmluZFRvSW5zdGFuY2UpLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIikgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlzTW9iaWxlID0gIXNlbGYuY29uZmlnLmRpc2FibGVNb2JpbGUgJiYgIXNlbGYuY29uZmlnLmlubGluZSAmJiBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmICFzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiYgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKSBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSBcIiArIHNlbGYuY29uZmlnLmxvY2FsZSkpO1xuICAgICAgICBzZWxmLmwxMG4gPSBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgdHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gXCJvYmplY3RcIiA/IHNlbGYuY29uZmlnLmxvY2FsZSA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCIgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHNlbGYuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIpO1xuICAgICAgICB2YXIgcG9zaXRpb25FbGVtZW50ID0gY3VzdG9tUG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDtcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7XG4gICAgICAgICAgcmV0dXJuIGFjYyArIGNoaWxkLm9mZnNldEhlaWdodDtcbiAgICAgICAgfSwgMCksXG4gICAgICAgICAgICBjYWxlbmRhcldpZHRoID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLFxuICAgICAgICAgICAgaW5wdXRCb3VuZHMgPSBwb3NpdGlvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sXG4gICAgICAgICAgICBzaG93T25Ub3AgPSBjb25maWdQb3MgPT09IFwiYWJvdmVcIiB8fCBjb25maWdQb3MgIT09IFwiYmVsb3dcIiAmJiBkaXN0YW5jZUZyb21Cb3R0b20gPCBjYWxlbmRhckhlaWdodCAmJiBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodDtcbiAgICAgICAgdmFyIHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIGlucHV0Qm91bmRzLnRvcCArICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSByZXR1cm47XG4gICAgICAgIHZhciBsZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMubGVmdDtcbiAgICAgICAgdmFyIHJpZ2h0ID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBpbnB1dEJvdW5kcy5yaWdodDtcbiAgICAgICAgdmFyIHJpZ2h0TW9zdCA9IGxlZnQgKyBjYWxlbmRhcldpZHRoID4gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmlnaHRNb3N0XCIsIHJpZ2h0TW9zdCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpIHJldHVybjtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG5cbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gcmlnaHQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKSByZXR1cm47XG4gICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpICE9PSAtMSB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2V0VGltZW91dChzZWxmLmNsb3NlLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gZnVuY3Rpb24gaXNTZWxlY3RhYmxlKGRheSkge1xuICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikgJiYgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0ID0gZmluZFBhcmVudChlLnRhcmdldCwgaXNTZWxlY3RhYmxlKTtcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUodGFyZ2V0LmRhdGVPYmouZ2V0VGltZSgpKTtcbiAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHwgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPiBzZWxmLmN1cnJlbnRNb250aCArIHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxKSAmJiBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtzZWxlY3RlZERhdGVdO2Vsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwibXVsdGlwbGVcIikge1xuICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gaXNEYXRlU2VsZWN0ZWQoc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCkgc2VsZi5zZWxlY3RlZERhdGVzLnNwbGljZShwYXJzZUludChzZWxlY3RlZEluZGV4KSwgMSk7ZWxzZSBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHRydWUpICE9PSAwKSBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG5cbiAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7XG4gICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgIGlmIChpc05ld1llYXIpIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmNvbmZpZy5lbmFibGVUaW1lICYmIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuY29uZmlnLm1pbkRhdGUpID09PSAwKSBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHRydWU7XG4gICAgICAgIH0sIDUwKTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyKHRhcmdldCk7XG4gICAgICAgICAgfSBlbHNlIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2hvdWxkQ2hhbmdlTW9udGggJiYgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiICYmIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpIGZvY3VzT25EYXkodGFyZ2V0LiRpLCAwKTtlbHNlIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSAmJiBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0uZm9jdXMoKTtcbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICB9LCA0NTEpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgdmFyIHNpbmdsZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgdmFyIHJhbmdlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG5cbiAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XG4gICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZV1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNldChvcHRpb24sIHZhbHVlKSB7XG4gICAgICAgIGlmIChvcHRpb24gIT09IG51bGwgJiYgdHlwZW9mIG9wdGlvbiA9PT0gXCJvYmplY3RcIikgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgb3B0aW9uKTtlbHNlIHtcbiAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpIENBTExCQUNLU1tvcHRpb25dLmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZERhdGUoaW5wdXREYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIGRhdGVzID0gW107XG4gICAgICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBBcnJheSkgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7XG4gICAgICAgIH0pO2Vsc2UgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJudW1iZXJcIikgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc3dpdGNoIChzZWxmLmNvbmZpZy5tb2RlKSB7XG4gICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibXVsdGlwbGVcIjpcbiAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxuICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5zcGxpdChzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZCBpbnN0YW5jZW9mIERhdGUgJiYgaXNFbmFibGVkKGQsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXREYXRlKGRhdGUsIHRyaWdnZXJDaGFuZ2UsIGZvcm1hdCkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZm9ybWF0ID0gc2VsZi5jb25maWcuZGF0ZUZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWREYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwO1xuICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSkgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikge1xuICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fCBydWxlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChydWxlICYmIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmIHJ1bGUuZnJvbSAmJiBydWxlLnRvKSByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogc2VsZi5wYXJzZURhdGUocnVsZS5mcm9tLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZClcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0dXBEYXRlcygpIHtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107XG4gICAgICAgIHNlbGYubm93ID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubm93KSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICB2YXIgcHJlbG9hZGVkRGF0ZSA9IHNlbGYuY29uZmlnLmRlZmF1bHREYXRlIHx8IHNlbGYuaW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChwcmVsb2FkZWREYXRlKSBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHZhciBpbml0aWFsRGF0ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwID8gc2VsZi5zZWxlY3RlZERhdGVzWzBdIDogc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKSA/IHNlbGYuY29uZmlnLm1pbkRhdGUgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0VGltZSgpIDwgc2VsZi5ub3cuZ2V0VGltZSgpID8gc2VsZi5jb25maWcubWF4RGF0ZSA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gaW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBpbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkKSBzZWxmLmNvbmZpZy5taW5UaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWluVGltZSwgXCJIOmlcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQpIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWluRGF0ZSAmJiAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWF4RGF0ZSAmJiAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwic2hvd1RpbWVJbnB1dFwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fc2hvd1RpbWVJbnB1dDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2wpIHtcbiAgICAgICAgICAgIHNlbGYuX3Nob3dUaW1lSW5wdXQgPSBib29sO1xuICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIpIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwic2hvd1RpbWVJbnB1dFwiLCBib29sKTtcbiAgICAgICAgICAgIHNlbGYuaXNPcGVuICYmIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cElucHV0cygpIHtcbiAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuY29uZmlnLndyYXAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbnB1dF1cIikgOiBlbGVtZW50O1xuXG4gICAgICAgIGlmICghc2VsZi5pbnB1dCkge1xuICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IGVsZW1lbnQgc3BlY2lmaWVkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0Ll90eXBlID0gc2VsZi5pbnB1dC50eXBlO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xuICAgICAgICBzZWxmLl9pbnB1dCA9IHNlbGYuaW5wdXQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsdElucHV0KSB7XG4gICAgICAgICAgc2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBcIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnRhYkluZGV4ID0gc2VsZi5pbnB1dC50YWJJbmRleDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmFsdElucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dCkgc2VsZi5faW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZi5fcG9zaXRpb25FbGVtZW50ID0gc2VsZi5jb25maWcucG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX2lucHV0O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cE1vYmlsZSgpIHtcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gXCJ0aW1lXCIgOiBcImRhdGV0aW1lLWxvY2FsXCIgOiBcImRhdGVcIjtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBzZWxmLmlucHV0LmNsYXNzTmFtZSArIFwiIGZsYXRwaWNrci1tb2JpbGVcIik7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQuc3RlcCA9IHNlbGYuaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSB8fCBcImFueVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9IGlucHV0VHlwZSA9PT0gXCJkYXRldGltZS1sb2NhbFwiID8gXCJZLW0tZFxcXFxUSDppOlNcIiA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCIgPyBcIlktbS1kXCIgOiBcIkg6aTpTXCI7XG5cbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHNlbGYubW9iaWxlSW5wdXQubWluID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSBzZWxmLm1vYmlsZUlucHV0Lm1heCA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5tYXhEYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSBzZWxmLmFsdElucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLm1vYmlsZUlucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfSBjYXRjaCAoX2EpIHt9XG5cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHNlbGYuc2V0RGF0ZShlLnRhcmdldC52YWx1ZSwgZmFsc2UsIHNlbGYubW9iaWxlRm9ybWF0U3RyKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4pIHJldHVybiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdmFyIGhvb2tzID0gc2VsZi5jb25maWdbZXZlbnRdO1xuXG4gICAgICAgIGlmIChob29rcyAhPT0gdW5kZWZpbmVkICYmIGhvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaG9va3NbaV0gJiYgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiY2hhbmdlXCIpKTtcbiAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJpbnB1dFwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgICAgIGUuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNEYXRlU2VsZWN0ZWQoZGF0ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZi5zZWxlY3RlZERhdGVzW2ldLCBkYXRlKSA9PT0gMCkgcmV0dXJuIFwiXCIgKyBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSkgPj0gMCAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA8PSAwO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KSByZXR1cm47XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHllYXJFbGVtZW50LCBpKSB7XG4gICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICB5ZWFyRWxlbWVudC52YWx1ZSA9IGQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID0gc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCA8PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID0gc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHNlbGYuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG5cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikge1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cikgOiBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGpvaW5DaGFyID0gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiID8gc2VsZi5jb25maWcuY29uanVuY3Rpb24gOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3I7XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG5cbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIHNlbGYuY29uZmlnLmFsdEZvcm1hdCk7XG4gICAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBpc1ByZXZNb250aCA9IHNlbGYucHJldk1vbnRoTmF2LmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIGlzTmV4dE1vbnRoID0gc2VsZi5uZXh0TW9udGhOYXYuY29udGFpbnMoZS50YXJnZXQpO1xuXG4gICAgICAgIGlmIChpc1ByZXZNb250aCB8fCBpc05leHRNb250aCkge1xuICAgICAgICAgIGNoYW5nZU1vbnRoKGlzUHJldk1vbnRoID8gLTEgOiAxKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLnllYXJFbGVtZW50cy5pbmRleE9mKGUudGFyZ2V0KSA+PSAwKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikpIHtcbiAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93RG93blwiKSkge1xuICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLFxuICAgICAgICAgICAgaW5wdXQgPSBlLnRhcmdldDtcblxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiKSksXG4gICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKSxcbiAgICAgICAgICAgIHN0ZXAgPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSksXG4gICAgICAgICAgICBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksXG4gICAgICAgICAgICBkZWx0YSA9IGUuZGVsdGEgfHwgKGlzS2V5RG93biA/IGUud2hpY2ggPT09IDM4ID8gMSA6IC0xIDogMCk7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1clZhbHVlICsgc3RlcCAqIGRlbHRhO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgdmFyIGlzSG91ckVsZW0gPSBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCxcbiAgICAgICAgICAgICAgaXNNaW51dGVFbGVtID0gaW5wdXQgPT09IHNlbGYubWludXRlRWxlbWVudDtcblxuICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IG1pbikge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBtYXggKyBuZXdWYWx1ZSArIGludCghaXNIb3VyRWxlbSkgKyAoaW50KGlzSG91ckVsZW0pICYmIGludCghc2VsZi5hbVBNKSk7XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50ID8gbmV3VmFsdWUgLSBtYXggLSBpbnQoIXNlbGYuYW1QTSkgOiBtaW47XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmFtUE0gJiYgaXNIb3VyRWxlbSAmJiAoc3RlcCA9PT0gMSA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5pdCgpO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2ZsYXRwaWNrcihub2RlTGlzdCwgY29uZmlnKSB7XG4gICAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2RlTGlzdCk7XG4gICAgICB2YXIgaW5zdGFuY2VzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbCkgY29udGludWU7XG5cbiAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG5cbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlLl9mbGF0cGlja3IgPSBGbGF0cGlja3JJbnN0YW5jZShub2RlLCBjb25maWcgfHwge30pO1xuICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0cGlja3IgPSBOb2RlTGlzdC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgICAgfTtcblxuICAgICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpIHtcbiAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGVMaXN0KSByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTtlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTtcbiAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gZGVmYXVsdHM7XG4gICAgZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgICAgZW46IE9iamVjdC5hc3NpZ24oe30sIGVuZ2xpc2gpLFxuICAgICAgZGVmYXVsdDogT2JqZWN0LmFzc2lnbih7fSwgZW5nbGlzaClcbiAgICB9O1xuXG4gICAgZmxhdHBpY2tyLmxvY2FsaXplID0gZnVuY3Rpb24gKGwxMG4pIHtcbiAgICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQsIGwxMG4pO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLCBjb25maWcpO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3IucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7fSk7XG4gICAgZmxhdHBpY2tyLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHt9KTtcbiAgICBmbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuXG4gICAgaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIERhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSArICh0eXBlb2YgZGF5cyA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlSW50KGRheXMsIDEwKSA6IGRheXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZsYXRwaWNrcjtcblxufSkpKTtcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGdhbGxlcnlTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5LXdyYXBwZXInKTtcblxuICBpZiAoIWdhbGxlcnlTZWN0aW9ucykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChnYWxsZXJ5U2VjdGlvbnMsIGZ1bmN0aW9uIChnYWxsZXJ5KSB7XG4gICAgdmFyIGFkZEltYWdlID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCcuYWRkLWdhbGxlcnktaW1hZ2VzJyk7XG4gICAgdmFyIEhpZGRlbiA9ICgwLCBfc2VyaWFsaXplZElucHV0Mi5kZWZhdWx0KShnYWxsZXJ5LCAnLmltYWdlLWdhbGxlcnktaGlkZGVuJyk7XG5cbiAgICB2YXIgcmVtb3ZlID0gKDAsIF91dGlsaXRpZXMucmVtb3ZlSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vblJlbW92ZUltYWdlKTtcbiAgICB2YXIgZHJhZyA9ICgwLCBfdXRpbGl0aWVzLmRyYWdJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uRHJhZ0ltYWdlKTtcbiAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkoZ2FsbGVyeSwge1xuICAgICAgbGlzdDogJy5nYWxsZXJ5LWltYWdlcycsXG4gICAgICBvbkRyYWc6IGRyYWcsXG4gICAgICBvblJlbW92ZTogcmVtb3ZlLFxuICAgICAgbGlzdFRlbXBsYXRlOiBpbWFnZUl0ZW1cbiAgICB9KTtcblxuICAgIHZhciBtZWRpYUZyYW1lID0gd3AubWVkaWEoe1xuICAgICAgdGl0bGU6ICdDaG9vc2UgTWVkaWEnLFxuICAgICAgYnV0dG9uOiB7XG4gICAgICAgIHRleHQ6ICdVc2UgU2VsZWN0ZWQgTWVkaWEnXG4gICAgICB9LFxuICAgICAgbXVsdGlwbGU6IHRydWVcbiAgICB9KTtcblxuICAgIGFkZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbWVkaWFGcmFtZS5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBtZWRpYUZyYW1lLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXR0YWNobWVudHMgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS50b0pTT04oKTtcblxuICAgICAgYXR0YWNobWVudHMuZm9yRWFjaChmdW5jdGlvbiAoYXR0YWNobWVudCkge1xuICAgICAgICBMaXN0LmFkZChhdHRhY2htZW50KTtcbiAgICAgICAgSGlkZGVuLmFkZChhdHRhY2htZW50LmlkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBpbWFnZUl0ZW0gPSBmdW5jdGlvbiBpbWFnZUl0ZW0oaW1hZ2UpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJnYWxsZXJ5LWltYWdlLWl0ZW1cIj48c3BhbiBjbGFzcz1cImdhbGxlcnktaWFtZ2UtaWRcIj4nICsgaW1hZ2UuaWQgKyAnPC9zcGFuPjxpbWcgc3JjPVwiJyArIGltYWdlLnVybCArICdcIiBjbGFzcz1cImdhbGxlcnktaW1hZ2VcIi8+PHNwYW4+PHN2ZyBjbGFzcz1cInJlbW92ZS1nYWxsZXJ5LWltYWdlXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbjwvc3ZnPjwvc3Bhbj48L2xpPic7XG59O1xuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRhYmxlTGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtbGlzdCcpO1xuXG4gIGlmICghdGFibGVMaXN0cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbCh0YWJsZUxpc3RzLCBmdW5jdGlvbiAodGFibGVMaXN0KSB7XG4gICAgdmFyIGFkZFJvdyA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1hZGQnKTtcbiAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKHRhYmxlTGlzdCwgJy50YWJsZS1saXN0LWhpZGRlbicpO1xuICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlVGFibGUpO1xuICAgIHZhciBkcmFnID0gKDAsIF91dGlsaXRpZXMuZHJhZ0l0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25EcmFnVGFibGUpO1xuICAgIHZhciBMaXN0ID0gKDAsIF9saXN0Mi5kZWZhdWx0KSh0YWJsZUxpc3QsIHtcbiAgICAgIGxpc3Q6ICcudGFibGUtbGlzdC1saXN0JyxcbiAgICAgIG9uRHJhZzogZHJhZyxcbiAgICAgIG9uUmVtb3ZlOiByZW1vdmUsXG4gICAgICBsaXN0VGVtcGxhdGU6IHRhYmxlSXRlbVxuICAgIH0pO1xuXG4gICAgdmFyIHdyYXBwZXIgPSB0YWJsZUxpc3QucXVlcnlTZWxlY3RvcignLnRleHQtbGlzdC13cmFwcGVyJyk7XG4gICAgdmFyIGtleSA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3Qta2V5Jyk7XG4gICAgdmFyIHZhbHVlID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC12YWx1ZScpO1xuXG4gICAgYWRkUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB2YXIgcm93RGF0YSA9IHtcbiAgICAgICAga2V5OiBrZXkudmFsdWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgfTtcblxuICAgICAgTGlzdC5hZGQocm93RGF0YSk7XG4gICAgICBIaWRkZW4uYWRkKHJvd0RhdGEpO1xuXG4gICAgICBrZXkudmFsdWUgPSAnJztcbiAgICAgIHZhbHVlLnZhbHVlID0gJyc7XG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc2VyaWFsaXplZElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcmlhbGl6ZWRJbnB1dCk7XG5cbnZhciBfdXRpbGl0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHRhYmxlSXRlbSA9IGZ1bmN0aW9uIHRhYmxlSXRlbShyb3dEYXRhKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW0gdGFibGUtbGlzdC1pdGVtXCI+XFxuICAgIDxzcGFuIGNsYXNzPVwidGFibGUtbGlzdC1rZXlcIj4nICsgcm93RGF0YS5rZXkgKyAnPC9zcGFuPlxcbiAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWxpc3QtdmFsdWVcIj4nICsgcm93RGF0YS52YWx1ZSArICc8L3NwYW4+XFxuICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbiAgICA8L3N2Zz5cXG48L2xpPic7XG59O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LmJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDY1ZDQ4MDJkMWNjMmM1YTI3OGZmIiwidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBkcmFndWxhIGZyb20gJ2RyYWd1bGEnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiggcGFyZW50LCBhcmdzICkge1xuICAgIGNvbnN0IGxpc3QgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihhcmdzLmxpc3QpO1xuXG4gICAgcmVnaXN0ZXJEcmFnRXZlbnRzKGxpc3QsIGFyZ3Mub25EcmFnKTtcbiAgICByZWdpc3RlclJlbW92ZUV2ZW50cyhsaXN0LCBhcmdzLm9uUmVtb3ZlKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBhcmdzLmxpc3RUZW1wbGF0ZSggdmFsdWUgKTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG5cbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoIGxpc3RJdGVtICk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gKGxpc3QsIG9uUmVtb3ZlKSA9PiB7XG4gICAgY29uc3QgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9ICgnc3ZnJyA9PT0gZS50YXJnZXQudGFnTmFtZSkgPyBlLnRhcmdldCA6IGUudGFyZ2V0LmNsb3Nlc3QoJ3N2ZycpO1xuXG4gICAgICAgIGlmICggJ3N2ZycgPT09IHRhcmdldC50YWdOYW1lICkge1xuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgbGlzdC5yZW1vdmVDaGlsZCggbGlzdEl0ZW0gKTtcbiAgICAgICAgICAgIG9uUmVtb3ZlKCB2YWx1ZSApO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbGlzdEl0ZW1zO1xufVxuXG5jb25zdCByZWdpc3RlckRyYWdFdmVudHMgPSAobGlzdCwgY2FsbGJhY2spID0+IHtcbiAgICBjb25zdCBkcmFrZSA9IGRyYWd1bGEoW2xpc3RdKTtcblxuICAgIGRyYWtlLm9uKCdkcmFnZW5kJywgKGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICAgICAgY2FsbGJhY2sobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICB9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpc3QuanMiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihwYXJlbnQsIGhpZGRlbklucHV0KSB7XG4gIGNvbnN0IGhpZGRlbkVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoaGlkZGVuSW5wdXQpO1xuXG4gIGNvbnN0IGdldEN1cnJlbnRWYWx1ZSA9ICgpID0+XG4gICAgaGlkZGVuRWwudmFsdWUgPyBKU09OLnBhcnNlKGhpZGRlbkVsLnZhbHVlKSA6IFtdO1xuXG4gIGNvbnN0IGFkZFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgIHJldHVybiBjdXJyZW50VmFsdWUuY29uY2F0KHZhbHVlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVWYWx1ZSA9ICh2YWx1ZSwgb25SZW1vdmUpID0+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICByZXR1cm4gb25SZW1vdmUoY3VycmVudFZhbHVlLCB2YWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGFkZFZhbHVlKHZhbHVlKSk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKHZhbHVlLCBvblJlbW92ZSkge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShyZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpKTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlcyk7XG4gICAgfSxcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NlcmlhbGl6ZWQtaW5wdXQuanMiLCJleHBvcnQgY29uc3QgcmVtb3ZlSXRlbXMgPSAoSGlkZGVuLCBvblJlbW92ZSkgPT4ge1xuICByZXR1cm4gdmFsdWUgPT4ge1xuICAgIEhpZGRlbi5yZW1vdmUodmFsdWUsIG9uUmVtb3ZlKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBkcmFnSXRlbXMgPSAoSGlkZGVuLCBvbkRyYWcpID0+IHtcbiAgcmV0dXJuIChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgICBjb25zdCB2YWx1ZXMgPSBvbkRyYWcobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICBIaWRkZW4udXBkYXRlKHZhbHVlcyk7XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnT2JqZWN0ID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdEl0ZW1zLFxuICAgIChhY2MsIGxpc3RJdGVtKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHtcbiAgICAgICAgaWQ6IGxpc3RJdGVtLmRhdGFzZXQuaWQsXG4gICAgICAgIHRpdGxlOiBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnVGV4dCA9IChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKFxuICAgIGxpc3RJdGVtcyxcbiAgICAoYWNjLCBsaXN0SXRlbSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRyYWdJbWFnZSA9IChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKFxuICAgIGxpc3RJdGVtcyxcbiAgICAoYWNjLCBsaXN0SXRlbSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MKTtcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25SZW1vdmVPYmplY3QgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihjdXJyZW50ID0+IGN1cnJlbnQudGl0bGUgIT09IG5ld1ZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZVRleHQgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihjdXJyZW50ID0+IGN1cnJlbnQgIT09IG5ld1ZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZUltYWdlID0gKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoY3VycmVudCA9PiBjdXJyZW50ICE9PSBwYXJzZUludChuZXdWYWx1ZSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uRHJhZ1RhYmxlID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdEl0ZW1zLFxuICAgIChhY2MsIGxpc3RJdGVtKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1rZXknKS5pbm5lckhUTUw7XG4gICAgICBjb25zdCB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LXZhbHVlJykuaW5uZXJIVE1MO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3sga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9XSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZVRhYmxlID0gKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoY3VycmVudCA9PiBjdXJyZW50LmtleSAhPT0gbmV3VmFsdWUpO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3V0aWxpdGllcy5qcyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGF1dG9zdWdnZXN0LCBlbmRwb2ludCwgb25TZWxlY3QsIG9uRW1wdHkpIHtcbiAgbGV0IHNlYXJjaFRlcm07XG4gIGlmICghYXV0b3N1Z2dlc3QpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQgeGhyID0gZmFsc2U7XG5cbiAgYXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IHtcbiAgICBpZiAoMCA9PT0gZS50YXJnZXQudmFsdWUubGVuZ3RoICYmIG9uRW1wdHkpIHtcbiAgICAgIHNlYXJjaFRlcm0gPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIG9uRW1wdHkoKTtcbiAgICB9XG5cbiAgICBpZiAoMyA+IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCkge1xuICAgICAgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChlLnRhcmdldC52YWx1ZSA9PT0gc2VhcmNoVGVybSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBvblNlbGVjdCh2YWx1ZSwgYXV0b3N1Z2dlc3QpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2VhcmNoVGVybSA9IGUudGFyZ2V0LnZhbHVlO1xuXG4gICAgYXV0b3N1Z2dlc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIHhociA9IGdldE9wdGlvbnMoeGhyLCB1cGRhdGVPcHRpb25zLCBhdXRvc3VnZ2VzdCwgZW5kcG9pbnQpO1xuICB9KTtcbiAgYXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IG9uQXV0b1N1Z2dlc3RJbnB1dChlKTtcblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgb25TZWxlY3QodmFsdWUsIGF1dG9zdWdnZXN0KTtcbiAgICB9XG4gIH0pO1xufVxuXG5jb25zdCBvbkF1dG9TdWdnZXN0SW5wdXQgPSBlID0+IHtcbiAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcbiAgY29uc3QgaW5wdXRWYWx1ZSA9IGlucHV0LnZhbHVlO1xuICBjb25zdCBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICBjb25zdCBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG4gIGNvbnN0IG1hdGNoID0gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdE9wdGlvbnMsXG4gICAgKGFjYywgb3B0aW9uKSA9PiB7XG4gICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhY2MuY29uY2F0KHtcbiAgICAgICAgICBpZDogb3B0aW9uLmRhdGFzZXQuaWQsXG4gICAgICAgICAgdGl0bGU6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG5cbiAgcmV0dXJuIDAgPT09IG1hdGNoLmxlbmd0aCA/IGZhbHNlIDogbWF0Y2hbMF07XG59O1xuXG5jb25zdCBnZXRPcHRpb25zID0gKHhociwgY2FsbGJhY2ssIGlucHV0LCBlbmRwb2ludCkgPT4ge1xuICBjb25zdCBxdWVyeSA9IGJ1aWxkUXVlcnkoaW5wdXQudmFsdWUpO1xuICBjb25zdCB1cmwgPSBlbmRwb2ludCArIHF1ZXJ5ICsgJyZvcmRlcmJ5PXJlbGV2YW5jZSc7XG5cbiAgaWYgKHhocikge1xuICAgIHhoci5hYm9ydCgpO1xuICB9XG5cbiAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgJ2xvYWQnLFxuICAgIGV2dCA9PiB7XG4gICAgICBjYWxsYmFjayhmYWxzZSwgZXZ0KTtcbiAgICB9LFxuICAgIGZhbHNlLFxuICApO1xuXG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSwgeyByZXN1bHRzOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4aHIucmVzcG9uc2VUZXh0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgICBjYWxsYmFjayhcbiAgICAgICAgICB7IG1lc3NhZ2U6IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCksIGlucHV0OiBpbnB1dCB9LFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAnZXJyb3InLFxuICAgIGV2dCA9PiB7XG4gICAgICBjYWxsYmFjayhldnQsIGZhbHNlKTtcbiAgICB9LFxuICAgIGZhbHNlLFxuICApO1xuXG4gIHhoci5hZGRFdmVudExpc3RlbmVyKFxuICAgICdhYm9ydCcsXG4gICAgZXZ0ID0+IHtcbiAgICAgIGNhbGxiYWNrKHRydWUsIGZhbHNlKTtcbiAgICB9LFxuICAgIGZhbHNlLFxuICApO1xuXG4gIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gIHhoci5zZW5kKCk7XG5cbiAgcmV0dXJuIHhocjtcbn07XG5cbmNvbnN0IHVwZGF0ZU9wdGlvbnMgPSAoZXJyb3IsIHJlc3BvbnNlKSA9PiB7XG4gIGlmIChlcnJvcikge1xuICAgIGlmICh0cnVlID09PSBlcnJvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGVycm9yLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG5cbiAgaWYgKHJlc3BvbnNlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3BvbnNlLnJlc3VsdHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCk7XG4gIH1cbn07XG5cbmNvbnN0IGNyZWF0ZU9wdGlvbnMgPSAocmVzdWx0cywgaW5wdXQpID0+IHtcbiAgY29uc3QgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgY29uc3QgZGF0YWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0TmFtZSk7XG5cbiAgY29uc3QgbmV3T3B0aW9ucyA9IHJlc3VsdHMucmVkdWNlKChhY2MsIHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGNyZWF0ZU9wdGlvbihyZXN1bHQpO1xuICAgIHJldHVybiBhY2MuY29uY2F0KG9wdGlvbik7XG4gIH0sICcnKTtcblxuICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIGRhdGFsaXN0LmlubmVySFRNTCA9IG5ld09wdGlvbnM7XG59O1xuXG5jb25zdCBjcmVhdGVPcHRpb24gPSB2YWx1ZSA9PiB7XG4gIGlmICh2YWx1ZS50aXRsZSkge1xuICAgIHJldHVybiBgPG9wdGlvbiBkYXRhLWlkPSR7dmFsdWUuaWR9IHZhbHVlPVwiJHt2YWx1ZS50aXRsZS5yZW5kZXJlZH1cIj5gO1xuICB9XG5cbiAgaWYgKHZhbHVlLm5hbWUpIHtcbiAgICByZXR1cm4gYDxvcHRpb24gZGF0YS1pZD0ke3ZhbHVlLmlkfSB2YWx1ZT1cIiR7dmFsdWUubmFtZX1cIj5gO1xuICB9XG59O1xuXG5jb25zdCBpc0pTT04gPSBzdHIgPT4ge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IGJ1aWxkUXVlcnkgPSB2YWx1ZSA9PiB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9Mb3dlckNhc2UoKSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QuanMiLCJpbXBvcnQgYmFzZUNzcyBmcm9tICcuLi9jc3MvaW5kZXguY3NzJztcbmltcG9ydCB0ZXh0TGlzdCBmcm9tICcuL3RleHQtbGlzdCc7XG5pbXBvcnQgYXV0b0xpc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdC1saXN0JztcbmltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgYXV0b0l0ZW0gZnJvbSAnLi9hdXRvLWl0ZW0nO1xuaW1wb3J0IGltYWdlVXBsb2FkcyBmcm9tICcuL2ltYWdlLXVwbG9hZHMnO1xuaW1wb3J0IGRhdGVwaWNrZXIgZnJvbSAnLi9kYXRlcGlja2VyJztcbmltcG9ydCBnYWxsZXJ5IGZyb20gJy4vZ2FsbGVyeSc7XG5pbXBvcnQgdGFibGVMaXN0IGZyb20gJy4vdGFibGUtbGlzdCc7XG5cbmNvbnN0IGNyZWF0ZVRleHRJdGVtID0gdmFsdWUgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCI+XG4gICAgICAgIDxzcGFuPiR7dmFsdWV9PC9zcGFuPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuY29uc3QgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gdmFsdWUgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCIgZGF0YS1pZD1cIiR7dmFsdWUuaWR9XCI+XG4gICAgICAgIDxzcGFuPiR7dmFsdWUudGl0bGV9PC9zcGFuPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICBpbWFnZVVwbG9hZHMoKTtcbiAgdGV4dExpc3Qoe1xuICAgIHBhcmVudDogJy50ZXh0LWxpc3QnLFxuICAgIGJ1dHRvbjogJy50ZXh0LWxpc3QtYWRkJyxcbiAgICBsaXN0OiAnLnRleHQtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcudGV4dC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVUZXh0SXRlbSxcbiAgfSk7XG5cbiAgYXV0b0xpc3Qoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgICBpbnB1dDogJ2F1dG9zdWdnZXN0LWxpc3QtaW5wdXQnLFxuICAgIGxpc3Q6ICcuYXV0b3N1Z2dlc3QtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtLFxuICB9KTtcblxuICBhdXRvSXRlbSh7XG4gICAgcGFyZW50OiAnLmF1dG9zdWdnZXN0LXdyYXBwZXInLFxuICAgIGlucHV0OiAnLmF1dG9zdWdnZXN0LWlucHV0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtaGlkZGVuJyxcbiAgfSk7XG5cbiAgZGF0ZXBpY2tlcigpO1xuICBnYWxsZXJ5KCk7XG4gIHRhYmxlTGlzdCgpO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC5qcyIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQgeyByZW1vdmVJdGVtcywgZHJhZ0l0ZW1zLCBvbkRyYWdUZXh0LCBvblJlbW92ZVRleHQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCBhcmdzICkge1xuICAgIGNvbnN0IGxpc3RGaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICAgIGlmICggISBsaXN0RmllbGRzICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgW10uZm9yRWFjaC5jYWxsKCBsaXN0RmllbGRzLCAoIGxpc3RGaWVsZCApID0+IHtcbiAgICAgICAgY29uc3QgdGV4dElucHV0ID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoICdpbnB1dFt0eXBlPXRleHRdJyApO1xuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvciggYXJncy5idXR0b24gKTtcbiAgICAgICAgY29uc3QgSGlkZGVuID0gaGlkZGVuKCBsaXN0RmllbGQsIGFyZ3MuaGlkZGVuICk7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKCBIaWRkZW4sIG9uUmVtb3ZlVGV4dCApO1xuICAgICAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKCBIaWRkZW4sIG9uRHJhZ1RleHQgKTtcbiAgICAgICAgY29uc3QgTGlzdCA9IGxpc3QoIGxpc3RGaWVsZCwgT2JqZWN0LmFzc2lnbiggYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmV9ICkgKTtcblxuICAgICAgICBsaXN0RmllbGQuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXByZXNzJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICggMTMgPT09IGUua2V5Q29kZSApIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgTGlzdC5hZGQoIHRleHRJbnB1dC52YWx1ZSApO1xuICAgICAgICAgICAgICAgIEhpZGRlbi5hZGQoIHRleHRJbnB1dC52YWx1ZSApO1xuICAgICAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBMaXN0LmFkZCggdGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIEhpZGRlbi5hZGQoIHRleHRJbnB1dC52YWx1ZSApO1xuICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3RleHQtbGlzdC5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCdjb250cmEvZW1pdHRlcicpO1xudmFyIGNyb3NzdmVudCA9IHJlcXVpcmUoJ2Nyb3NzdmVudCcpO1xudmFyIGNsYXNzZXMgPSByZXF1aXJlKCcuL2NsYXNzZXMnKTtcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG5mdW5jdGlvbiBkcmFndWxhIChpbml0aWFsQ29udGFpbmVycywgb3B0aW9ucykge1xuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgaWYgKGxlbiA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGluaXRpYWxDb250YWluZXJzKSA9PT0gZmFsc2UpIHtcbiAgICBvcHRpb25zID0gaW5pdGlhbENvbnRhaW5lcnM7XG4gICAgaW5pdGlhbENvbnRhaW5lcnMgPSBbXTtcbiAgfVxuICB2YXIgX21pcnJvcjsgLy8gbWlycm9yIGltYWdlXG4gIHZhciBfc291cmNlOyAvLyBzb3VyY2UgY29udGFpbmVyXG4gIHZhciBfaXRlbTsgLy8gaXRlbSBiZWluZyBkcmFnZ2VkXG4gIHZhciBfb2Zmc2V0WDsgLy8gcmVmZXJlbmNlIHhcbiAgdmFyIF9vZmZzZXRZOyAvLyByZWZlcmVuY2UgeVxuICB2YXIgX21vdmVYOyAvLyByZWZlcmVuY2UgbW92ZSB4XG4gIHZhciBfbW92ZVk7IC8vIHJlZmVyZW5jZSBtb3ZlIHlcbiAgdmFyIF9pbml0aWFsU2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgd2hlbiBncmFiYmVkXG4gIHZhciBfY3VycmVudFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIG5vd1xuICB2YXIgX2NvcHk7IC8vIGl0ZW0gdXNlZCBmb3IgY29weWluZ1xuICB2YXIgX3JlbmRlclRpbWVyOyAvLyB0aW1lciBmb3Igc2V0VGltZW91dCByZW5kZXJNaXJyb3JJbWFnZVxuICB2YXIgX2xhc3REcm9wVGFyZ2V0ID0gbnVsbDsgLy8gbGFzdCBjb250YWluZXIgaXRlbSB3YXMgb3ZlclxuICB2YXIgX2dyYWJiZWQ7IC8vIGhvbGRzIG1vdXNlZG93biBjb250ZXh0IHVudGlsIGZpcnN0IG1vdXNlbW92ZVxuXG4gIHZhciBvID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKG8ubW92ZXMgPT09IHZvaWQgMCkgeyBvLm1vdmVzID0gYWx3YXlzOyB9XG4gIGlmIChvLmFjY2VwdHMgPT09IHZvaWQgMCkgeyBvLmFjY2VwdHMgPSBhbHdheXM7IH1cbiAgaWYgKG8uaW52YWxpZCA9PT0gdm9pZCAwKSB7IG8uaW52YWxpZCA9IGludmFsaWRUYXJnZXQ7IH1cbiAgaWYgKG8uY29udGFpbmVycyA9PT0gdm9pZCAwKSB7IG8uY29udGFpbmVycyA9IGluaXRpYWxDb250YWluZXJzIHx8IFtdOyB9XG4gIGlmIChvLmlzQ29udGFpbmVyID09PSB2b2lkIDApIHsgby5pc0NvbnRhaW5lciA9IG5ldmVyOyB9XG4gIGlmIChvLmNvcHkgPT09IHZvaWQgMCkgeyBvLmNvcHkgPSBmYWxzZTsgfVxuICBpZiAoby5jb3B5U29ydFNvdXJjZSA9PT0gdm9pZCAwKSB7IG8uY29weVNvcnRTb3VyY2UgPSBmYWxzZTsgfVxuICBpZiAoby5yZXZlcnRPblNwaWxsID09PSB2b2lkIDApIHsgby5yZXZlcnRPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmVtb3ZlT25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLmRpcmVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJzsgfVxuICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9IHRydWU7IH1cbiAgaWYgKG8ubWlycm9yQ29udGFpbmVyID09PSB2b2lkIDApIHsgby5taXJyb3JDb250YWluZXIgPSBkb2MuYm9keTsgfVxuXG4gIHZhciBkcmFrZSA9IGVtaXR0ZXIoe1xuICAgIGNvbnRhaW5lcnM6IG8uY29udGFpbmVycyxcbiAgICBzdGFydDogbWFudWFsU3RhcnQsXG4gICAgZW5kOiBlbmQsXG4gICAgY2FuY2VsOiBjYW5jZWwsXG4gICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICBjYW5Nb3ZlOiBjYW5Nb3ZlLFxuICAgIGRyYWdnaW5nOiBmYWxzZVxuICB9KTtcblxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB0cnVlKSB7XG4gICAgZHJha2Uub24oJ292ZXInLCBzcGlsbE92ZXIpLm9uKCdvdXQnLCBzcGlsbE91dCk7XG4gIH1cblxuICBldmVudHMoKTtcblxuICByZXR1cm4gZHJha2U7XG5cbiAgZnVuY3Rpb24gaXNDb250YWluZXIgKGVsKSB7XG4gICAgcmV0dXJuIGRyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZihlbCkgIT09IC0xIHx8IG8uaXNDb250YWluZXIoZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vkb3duJywgZ3JhYik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZXVwJywgcmVsZWFzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHVhbE1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlbW92ZScsIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIGNyb3NzdmVudFtvcF0oZG9jdW1lbnRFbGVtZW50LCAnc2VsZWN0c3RhcnQnLCBwcmV2ZW50R3JhYmJlZCk7IC8vIElFOFxuICAgIGNyb3NzdmVudFtvcF0oZG9jdW1lbnRFbGVtZW50LCAnY2xpY2snLCBwcmV2ZW50R3JhYmJlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95ICgpIHtcbiAgICBldmVudHModHJ1ZSk7XG4gICAgcmVsZWFzZSh7fSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50R3JhYmJlZCAoZSkge1xuICAgIGlmIChfZ3JhYmJlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdyYWIgKGUpIHtcbiAgICBfbW92ZVggPSBlLmNsaWVudFg7XG4gICAgX21vdmVZID0gZS5jbGllbnRZO1xuXG4gICAgdmFyIGlnbm9yZSA9IHdoaWNoTW91c2VCdXR0b24oZSkgIT09IDEgfHwgZS5tZXRhS2V5IHx8IGUuY3RybEtleTtcbiAgICBpZiAoaWdub3JlKSB7XG4gICAgICByZXR1cm47IC8vIHdlIG9ubHkgY2FyZSBhYm91dCBob25lc3QtdG8tZ29kIGxlZnQgY2xpY2tzIGFuZCB0b3VjaCBldmVudHNcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBlLnRhcmdldDtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfZ3JhYmJlZCA9IGNvbnRleHQ7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHMoKTtcbiAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgaWYgKGlzSW5wdXQoaXRlbSkpIHsgLy8gc2VlIGFsc286IGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yMDhcbiAgICAgICAgaXRlbS5mb2N1cygpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTc2XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNTVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydEJlY2F1c2VNb3VzZU1vdmVkIChlKSB7XG4gICAgaWYgKCFfZ3JhYmJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2hpY2hNb3VzZUJ1dHRvbihlKSA9PT0gMCkge1xuICAgICAgcmVsZWFzZSh7fSk7XG4gICAgICByZXR1cm47IC8vIHdoZW4gdGV4dCBpcyBzZWxlY3RlZCBvbiBhbiBpbnB1dCBhbmQgdGhlbiBkcmFnZ2VkLCBtb3VzZXVwIGRvZXNuJ3QgZmlyZS4gdGhpcyBpcyBvdXIgb25seSBob3BlXG4gICAgfVxuICAgIC8vIHRydXRoeSBjaGVjayBmaXhlcyAjMjM5LCBlcXVhbGl0eSBmaXhlcyAjMjA3XG4gICAgaWYgKGUuY2xpZW50WCAhPT0gdm9pZCAwICYmIGUuY2xpZW50WCA9PT0gX21vdmVYICYmIGUuY2xpZW50WSAhPT0gdm9pZCAwICYmIGUuY2xpZW50WSA9PT0gX21vdmVZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbikge1xuICAgICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBkb2MuZWxlbWVudEZyb21Qb2ludChjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIGlmIChpc0lucHV0KGVsZW1lbnRCZWhpbmRDdXJzb3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ3JhYmJlZCA9IF9ncmFiYmVkOyAvLyBjYWxsIHRvIGVuZCgpIHVuc2V0cyBfZ3JhYmJlZFxuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cygpO1xuICAgIGVuZCgpO1xuICAgIHN0YXJ0KGdyYWJiZWQpO1xuXG4gICAgdmFyIG9mZnNldCA9IGdldE9mZnNldChfaXRlbSk7XG4gICAgX29mZnNldFggPSBnZXRDb29yZCgncGFnZVgnLCBlKSAtIG9mZnNldC5sZWZ0O1xuICAgIF9vZmZzZXRZID0gZ2V0Q29vcmQoJ3BhZ2VZJywgZSkgLSBvZmZzZXQudG9wO1xuXG4gICAgY2xhc3Nlcy5hZGQoX2NvcHkgfHwgX2l0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgcmVuZGVyTWlycm9ySW1hZ2UoKTtcbiAgICBkcmFnKGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuU3RhcnQgKGl0ZW0pIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcgJiYgX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNDb250YWluZXIoaXRlbSkpIHtcbiAgICAgIHJldHVybjsgLy8gZG9uJ3QgZHJhZyBjb250YWluZXIgaXRzZWxmXG4gICAgfVxuICAgIHZhciBoYW5kbGUgPSBpdGVtO1xuICAgIHdoaWxlIChnZXRQYXJlbnQoaXRlbSkgJiYgaXNDb250YWluZXIoZ2V0UGFyZW50KGl0ZW0pKSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpdGVtID0gZ2V0UGFyZW50KGl0ZW0pOyAvLyBkcmFnIHRhcmdldCBzaG91bGQgYmUgYSB0b3AgZWxlbWVudFxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbW92YWJsZSA9IG8ubW92ZXMoaXRlbSwgc291cmNlLCBoYW5kbGUsIG5leHRFbChpdGVtKSk7XG4gICAgaWYgKCFtb3ZhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICBzb3VyY2U6IHNvdXJjZVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBjYW5Nb3ZlIChpdGVtKSB7XG4gICAgcmV0dXJuICEhY2FuU3RhcnQoaXRlbSk7XG4gIH1cblxuICBmdW5jdGlvbiBtYW51YWxTdGFydCAoaXRlbSkge1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgIHN0YXJ0KGNvbnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0IChjb250ZXh0KSB7XG4gICAgaWYgKGlzQ29weShjb250ZXh0Lml0ZW0sIGNvbnRleHQuc291cmNlKSkge1xuICAgICAgX2NvcHkgPSBjb250ZXh0Lml0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX2NvcHksIGNvbnRleHQuaXRlbSwgJ2NvcHknKTtcbiAgICB9XG5cbiAgICBfc291cmNlID0gY29udGV4dC5zb3VyY2U7XG4gICAgX2l0ZW0gPSBjb250ZXh0Lml0ZW07XG4gICAgX2luaXRpYWxTaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nID0gbmV4dEVsKGNvbnRleHQuaXRlbSk7XG5cbiAgICBkcmFrZS5kcmFnZ2luZyA9IHRydWU7XG4gICAgZHJha2UuZW1pdCgnZHJhZycsIF9pdGVtLCBfc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGludmFsaWRUYXJnZXQgKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZCAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIGRyb3AoaXRlbSwgZ2V0UGFyZW50KGl0ZW0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZ3JhYiAoKSB7XG4gICAgX2dyYWJiZWQgPSBmYWxzZTtcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHModHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWxlYXNlIChlKSB7XG4gICAgdW5ncmFiKCk7XG5cbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgZHJvcFRhcmdldCA9IGZpbmREcm9wVGFyZ2V0KGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIGlmIChkcm9wVGFyZ2V0ICYmICgoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSkgfHwgKCFfY29weSB8fCBkcm9wVGFyZ2V0ICE9PSBfc291cmNlKSkpIHtcbiAgICAgIGRyb3AoaXRlbSwgZHJvcFRhcmdldCk7XG4gICAgfSBlbHNlIGlmIChvLnJlbW92ZU9uU3BpbGwpIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcm9wIChpdGVtLCB0YXJnZXQpIHtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlICYmIHRhcmdldCA9PT0gX3NvdXJjZSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9pdGVtKTtcbiAgICB9XG4gICAgaWYgKGlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQpKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHRhcmdldCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoX2NvcHkgPyAnY2FuY2VsJyA6ICdyZW1vdmUnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UpO1xuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCAocmV2ZXJ0KSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmV2ZXJ0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwID8gcmV2ZXJ0IDogby5yZXZlcnRPblNwaWxsO1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICB2YXIgaW5pdGlhbCA9IGlzSW5pdGlhbFBsYWNlbWVudChwYXJlbnQpO1xuICAgIGlmIChpbml0aWFsID09PSBmYWxzZSAmJiByZXZlcnRzKSB7XG4gICAgICBpZiAoX2NvcHkpIHtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfY29weSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zb3VyY2UuaW5zZXJ0QmVmb3JlKGl0ZW0sIF9pbml0aWFsU2libGluZyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbml0aWFsIHx8IHJldmVydHMpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgcGFyZW50LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhbnVwICgpIHtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHVuZ3JhYigpO1xuICAgIHJlbW92ZU1pcnJvckltYWdlKCk7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNsYXNzZXMucm0oaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICB9XG4gICAgaWYgKF9yZW5kZXJUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KF9yZW5kZXJUaW1lcik7XG4gICAgfVxuICAgIGRyYWtlLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgaWYgKF9sYXN0RHJvcFRhcmdldCkge1xuICAgICAgZHJha2UuZW1pdCgnb3V0JywgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdCgnZHJhZ2VuZCcsIGl0ZW0pO1xuICAgIF9zb3VyY2UgPSBfaXRlbSA9IF9jb3B5ID0gX2luaXRpYWxTaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nID0gX3JlbmRlclRpbWVyID0gX2xhc3REcm9wVGFyZ2V0ID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSW5pdGlhbFBsYWNlbWVudCAodGFyZ2V0LCBzKSB7XG4gICAgdmFyIHNpYmxpbmc7XG4gICAgaWYgKHMgIT09IHZvaWQgMCkge1xuICAgICAgc2libGluZyA9IHM7XG4gICAgfSBlbHNlIGlmIChfbWlycm9yKSB7XG4gICAgICBzaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5nID0gbmV4dEVsKF9jb3B5IHx8IF9pdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldCA9PT0gX3NvdXJjZSAmJiBzaWJsaW5nID09PSBfaW5pdGlhbFNpYmxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kRHJvcFRhcmdldCAoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSkge1xuICAgIHZhciB0YXJnZXQgPSBlbGVtZW50QmVoaW5kQ3Vyc29yO1xuICAgIHdoaWxlICh0YXJnZXQgJiYgIWFjY2VwdGVkKCkpIHtcbiAgICAgIHRhcmdldCA9IGdldFBhcmVudCh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuXG4gICAgZnVuY3Rpb24gYWNjZXB0ZWQgKCkge1xuICAgICAgdmFyIGRyb3BwYWJsZSA9IGlzQ29udGFpbmVyKHRhcmdldCk7XG4gICAgICBpZiAoZHJvcHBhYmxlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZCh0YXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgICAgdmFyIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZSh0YXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICB2YXIgaW5pdGlhbCA9IGlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQsIHJlZmVyZW5jZSk7XG4gICAgICBpZiAoaW5pdGlhbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gc2hvdWxkIGFsd2F5cyBiZSBhYmxlIHRvIGRyb3AgaXQgcmlnaHQgYmFjayB3aGVyZSBpdCB3YXNcbiAgICAgIH1cbiAgICAgIHJldHVybiBvLmFjY2VwdHMoX2l0ZW0sIHRhcmdldCwgX3NvdXJjZSwgcmVmZXJlbmNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnIChlKSB7XG4gICAgaWYgKCFfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIHggPSBjbGllbnRYIC0gX29mZnNldFg7XG4gICAgdmFyIHkgPSBjbGllbnRZIC0gX29mZnNldFk7XG5cbiAgICBfbWlycm9yLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuXG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgZHJvcFRhcmdldCA9IGZpbmREcm9wVGFyZ2V0KGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBjaGFuZ2VkID0gZHJvcFRhcmdldCAhPT0gbnVsbCAmJiBkcm9wVGFyZ2V0ICE9PSBfbGFzdERyb3BUYXJnZXQ7XG4gICAgaWYgKGNoYW5nZWQgfHwgZHJvcFRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgb3V0KCk7XG4gICAgICBfbGFzdERyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0O1xuICAgICAgb3ZlcigpO1xuICAgIH1cbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChkcm9wVGFyZ2V0ID09PSBfc291cmNlICYmIF9jb3B5ICYmICFvLmNvcHlTb3J0U291cmNlKSB7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlZmVyZW5jZTtcbiAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQoZHJvcFRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgaWYgKGltbWVkaWF0ZSAhPT0gbnVsbCkge1xuICAgICAgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKGRyb3BUYXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgfSBlbHNlIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHRydWUgJiYgIV9jb3B5KSB7XG4gICAgICByZWZlcmVuY2UgPSBfaW5pdGlhbFNpYmxpbmc7XG4gICAgICBkcm9wVGFyZ2V0ID0gX3NvdXJjZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKF9jb3B5ICYmIHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChcbiAgICAgIChyZWZlcmVuY2UgPT09IG51bGwgJiYgY2hhbmdlZCkgfHxcbiAgICAgIHJlZmVyZW5jZSAhPT0gaXRlbSAmJlxuICAgICAgcmVmZXJlbmNlICE9PSBuZXh0RWwoaXRlbSlcbiAgICApIHtcbiAgICAgIF9jdXJyZW50U2libGluZyA9IHJlZmVyZW5jZTtcbiAgICAgIGRyb3BUYXJnZXQuaW5zZXJ0QmVmb3JlKGl0ZW0sIHJlZmVyZW5jZSk7XG4gICAgICBkcmFrZS5lbWl0KCdzaGFkb3cnLCBpdGVtLCBkcm9wVGFyZ2V0LCBfc291cmNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbW92ZWQgKHR5cGUpIHsgZHJha2UuZW1pdCh0eXBlLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpOyB9XG4gICAgZnVuY3Rpb24gb3ZlciAoKSB7IGlmIChjaGFuZ2VkKSB7IG1vdmVkKCdvdmVyJyk7IH0gfVxuICAgIGZ1bmN0aW9uIG91dCAoKSB7IGlmIChfbGFzdERyb3BUYXJnZXQpIHsgbW92ZWQoJ291dCcpOyB9IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3ZlciAoZWwpIHtcbiAgICBjbGFzc2VzLnJtKGVsLCAnZ3UtaGlkZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdXQgKGVsKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nKSB7IGNsYXNzZXMuYWRkKGVsLCAnZ3UtaGlkZScpOyB9XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlY3QgPSBfaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBfbWlycm9yID0gX2l0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgIF9taXJyb3Iuc3R5bGUud2lkdGggPSBnZXRSZWN0V2lkdGgocmVjdCkgKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUuaGVpZ2h0ID0gZ2V0UmVjdEhlaWdodChyZWN0KSArICdweCc7XG4gICAgY2xhc3Nlcy5ybShfbWlycm9yLCAnZ3UtdHJhbnNpdCcpO1xuICAgIGNsYXNzZXMuYWRkKF9taXJyb3IsICdndS1taXJyb3InKTtcbiAgICBvLm1pcnJvckNvbnRhaW5lci5hcHBlbmRDaGlsZChfbWlycm9yKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAnYWRkJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgIGNsYXNzZXMuYWRkKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX21pcnJvciwgX2l0ZW0sICdtaXJyb3InKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZU1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgY2xhc3Nlcy5ybShvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ3JlbW92ZScsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICAgIGdldFBhcmVudChfbWlycm9yKS5yZW1vdmVDaGlsZChfbWlycm9yKTtcbiAgICAgIF9taXJyb3IgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEltbWVkaWF0ZUNoaWxkIChkcm9wVGFyZ2V0LCB0YXJnZXQpIHtcbiAgICB2YXIgaW1tZWRpYXRlID0gdGFyZ2V0O1xuICAgIHdoaWxlIChpbW1lZGlhdGUgIT09IGRyb3BUYXJnZXQgJiYgZ2V0UGFyZW50KGltbWVkaWF0ZSkgIT09IGRyb3BUYXJnZXQpIHtcbiAgICAgIGltbWVkaWF0ZSA9IGdldFBhcmVudChpbW1lZGlhdGUpO1xuICAgIH1cbiAgICBpZiAoaW1tZWRpYXRlID09PSBkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaW1tZWRpYXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmVmZXJlbmNlIChkcm9wVGFyZ2V0LCB0YXJnZXQsIHgsIHkpIHtcbiAgICB2YXIgaG9yaXpvbnRhbCA9IG8uZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIHJlZmVyZW5jZSA9IHRhcmdldCAhPT0gZHJvcFRhcmdldCA/IGluc2lkZSgpIDogb3V0c2lkZSgpO1xuICAgIHJldHVybiByZWZlcmVuY2U7XG5cbiAgICBmdW5jdGlvbiBvdXRzaWRlICgpIHsgLy8gc2xvd2VyLCBidXQgYWJsZSB0byBmaWd1cmUgb3V0IGFueSBwb3NpdGlvblxuICAgICAgdmFyIGxlbiA9IGRyb3BUYXJnZXQuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgZWw7XG4gICAgICB2YXIgcmVjdDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBlbCA9IGRyb3BUYXJnZXQuY2hpbGRyZW5baV07XG4gICAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgaWYgKGhvcml6b250YWwgJiYgKHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyKSA+IHgpIHsgcmV0dXJuIGVsOyB9XG4gICAgICAgIGlmICghaG9yaXpvbnRhbCAmJiAocmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIpID4geSkgeyByZXR1cm4gZWw7IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc2lkZSAoKSB7IC8vIGZhc3RlciwgYnV0IG9ubHkgYXZhaWxhYmxlIGlmIGRyb3BwZWQgaW5zaWRlIGEgY2hpbGQgZWxlbWVudFxuICAgICAgdmFyIHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBpZiAoaG9yaXpvbnRhbCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh4ID4gcmVjdC5sZWZ0ICsgZ2V0UmVjdFdpZHRoKHJlY3QpIC8gMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzb2x2ZSh5ID4gcmVjdC50b3AgKyBnZXRSZWN0SGVpZ2h0KHJlY3QpIC8gMik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSAoYWZ0ZXIpIHtcbiAgICAgIHJldHVybiBhZnRlciA/IG5leHRFbCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQ29weSAoaXRlbSwgY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvLmNvcHkgPT09ICdib29sZWFuJyA/IG8uY29weSA6IG8uY29weShpdGVtLCBjb250YWluZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvdWNoeSAoZWwsIG9wLCB0eXBlLCBmbikge1xuICB2YXIgdG91Y2ggPSB7XG4gICAgbW91c2V1cDogJ3RvdWNoZW5kJyxcbiAgICBtb3VzZWRvd246ICd0b3VjaHN0YXJ0JyxcbiAgICBtb3VzZW1vdmU6ICd0b3VjaG1vdmUnXG4gIH07XG4gIHZhciBwb2ludGVycyA9IHtcbiAgICBtb3VzZXVwOiAncG9pbnRlcnVwJyxcbiAgICBtb3VzZWRvd246ICdwb2ludGVyZG93bicsXG4gICAgbW91c2Vtb3ZlOiAncG9pbnRlcm1vdmUnXG4gIH07XG4gIHZhciBtaWNyb3NvZnQgPSB7XG4gICAgbW91c2V1cDogJ01TUG9pbnRlclVwJyxcbiAgICBtb3VzZWRvd246ICdNU1BvaW50ZXJEb3duJyxcbiAgICBtb3VzZW1vdmU6ICdNU1BvaW50ZXJNb3ZlJ1xuICB9O1xuICBpZiAoZ2xvYmFsLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHBvaW50ZXJzW3R5cGVdLCBmbik7XG4gIH0gZWxzZSBpZiAoZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgbWljcm9zb2Z0W3R5cGVdLCBmbik7XG4gIH0gZWxzZSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdG91Y2hbdHlwZV0sIGZuKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0eXBlLCBmbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2hpY2hNb3VzZUJ1dHRvbiAoZSkge1xuICBpZiAoZS50b3VjaGVzICE9PSB2b2lkIDApIHsgcmV0dXJuIGUudG91Y2hlcy5sZW5ndGg7IH1cbiAgaWYgKGUud2hpY2ggIT09IHZvaWQgMCAmJiBlLndoaWNoICE9PSAwKSB7IHJldHVybiBlLndoaWNoOyB9IC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjYxXG4gIGlmIChlLmJ1dHRvbnMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS5idXR0b25zOyB9XG4gIHZhciBidXR0b24gPSBlLmJ1dHRvbjtcbiAgaWYgKGJ1dHRvbiAhPT0gdm9pZCAwKSB7IC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9ibG9iLzk5ZThmZjFiYWE3YWUzNDFlOTRiYjg5YzNlODQ1NzBjN2MzYWQ5ZWEvc3JjL2V2ZW50LmpzI0w1NzMtTDU3NVxuICAgIHJldHVybiBidXR0b24gJiAxID8gMSA6IGJ1dHRvbiAmIDIgPyAzIDogKGJ1dHRvbiAmIDQgPyAyIDogMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0T2Zmc2V0IChlbCkge1xuICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IHJlY3QubGVmdCArIGdldFNjcm9sbCgnc2Nyb2xsTGVmdCcsICdwYWdlWE9mZnNldCcpLFxuICAgIHRvcDogcmVjdC50b3AgKyBnZXRTY3JvbGwoJ3Njcm9sbFRvcCcsICdwYWdlWU9mZnNldCcpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbCAoc2Nyb2xsUHJvcCwgb2Zmc2V0UHJvcCkge1xuICBpZiAodHlwZW9mIGdsb2JhbFtvZmZzZXRQcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZ2xvYmFsW29mZnNldFByb3BdO1xuICB9XG4gIGlmIChkb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50RWxlbWVudFtzY3JvbGxQcm9wXTtcbiAgfVxuICByZXR1cm4gZG9jLmJvZHlbc2Nyb2xsUHJvcF07XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRCZWhpbmRQb2ludCAocG9pbnQsIHgsIHkpIHtcbiAgdmFyIHAgPSBwb2ludCB8fCB7fTtcbiAgdmFyIHN0YXRlID0gcC5jbGFzc05hbWU7XG4gIHZhciBlbDtcbiAgcC5jbGFzc05hbWUgKz0gJyBndS1oaWRlJztcbiAgZWwgPSBkb2MuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgcC5jbGFzc05hbWUgPSBzdGF0ZTtcbiAgcmV0dXJuIGVsO1xufVxuXG5mdW5jdGlvbiBuZXZlciAoKSB7IHJldHVybiBmYWxzZTsgfVxuZnVuY3Rpb24gYWx3YXlzICgpIHsgcmV0dXJuIHRydWU7IH1cbmZ1bmN0aW9uIGdldFJlY3RXaWR0aCAocmVjdCkgeyByZXR1cm4gcmVjdC53aWR0aCB8fCAocmVjdC5yaWdodCAtIHJlY3QubGVmdCk7IH1cbmZ1bmN0aW9uIGdldFJlY3RIZWlnaHQgKHJlY3QpIHsgcmV0dXJuIHJlY3QuaGVpZ2h0IHx8IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTsgfVxuZnVuY3Rpb24gZ2V0UGFyZW50IChlbCkgeyByZXR1cm4gZWwucGFyZW50Tm9kZSA9PT0gZG9jID8gbnVsbCA6IGVsLnBhcmVudE5vZGU7IH1cbmZ1bmN0aW9uIGlzSW5wdXQgKGVsKSB7IHJldHVybiBlbC50YWdOYW1lID09PSAnSU5QVVQnIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwgaXNFZGl0YWJsZShlbCk7IH1cbmZ1bmN0aW9uIGlzRWRpdGFibGUgKGVsKSB7XG4gIGlmICghZWwpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIG5vIHBhcmVudHMgd2VyZSBlZGl0YWJsZVxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAnZmFsc2UnKSB7IHJldHVybiBmYWxzZTsgfSAvLyBzdG9wIHRoZSBsb29rdXBcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKSB7IHJldHVybiB0cnVlOyB9IC8vIGZvdW5kIGEgY29udGVudEVkaXRhYmxlIGVsZW1lbnQgaW4gdGhlIGNoYWluXG4gIHJldHVybiBpc0VkaXRhYmxlKGdldFBhcmVudChlbCkpOyAvLyBjb250ZW50RWRpdGFibGUgaXMgc2V0IHRvICdpbmhlcml0J1xufVxuXG5mdW5jdGlvbiBuZXh0RWwgKGVsKSB7XG4gIHJldHVybiBlbC5uZXh0RWxlbWVudFNpYmxpbmcgfHwgbWFudWFsbHkoKTtcbiAgZnVuY3Rpb24gbWFudWFsbHkgKCkge1xuICAgIHZhciBzaWJsaW5nID0gZWw7XG4gICAgZG8ge1xuICAgICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgfSB3aGlsZSAoc2libGluZyAmJiBzaWJsaW5nLm5vZGVUeXBlICE9PSAxKTtcbiAgICByZXR1cm4gc2libGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRFdmVudEhvc3QgKGUpIHtcbiAgLy8gb24gdG91Y2hlbmQgZXZlbnQsIHdlIGhhdmUgdG8gdXNlIGBlLmNoYW5nZWRUb3VjaGVzYFxuICAvLyBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MTkyNTYzL3RvdWNoZW5kLWV2ZW50LXByb3BlcnRpZXNcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8zNFxuICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdO1xuICB9XG4gIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGdldENvb3JkIChjb29yZCwgZSkge1xuICB2YXIgaG9zdCA9IGdldEV2ZW50SG9zdChlKTtcbiAgdmFyIG1pc3NNYXAgPSB7XG4gICAgcGFnZVg6ICdjbGllbnRYJywgLy8gSUU4XG4gICAgcGFnZVk6ICdjbGllbnRZJyAvLyBJRThcbiAgfTtcbiAgaWYgKGNvb3JkIGluIG1pc3NNYXAgJiYgIShjb29yZCBpbiBob3N0KSAmJiBtaXNzTWFwW2Nvb3JkXSBpbiBob3N0KSB7XG4gICAgY29vcmQgPSBtaXNzTWFwW2Nvb3JkXTtcbiAgfVxuICByZXR1cm4gaG9zdFtjb29yZF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZHJhZ3VsYTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2RyYWd1bGEuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXRvYSA9IHJlcXVpcmUoJ2F0b2EnKTtcbnZhciBkZWJvdW5jZSA9IHJlcXVpcmUoJy4vZGVib3VuY2UnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbWl0dGVyICh0aGluZywgb3B0aW9ucykge1xuICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBldnQgPSB7fTtcbiAgaWYgKHRoaW5nID09PSB1bmRlZmluZWQpIHsgdGhpbmcgPSB7fTsgfVxuICB0aGluZy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIGlmICghZXZ0W3R5cGVdKSB7XG4gICAgICBldnRbdHlwZV0gPSBbZm5dO1xuICAgIH0gZWxzZSB7XG4gICAgICBldnRbdHlwZV0ucHVzaChmbik7XG4gICAgfVxuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub25jZSA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIGZuLl9vbmNlID0gdHJ1ZTsgLy8gdGhpbmcub2ZmKGZuKSBzdGlsbCB3b3JrcyFcbiAgICB0aGluZy5vbih0eXBlLCBmbik7XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vZmYgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYgKGMgPT09IDEpIHtcbiAgICAgIGRlbGV0ZSBldnRbdHlwZV07XG4gICAgfSBlbHNlIGlmIChjID09PSAwKSB7XG4gICAgICBldnQgPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGV0ID0gZXZ0W3R5cGVdO1xuICAgICAgaWYgKCFldCkgeyByZXR1cm4gdGhpbmc7IH1cbiAgICAgIGV0LnNwbGljZShldC5pbmRleE9mKGZuKSwgMSk7XG4gICAgfVxuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcuZW1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdGhpbmcuZW1pdHRlclNuYXBzaG90KGFyZ3Muc2hpZnQoKSkuYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG4gIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIGV0ID0gKGV2dFt0eXBlXSB8fCBbXSkuc2xpY2UoMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgICAgdmFyIGN0eCA9IHRoaXMgfHwgdGhpbmc7XG4gICAgICBpZiAodHlwZSA9PT0gJ2Vycm9yJyAmJiBvcHRzLnRocm93cyAhPT0gZmFsc2UgJiYgIWV0Lmxlbmd0aCkgeyB0aHJvdyBhcmdzLmxlbmd0aCA9PT0gMSA/IGFyZ3NbMF0gOiBhcmdzOyB9XG4gICAgICBldC5mb3JFYWNoKGZ1bmN0aW9uIGVtaXR0ZXIgKGxpc3Rlbikge1xuICAgICAgICBpZiAob3B0cy5hc3luYykgeyBkZWJvdW5jZShsaXN0ZW4sIGFyZ3MsIGN0eCk7IH0gZWxzZSB7IGxpc3Rlbi5hcHBseShjdHgsIGFyZ3MpOyB9XG4gICAgICAgIGlmIChsaXN0ZW4uX29uY2UpIHsgdGhpbmcub2ZmKHR5cGUsIGxpc3Rlbik7IH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaW5nO1xuICAgIH07XG4gIH07XG4gIHJldHVybiB0aGluZztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2F0b2EvYXRvYS5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdGlja3kgPSByZXF1aXJlKCd0aWNreScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2RlYm91bmNlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgc2kgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nLCB0aWNrO1xuaWYgKHNpKSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcbn0gZWxzZSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0VGltZW91dChmbiwgMCk7IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGljaztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGlja3kvdGlja3ktYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVpZGF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuc2V0SW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLnNldEltbWVkaWF0ZSk7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuY2xlYXJJbW1lZGlhdGUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3VzdG9tRXZlbnQgPSByZXF1aXJlKCdjdXN0b20tZXZlbnQnKTtcbnZhciBldmVudG1hcCA9IHJlcXVpcmUoJy4vZXZlbnRtYXAnKTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvY3Jvc3N2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciBOYXRpdmVDdXN0b21FdmVudCA9IGdsb2JhbC5DdXN0b21FdmVudDtcblxuZnVuY3Rpb24gdXNlTmF0aXZlICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcCA9IG5ldyBOYXRpdmVDdXN0b21FdmVudCgnY2F0JywgeyBkZXRhaWw6IHsgZm9vOiAnYmFyJyB9IH0pO1xuICAgIHJldHVybiAgJ2NhdCcgPT09IHAudHlwZSAmJiAnYmFyJyA9PT0gcC5kZXRhaWwuZm9vO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENyb3NzLWJyb3dzZXIgYEN1c3RvbUV2ZW50YCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQuQ3VzdG9tRXZlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VOYXRpdmUoKSA/IE5hdGl2ZUN1c3RvbUV2ZW50IDpcblxuLy8gSUUgPj0gOVxuJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID8gZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgfSBlbHNlIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UsIHZvaWQgMCk7XG4gIH1cbiAgcmV0dXJuIGU7XG59IDpcblxuLy8gSUUgPD0gOFxuZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gIGUudHlwZSA9IHR5cGU7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmJ1YmJsZXMgPSBCb29sZWFuKHBhcmFtcy5idWJibGVzKTtcbiAgICBlLmNhbmNlbGFibGUgPSBCb29sZWFuKHBhcmFtcy5jYW5jZWxhYmxlKTtcbiAgICBlLmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gIH0gZWxzZSB7XG4gICAgZS5idWJibGVzID0gZmFsc2U7XG4gICAgZS5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgZS5kZXRhaWwgPSB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3VzdG9tLWV2ZW50L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2RyYWd1bGEvY2xhc3Nlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7XG4gIHJlbW92ZUl0ZW1zLFxuICBkcmFnSXRlbXMsXG4gIG9uRHJhZ09iamVjdCxcbiAgb25SZW1vdmVPYmplY3QsXG59IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYXJncykge1xuICBjb25zdCBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICBpZiAoIWZpZWxkcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGF1dG9MaXN0ID0+IHtcbiAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oYXV0b0xpc3QsIGFyZ3MuaGlkZGVuKTtcbiAgICBjb25zdCByZW1vdmUgPSByZW1vdmVJdGVtcyhIaWRkZW4sIG9uUmVtb3ZlT2JqZWN0KTtcbiAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnT2JqZWN0KTtcbiAgICBjb25zdCBMaXN0ID0gbGlzdChcbiAgICAgIGF1dG9MaXN0LFxuICAgICAgT2JqZWN0LmFzc2lnbihhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZSB9KSxcbiAgICApO1xuICAgIGNvbnN0IGlucHV0ID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvcignLmF1dG9zdWdnZXN0LWxpc3QtaW5wdXQnKTtcbiAgICBjb25zdCBlbE5hbWUgPSBgYXV0b0xpc3RfJHtpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKX1gO1xuICAgIGxldCBlbmRwb2ludDtcblxuICAgIGlmICh3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2UpIHtcbiAgICAgIGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vJHt3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2V9LyR7XG4gICAgICAgIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlXG4gICAgICB9P3NlYXJjaD1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmRwb2ludCA9IGAke09NR0ZpZWxkcy5iYXNlVVJMfS93cC1qc29uL3dwL3YyLyR7XG4gICAgICAgIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlXG4gICAgICB9P3NlYXJjaD1gO1xuICAgIH1cblxuICAgIGF1dG9TdWdnZXN0KGlucHV0LCBlbmRwb2ludCwgKHZhbHVlLCBpbnB1dCkgPT4ge1xuICAgICAgTGlzdC5hZGQodmFsdWUpO1xuICAgICAgaW5wdXQudmFsdWUgPSAnJztcbiAgICAgIEhpZGRlbi5hZGQodmFsdWUpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG9zdWdnZXN0LWxpc3QuanMiLCJpbXBvcnQgYXV0b1N1Z2dlc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgY29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgaWYgKCFmaWVsZHMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBhdXRvSXRlbSA9PiB7XG4gICAgY29uc3QgaGlkZGVuID0gYXV0b0l0ZW0ucXVlcnlTZWxlY3RvcihhcmdzLmhpZGRlbik7XG4gICAgY29uc3QgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtaW5wdXQnKTtcbiAgICBjb25zdCBlbE5hbWUgPSBgYXV0b0xpc3RfJHtpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKX1gO1xuICAgIGxldCBlbmRwb2ludDtcblxuICAgIGlmICh3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2UpIHtcbiAgICAgIGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vJHt3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2V9LyR7XG4gICAgICAgIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlXG4gICAgICB9P3NlYXJjaD1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmRwb2ludCA9IGAke09NR0ZpZWxkcy5iYXNlVVJMfS93cC1qc29uL3dwL3YyLyR7XG4gICAgICAgIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlXG4gICAgICB9P3NlYXJjaD1gO1xuICAgIH1cblxuICAgIGF1dG9TdWdnZXN0KFxuICAgICAgaW5wdXQsXG4gICAgICBlbmRwb2ludCxcbiAgICAgICh2YWx1ZSwgaW5wdXQpID0+IHtcbiAgICAgICAgaGlkZGVuLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgaGlkZGVuLnZhbHVlID0gJyc7XG4gICAgICB9LFxuICAgICk7XG4gIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0by1pdGVtLmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW1hZ2VVcGxvYWRzKCkge1xuXHR2YXIgZmVhdHVyZWRJbWFnZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLW1lZGlhLXVwbG9hZCcpO1xuXG5cdGlmICggZmVhdHVyZWRJbWFnZVdyYXAubGVuZ3RoID09PSAwICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdFtdLm1hcC5jYWxsKCBmZWF0dXJlZEltYWdlV3JhcCwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdC8vIHZhciBJbWFnZVdyYXBJZCA9IGl0ZW0uYXR0cmlidXRlLmlkO1xuXHRcdHZhciByZW1vdmVJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnJlbW92ZS1pbWFnZScpO1xuXHRcdHZhciByZXBsYWNlSW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5yZXBsYWNlLWltYWdlJyk7XG5cdFx0dmFyIHNldEltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuc2V0LWltYWdlJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VUYWcgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2EucmVwbGFjZS1pbWFnZSBpbWcnKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZUlEID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VUaXRsZSA9IGl0ZW0ucXVlcnlTZWxlY3RvciggJy50aHVtYm5haWwtdGl0bGUnICk7XG5cdFx0dmFyIG1lZGlhRnJhbWUgPSB3cC5tZWRpYSh7XG5cdFx0XHR0aXRsZTogJ0Nob29zZSBNZWRpYScsXG5cdFx0XHRidXR0b246IHtcblx0XHRcdFx0dGV4dDogJ1VzZSBTZWxlY3RlZCBNZWRpYSdcblx0XHRcdH0sXG5cdFx0XHRtdWx0aXBsZTogZmFsc2Vcblx0XHR9KTtcblxuXHRcdG1lZGlhRnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS5maXJzdCgpLnRvSlNPTigpO1xuXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gYXR0YWNobWVudC5pZDtcblx0XHRcdGlmIChhdHRhY2htZW50Lmhhc093blByb3BlcnR5KCdzaXplcycpKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50LnNpemVzLnRodW1ibmFpbC51cmwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuaWNvbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZmVhdHVyZWRJbWFnZVRpdGxlICkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGl0bGUuaW5uZXJIVE1MID0gYXR0YWNobWVudC5maWxlbmFtZTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXG5cdFx0cmVtb3ZlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gJyc7XG5cblx0XHRcdGlmICggZmVhdHVyZWRJbWFnZVRpdGxlICkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGl0bGUuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXBsYWNlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXG5cdFx0c2V0SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXHR9KTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbWFnZS11cGxvYWRzLmpzIiwiaW1wb3J0IGZsYXRwaWNrciBmcm9tICdmbGF0cGlja3InO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgY29uc3QgZGF0ZXBpY2tlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZXBpY2tlci1pbnB1dCcpO1xuXG4gIGlmICghZGF0ZXBpY2tlcnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZGF0ZXBpY2tlcnMsIGRhdGVGaWVsZCA9PiB7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlRmllbGQuZGF0YXNldC5kYXRlO1xuXG4gICAgZmxhdHBpY2tyKGRhdGVGaWVsZCwge1xuICAgICAgYWx0SW5wdXQ6IHRydWUsXG4gICAgICBhbHRGb3JtYXQ6ICdGIGosIFknLFxuICAgICAgZGF0ZUZvcm1hdDogJ1UnLFxuICAgICAgZGVmYXVsdERhdGU6ICFjdXJyZW50RGF0ZSA/ICcnIDogY3VycmVudERhdGUsXG4gICAgfSk7XG4gIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZGF0ZXBpY2tlci5qcyIsIi8qIGZsYXRwaWNrciB2NC40LjMsIEBsaWNlbnNlIE1JVCAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLmZsYXRwaWNrciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYWQgPSBmdW5jdGlvbiBwYWQobnVtYmVyKSB7XG4gICAgICByZXR1cm4gKFwiMFwiICsgbnVtYmVyKS5zbGljZSgtMik7XG4gICAgfTtcbiAgICB2YXIgaW50ID0gZnVuY3Rpb24gaW50KGJvb2wpIHtcbiAgICAgIHJldHVybiBib29sID09PSB0cnVlID8gMSA6IDA7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICAgIGlmIChpbW1lZGlhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBpbW1lZGlhdGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB0aW1lb3V0ICE9PSBudWxsICYmIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiBhcnJheWlmeShvYmopIHtcbiAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xuICAgIH07XG5cbiAgICB2YXIgZG9fbm90aGluZyA9IGZ1bmN0aW9uIGRvX25vdGhpbmcoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB2YXIgbW9udGhUb1N0ciA9IGZ1bmN0aW9uIG1vbnRoVG9TdHIobW9udGhOdW1iZXIsIHNob3J0aGFuZCwgbG9jYWxlKSB7XG4gICAgICByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07XG4gICAgfTtcbiAgICB2YXIgcmV2Rm9ybWF0ID0ge1xuICAgICAgRDogZG9fbm90aGluZyxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZU9iaiwgbW9udGhOYW1lLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLmxvbmdoYW5kLmluZGV4T2YobW9udGhOYW1lKSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSjogZnVuY3Rpb24gSihkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlT2JqLCBhbVBNLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhkYXRlT2JqLmdldEhvdXJzKCkgJSAxMiArIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sIFwiaVwiKS50ZXN0KGFtUE0pKSk7XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTShkYXRlT2JqLCBzaG9ydE1vbnRoLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLnNob3J0aGFuZC5pbmRleE9mKHNob3J0TW9udGgpKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIFU6IGZ1bmN0aW9uIFUoXywgdW5peFNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlRmxvYXQodW5peFNlY29uZHMpICogMTAwMCk7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlT2JqLCB3ZWVrTnVtKSB7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9LFxuICAgICAgWjogZnVuY3Rpb24gWihfLCBJU09EYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShJU09EYXRlKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbiBkKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICAgIH0sXG4gICAgICBoOiBmdW5jdGlvbiBoKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBpOiBmdW5jdGlvbiBpKGRhdGVPYmosIG1pbnV0ZXMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNaW51dGVzKHBhcnNlRmxvYXQobWludXRlcykpO1xuICAgICAgfSxcbiAgICAgIGo6IGZ1bmN0aW9uIGooZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgICAgfSxcbiAgICAgIGw6IGRvX25vdGhpbmcsXG4gICAgICBtOiBmdW5jdGlvbiBtKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBzOiBmdW5jdGlvbiBzKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIHc6IGRvX25vdGhpbmcsXG4gICAgICB5OiBmdW5jdGlvbiB5KGRhdGVPYmosIHllYXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRGdWxsWWVhcigyMDAwICsgcGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9rZW5SZWdleCA9IHtcbiAgICAgIEQ6IFwiKFxcXFx3KylcIixcbiAgICAgIEY6IFwiKFxcXFx3KylcIixcbiAgICAgIEc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBIOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICAgIEs6IFwiXCIsXG4gICAgICBNOiBcIihcXFxcdyspXCIsXG4gICAgICBTOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgVTogXCIoLispXCIsXG4gICAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgWTogXCIoXFxcXGR7NH0pXCIsXG4gICAgICBaOiBcIiguKylcIixcbiAgICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBoOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgaTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBsOiBcIihcXFxcdyspXCIsXG4gICAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgbjogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIHM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgeTogXCIoXFxcXGR7Mn0pXCJcbiAgICB9O1xuICAgIHZhciBmb3JtYXRzID0ge1xuICAgICAgWjogZnVuY3Rpb24gWihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9LFxuICAgICAgRDogZnVuY3Rpb24gRChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgICAgfSxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGZvcm1hdHMubihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIC0gMSwgZmFsc2UsIGxvY2FsZSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhZChmb3JtYXRzLmgoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTtcbiAgICAgIH0sXG4gICAgICBKOiBmdW5jdGlvbiBKKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm9yZGluYWwgIT09IHVuZGVmaW5lZCA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpIDogZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldO1xuICAgICAgfSxcbiAgICAgIE06IGZ1bmN0aW9uIE0oZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGRhdGUuZ2V0TW9udGgoKSwgdHJ1ZSwgbG9jYWxlKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24gVShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9LFxuICAgICAgZDogZnVuY3Rpb24gZChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uIGgoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpICUgMTIgPyBkYXRlLmdldEhvdXJzKCkgJSAxMiA6IDEyO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgIH0sXG4gICAgICBqOiBmdW5jdGlvbiBqKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIGw6IGZ1bmN0aW9uIGwoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgICB9LFxuICAgICAgbTogZnVuY3Rpb24gbShkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRNb250aCgpICsgMSk7XG4gICAgICB9LFxuICAgICAgbjogZnVuY3Rpb24gbihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICB9LFxuICAgICAgdzogZnVuY3Rpb24gdyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldERheSgpO1xuICAgICAgfSxcbiAgICAgIHk6IGZ1bmN0aW9uIHkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZW5nbGlzaCA9IHtcbiAgICAgIHdlZWtkYXlzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICAgICAgICBsb25naGFuZDogW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl1cbiAgICAgIH0sXG4gICAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgICAgfSxcbiAgICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgICBmaXJzdERheU9mV2VlazogMCxcbiAgICAgIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnRoKSB7XG4gICAgICAgIHZhciBzID0gbnRoICUgMTAwO1xuICAgICAgICBpZiAocyA+IDMgJiYgcyA8IDIxKSByZXR1cm4gXCJ0aFwiO1xuXG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIm5kXCI7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCJyZFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXG4gICAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgICBzY3JvbGxUaXRsZTogXCJTY3JvbGwgdG8gaW5jcmVtZW50XCIsXG4gICAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcbiAgICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgICB5ZWFyQXJpYUxhYmVsOiBcIlllYXJcIlxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlRGF0ZUZvcm1hdHRlciA9IGZ1bmN0aW9uIGNyZWF0ZURhdGVGb3JtYXR0ZXIoX3JlZikge1xuICAgICAgdmFyIF9yZWYkY29uZmlnID0gX3JlZi5jb25maWcsXG4gICAgICAgICAgY29uZmlnID0gX3JlZiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZiRjb25maWcsXG4gICAgICAgICAgX3JlZiRsMTBuID0gX3JlZi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmJGwxMG4gPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfcmVmJGwxMG47XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGVPYmosIGZybXQsIG92ZXJyaWRlTG9jYWxlKSB7XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gY29uZmlnLmZvcm1hdERhdGUoZGF0ZU9iaiwgZnJtdCk7XG4gICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuO1xuICAgICAgICByZXR1cm4gZnJtdC5zcGxpdChcIlwiKS5tYXAoZnVuY3Rpb24gKGMsIGksIGFycikge1xuICAgICAgICAgIHJldHVybiBmb3JtYXRzW2NdICYmIGFycltpIC0gMV0gIT09IFwiXFxcXFwiID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZykgOiBjICE9PSBcIlxcXFxcIiA/IGMgOiBcIlwiO1xuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBjcmVhdGVEYXRlUGFyc2VyID0gZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihfcmVmMikge1xuICAgICAgdmFyIF9yZWYyJGNvbmZpZyA9IF9yZWYyLmNvbmZpZyxcbiAgICAgICAgICBjb25maWcgPSBfcmVmMiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZjIkY29uZmlnLFxuICAgICAgICAgIF9yZWYyJGwxMG4gPSBfcmVmMi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmMiRsMTBuID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX3JlZjIkbDEwbjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyc2VkRGF0ZTtcbiAgICAgICAgdmFyIGRhdGVfb3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJiBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZCkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO2Vsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdmFyIGZvcm1hdCA9IGdpdmVuRm9ybWF0IHx8IChjb25maWcgfHwgZGVmYXVsdHMpLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuXG4gICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHwgL0dNVCQvLnRlc3QoZGF0ZXN0cikpIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhciA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMCkgOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkLFxuICAgICAgICAgICAgICAgIG9wcyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gXCJcIjsgaSA8IGZvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBmb3JtYXRbaV07XG4gICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSBcIlxcXFxcIiB8fCBpc0JhY2tTbGFzaDtcblxuICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuZXcgUmVnRXhwKHJlZ2V4U3RyKS5leGVjKGRhdGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaGVkID0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XG4gICAgICAgICAgICAgICAgICAgIGZuOiByZXZGb3JtYXRbdG9rZW5dLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCYWNrU2xhc2gpIHJlZ2V4U3RyICs9IFwiLlwiO1xuXG4gICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IF9yZWYzLmZuLFxuICAgICAgICAgICAgICAgICAgICB2YWwgPSBfcmVmMy52YWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZERhdGUgPSBmbihwYXJzZWREYXRlLCB2YWwsIGwxMG4pIHx8IHBhcnNlZERhdGU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6IFwiICsgZGF0ZV9vcmlnKSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSkgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XG4gICAgICB9O1xuICAgIH07XG4gICAgZnVuY3Rpb24gY29tcGFyZURhdGVzKGRhdGUxLCBkYXRlMiwgdGltZWxlc3MpIHtcbiAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZTEuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtIG5ldyBEYXRlKGRhdGUyLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG4gICAgfVxuICAgIHZhciBnZXRXZWVrID0gZnVuY3Rpb24gZ2V0V2VlayhnaXZlbkRhdGUpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZ2l2ZW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtIChkYXRlLmdldERheSgpICsgNikgJSA3KTtcbiAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XG4gICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XG4gICAgfTtcbiAgICB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gaXNCZXR3ZWVuKHRzLCB0czEsIHRzMikge1xuICAgICAgcmV0dXJuIHRzID4gTWF0aC5taW4odHMxLCB0czIpICYmIHRzIDwgTWF0aC5tYXgodHMxLCB0czIpO1xuICAgIH07XG4gICAgdmFyIGR1cmF0aW9uID0ge1xuICAgICAgREFZOiA4NjQwMDAwMFxuICAgIH07XG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBfZGlzYWJsZTogW10sXG4gICAgICBfZW5hYmxlOiBbXSxcbiAgICAgIGFsbG93SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0Rm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0SW5wdXRDbGFzczogXCJmb3JtLWNvbnRyb2wgaW5wdXRcIixcbiAgICAgIGFuaW1hdGU6IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xLFxuICAgICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgICAgY2xvc2VPblNlbGVjdDogdHJ1ZSxcbiAgICAgIGNvbmp1bmN0aW9uOiBcIiwgXCIsXG4gICAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgICBkZWZhdWx0SG91cjogMTIsXG4gICAgICBkZWZhdWx0TWludXRlOiAwLFxuICAgICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgICBkaXNhYmxlOiBbXSxcbiAgICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLFxuICAgICAgZW5hYmxlOiBbXSxcbiAgICAgIGVuYWJsZVNlY29uZHM6IGZhbHNlLFxuICAgICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgICBlcnJvckhhbmRsZXI6IGNvbnNvbGUud2FybixcbiAgICAgIGdldFdlZWs6IGdldFdlZWssXG4gICAgICBob3VySW5jcmVtZW50OiAxLFxuICAgICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgIGxvY2FsZTogXCJkZWZhdWx0XCIsXG4gICAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgICBtb2RlOiBcInNpbmdsZVwiLFxuICAgICAgbmV4dEFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNMTMuMjA3IDguNDcybC03Ljg1NCA3Ljg1NC0wLjcwNy0wLjcwNyA3LjE0Ni03LjE0Ni03LjE0Ni03LjE0OCAwLjcwNy0wLjcwNyA3Ljg1NCA3Ljg1NHonIC8+PC9zdmc+XCIsXG4gICAgICBub0NhbGVuZGFyOiBmYWxzZSxcbiAgICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICAgIG9uQ2hhbmdlOiBbXSxcbiAgICAgIG9uQ2xvc2U6IFtdLFxuICAgICAgb25EYXlDcmVhdGU6IFtdLFxuICAgICAgb25EZXN0cm95OiBbXSxcbiAgICAgIG9uS2V5RG93bjogW10sXG4gICAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICAgIG9uT3BlbjogW10sXG4gICAgICBvblBhcnNlQ29uZmlnOiBbXSxcbiAgICAgIG9uUmVhZHk6IFtdLFxuICAgICAgb25WYWx1ZVVwZGF0ZTogW10sXG4gICAgICBvblllYXJDaGFuZ2U6IFtdLFxuICAgICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICAgIHBsdWdpbnM6IFtdLFxuICAgICAgcG9zaXRpb246IFwiYXV0b1wiLFxuICAgICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgICBwcmV2QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J001LjIwNyA4LjQ3MWw3LjE0NiA3LjE0Ny0wLjcwNyAwLjcwNy03Ljg1My03Ljg1NCA3Ljg1NC03Ljg1MyAwLjcwNyAwLjcwNy03LjE0NyA3LjE0NnonIC8+PC9zdmc+XCIsXG4gICAgICBzaG9ydGhhbmRDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgc2hvd01vbnRoczogMSxcbiAgICAgIHN0YXRpYzogZmFsc2UsXG4gICAgICB0aW1lXzI0aHI6IGZhbHNlLFxuICAgICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgICAgd3JhcDogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7XG4gICAgICBpZiAoYm9vbCA9PT0gdHJ1ZSkgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICAgIHZhciBlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICAgIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgaWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZCkgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgICAgaWYgKGNvbmRpdGlvbihub2RlKSkgcmV0dXJuIG5vZGU7ZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSByZXR1cm4gZmluZFBhcmVudChub2RlLnBhcmVudE5vZGUsIGNvbmRpdGlvbik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVOdW1iZXJJbnB1dChpbnB1dENsYXNzTmFtZSwgb3B0cykge1xuICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwibnVtSW5wdXRXcmFwcGVyXCIpLFxuICAgICAgICAgIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksXG4gICAgICAgICAgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dVcFwiKSxcbiAgICAgICAgICBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93RG93blwiKTtcbiAgICAgIG51bUlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZCkgZm9yICh2YXIga2V5IGluIG9wdHMpIHtcbiAgICAgICAgbnVtSW5wdXQuc2V0QXR0cmlidXRlKGtleSwgb3B0c1trZXldKTtcbiAgICAgIH1cbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dEb3duKTtcbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHNvdXJjZSkge1xuICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmdzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmdzW19pXTtcblxuICAgICAgICAgIF9sb29wKHNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDtcblxuICAgIGZ1bmN0aW9uIEZsYXRwaWNrckluc3RhbmNlKGVsZW1lbnQsIGluc3RhbmNlQ29uZmlnKSB7XG4gICAgICB2YXIgc2VsZiA9IHtcbiAgICAgICAgY29uZmlnOiBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyksXG4gICAgICAgIGwxMG46IGVuZ2xpc2hcbiAgICAgIH07XG4gICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoe1xuICAgICAgICBjb25maWc6IHNlbGYuY29uZmlnLFxuICAgICAgICBsMTBuOiBzZWxmLmwxMG5cbiAgICAgIH0pO1xuICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgIHNlbGYuX2JpbmQgPSBiaW5kO1xuICAgICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7XG4gICAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgICBzZWxmLmNoYW5nZVllYXIgPSBjaGFuZ2VZZWFyO1xuICAgICAgc2VsZi5jbGVhciA9IGNsZWFyO1xuICAgICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgICAgc2VsZi5fY3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQ7XG4gICAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgICAgc2VsZi5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XG4gICAgICBzZWxmLmp1bXBUb0RhdGUgPSBqdW1wVG9EYXRlO1xuICAgICAgc2VsZi5vcGVuID0gb3BlbjtcbiAgICAgIHNlbGYucmVkcmF3ID0gcmVkcmF3O1xuICAgICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgICBzZWxmLnNldERhdGUgPSBzZXREYXRlO1xuICAgICAgc2VsZi50b2dnbGUgPSB0b2dnbGU7XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwSGVscGVyRnVuY3Rpb25zKCkge1xuICAgICAgICBzZWxmLnV0aWxzID0ge1xuICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiBnZXREYXlzSW5Nb250aChtb250aCwgeXIpIHtcbiAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHlyID0gc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1vbnRoID09PSAxICYmICh5ciAlIDQgPT09IDAgJiYgeXIgJSAxMDAgIT09IDAgfHwgeXIgJSA0MDAgPT09IDApKSByZXR1cm4gMjk7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5sMTBuLmRheXNJbk1vbnRoW21vbnRoXTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHNlbGYuZWxlbWVudCA9IHNlbGYuaW5wdXQgPSBlbGVtZW50O1xuICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICBwYXJzZUNvbmZpZygpO1xuICAgICAgICBzZXR1cExvY2FsZSgpO1xuICAgICAgICBzZXR1cElucHV0cygpO1xuICAgICAgICBzZXR1cERhdGVzKCk7XG4gICAgICAgIHNldHVwSGVscGVyRnVuY3Rpb25zKCk7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkgYnVpbGQoKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogfHwgc2VsZi5jb25maWcubWluRGF0ZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDAgfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcjtcblxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5c0NvbnRhaW5lci5vZmZzZXRXaWR0aCArIDEpICogc2VsZi5jb25maWcuc2hvd01vbnRocztcbiAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcblxuICAgICAgICAgIGlmIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRUb0luc3RhbmNlKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgdGltZVdyYXBwZXIoZSk7XG5cbiAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICB9LCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhbXBtMm1pbGl0YXJ5KGhvdXIsIGFtUE0pIHtcbiAgICAgICAgcmV0dXJuIGhvdXIgJSAxMiArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICByZXR1cm4gMTI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdXJzID0gKHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUuc2xpY2UoLTIpLCAxMCkgfHwgMCkgJSAyNCxcbiAgICAgICAgICAgIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCxcbiAgICAgICAgICAgIHNlY29uZHMgPSBzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwIDogMDtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBob3VycyA9IGFtcG0ybWlsaXRhcnkoaG91cnMsIHNlbGYuYW1QTS50ZXh0Q29udGVudCk7XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJiBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PSAwO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYubWF4RGF0ZUhhc1RpbWUgJiYgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiYgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT0gMDtcblxuICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xuICAgICAgICAgIHZhciBtYXhUaW1lID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWF4VGltZSA6IHNlbGYuY29uZmlnLm1heERhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4VGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWF4VGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGltaXRNaW5Ib3Vycykge1xuICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWluVGltZSA6IHNlbGYuY29uZmlnLm1pbkRhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWF4KG1pbnV0ZXMsIG1pblRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1heChzZWNvbmRzLCBtaW5UaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlKSBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgICAgIGlmIChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouc2V0SG91cnMoaG91cnMgJSAyNCwgbWludXRlcywgc2Vjb25kcyB8fCAwLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5ob3VyRWxlbWVudCB8fCAhc2VsZi5taW51dGVFbGVtZW50IHx8IHNlbGYuaXNNb2JpbGUpIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyID8gKDEyICsgaG91cnMpICUgMTIgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKSA6IGhvdXJzKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKG1pbnV0ZXMpO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChob3VycyA+PSAxMildO1xuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpICsgKGV2ZW50LmRlbHRhIHx8IDApO1xuXG4gICAgICAgIGlmICh5ZWFyLnRvU3RyaW5nKCkubGVuZ3RoID09PSA0IHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICBpZiAoIS9bXlxcZF0vLnRlc3QoeWVhci50b1N0cmluZygpKSkgY2hhbmdlWWVhcih5ZWFyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICByZXR1cm4gYmluZChlbGVtZW50LCBldiwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzLnB1c2goe1xuICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uQ2xpY2soaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIGV2dC53aGljaCA9PT0gMSAmJiBoYW5kbGVyKGV2dCk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgIFtcIm9wZW5cIiwgXCJjbG9zZVwiLCBcInRvZ2dsZVwiLCBcImNsZWFyXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUpIHtcbiAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3ZlcihlLnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMpIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmlubGluZSAmJiAhc2VsZi5jb25maWcuc3RhdGljKSBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZCkgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwidG91Y2hzdGFydFwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soZG9jdW1lbnRDbGljaykpO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJmb2N1c1wiLCBkb2N1bWVudENsaWNrLCB7XG4gICAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGYub3BlbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKG9uTW9udGhOYXZDbGljaykpO1xuICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgW1wia2V5dXBcIiwgXCJpbmNyZW1lbnRcIl0sIG9uWWVhcklucHV0KTtcbiAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayhzZWxlY3REYXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiYgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNlbFRleHQgPSBmdW5jdGlvbiBzZWxUZXh0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5zZWxlY3QoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCB1cGRhdGVUaW1lKTtcbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayh0aW1lSW5jcmVtZW50KSk7XG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UsIHtcbiAgICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBiaW5kKFtzZWxmLmhvdXJFbGVtZW50LCBzZWxmLm1pbnV0ZUVsZW1lbnRdLCBbXCJmb2N1c1wiLCBcImNsaWNrXCJdLCBzZWxUZXh0KTtcbiAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5zZWNvbmRFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJtb3VzZWRvd25cIiwgb25DbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUpIHtcbiAgICAgICAgdmFyIGp1bXBUbyA9IGp1bXBEYXRlICE9PSB1bmRlZmluZWQgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSkgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fCAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5taW5EYXRlIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmNvbmZpZy5tYXhEYXRlIDwgc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5tYXhEYXRlIDogc2VsZi5ub3cpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGp1bXBUbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0ganVtcFRvLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGUubWVzc2FnZSA9IFwiSW52YWxpZCBkYXRlIHN1cHBsaWVkOiBcIiArIGp1bXBUbztcbiAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcbiAgICAgICAgaWYgKH5lLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKSBpbmNyZW1lbnROdW1JbnB1dChlLCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd1VwXCIpID8gMSA6IC0xKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW5jcmVtZW50TnVtSW5wdXQoZSwgZGVsdGEsIGlucHV0RWxlbSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZSAmJiBlLnRhcmdldDtcbiAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRFbGVtIHx8IHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICAgICAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudChcImluY3JlbWVudFwiKTtcbiAgICAgICAgZXZlbnQuZGVsdGEgPSBkZWx0YTtcbiAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTW9udGhOYXYoKSk7XG4gICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgIHZhciBfYnVpbGRXZWVrcyA9IGJ1aWxkV2Vla3MoKSxcbiAgICAgICAgICAgICAgICB3ZWVrV3JhcHBlciA9IF9idWlsZFdlZWtzLndlZWtXcmFwcGVyLFxuICAgICAgICAgICAgICAgIHdlZWtOdW1iZXJzID0gX2J1aWxkV2Vla3Mud2Vla051bWJlcnM7XG5cbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1dyYXBwZXIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgc2VsZi53ZWVrV3JhcHBlciA9IHdlZWtXcmFwcGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcblxuICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuckNvbnRhaW5lcik7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmFuZ2VNb2RlXCIsIHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIik7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYW5pbWF0ZVwiLCBzZWxmLmNvbmZpZy5hbmltYXRlID09PSB0cnVlKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJtdWx0aU1vbnRoXCIsIHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIHZhciBjdXN0b21BcHBlbmQgPSBzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkICYmIHNlbGYuY29uZmlnLmFwcGVuZFRvLm5vZGVUeXBlICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7ZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCkgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcuYXBwZW5kVG8gOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIGRheU51bWJlciwgaSkge1xuICAgICAgICB2YXIgZGF0ZUlzRW5hYmxlZCA9IGlzRW5hYmxlZChkYXRlLCB0cnVlKSxcbiAgICAgICAgICAgIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1kYXkgXCIgKyBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuXG4gICAgICAgIGlmIChjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgc2VsZi50b2RheURhdGVFbGVtID0gZGF5RWxlbWVudDtcbiAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlSXNFbmFibGVkKSB7XG4gICAgICAgICAgZGF5RWxlbWVudC50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgICAgaWYgKGlzRGF0ZVNlbGVjdGVkKGRhdGUpKSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJzdGFydFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0sIHRydWUpID09PSAwKTtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gXCJuZXh0TW9udGhEYXlcIikgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKSBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJiBjbGFzc05hbWUgIT09IFwicHJldk1vbnRoRGF5XCIgJiYgZGF5TnVtYmVyICUgNyA9PT0gMSkge1xuICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheShjdXJyZW50SW5kLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGN1cnJlbnRJbmQgIT09IHVuZGVmaW5lZCA/IGN1cnJlbnRJbmQgOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LiRpO1xuICAgICAgICB2YXIgbmV3SW5kZXggPSAoY3VycmVudEluZGV4IHx8IDApICsgb2Zmc2V0IHx8IDAsXG4gICAgICAgICAgICB0YXJnZXROb2RlID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChzZWxmLmRheXMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICAgICAgcmV0dXJuIGkgPj0gbmV3SW5kZXggJiYgYy5jbGFzc05hbWUuaW5kZXhPZihcIk1vbnRoRGF5XCIpID09PSAtMSAmJiBpc0VuYWJsZWQoYy5kYXRlT2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRhcmdldE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRhcmdldE5vZGUuZm9jdXMoKTtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgpLFxuICAgICAgICAgICAgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCxcbiAgICAgICAgICAgIGRheUluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJwcmV2TW9udGhEYXlcIiwgbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIlwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGggJiYgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgfHwgZGF5SW5kZXggJSA3ICE9PSAwKTsgZGF5TnVtKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIm5leHRNb250aERheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheU51bSAlIGRheXNJbk1vbnRoKSwgZGF5TnVtLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpIGNsZWFyTm9kZShzZWxmLndlZWtOdW1iZXJzKTtcbiAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpKyspIHtcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKTtcbiAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChidWlsZE1vbnRoRGF5cyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aCgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhcIik7XG4gICAgICAgIHZhciBtb250aE5hdkZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICBtb250aEVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHZhciB5ZWFySW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImN1ci15ZWFyXCIsIHtcbiAgICAgICAgICB0YWJpbmRleDogXCItMVwiXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgeWVhckVsZW1lbnQgPSB5ZWFySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgeWVhckVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLnllYXJBcmlhTGFiZWwpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSkgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG4gICAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIHllYXJFbGVtZW50LmRpc2FibGVkID0gISFzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY3VycmVudC1tb250aFwiKTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKG1vbnRoRWxlbWVudCk7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZCh5ZWFySW5wdXQpO1xuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKGN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aE5hdkZyYWdtZW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICB5ZWFyRWxlbWVudDogeWVhckVsZW1lbnQsXG4gICAgICAgICAgbW9udGhFbGVtZW50OiBtb250aEVsZW1lbnRcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhzXCIpO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7XG4gICAgICAgIHNlbGYubmV4dE1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItbmV4dC1tb250aFwiKTtcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcblxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgIHZhciBtb250aCA9IGJ1aWxkTW9udGgoKTtcbiAgICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5wdXNoKG1vbnRoLnllYXJFbGVtZW50KTtcbiAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQobW9udGguY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgIT09IGJvb2wpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5wcmV2TW9udGhOYXYsIFwiZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3c7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLm5leHRNb250aE5hdiwgXCJkaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQgPSBzZWxmLnllYXJFbGVtZW50c1swXTtcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICByZXR1cm4gc2VsZi5tb250aE5hdjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRUaW1lKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNUaW1lXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhcikgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm9DYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKTtcbiAgICAgICAgdmFyIGhvdXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLWhvdXJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgdmFyIG1pbnV0ZUlucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItbWludXRlXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgPSBtaW51dGVJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpIDogc2VsZi5jb25maWcudGltZV8yNGhyID8gc2VsZi5jb25maWcuZGVmYXVsdEhvdXIgOiBtaWxpdGFyeTJhbXBtKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiLCBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjBcIiA6IFwiMVwiKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjIzXCIgOiBcIjEyXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgXCIwXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJJbnB1dCk7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQobWludXRlSW5wdXQpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcudGltZV8yNGhyKSBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUyNGhyXCIpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNTZWNvbmRzXCIpO1xuICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmhvdXJFbGVtZW50LnZhbHVlIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuICAgICAgICAgIHNlbGYuYW1QTS50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGYudGltZUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRXZWVrZGF5cygpIHtcbiAgICAgICAgaWYgKCFzZWxmLndlZWtkYXlDb250YWluZXIpIHNlbGYud2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcbiAgICAgICAgdmFyIHdlZWtkYXlzID0gc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5jb25jYXQoKTtcblxuICAgICAgICBpZiAoZmlyc3REYXlPZldlZWsgPiAwICYmIGZpcnN0RGF5T2ZXZWVrIDwgd2Vla2RheXMubGVuZ3RoKSB7XG4gICAgICAgICAgd2Vla2RheXMgPSB3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCkuY29uY2F0KHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cXG4gICAgICAgIFwiICsgd2Vla2RheXMuam9pbihcIjwvc3Bhbj48c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cIikgKyBcIlxcbiAgICAgIDwvc3Bhbj5cXG4gICAgICBcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFdlZWtzKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNXZWVrc1wiKTtcbiAgICAgICAgdmFyIHdlZWtXcmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrd3JhcHBlclwiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3Itd2Vla2RheVwiLCBzZWxmLmwxMG4ud2Vla0FiYnJldmlhdGlvbikpO1xuICAgICAgICB2YXIgd2Vla051bWJlcnMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtzXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZCh3ZWVrTnVtYmVycyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVyc1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNfb2Zmc2V0LCBmcm9tX2tleWJvYXJkKSB7XG4gICAgICAgIGlmIChpc19vZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGlzX29mZnNldCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZnJvbV9rZXlib2FyZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlbHRhID0gaXNfb2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoZGVsdGEgPCAwICYmIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdyA9PT0gdHJ1ZSB8fCBkZWx0YSA+IDAgJiYgc2VsZi5faGlkZU5leHRNb250aEFycm93ID09PSB0cnVlKSByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuXG4gICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG5cbiAgICAgICAgaWYgKGZyb21fa2V5Ym9hcmQgPT09IHRydWUpIHtcbiAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCkgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlKTtlbHNlIHNldEhvdXJzKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyLCBzZWxmLmNvbmZpZy5kZWZhdWx0TWludXRlLCBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcblxuICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZCkgdHJpZ2dlckV2ZW50KFwib25EZXN0cm95XCIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLl9oYW5kbGVycy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICB2YXIgaCA9IHNlbGYuX2hhbmRsZXJzW2ldO1xuICAgICAgICAgIGguZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGguZXZlbnQsIGguaGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuXG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0KSB7XG4gICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZSkgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcblxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICBkZWxldGUgc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gc2VsZi5pbnB1dC5fdHlwZTtcbiAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFtcIl9zaG93VGltZUlucHV0XCIsIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9faGlkZVByZXZNb250aEFycm93XCIsIFwiaXNNb2JpbGVcIiwgXCJpc09wZW5cIiwgXCJzZWxlY3RlZERhdGVFbGVtXCIsIFwibWluRGF0ZUhhc1RpbWVcIiwgXCJtYXhEYXRlSGFzVGltZVwiLCBcImRheXNcIiwgXCJkYXlzQ29udGFpbmVyXCIsIFwiX2lucHV0XCIsIFwiX3Bvc2l0aW9uRWxlbWVudFwiLCBcImlubmVyQ29udGFpbmVyXCIsIFwickNvbnRhaW5lclwiLCBcIm1vbnRoTmF2XCIsIFwidG9kYXlEYXRlRWxlbVwiLCBcImNhbGVuZGFyQ29udGFpbmVyXCIsIFwid2Vla2RheUNvbnRhaW5lclwiLCBcInByZXZNb250aE5hdlwiLCBcIm5leHRNb250aE5hdlwiLCBcImN1cnJlbnRNb250aEVsZW1lbnRcIiwgXCJjdXJyZW50WWVhckVsZW1lbnRcIiwgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsIFwic2VsZWN0ZWREYXRlRWxlbVwiLCBcImNvbmZpZ1wiXS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmW2tdO1xuICAgICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0NhbGVuZGFyRWxlbShlbGVtKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAmJiBzZWxmLmNvbmZpZy5hcHBlbmRUby5jb250YWlucyhlbGVtKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICB2YXIgaXNDYWxlbmRhckVsZW1lbnQgPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5pbnB1dCB8fCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCB8fCBzZWxmLmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpIHx8IGUucGF0aCAmJiBlLnBhdGguaW5kZXhPZiAmJiAofmUucGF0aC5pbmRleE9mKHNlbGYuaW5wdXQpIHx8IH5lLnBhdGguaW5kZXhPZihzZWxmLmFsdElucHV0KSk7XG4gICAgICAgICAgdmFyIGxvc3RGb2N1cyA9IGUudHlwZSA9PT0gXCJibHVyXCIgPyBpc0lucHV0ICYmIGUucmVsYXRlZFRhcmdldCAmJiAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KSA6ICFpc0lucHV0ICYmICFpc0NhbGVuZGFyRWxlbWVudDtcbiAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChsb3N0Rm9jdXMgJiYgaXNJZ25vcmVkKSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hhbmdlWWVhcihuZXdZZWFyKSB7XG4gICAgICAgIGlmICghbmV3WWVhciB8fCBzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgfHwgc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSByZXR1cm47XG4gICAgICAgIHZhciBuZXdZZWFyTnVtID0gbmV3WWVhcixcbiAgICAgICAgICAgIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IG5ld1llYXJOdW07XG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBuZXdZZWFyTnVtIHx8IHNlbGYuY3VycmVudFllYXI7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1pbihzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNFbmFibGVkKGRhdGUsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA9PT0gMCAmJiBzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBib29sID0gc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICBhcnJheSA9IGJvb2wgPyBzZWxmLmNvbmZpZy5lbmFibGUgOiBzZWxmLmNvbmZpZy5kaXNhYmxlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBkID0gYXJyYXlbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiYgZChkYXRlVG9DaGVjaykpIHJldHVybiBib29sO2Vsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSkgcmV0dXJuIGJvb2w7ZWxzZSBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHNlbGYucGFyc2VEYXRlKGQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSA/IGJvb2wgOiAhYm9vbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5mcm9tICYmIGQudG8gJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpID49IGQuZnJvbS5nZXRUaW1lKCkgJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKSByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5faW5wdXQ7XG4gICAgICAgIHZhciBjYWxlbmRhckVsZW0gPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgIHZhciBhbGxvd0lucHV0ID0gc2VsZi5jb25maWcuYWxsb3dJbnB1dDtcbiAgICAgICAgdmFyIGFsbG93S2V5ZG93biA9IHNlbGYuaXNPcGVuICYmICghYWxsb3dJbnB1dCB8fCAhaXNJbnB1dCk7XG4gICAgICAgIHZhciBhbGxvd0lubGluZUtleWRvd24gPSBzZWxmLmNvbmZpZy5pbmxpbmUgJiYgaXNJbnB1dCAmJiAhYWxsb3dJbnB1dDtcblxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7XG4gICAgICAgICAgaWYgKGFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgdHJ1ZSwgZS50YXJnZXQgPT09IHNlbGYuYWx0SW5wdXQgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5ibHVyKCk7XG4gICAgICAgICAgfSBlbHNlIHNlbGYub3BlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyRWxlbSB8fCBhbGxvd0tleWRvd24gfHwgYWxsb3dJbmxpbmVLZXlkb3duKSB7XG4gICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmIHNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCk7XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikgdXBkYXRlVmFsdWUoKTtlbHNlIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX2RlbHRhID0gaXNJbnB1dCA/IDAgOiBlLmtleUNvZGUgPT09IDM5ID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkgZm9jdXNPbkRheSh1bmRlZmluZWQsIF9kZWx0YSk7ZWxzZSBjaGFuZ2VNb250aChfZGVsdGEsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUua2V5Q29kZSA9PT0gNDAgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiBlLnRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShlLnRhcmdldC4kaSwgMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNUaW1lT2JqKSBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCBkZWx0YSAqIDcpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBzZWxmLmhvdXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5taW51dGVFbGVtZW50ICYmIChzZWxmLnNlY29uZEVsZW1lbnQgfHwgc2VsZi5hbVBNKSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC5mb2N1cygpO2Vsc2UgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMF07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzFdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbktleURvd25cIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25Nb3VzZU92ZXIoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fCAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpIHx8IGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBpbml0aWFsRGF0ZSA9IHNlbGYucGFyc2VEYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdW5kZWZpbmVkLCB0cnVlKS5nZXRUaW1lKCksXG4gICAgICAgICAgICByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksXG4gICAgICAgICAgICByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgbW9udGhzID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuLFxuICAgICAgICAgICAgZmlyc3REYXkgPSBtb250aHNbMF0uY2hpbGRyZW5bMF0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBsYXN0RGF5ID0gbW9udGhzW21vbnRocy5sZW5ndGggLSAxXS5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsXG4gICAgICAgICAgICBtYXhSYW5nZSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgdCA9IGZpcnN0RGF5OyB0IDwgbGFzdERheTsgdCArPSBkdXJhdGlvbi5EQVkpIHtcbiAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPSBjb250YWluc0Rpc2FibGVkIHx8IHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlO1xuICAgICAgICAgICAgaWYgKHQgPCBpbml0aWFsRGF0ZSAmJiAoIW1pblJhbmdlIHx8IHQgPiBtaW5SYW5nZSkpIG1pblJhbmdlID0gdDtlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKSBtYXhSYW5nZSA9IHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtKyspIHtcbiAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgdmFyIHByZXZNb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttIC0gMV07XG5cbiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpLCBsKSB7XG4gICAgICAgICAgICB2YXIgZGF5RWxlbSA9IG1vbnRoLmNoaWxkcmVuW2ldLFxuICAgICAgICAgICAgICAgIGRhdGUgPSBkYXlFbGVtLmRhdGVPYmo7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgb3V0T2ZSYW5nZSA9IG1pblJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPCBtaW5SYW5nZSB8fCBtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2U7XG5cbiAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7XG4gICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zRGlzYWJsZWQgJiYgIW91dE9mUmFuZ2UpIHJldHVybiBcImNvbnRpbnVlXCI7XG5cbiAgICAgICAgICAgIFtcInN0YXJ0UmFuZ2VcIiwgXCJpblJhbmdlXCIsIFwiZW5kUmFuZ2VcIiwgXCJub3RBbGxvd2VkXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoaG92ZXJEYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSA/IFwic3RhcnRSYW5nZVwiIDogXCJlbmRSYW5nZVwiKTtcblxuICAgICAgICAgICAgaWYgKG1vbnRoLmNvbnRhaW5zKGVsZW0pIHx8ICEobSA+IDAgJiYgcHJldk1vbnRoICYmIHByZXZNb250aC5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCkgPj0gdGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwic3RhcnRSYW5nZVwiKTtlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA+PSBtaW5SYW5nZSAmJiAobWF4UmFuZ2UgPT09IDAgfHwgdGltZXN0YW1wIDw9IG1heFJhbmdlKSAmJiBpc0JldHdlZW4odGltZXN0YW1wLCBpbml0aWFsRGF0ZSwgaG92ZXJEYXRlKSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBfcmV0ID0gX2xvb3AoaSwgbCk7XG5cbiAgICAgICAgICAgIGlmIChfcmV0ID09PSBcImNvbnRpbnVlXCIpIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvcGVuKGUsIHBvc2l0aW9uRWxlbWVudCkge1xuICAgICAgICBpZiAocG9zaXRpb25FbGVtZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9pbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUudGFyZ2V0ICYmIGUudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHJldHVybjtcbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcbiAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlO1xuXG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG5cbiAgICAgICAgICBzZWxmLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIocG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlICYmIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKSA6IG5ldyBEYXRlKCkuc2V0SG91cnMoc2VsZi5jb25maWcuZGVmYXVsdEhvdXIsIHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUsIHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzLCAwKSwgZmFsc2UpO1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgICAgfSwgNTApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICB2YXIgZGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgdHlwZSArIFwiRGF0ZVwiXSA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XG5cbiAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID0gZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fCBkYXRlT2JqLmdldE1pbnV0ZXMoKSA+IDAgfHwgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlzRW5hYmxlZChkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgaWYgKGRhdGVPYmogIT09IHVuZGVmaW5lZCkgc2VsZi5jdXJyZW50WWVhckVsZW1lbnRbdHlwZV0gPSBkYXRlT2JqLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtlbHNlIHNlbGYuY3VycmVudFllYXJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0eXBlKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID0gISFpbnZlcnNlRGF0ZU9iaiAmJiBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiYgaW52ZXJzZURhdGVPYmouZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZU9iai5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcIndyYXBcIiwgXCJ3ZWVrTnVtYmVyc1wiLCBcImFsbG93SW5wdXRcIiwgXCJjbGlja09wZW5zXCIsIFwidGltZV8yNGhyXCIsIFwiZW5hYmxlVGltZVwiLCBcIm5vQ2FsZW5kYXJcIiwgXCJhbHRJbnB1dFwiLCBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLCBcImlubGluZVwiLCBcInN0YXRpY1wiLCBcImVuYWJsZVNlY29uZHNcIiwgXCJkaXNhYmxlTW9iaWxlXCJdO1xuICAgICAgICB2YXIgaG9va3MgPSBbXCJvbkNoYW5nZVwiLCBcIm9uQ2xvc2VcIiwgXCJvbkRheUNyZWF0ZVwiLCBcIm9uRGVzdHJveVwiLCBcIm9uS2V5RG93blwiLCBcIm9uTW9udGhDaGFuZ2VcIiwgXCJvbk9wZW5cIiwgXCJvblBhcnNlQ29uZmlnXCIsIFwib25SZWFkeVwiLCBcIm9uVmFsdWVVcGRhdGVcIiwgXCJvblllYXJDaGFuZ2VcIiwgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIl07XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFuY2VDb25maWcsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpO1xuICAgICAgICB2YXIgZm9ybWF0cyQkMSA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX2VuYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZGlzYWJsZSA9IHBhcnNlRGF0ZVJ1bGVzKGRhdGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZvcm1hdHMkJDEuZGF0ZUZvcm1hdCA9IHVzZXJDb25maWcubm9DYWxlbmRhciA/IFwiSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgOiBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlckNvbmZpZy5hbHRJbnB1dCAmJiB1c2VyQ29uZmlnLmVuYWJsZVRpbWUgJiYgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XG4gICAgICAgICAgZm9ybWF0cyQkMS5hbHRGb3JtYXQgPSB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKSA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCArIChcIiBoOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKSArIFwiIEtcIik7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluRGF0ZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhEYXRlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4RGF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWluTWF4VGltZVNldHRlciA9IGZ1bmN0aW9uIG1pbk1heFRpbWVTZXR0ZXIodHlwZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSBcIm1pblwiID8gXCJfbWluVGltZVwiIDogXCJfbWF4VGltZVwiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgXCJIOmlcIik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhUaW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cyQkMSwgdXNlckNvbmZpZyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29sT3B0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9IHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fCBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSBob29rcy5sZW5ndGg7IF9pLS07KSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnW2hvb2tzW19pXV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va3NbX2ldXSA9IGFycmF5aWZ5KHNlbGYuY29uZmlnW2hvb2tzW19pXV0gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgc2VsZi5jb25maWcubm9DYWxlbmRhciA9IHRydWU7XG4gICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbX2kyXShzZWxmKSB8fCB7fTtcblxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICBpZiAofmhvb2tzLmluZGV4T2Yoa2V5KSkge1xuICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gYXJyYXlpZnkocGx1Z2luQ29uZltrZXldKS5tYXAoYmluZFRvSW5zdGFuY2UpLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIikgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlzTW9iaWxlID0gIXNlbGYuY29uZmlnLmRpc2FibGVNb2JpbGUgJiYgIXNlbGYuY29uZmlnLmlubGluZSAmJiBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmICFzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiYgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKSBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSBcIiArIHNlbGYuY29uZmlnLmxvY2FsZSkpO1xuICAgICAgICBzZWxmLmwxMG4gPSBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgdHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gXCJvYmplY3RcIiA/IHNlbGYuY29uZmlnLmxvY2FsZSA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCIgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHNlbGYuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIpO1xuICAgICAgICB2YXIgcG9zaXRpb25FbGVtZW50ID0gY3VzdG9tUG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDtcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7XG4gICAgICAgICAgcmV0dXJuIGFjYyArIGNoaWxkLm9mZnNldEhlaWdodDtcbiAgICAgICAgfSwgMCksXG4gICAgICAgICAgICBjYWxlbmRhcldpZHRoID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLFxuICAgICAgICAgICAgaW5wdXRCb3VuZHMgPSBwb3NpdGlvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sXG4gICAgICAgICAgICBzaG93T25Ub3AgPSBjb25maWdQb3MgPT09IFwiYWJvdmVcIiB8fCBjb25maWdQb3MgIT09IFwiYmVsb3dcIiAmJiBkaXN0YW5jZUZyb21Cb3R0b20gPCBjYWxlbmRhckhlaWdodCAmJiBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodDtcbiAgICAgICAgdmFyIHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIGlucHV0Qm91bmRzLnRvcCArICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSByZXR1cm47XG4gICAgICAgIHZhciBsZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMubGVmdDtcbiAgICAgICAgdmFyIHJpZ2h0ID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBpbnB1dEJvdW5kcy5yaWdodDtcbiAgICAgICAgdmFyIHJpZ2h0TW9zdCA9IGxlZnQgKyBjYWxlbmRhcldpZHRoID4gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmlnaHRNb3N0XCIsIHJpZ2h0TW9zdCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpIHJldHVybjtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG5cbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gcmlnaHQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKSByZXR1cm47XG4gICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpICE9PSAtMSB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2V0VGltZW91dChzZWxmLmNsb3NlLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gZnVuY3Rpb24gaXNTZWxlY3RhYmxlKGRheSkge1xuICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikgJiYgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0ID0gZmluZFBhcmVudChlLnRhcmdldCwgaXNTZWxlY3RhYmxlKTtcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUodGFyZ2V0LmRhdGVPYmouZ2V0VGltZSgpKTtcbiAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHwgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPiBzZWxmLmN1cnJlbnRNb250aCArIHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxKSAmJiBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtzZWxlY3RlZERhdGVdO2Vsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwibXVsdGlwbGVcIikge1xuICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gaXNEYXRlU2VsZWN0ZWQoc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCkgc2VsZi5zZWxlY3RlZERhdGVzLnNwbGljZShwYXJzZUludChzZWxlY3RlZEluZGV4KSwgMSk7ZWxzZSBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHRydWUpICE9PSAwKSBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG5cbiAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7XG4gICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgIGlmIChpc05ld1llYXIpIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmNvbmZpZy5lbmFibGVUaW1lICYmIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuY29uZmlnLm1pbkRhdGUpID09PSAwKSBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHRydWU7XG4gICAgICAgIH0sIDUwKTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyKHRhcmdldCk7XG4gICAgICAgICAgfSBlbHNlIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2hvdWxkQ2hhbmdlTW9udGggJiYgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiICYmIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpIGZvY3VzT25EYXkodGFyZ2V0LiRpLCAwKTtlbHNlIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSAmJiBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0uZm9jdXMoKTtcbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICB9LCA0NTEpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgdmFyIHNpbmdsZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgdmFyIHJhbmdlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG5cbiAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XG4gICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZV1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNldChvcHRpb24sIHZhbHVlKSB7XG4gICAgICAgIGlmIChvcHRpb24gIT09IG51bGwgJiYgdHlwZW9mIG9wdGlvbiA9PT0gXCJvYmplY3RcIikgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgb3B0aW9uKTtlbHNlIHtcbiAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpIENBTExCQUNLU1tvcHRpb25dLmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZERhdGUoaW5wdXREYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIGRhdGVzID0gW107XG4gICAgICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBBcnJheSkgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7XG4gICAgICAgIH0pO2Vsc2UgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJudW1iZXJcIikgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc3dpdGNoIChzZWxmLmNvbmZpZy5tb2RlKSB7XG4gICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibXVsdGlwbGVcIjpcbiAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxuICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5zcGxpdChzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZCBpbnN0YW5jZW9mIERhdGUgJiYgaXNFbmFibGVkKGQsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXREYXRlKGRhdGUsIHRyaWdnZXJDaGFuZ2UsIGZvcm1hdCkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZm9ybWF0ID0gc2VsZi5jb25maWcuZGF0ZUZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWREYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwO1xuICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSkgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikge1xuICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fCBydWxlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChydWxlICYmIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmIHJ1bGUuZnJvbSAmJiBydWxlLnRvKSByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogc2VsZi5wYXJzZURhdGUocnVsZS5mcm9tLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZClcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0dXBEYXRlcygpIHtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107XG4gICAgICAgIHNlbGYubm93ID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubm93KSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICB2YXIgcHJlbG9hZGVkRGF0ZSA9IHNlbGYuY29uZmlnLmRlZmF1bHREYXRlIHx8IHNlbGYuaW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChwcmVsb2FkZWREYXRlKSBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHZhciBpbml0aWFsRGF0ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwID8gc2VsZi5zZWxlY3RlZERhdGVzWzBdIDogc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKSA/IHNlbGYuY29uZmlnLm1pbkRhdGUgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0VGltZSgpIDwgc2VsZi5ub3cuZ2V0VGltZSgpID8gc2VsZi5jb25maWcubWF4RGF0ZSA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gaW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBpbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkKSBzZWxmLmNvbmZpZy5taW5UaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWluVGltZSwgXCJIOmlcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQpIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWluRGF0ZSAmJiAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWF4RGF0ZSAmJiAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwic2hvd1RpbWVJbnB1dFwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fc2hvd1RpbWVJbnB1dDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2wpIHtcbiAgICAgICAgICAgIHNlbGYuX3Nob3dUaW1lSW5wdXQgPSBib29sO1xuICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIpIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwic2hvd1RpbWVJbnB1dFwiLCBib29sKTtcbiAgICAgICAgICAgIHNlbGYuaXNPcGVuICYmIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cElucHV0cygpIHtcbiAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuY29uZmlnLndyYXAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbnB1dF1cIikgOiBlbGVtZW50O1xuXG4gICAgICAgIGlmICghc2VsZi5pbnB1dCkge1xuICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IGVsZW1lbnQgc3BlY2lmaWVkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0Ll90eXBlID0gc2VsZi5pbnB1dC50eXBlO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xuICAgICAgICBzZWxmLl9pbnB1dCA9IHNlbGYuaW5wdXQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsdElucHV0KSB7XG4gICAgICAgICAgc2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBcIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnRhYkluZGV4ID0gc2VsZi5pbnB1dC50YWJJbmRleDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmFsdElucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dCkgc2VsZi5faW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZi5fcG9zaXRpb25FbGVtZW50ID0gc2VsZi5jb25maWcucG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX2lucHV0O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cE1vYmlsZSgpIHtcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gXCJ0aW1lXCIgOiBcImRhdGV0aW1lLWxvY2FsXCIgOiBcImRhdGVcIjtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBzZWxmLmlucHV0LmNsYXNzTmFtZSArIFwiIGZsYXRwaWNrci1tb2JpbGVcIik7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQuc3RlcCA9IHNlbGYuaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSB8fCBcImFueVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9IGlucHV0VHlwZSA9PT0gXCJkYXRldGltZS1sb2NhbFwiID8gXCJZLW0tZFxcXFxUSDppOlNcIiA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCIgPyBcIlktbS1kXCIgOiBcIkg6aTpTXCI7XG5cbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHNlbGYubW9iaWxlSW5wdXQubWluID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSBzZWxmLm1vYmlsZUlucHV0Lm1heCA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5tYXhEYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSBzZWxmLmFsdElucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLm1vYmlsZUlucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfSBjYXRjaCAoX2EpIHt9XG5cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHNlbGYuc2V0RGF0ZShlLnRhcmdldC52YWx1ZSwgZmFsc2UsIHNlbGYubW9iaWxlRm9ybWF0U3RyKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4pIHJldHVybiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdmFyIGhvb2tzID0gc2VsZi5jb25maWdbZXZlbnRdO1xuXG4gICAgICAgIGlmIChob29rcyAhPT0gdW5kZWZpbmVkICYmIGhvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaG9va3NbaV0gJiYgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiY2hhbmdlXCIpKTtcbiAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJpbnB1dFwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgICAgIGUuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNEYXRlU2VsZWN0ZWQoZGF0ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZi5zZWxlY3RlZERhdGVzW2ldLCBkYXRlKSA9PT0gMCkgcmV0dXJuIFwiXCIgKyBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSkgPj0gMCAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA8PSAwO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KSByZXR1cm47XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHllYXJFbGVtZW50LCBpKSB7XG4gICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICB5ZWFyRWxlbWVudC52YWx1ZSA9IGQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID0gc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCA8PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID0gc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHNlbGYuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG5cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikge1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cikgOiBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGpvaW5DaGFyID0gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiID8gc2VsZi5jb25maWcuY29uanVuY3Rpb24gOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3I7XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG5cbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIHNlbGYuY29uZmlnLmFsdEZvcm1hdCk7XG4gICAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBpc1ByZXZNb250aCA9IHNlbGYucHJldk1vbnRoTmF2LmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIGlzTmV4dE1vbnRoID0gc2VsZi5uZXh0TW9udGhOYXYuY29udGFpbnMoZS50YXJnZXQpO1xuXG4gICAgICAgIGlmIChpc1ByZXZNb250aCB8fCBpc05leHRNb250aCkge1xuICAgICAgICAgIGNoYW5nZU1vbnRoKGlzUHJldk1vbnRoID8gLTEgOiAxKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLnllYXJFbGVtZW50cy5pbmRleE9mKGUudGFyZ2V0KSA+PSAwKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikpIHtcbiAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93RG93blwiKSkge1xuICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLFxuICAgICAgICAgICAgaW5wdXQgPSBlLnRhcmdldDtcblxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiKSksXG4gICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKSxcbiAgICAgICAgICAgIHN0ZXAgPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSksXG4gICAgICAgICAgICBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksXG4gICAgICAgICAgICBkZWx0YSA9IGUuZGVsdGEgfHwgKGlzS2V5RG93biA/IGUud2hpY2ggPT09IDM4ID8gMSA6IC0xIDogMCk7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1clZhbHVlICsgc3RlcCAqIGRlbHRhO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgdmFyIGlzSG91ckVsZW0gPSBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCxcbiAgICAgICAgICAgICAgaXNNaW51dGVFbGVtID0gaW5wdXQgPT09IHNlbGYubWludXRlRWxlbWVudDtcblxuICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IG1pbikge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBtYXggKyBuZXdWYWx1ZSArIGludCghaXNIb3VyRWxlbSkgKyAoaW50KGlzSG91ckVsZW0pICYmIGludCghc2VsZi5hbVBNKSk7XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50ID8gbmV3VmFsdWUgLSBtYXggLSBpbnQoIXNlbGYuYW1QTSkgOiBtaW47XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmFtUE0gJiYgaXNIb3VyRWxlbSAmJiAoc3RlcCA9PT0gMSA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5pdCgpO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2ZsYXRwaWNrcihub2RlTGlzdCwgY29uZmlnKSB7XG4gICAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2RlTGlzdCk7XG4gICAgICB2YXIgaW5zdGFuY2VzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbCkgY29udGludWU7XG5cbiAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG5cbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlLl9mbGF0cGlja3IgPSBGbGF0cGlja3JJbnN0YW5jZShub2RlLCBjb25maWcgfHwge30pO1xuICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0cGlja3IgPSBOb2RlTGlzdC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgICAgfTtcblxuICAgICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpIHtcbiAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGVMaXN0KSByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTtlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTtcbiAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gZGVmYXVsdHM7XG4gICAgZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgICAgZW46IE9iamVjdC5hc3NpZ24oe30sIGVuZ2xpc2gpLFxuICAgICAgZGVmYXVsdDogT2JqZWN0LmFzc2lnbih7fSwgZW5nbGlzaClcbiAgICB9O1xuXG4gICAgZmxhdHBpY2tyLmxvY2FsaXplID0gZnVuY3Rpb24gKGwxMG4pIHtcbiAgICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQsIGwxMG4pO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLCBjb25maWcpO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3IucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7fSk7XG4gICAgZmxhdHBpY2tyLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHt9KTtcbiAgICBmbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuXG4gICAgaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIERhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSArICh0eXBlb2YgZGF5cyA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlSW50KGRheXMsIDEwKSA6IGRheXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZsYXRwaWNrcjtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQge1xuICByZW1vdmVJdGVtcyxcbiAgZHJhZ0l0ZW1zLFxuICBvbkRyYWdJbWFnZSxcbiAgb25SZW1vdmVJbWFnZSxcbn0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgY29uc3QgZ2FsbGVyeVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnktd3JhcHBlcicpO1xuXG4gIGlmICghZ2FsbGVyeVNlY3Rpb25zKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGdhbGxlcnlTZWN0aW9ucywgZ2FsbGVyeSA9PiB7XG4gICAgY29uc3QgYWRkSW1hZ2UgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZ2FsbGVyeS1pbWFnZXMnKTtcbiAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oZ2FsbGVyeSwgJy5pbWFnZS1nYWxsZXJ5LWhpZGRlbicpO1xuXG4gICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZUltYWdlKTtcbiAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnSW1hZ2UpO1xuICAgIGNvbnN0IExpc3QgPSBsaXN0KGdhbGxlcnksIHtcbiAgICAgIGxpc3Q6ICcuZ2FsbGVyeS1pbWFnZXMnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogaW1hZ2VJdGVtLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcbiAgICAgIHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcbiAgICAgIGJ1dHRvbjoge1xuICAgICAgICB0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJyxcbiAgICAgIH0sXG4gICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGFkZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG1lZGlhRnJhbWUub3BlbigpO1xuICAgIH0pO1xuXG4gICAgbWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBhdHRhY2htZW50cyA9IG1lZGlhRnJhbWVcbiAgICAgICAgLnN0YXRlKClcbiAgICAgICAgLmdldCgnc2VsZWN0aW9uJylcbiAgICAgICAgLnRvSlNPTigpO1xuXG4gICAgICBhdHRhY2htZW50cy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICBMaXN0LmFkZChhdHRhY2htZW50KTtcbiAgICAgICAgSGlkZGVuLmFkZChhdHRhY2htZW50LmlkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgaW1hZ2VJdGVtID0gaW1hZ2UgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cImdhbGxlcnktaW1hZ2UtaXRlbVwiPjxzcGFuIGNsYXNzPVwiZ2FsbGVyeS1pYW1nZS1pZFwiPiR7XG4gICAgaW1hZ2UuaWRcbiAgfTwvc3Bhbj48aW1nIHNyYz1cIiR7XG4gICAgaW1hZ2UudXJsXG4gIH1cIiBjbGFzcz1cImdhbGxlcnktaW1hZ2VcIi8+PHNwYW4+PHN2ZyBjbGFzcz1cInJlbW92ZS1nYWxsZXJ5LWltYWdlXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG48L3N2Zz48L3NwYW4+PC9saT5gO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2dhbGxlcnkuanMiLCJpbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGhpZGRlbiBmcm9tICcuL3NlcmlhbGl6ZWQtaW5wdXQnO1xuaW1wb3J0IHtcbiAgcmVtb3ZlSXRlbXMsXG4gIGRyYWdJdGVtcyxcbiAgb25EcmFnVGFibGUsXG4gIG9uUmVtb3ZlVGFibGUsXG59IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHRhYmxlTGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtbGlzdCcpO1xuXG4gIGlmICghdGFibGVMaXN0cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbCh0YWJsZUxpc3RzLCB0YWJsZUxpc3QgPT4ge1xuICAgIGNvbnN0IGFkZFJvdyA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1hZGQnKTtcbiAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4odGFibGVMaXN0LCAnLnRhYmxlLWxpc3QtaGlkZGVuJyk7XG4gICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZVRhYmxlKTtcbiAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnVGFibGUpO1xuICAgIGNvbnN0IExpc3QgPSBsaXN0KHRhYmxlTGlzdCwge1xuICAgICAgbGlzdDogJy50YWJsZS1saXN0LWxpc3QnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogdGFibGVJdGVtLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGV4dC1saXN0LXdyYXBwZXInKTtcbiAgICBjb25zdCBrZXkgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LWtleScpO1xuICAgIGNvbnN0IHZhbHVlID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC12YWx1ZScpO1xuXG4gICAgYWRkUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgY29uc3Qgcm93RGF0YSA9IHtcbiAgICAgICAga2V5OiBrZXkudmFsdWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcbiAgICAgIH07XG5cbiAgICAgIExpc3QuYWRkKHJvd0RhdGEpO1xuICAgICAgSGlkZGVuLmFkZChyb3dEYXRhKTtcblxuICAgICAga2V5LnZhbHVlID0gJyc7XG4gICAgICB2YWx1ZS52YWx1ZSA9ICcnO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgdGFibGVJdGVtID0gcm93RGF0YSA9PiB7XG4gIHJldHVybiBgPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW0gdGFibGUtbGlzdC1pdGVtXCI+XG4gICAgPHNwYW4gY2xhc3M9XCJ0YWJsZS1saXN0LWtleVwiPiR7cm93RGF0YS5rZXl9PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPVwidGFibGUtbGlzdC12YWx1ZVwiPiR7cm93RGF0YS52YWx1ZX08L3NwYW4+XG4gICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICA8L3N2Zz5cbjwvbGk+YDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi90YWJsZS1saXN0LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==