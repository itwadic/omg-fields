!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return o(n,t.onDrag),r(n,t.onRemove),{add:function(e){var a=t.listTemplate(e),i=document.createRange().createContextualFragment(a);n.appendChild(i)}}};var a=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(a),r=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var a=n.target.closest("li"),i=a.querySelector("span").innerHTML;e.removeChild(a),t(i)}}),n},o=function(e,t){(0,i.default)([e]).on("dragend",function(n){var a=e.querySelectorAll("li");t(e,a)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),a=function(){return n.value?JSON.parse(n.value):[]},i=function(e){return a().concat(e)},r=function(e,t){return t(a(),e)};return{add:function(e){n.value=JSON.stringify(i(e))},remove:function(e,t){n.value=JSON.stringify(r(e,t))},update:function(e){n.value=JSON.stringify(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeItems=function(e,t){return function(n){e.remove(n,t)}},t.dragItems=function(e,t){return function(n,a){var i=t(n,a);e.update(i)}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onDragImage=function(e,t){return[].reduce.call(t,function(e,t){var n=parseInt(t.querySelector("span").innerHTML);return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})},t.onRemoveImage=function(e,t){return e.filter(function(e){return e!==parseInt(t)})},t.onDragTable=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector(".table-list-key").innerHTML,a=t.querySelector(".table-list-value").innerHTML;return e.concat([{key:n,value:a}])},[])},t.onRemoveTable=function(e,t){return e.filter(function(e){return e.key!==t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if(!e)return!1;var c=!1;e.addEventListener("keyup",function(n){if(0===n.target.value.length&&o&&o(),3>n.target.value.length)return!1;e.classList.add("show"),c=i(c,r,e,t)}),e.addEventListener("input",function(t){var i=a(t);i&&n(i,e)})};var a=function(e){var t=e.target,n=t.value,a=t.getAttribute("list"),i=document.getElementById(a).childNodes,r=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==r.length&&r[0]},i=function(e,t,n,a){var i=u(n.value),r=a+i;return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){4===e.readyState&&l(e.responseText)?t(!1,{results:JSON.parse(e.responseText),input:n}):e.responseText&&l(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",r,!0),e.send(),e},r=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;o(t.results,t.input)}},o=function(e,t){var n=t.getAttribute("list"),a=document.getElementById(n),i=e.reduce(function(e,t){var n=c(t);return e.concat(n)},"");t.classList.remove("show"),a.innerHTML=i},c=function(e){return e.title?"<option data-id="+e.id+' value="'+e.title.rendered+'">':e.name?"<option data-id="+e.id+' value="'+e.name+'">':void 0},l=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},u=function(e){return encodeURIComponent(e.toLowerCase())}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(6),r=(a(i),n(7)),o=a(r),c=n(20),l=a(c),u=n(1),s=(a(u),n(21)),d=a(s),f=n(22),m=a(f),g=n(23),p=a(g),v=n(25),h=a(v),y=n(26),b=a(y),w=function(e){return'<li class="text-list-item">\n        <span>'+e+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'},D=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,m.default)(),(0,o.default)({parent:".text-list",button:".text-list-add",list:".text-list-list",hidden:".text-list-hidden",listTemplate:w}),(0,l.default)({parent:".autosuggest-list",input:"autosuggest-list-input",list:".autosuggest-list-list",hidden:".autosuggest-list-hidden",listTemplate:D}),(0,d.default)({parent:".autosuggest-wrapper",input:".autosuggest-input",hidden:".autosuggest-hidden"}),(0,p.default)(),(0,h.default)(),(0,b.default)()})},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector("input[type=text]"),a=t.querySelector(e.button),i=(0,c.default)(t,e.hidden),o=(0,l.removeItems)(i,l.onRemoveText),u=(0,l.dragItems)(i,l.onDragText),s=(0,r.default)(t,Object.assign(e,{onDrag:u,onRemove:o}));t.addEventListener("keypress",function(e){13===e.keyCode&&(e.preventDefault(),s.add(n.value),i.add(n.value),n.value="")}),a.addEventListener("click",function(e){e.preventDefault(),s.add(n.value),i.add(n.value),n.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3)},function(e,t,n){"use strict";(function(t){function a(e,t){function n(e){return-1!==ue.containers.indexOf(e)||le.isContainer(e)}function a(e){var t=e?"remove":"add";i(C,t,"mousedown",x),i(C,t,"mouseup",j)}function c(e){i(C,e?"remove":"add","mousemove",E)}function p(e){var t=e?"remove":"add";w[t](C,"selectstart",T),w[t](C,"click",T)}function h(){a(!0),j({})}function T(e){oe&&e.preventDefault()}function x(e){if(ee=e.clientX,te=e.clientY,!(1!==r(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=S(t);n&&(oe=n,c(),"mousedown"===e.type&&(g(t)?t.focus():e.preventDefault()))}}function E(e){if(oe){if(0===r(e))return void j({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(le.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(g(M.elementFromPoint(t,n)))return}var a=oe;c(!0),p(),P(),k(a);var i=o(V);Z=y("pageX",e)-i.left,Q=y("pageY",e)-i.top,D.add(ie||V,"gu-transit"),J(),q(e)}}}function S(e){if(!(ue.dragging&&$||n(e))){for(var t=e;m(e)&&!1===n(m(e));){if(le.invalid(e,t))return;if(!(e=m(e)))return}var a=m(e);if(a&&!le.invalid(e,t)){if(le.moves(e,a,t,v(e)))return{item:e,source:a}}}}function O(e){return!!S(e)}function I(e){var t=S(e);t&&k(t)}function k(e){X(e.item,e.source)&&(ie=e.item.cloneNode(!0),ue.emit("cloned",ie,e.item,"copy")),G=e.source,V=e.item,ne=ae=v(e.item),ue.dragging=!0,ue.emit("drag",V,G)}function _(){return!1}function P(){if(ue.dragging){var e=ie||V;N(e,m(e))}}function A(){oe=!1,c(!0),p(!0)}function j(e){if(A(),ue.dragging){var t=ie||V,n=y("clientX",e),a=y("clientY",e),i=l($,n,a),r=R(i,n,a);r&&(ie&&le.copySortSource||!ie||r!==G)?N(t,r):le.removeOnSpill?F():L()}}function N(e,t){var n=m(e);ie&&le.copySortSource&&t===G&&n.removeChild(V),H(t)?ue.emit("cancel",e,G,G):ue.emit("drop",e,t,G,ae),Y()}function F(){if(ue.dragging){var e=ie||V,t=m(e);t&&t.removeChild(e),ue.emit(ie?"cancel":"remove",e,t,G),Y()}}function L(e){if(ue.dragging){var t=arguments.length>0?e:le.revertOnSpill,n=ie||V,a=m(n),i=H(a);!1===i&&t&&(ie?a&&a.removeChild(ie):G.insertBefore(n,ne)),i||t?ue.emit("cancel",n,G,G):ue.emit("drop",n,a,G,ae),Y()}}function Y(){var e=ie||V;A(),U(),e&&D.rm(e,"gu-transit"),re&&clearTimeout(re),ue.dragging=!1,ce&&ue.emit("out",e,ce,G),ue.emit("dragend",e),G=V=ie=ne=ae=re=ce=null}function H(e,t){var n;return n=void 0!==t?t:$?ae:v(ie||V),e===G&&n===ne}function R(e,t,a){for(var i=e;i&&!function(){if(!1===n(i))return!1;var r=z(i,e),o=K(i,r,t,a);return!!H(i,o)||le.accepts(V,i,G,o)}();)i=m(i);return i}function q(e){function t(e){ue.emit(e,o,ce,G)}if($){e.preventDefault();var n=y("clientX",e),a=y("clientY",e),i=n-Z,r=a-Q;$.style.left=i+"px",$.style.top=r+"px";var o=ie||V,c=l($,n,a),u=R(c,n,a),s=null!==u&&u!==ce;(s||null===u)&&(function(){ce&&t("out")}(),ce=u,function(){s&&t("over")}());var d=m(o);if(u===G&&ie&&!le.copySortSource)return void(d&&d.removeChild(o));var f,g=z(u,c);if(null!==g)f=K(u,g,n,a);else{if(!0!==le.revertOnSpill||ie)return void(ie&&d&&d.removeChild(o));f=ne,u=G}(null===f&&s||f!==o&&f!==v(o))&&(ae=f,u.insertBefore(o,f),ue.emit("shadow",o,u,G))}}function B(e){D.rm(e,"gu-hide")}function W(e){ue.dragging&&D.add(e,"gu-hide")}function J(){if(!$){var e=V.getBoundingClientRect();$=V.cloneNode(!0),$.style.width=d(e)+"px",$.style.height=f(e)+"px",D.rm($,"gu-transit"),D.add($,"gu-mirror"),le.mirrorContainer.appendChild($),i(C,"add","mousemove",q),D.add(le.mirrorContainer,"gu-unselectable"),ue.emit("cloned",$,V,"mirror")}}function U(){$&&(D.rm(le.mirrorContainer,"gu-unselectable"),i(C,"remove","mousemove",q),m($).removeChild($),$=null)}function z(e,t){for(var n=t;n!==e&&m(n)!==e;)n=m(n);return n===C?null:n}function K(e,t,n,a){function i(e){return e?v(t):t}var r="horizontal"===le.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(r?n>e.left+d(e)/2:a>e.top+f(e)/2)}():function(){var t,i,o,c=e.children.length;for(t=0;t<c;t++){if(i=e.children[t],o=i.getBoundingClientRect(),r&&o.left+o.width/2>n)return i;if(!r&&o.top+o.height/2>a)return i}return null}()}function X(e,t){return"boolean"==typeof le.copy?le.copy:le.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var $,G,V,Z,Q,ee,te,ne,ae,ie,re,oe,ce=null,le=t||{};void 0===le.moves&&(le.moves=s),void 0===le.accepts&&(le.accepts=s),void 0===le.invalid&&(le.invalid=_),void 0===le.containers&&(le.containers=e||[]),void 0===le.isContainer&&(le.isContainer=u),void 0===le.copy&&(le.copy=!1),void 0===le.copySortSource&&(le.copySortSource=!1),void 0===le.revertOnSpill&&(le.revertOnSpill=!1),void 0===le.removeOnSpill&&(le.removeOnSpill=!1),void 0===le.direction&&(le.direction="vertical"),void 0===le.ignoreInputTextSelection&&(le.ignoreInputTextSelection=!0),void 0===le.mirrorContainer&&(le.mirrorContainer=M.body);var ue=b({containers:le.containers,start:I,end:P,cancel:L,remove:F,destroy:h,canMove:O,dragging:!1});return!0===le.removeOnSpill&&ue.on("over",B).on("out",W),a(),ue}function i(e,n,a,i){var r={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,o[a],i):t.navigator.msPointerEnabled?w[n](e,c[a],i):(w[n](e,r[a],i),w[n](e,a,i))}function r(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e){var t=e.getBoundingClientRect();return{left:t.left+c("scrollLeft","pageXOffset"),top:t.top+c("scrollTop","pageYOffset")}}function c(e,n){return void 0!==t[n]?t[n]:C.clientHeight?C[e]:M.body[e]}function l(e,t,n){var a,i=e||{},r=i.className;return i.className+=" gu-hide",a=M.elementFromPoint(t,n),i.className=r,a}function u(){return!1}function s(){return!0}function d(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function m(e){return e.parentNode===M?null:e.parentNode}function g(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(m(e))))}function v(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in n)&&a[e]in n&&(e=a[e]),n[e]}var b=n(9),w=n(16),D=n(19),M=document,C=M.documentElement;e.exports=a}).call(t,n(0))},function(e,t,n){"use strict";var a=n(10),i=n(11);e.exports=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var a=arguments.length;if(1===a)delete r[t];else if(0===a)r={};else{var i=r[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=a(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(r[t]||[]).slice(0);return function(){var r=a(arguments),c=this||e;if("error"===t&&!1!==n.throws&&!o.length)throw 1===r.length?r[0]:r;return o.forEach(function(a){n.async?i(a,r,c):a.apply(c,r),a._once&&e.off(t,a)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var a=n(12);e.exports=function(e,t,n){e&&a(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,a="function"==typeof t;n=a?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(13).setImmediate)},function(e,t,n){(function(e){function a(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(14),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function a(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,c(l),l++}function i(e){delete u[e]}function r(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}function o(e){if(s)setTimeout(o,0,e);else{var t=u[e];if(t){s=!0;try{r(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var c,l=1,u={},s=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},c=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;c=function(t){var n=d.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(o,0,e)}}(),f.setImmediate=a,f.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===a||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){p&&m&&(p=!1,m.length?g=m.concat(g):v=-1,g.length&&c())}function c(){if(!p){var e=i(o);p=!0;for(var t=g.length;t;){for(m=g,g=[];++v<t;)m&&m[v].run();v=-1,t=g.length}m=null,p=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var s,d,f=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{d="function"==typeof clearTimeout?clearTimeout:a}catch(e){d=a}}();var m,g=[],p=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||p||i(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function a(e,t,n,a){return e.addEventListener(t,n,a)}function i(e,t,n){return e.attachEvent("on"+t,u(e,t,n))}function r(e,t,n,a){return e.removeEventListener(t,n,a)}function o(e,t,n){var a=s(e,t,n);if(a)return e.detachEvent("on"+t,a)}function c(e,t,n){var a=-1===m.indexOf(t)?function(){return new f(t,{detail:n})}():function(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,n,a){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,a.call(e,i)}}function u(e,t,n){var a=s(e,t,n)||l(e,t,n);return h.push({wrapper:a,element:e,type:t,fn:n}),a}function s(e,t,n){var a=d(e,t,n);if(a){var i=h[a].wrapper;return h.splice(a,1),i}}function d(e,t,n){var a,i;for(a=0;a<h.length;a++)if(i=h[a],i.element===e&&i.type===t&&i.fn===n)return a}var f=n(17),m=n(18),g=t.document,p=a,v=r,h=[];t.addEventListener||(p=i,v=o),e.exports={add:p,remove:v,fabricate:c}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],a="",i=/^on/;for(a in t)i.test(a)&&n.push(a.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function a(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(c+e+l,"g"),t}function i(e,t){var n=e.className;n.length?a(t).test(n)||(e.className+=" "+t):e.className=t}function r(e,t){e.className=e.className.replace(a(t)," ").trim()}var o={},c="(?:^|\\s)",l="(?:\\s|$)";e.exports={add:i,rm:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,u.default)(t,e.hidden),a=(0,s.removeItems)(n,s.onRemoveObject),i=(0,s.dragItems)(n,s.onDragObject),o=(0,r.default)(t,Object.assign(e,{onDrag:i,onRemove:a})),l=t.querySelector(".autosuggest-list-input"),d="autoList_"+l.getAttribute("list"),f=OMGFields.baseURL+"/wp-json/wp/v2/"+window[d].resource+"?search=";(0,c.default)(l,f,function(e,t){o.add(e),t.value="",n.add(e)})})};var i=n(1),r=a(i),o=n(4),c=a(o),l=n(2),u=a(l),s=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden),a=t.querySelector(".autosuggest-input"),r="autoList_"+a.getAttribute("list"),o=void 0;o=window[r].namespace?OMGFields.baseURL+"/wp-json/"+window[r].namespace+"/"+window[r].resource+"?search=":OMGFields.baseURL+"/wp-json/wp/v2/"+window[r].resource+"?search=",(0,i.default)(a,o,function(e,t){n.value=JSON.stringify(e)},function(){n.value=""})})};var a=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function a(){var e=document.querySelectorAll(".custom-media-upload");0!==e.length&&[].map.call(e,function(e){var t=e.querySelector(".remove-image"),n=e.querySelector(".replace-image"),a=e.querySelector(".set-image"),i=e.querySelector("a.replace-image img"),r=e.querySelector('input[type="hidden"]'),o=e.querySelector(".thumbnail-title"),c=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!1});c.on("select",function(){var t=c.state().get("selection").first().toJSON();e.classList.toggle("has-image"),r.value=t.id,t.hasOwnProperty("sizes")?i.setAttribute("src",t.sizes.thumbnail.url):i.setAttribute("src",t.icon),o&&(o.innerHTML=t.filename)}),t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("has-image"),i.setAttribute("src",""),r.value="",o&&(o.innerHTML="")}),n.addEventListener("click",function(e){e.preventDefault(),c.open()}),a.addEventListener("click",function(e){e.preventDefault(),c.open()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".datepicker-input");if(!e)return!1;[].forEach.call(e,function(e){var t=e.dataset.date;(0,i.default)(e,{altInput:!0,altFormat:"F j, Y",dateFormat:"U",defaultDate:t||""})})};var a=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){/* flatpickr v4.4.3, @license MIT */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t,n){void 0===n&&(n=!1);var a;return function(){var i=this,r=arguments;null!==a&&clearTimeout(a),a=window.setTimeout(function(){a=null,n||e.apply(i,r)},t),n&&!a&&e.apply(i,r)}}function t(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function n(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function a(e,t,n){var a=window.document.createElement(e);return t=t||"",n=n||"",a.className=t,void 0!==n&&(a.textContent=n),a}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t){return t(e)?e:e.parentNode?r(e.parentNode,t):void 0}function o(e,t){var n=a("div","numInputWrapper"),i=a("input","numInput "+e),r=a("span","arrowUp"),o=a("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var c in t)i.setAttribute(c,t[c]);return n.appendChild(i),n.appendChild(r),n.appendChild(o),n}function c(c,l){function f(){Ie.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=Ie.currentMonth),void 0===t&&(t=Ie.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:Ie.l10n.daysInMonth[e]}}}function g(e){return e.bind(Ie)}function v(e){0!==Ie.selectedDates.length&&(Oe(e),"input"!==e.type?(E(),Ee()):setTimeout(function(){E(),Ee()},T))}function w(e,t){return e%12+12*s(t===Ie.l10n.amPM[1])}function C(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function E(){if(void 0!==Ie.hourElement&&void 0!==Ie.minuteElement){var e=(parseInt(Ie.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(Ie.minuteElement.value,10)||0)%60,a=void 0!==Ie.secondElement?(parseInt(Ie.secondElement.value,10)||0)%60:0;void 0!==Ie.amPM&&(e=w(e,Ie.amPM.textContent));var i=void 0!==Ie.config.minTime||Ie.config.minDate&&Ie.minDateHasTime&&Ie.latestSelectedDateObj&&0===t(Ie.latestSelectedDateObj,Ie.config.minDate,!0);if(void 0!==Ie.config.maxTime||Ie.config.maxDate&&Ie.maxDateHasTime&&Ie.latestSelectedDateObj&&0===t(Ie.latestSelectedDateObj,Ie.config.maxDate,!0)){var r=void 0!==Ie.config.maxTime?Ie.config.maxTime:Ie.config.maxDate;e=Math.min(e,r.getHours()),e===r.getHours()&&(n=Math.min(n,r.getMinutes())),n===r.getMinutes()&&(a=Math.min(a,r.getSeconds()))}if(i){var o=void 0!==Ie.config.minTime?Ie.config.minTime:Ie.config.minDate;e=Math.max(e,o.getHours()),e===o.getHours()&&(n=Math.max(n,o.getMinutes())),n===o.getMinutes()&&(a=Math.max(a,o.getSeconds()))}O(e,n,a)}}function S(e){var t=e||Ie.latestSelectedDateObj;t&&O(t.getHours(),t.getMinutes(),t.getSeconds())}function O(e,t,n){void 0!==Ie.latestSelectedDateObj&&Ie.latestSelectedDateObj.setHours(e%24,t,n||0,0),Ie.hourElement&&Ie.minuteElement&&!Ie.isMobile&&(Ie.hourElement.value=u(Ie.config.time_24hr?e:(12+e)%12+12*s(e%12==0)),Ie.minuteElement.value=u(t),void 0!==Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[s(e>=12)]),void 0!==Ie.secondElement&&(Ie.secondElement.value=u(n)))}function I(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(e.target.blur(),/[^\d]/.test(t.toString())||ee(t))}function k(e,t,n,a){return t instanceof Array?t.forEach(function(t){return k(e,t,n,a)}):e instanceof Array?e.forEach(function(e){return k(e,t,n,a)}):(e.addEventListener(t,n,a),void Ie._handlers.push({element:e,event:t,handler:n}))}function _(e){return function(t){1===t.which&&e(t)}}function P(){De("onChange")}function A(){if(Ie.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(Ie.element.querySelectorAll("[data-"+e+"]"),function(t){return k(t,"click",Ie[e])})}),Ie.isMobile)return void be();var t=e(ie,50);if(Ie._debouncedChange=e(P,T),Ie.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&k(Ie.daysContainer,"mouseover",function(e){"range"===Ie.config.mode&&ae(e.target)}),k(window.document.body,"keydown",ne),Ie.config.static||k(Ie._input,"keydown",ne),Ie.config.inline||Ie.config.static||k(window,"resize",t),void 0!==window.ontouchstart&&k(window.document,"touchstart",Q),k(window.document,"mousedown",_(Q)),k(window.document,"focus",Q,{capture:!0}),!0===Ie.config.clickOpens&&(k(Ie._input,"focus",Ie.open),k(Ie._input,"mousedown",_(Ie.open))),void 0!==Ie.daysContainer&&(k(Ie.monthNav,"mousedown",_(Se)),k(Ie.monthNav,["keyup","increment"],I),k(Ie.daysContainer,"mousedown",_(fe))),void 0!==Ie.timeContainer&&void 0!==Ie.minuteElement&&void 0!==Ie.hourElement){var n=function(e){return e.target.select()};k(Ie.timeContainer,["input","increment"],v),k(Ie.timeContainer,"mousedown",_(N)),k(Ie.timeContainer,["input","increment"],Ie._debouncedChange,{passive:!0}),k([Ie.hourElement,Ie.minuteElement],["focus","click"],n),void 0!==Ie.secondElement&&k(Ie.secondElement,"focus",function(){return Ie.secondElement&&Ie.secondElement.select()}),void 0!==Ie.amPM&&k(Ie.amPM,"mousedown",_(function(e){v(e),P()}))}}function j(e){var t=void 0!==e?Ie.parseDate(e):Ie.latestSelectedDateObj||(Ie.config.minDate&&Ie.config.minDate>Ie.now?Ie.config.minDate:Ie.config.maxDate&&Ie.config.maxDate<Ie.now?Ie.config.maxDate:Ie.now);try{void 0!==t&&(Ie.currentYear=t.getFullYear(),Ie.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,Ie.config.errorHandler(e)}Ie.redraw()}function N(e){~e.target.className.indexOf("arrow")&&F(e,e.target.classList.contains("arrowUp")?1:-1)}function F(e,t,n){var a=e&&e.target,i=n||a&&a.parentNode&&a.parentNode.firstChild,r=Me("increment");r.delta=t,i&&i.dispatchEvent(r)}function L(){var e=window.document.createDocumentFragment();if(Ie.calendarContainer=a("div","flatpickr-calendar"),Ie.calendarContainer.tabIndex=-1,!Ie.config.noCalendar){if(e.appendChild(W()),Ie.innerContainer=a("div","flatpickr-innerContainer"),Ie.config.weekNumbers){var t=K(),i=t.weekWrapper,r=t.weekNumbers;Ie.innerContainer.appendChild(i),Ie.weekNumbers=r,Ie.weekWrapper=i}Ie.rContainer=a("div","flatpickr-rContainer"),Ie.rContainer.appendChild(U()),Ie.daysContainer||(Ie.daysContainer=a("div","flatpickr-days"),Ie.daysContainer.tabIndex=-1),q(),Ie.rContainer.appendChild(Ie.daysContainer),Ie.innerContainer.appendChild(Ie.rContainer),e.appendChild(Ie.innerContainer)}Ie.config.enableTime&&e.appendChild(J()),n(Ie.calendarContainer,"rangeMode","range"===Ie.config.mode),n(Ie.calendarContainer,"animate",!0===Ie.config.animate),n(Ie.calendarContainer,"multiMonth",Ie.config.showMonths>1),Ie.calendarContainer.appendChild(e);var o=void 0!==Ie.config.appendTo&&void 0!==Ie.config.appendTo.nodeType;if((Ie.config.inline||Ie.config.static)&&(Ie.calendarContainer.classList.add(Ie.config.inline?"inline":"static"),Ie.config.inline&&(!o&&Ie.element.parentNode?Ie.element.parentNode.insertBefore(Ie.calendarContainer,Ie._input.nextSibling):void 0!==Ie.config.appendTo&&Ie.config.appendTo.appendChild(Ie.calendarContainer)),Ie.config.static)){var c=a("div","flatpickr-wrapper");Ie.element.parentNode&&Ie.element.parentNode.insertBefore(c,Ie.element),c.appendChild(Ie.element),Ie.altInput&&c.appendChild(Ie.altInput),c.appendChild(Ie.calendarContainer)}Ie.config.static||Ie.config.inline||(void 0!==Ie.config.appendTo?Ie.config.appendTo:window.document.body).appendChild(Ie.calendarContainer)}function Y(e,i,r,o){var c=te(i,!0),l=a("span","flatpickr-day "+e,i.getDate().toString());return l.dateObj=i,l.$i=o,l.setAttribute("aria-label",Ie.formatDate(i,Ie.config.ariaDateFormat)),0===t(i,Ie.now)&&(Ie.todayDateElem=l,l.classList.add("today")),c?(l.tabIndex=-1,Ce(i)&&(l.classList.add("selected"),Ie.selectedDateElem=l,"range"===Ie.config.mode&&(n(l,"startRange",Ie.selectedDates[0]&&0===t(i,Ie.selectedDates[0],!0)),n(l,"endRange",Ie.selectedDates[1]&&0===t(i,Ie.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("disabled"),"range"===Ie.config.mode&&Te(i)&&!Ce(i)&&l.classList.add("inRange"),Ie.weekNumbers&&1===Ie.config.showMonths&&"prevMonthDay"!==e&&r%7==1&&Ie.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+Ie.config.getWeek(i)+"</span>"),De("onDayCreate",l),l}function H(e,t){var n=void 0!==e?e:document.activeElement.$i,a=(n||0)+t||0,i=Array.prototype.find.call(Ie.days.children,function(e,t){return t>=a&&-1===e.className.indexOf("MonthDay")&&te(e.dateObj)});void 0!==i&&(i.focus(),"range"===Ie.config.mode&&ae(i))}function R(e,t){for(var n=(new Date(e,t,1).getDay()-Ie.l10n.firstDayOfWeek+7)%7,i=Ie.utils.getDaysInMonth((t-1+12)%12),r=Ie.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),c=i+1-n,l=0;c<=i;c++,l++)o.appendChild(Y("prevMonthDay",new Date(e,t-1,c),c,l));for(c=1;c<=r;c++,l++)o.appendChild(Y("",new Date(e,t,c),c,l));for(var u=r+1;u<=42-n&&(1===Ie.config.showMonths||l%7!=0);u++,l++)o.appendChild(Y("nextMonthDay",new Date(e,t+1,u%r),u,l));var s=a("div","dayContainer");return s.appendChild(o),s}function q(){if(void 0!==Ie.daysContainer){i(Ie.daysContainer),Ie.weekNumbers&&i(Ie.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<Ie.config.showMonths;t++){var n=new Date(Ie.currentYear,Ie.currentMonth,1);n.setMonth(Ie.currentMonth+t),e.appendChild(R(n.getFullYear(),n.getMonth()))}Ie.daysContainer.appendChild(e),Ie.days=Ie.daysContainer.firstChild}}function B(){var e=a("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=a("span","cur-month");n.title=Ie.l10n.scrollTitle;var i=o("cur-year",{tabindex:"-1"}),r=i.childNodes[0];r.title=Ie.l10n.scrollTitle,r.setAttribute("aria-label",Ie.l10n.yearAriaLabel),Ie.config.minDate&&r.setAttribute("data-min",Ie.config.minDate.getFullYear().toString()),Ie.config.maxDate&&(r.setAttribute("data-max",Ie.config.maxDate.getFullYear().toString()),r.disabled=!!Ie.config.minDate&&Ie.config.minDate.getFullYear()===Ie.config.maxDate.getFullYear());var c=a("div","flatpickr-current-month");return c.appendChild(n),c.appendChild(i),t.appendChild(c),e.appendChild(t),{container:e,yearElement:r,monthElement:n}}function W(){Ie.monthNav=a("div","flatpickr-months"),Ie.yearElements=[],Ie.monthElements=[],Ie.prevMonthNav=a("span","flatpickr-prev-month"),Ie.prevMonthNav.innerHTML=Ie.config.prevArrow,Ie.nextMonthNav=a("span","flatpickr-next-month"),Ie.nextMonthNav.innerHTML=Ie.config.nextArrow,Ie.monthNav.appendChild(Ie.prevMonthNav);for(var e=Ie.config.showMonths;e--;){var t=B();Ie.yearElements.push(t.yearElement),Ie.monthElements.push(t.monthElement),Ie.monthNav.appendChild(t.container)}return Ie.monthNav.appendChild(Ie.nextMonthNav),Object.defineProperty(Ie,"_hidePrevMonthArrow",{get:function(){return Ie.__hidePrevMonthArrow},set:function(e){Ie.__hidePrevMonthArrow!==e&&(n(Ie.prevMonthNav,"disabled",e),Ie.__hidePrevMonthArrow=e)}}),Object.defineProperty(Ie,"_hideNextMonthArrow",{get:function(){return Ie.__hideNextMonthArrow},set:function(e){Ie.__hideNextMonthArrow!==e&&(n(Ie.nextMonthNav,"disabled",e),Ie.__hideNextMonthArrow=e)}}),Ie.currentYearElement=Ie.yearElements[0],xe(),Ie.monthNav}function J(){Ie.calendarContainer.classList.add("hasTime"),Ie.config.noCalendar&&Ie.calendarContainer.classList.add("noCalendar"),Ie.timeContainer=a("div","flatpickr-time"),Ie.timeContainer.tabIndex=-1;var e=a("span","flatpickr-time-separator",":"),t=o("flatpickr-hour");Ie.hourElement=t.childNodes[0];var n=o("flatpickr-minute");if(Ie.minuteElement=n.childNodes[0],Ie.hourElement.tabIndex=Ie.minuteElement.tabIndex=-1,Ie.hourElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getHours():Ie.config.time_24hr?Ie.config.defaultHour:C(Ie.config.defaultHour)),Ie.minuteElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getMinutes():Ie.config.defaultMinute),Ie.hourElement.setAttribute("data-step",Ie.config.hourIncrement.toString()),Ie.minuteElement.setAttribute("data-step",Ie.config.minuteIncrement.toString()),Ie.hourElement.setAttribute("data-min",Ie.config.time_24hr?"0":"1"),Ie.hourElement.setAttribute("data-max",Ie.config.time_24hr?"23":"12"),Ie.minuteElement.setAttribute("data-min","0"),Ie.minuteElement.setAttribute("data-max","59"),Ie.timeContainer.appendChild(t),Ie.timeContainer.appendChild(e),Ie.timeContainer.appendChild(n),Ie.config.time_24hr&&Ie.timeContainer.classList.add("time24hr"),Ie.config.enableSeconds){Ie.timeContainer.classList.add("hasSeconds");var i=o("flatpickr-second");Ie.secondElement=i.childNodes[0],Ie.secondElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getSeconds():Ie.config.defaultSeconds),Ie.secondElement.setAttribute("data-step",Ie.minuteElement.getAttribute("data-step")),Ie.secondElement.setAttribute("data-min",Ie.minuteElement.getAttribute("data-min")),Ie.secondElement.setAttribute("data-max",Ie.minuteElement.getAttribute("data-max")),Ie.timeContainer.appendChild(a("span","flatpickr-time-separator",":")),Ie.timeContainer.appendChild(i)}return Ie.config.time_24hr||(Ie.amPM=a("span","flatpickr-am-pm",Ie.l10n.amPM[s((Ie.latestSelectedDateObj?Ie.hourElement.value:Ie.config.defaultHour)>11)]),Ie.amPM.title=Ie.l10n.toggleTitle,Ie.amPM.tabIndex=-1,Ie.timeContainer.appendChild(Ie.amPM)),Ie.timeContainer}function U(){Ie.weekdayContainer||(Ie.weekdayContainer=a("div","flatpickr-weekdays"));for(var e=Ie.config.showMonths;e--;){var t=a("div","flatpickr-weekdaycontainer");Ie.weekdayContainer.appendChild(t)}return z(),Ie.weekdayContainer}function z(){var e=Ie.l10n.firstDayOfWeek,t=Ie.l10n.weekdays.shorthand.concat();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=Ie.config.showMonths;n--;)Ie.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function K(){Ie.calendarContainer.classList.add("hasWeeks");var e=a("div","flatpickr-weekwrapper");e.appendChild(a("span","flatpickr-weekday",Ie.l10n.weekAbbreviation));var t=a("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function X(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var a=t?e:e-Ie.currentMonth;a<0&&!0===Ie._hidePrevMonthArrow||a>0&&!0===Ie._hideNextMonthArrow||(Ie.currentMonth+=a,(Ie.currentMonth<0||Ie.currentMonth>11)&&(Ie.currentYear+=Ie.currentMonth>11?1:-1,Ie.currentMonth=(Ie.currentMonth+12)%12,De("onYearChange")),q(),De("onMonthChange"),xe(),!0===n&&H(void 0,0))}function $(e){void 0===e&&(e=!0),Ie.input.value="",void 0!==Ie.altInput&&(Ie.altInput.value=""),void 0!==Ie.mobileInput&&(Ie.mobileInput.value=""),Ie.selectedDates=[],Ie.latestSelectedDateObj=void 0,Ie.showTimeInput=!1,!0===Ie.config.enableTime&&(void 0!==Ie.config.minDate?S(Ie.config.minDate):O(Ie.config.defaultHour,Ie.config.defaultMinute,Ie.config.defaultSeconds)),Ie.redraw(),e&&De("onChange")}function G(){Ie.isOpen=!1,Ie.isMobile||(Ie.calendarContainer.classList.remove("open"),Ie._input.classList.remove("active")),De("onClose")}function V(){void 0!==Ie.config&&De("onDestroy");for(var e=Ie._handlers.length;e--;){var t=Ie._handlers[e];t.element.removeEventListener(t.event,t.handler)}Ie._handlers=[],Ie.mobileInput?(Ie.mobileInput.parentNode&&Ie.mobileInput.parentNode.removeChild(Ie.mobileInput),Ie.mobileInput=void 0):Ie.calendarContainer&&Ie.calendarContainer.parentNode&&Ie.calendarContainer.parentNode.removeChild(Ie.calendarContainer),Ie.altInput&&(Ie.input.type="text",Ie.altInput.parentNode&&Ie.altInput.parentNode.removeChild(Ie.altInput),delete Ie.altInput),Ie.input&&(Ie.input.type=Ie.input._type,Ie.input.classList.remove("flatpickr-input"),Ie.input.removeAttribute("readonly"),Ie.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete Ie[e]}catch(e){}})}function Z(e){return!(!Ie.config.appendTo||!Ie.config.appendTo.contains(e))||Ie.calendarContainer.contains(e)}function Q(e){if(Ie.isOpen&&!Ie.config.inline){var t=Z(e.target),n=e.target===Ie.input||e.target===Ie.altInput||Ie.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(Ie.input)||~e.path.indexOf(Ie.altInput)),a="blur"===e.type?n&&e.relatedTarget&&!Z(e.relatedTarget):!n&&!t,i=!Ie.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});a&&i&&(Ie.close(),"range"===Ie.config.mode&&1===Ie.selectedDates.length&&(Ie.clear(!1),Ie.redraw()))}}function ee(e){if(!(!e||Ie.config.minDate&&e<Ie.config.minDate.getFullYear()||Ie.config.maxDate&&e>Ie.config.maxDate.getFullYear())){var t=e,n=Ie.currentYear!==t;Ie.currentYear=t||Ie.currentYear,Ie.config.maxDate&&Ie.currentYear===Ie.config.maxDate.getFullYear()?Ie.currentMonth=Math.min(Ie.config.maxDate.getMonth(),Ie.currentMonth):Ie.config.minDate&&Ie.currentYear===Ie.config.minDate.getFullYear()&&(Ie.currentMonth=Math.max(Ie.config.minDate.getMonth(),Ie.currentMonth)),n&&(Ie.redraw(),De("onYearChange"))}}function te(e,n){void 0===n&&(n=!0);var a=Ie.parseDate(e,void 0,n);if(Ie.config.minDate&&a&&t(a,Ie.config.minDate,void 0!==n?n:!Ie.minDateHasTime)<0||Ie.config.maxDate&&a&&t(a,Ie.config.maxDate,void 0!==n?n:!Ie.maxDateHasTime)>0)return!1;if(0===Ie.config.enable.length&&0===Ie.config.disable.length)return!0;if(void 0===a)return!1;for(var i,r=Ie.config.enable.length>0,o=r?Ie.config.enable:Ie.config.disable,c=0;c<o.length;c++){if("function"==typeof(i=o[c])&&i(a))return r;if(i instanceof Date&&void 0!==a&&i.getTime()===a.getTime())return r;if("string"==typeof i&&void 0!==a){var l=Ie.parseDate(i,void 0,!0);return l&&l.getTime()===a.getTime()?r:!r}if("object"==typeof i&&void 0!==a&&i.from&&i.to&&a.getTime()>=i.from.getTime()&&a.getTime()<=i.to.getTime())return r}return!r}function ne(e){var t=e.target===Ie._input,n=Z(e.target),a=Ie.config.allowInput,i=Ie.isOpen&&(!a||!t),r=Ie.config.inline&&t&&!a;if(13===e.keyCode&&t){if(a)return Ie.setDate(Ie._input.value,!0,e.target===Ie.altInput?Ie.config.altFormat:Ie.config.dateFormat),e.target.blur();Ie.open()}else if(n||i||r){var o=!!Ie.timeContainer&&Ie.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?Ee():fe(e);break;case 27:e.preventDefault(),de();break;case 8:case 46:t&&!Ie.config.allowInput&&(e.preventDefault(),Ie.clear());break;case 37:case 39:if(o)Ie.hourElement&&Ie.hourElement.focus();else if(e.preventDefault(),Ie.daysContainer){var c=t?0:39===e.keyCode?1:-1;e.ctrlKey?X(c,!0,!0):H(void 0,c)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;Ie.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(ee(Ie.currentYear-l),H(e.target.$i,0)):o||H(e.target.$i,7*l):Ie.config.enableTime&&(!o&&Ie.hourElement&&Ie.hourElement.focus(),v(e),Ie._debouncedChange());break;case 9:e.target===Ie.hourElement?(e.preventDefault(),Ie.minuteElement.select()):e.target===Ie.minuteElement&&(Ie.secondElement||Ie.amPM)?(e.preventDefault(),void 0!==Ie.secondElement?Ie.secondElement.focus():void 0!==Ie.amPM&&Ie.amPM.focus()):e.target===Ie.secondElement&&Ie.amPM&&(e.preventDefault(),Ie.amPM.focus())}switch(e.key){case Ie.l10n.amPM[0].charAt(0):case Ie.l10n.amPM[0].charAt(0).toLowerCase():void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[0],E(),Ee());break;case Ie.l10n.amPM[1].charAt(0):case Ie.l10n.amPM[1].charAt(0).toLowerCase():void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[1],E(),Ee())}De("onKeyDown",e)}}function ae(e){if(1===Ie.selectedDates.length&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")){for(var t=e.dateObj.getTime(),n=Ie.parseDate(Ie.selectedDates[0],void 0,!0).getTime(),a=Math.min(t,Ie.selectedDates[0].getTime()),i=Math.max(t,Ie.selectedDates[0].getTime()),r=Ie.daysContainer.children,o=r[0].children[0].dateObj.getTime(),c=r[r.length-1].lastChild.dateObj.getTime(),l=!1,u=0,s=0,d=o;d<c;d+=M.DAY)te(new Date(d),!0)||(l=l||d>a&&d<i,d<n&&(!u||d>u)?u=d:d>n&&(!s||d<s)&&(s=d));for(var f=0;f<Ie.config.showMonths;f++)for(var m=Ie.daysContainer.children[f],g=Ie.daysContainer.children[f-1],p=0,v=m.children.length;p<v;p++){(function(a,i){var r=m.children[a],o=r.dateObj,c=o.getTime(),d=u>0&&c<u||s>0&&c>s;d?(r.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){r.classList.remove(e)})):l&&!d||(["startRange","inRange","endRange","notAllowed"].forEach(function(e){r.classList.remove(e)}),e.classList.add(t<Ie.selectedDates[0].getTime()?"startRange":"endRange"),!m.contains(e)&&f>0&&g&&g.lastChild.dateObj.getTime()>=c||(n<t&&c===n?r.classList.add("startRange"):n>t&&c===n&&r.classList.add("endRange"),c>=u&&(0===s||c<=s)&&D(c,n,t)&&r.classList.add("inRange")))})(p)}}}function ie(){!Ie.isOpen||Ie.config.static||Ie.config.inline||ue()}function re(e,t){if(void 0===t&&(t=Ie._input),!0===Ie.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==Ie.mobileInput&&Ie.mobileInput.click()},0),void De("onOpen");if(!Ie._input.disabled&&!Ie.config.inline){var n=Ie.isOpen;Ie.isOpen=!0,n||(Ie.calendarContainer.classList.add("open"),Ie._input.classList.add("active"),De("onOpen"),ue(t)),!0===Ie.config.enableTime&&!0===Ie.config.noCalendar&&(0===Ie.selectedDates.length&&(Ie.setDate(void 0!==Ie.config.minDate?new Date(Ie.config.minDate.getTime()):(new Date).setHours(Ie.config.defaultHour,Ie.config.defaultMinute,Ie.config.defaultSeconds,0),!1),E(),Ee()),setTimeout(function(){return Ie.hourElement.select()},50))}}function oe(e){return function(t){var n=Ie.config["_"+e+"Date"]=Ie.parseDate(t,Ie.config.dateFormat),a=Ie.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(Ie["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),Ie.selectedDates&&(Ie.selectedDates=Ie.selectedDates.filter(function(e){return te(e)}),Ie.selectedDates.length||"min"!==e||S(n),Ee()),Ie.daysContainer&&(se(),void 0!==n?Ie.currentYearElement[e]=n.getFullYear().toString():Ie.currentYearElement.removeAttribute(e),Ie.currentYearElement.disabled=!!a&&void 0!==n&&a.getFullYear()===n.getFullYear())}}function ce(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n=Object.assign({},l,JSON.parse(JSON.stringify(c.dataset||{}))),a={};Ie.config.parseDate=n.parseDate,Ie.config.formatDate=n.formatDate,Object.defineProperty(Ie.config,"enable",{get:function(){return Ie.config._enable},set:function(e){Ie.config._enable=ve(e)}}),Object.defineProperty(Ie.config,"disable",{get:function(){return Ie.config._disable},set:function(e){Ie.config._disable=ve(e)}}),!n.dateFormat&&n.enableTime&&(a.dateFormat=n.noCalendar?"H:i"+(n.enableSeconds?":S":""):x.defaultConfig.dateFormat+" H:i"+(n.enableSeconds?":S":"")),n.altInput&&n.enableTime&&!n.altFormat&&(a.altFormat=n.noCalendar?"h:i"+(n.enableSeconds?":S K":" K"):x.defaultConfig.altFormat+" h:i"+(n.enableSeconds?":S":"")+" K"),Object.defineProperty(Ie.config,"minDate",{get:function(){return Ie.config._minDate},set:oe("min")}),Object.defineProperty(Ie.config,"maxDate",{get:function(){return Ie.config._maxDate},set:oe("max")});var i=function(e){return function(t){Ie.config["min"===e?"_minTime":"_maxTime"]=Ie.parseDate(t,"H:i")}};Object.defineProperty(Ie.config,"minTime",{get:function(){return Ie.config._minTime},set:i("min")}),Object.defineProperty(Ie.config,"maxTime",{get:function(){return Ie.config._maxTime},set:i("max")}),Object.assign(Ie.config,a,n);for(var r=0;r<e.length;r++)Ie.config[e[r]]=!0===Ie.config[e[r]]||"true"===Ie.config[e[r]];for(var o=t.length;o--;)void 0!==Ie.config[t[o]]&&(Ie.config[t[o]]=d(Ie.config[t[o]]||[]).map(g));"time"===Ie.config.mode&&(Ie.config.noCalendar=!0,Ie.config.enableTime=!0);for(var u=0;u<Ie.config.plugins.length;u++){var s=Ie.config.plugins[u](Ie)||{};for(var f in s)~t.indexOf(f)?Ie.config[f]=d(s[f]).map(g).concat(Ie.config[f]):void 0===n[f]&&(Ie.config[f]=s[f])}Ie.isMobile=!Ie.config.disableMobile&&!Ie.config.inline&&"single"===Ie.config.mode&&!Ie.config.disable.length&&!Ie.config.enable.length&&!Ie.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),De("onParseConfig")}function le(){"object"!=typeof Ie.config.locale&&void 0===x.l10ns[Ie.config.locale]&&Ie.config.errorHandler(new Error("flatpickr: invalid locale "+Ie.config.locale)),Ie.l10n=Object.assign({},x.l10ns.default,"object"==typeof Ie.config.locale?Ie.config.locale:"default"!==Ie.config.locale?x.l10ns[Ie.config.locale]:void 0),p.K="("+Ie.l10n.amPM[0]+"|"+Ie.l10n.amPM[1]+"|"+Ie.l10n.amPM[0].toLowerCase()+"|"+Ie.l10n.amPM[1].toLowerCase()+")",Ie.formatDate=y(Ie)}function ue(e){if(void 0!==Ie.calendarContainer){De("onPreCalendarPosition");var t=e||Ie._positionElement,a=Array.prototype.reduce.call(Ie.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=Ie.calendarContainer.offsetWidth,r=Ie.config.position,o=t.getBoundingClientRect(),c=window.innerHeight-o.bottom,l="above"===r||"below"!==r&&c<a&&o.top>a,u=window.pageYOffset+o.top+(l?-a-2:t.offsetHeight+2);if(n(Ie.calendarContainer,"arrowTop",!l),n(Ie.calendarContainer,"arrowBottom",l),!Ie.config.inline){var s=window.pageXOffset+o.left,d=window.document.body.offsetWidth-o.right,f=s+i>window.document.body.offsetWidth;n(Ie.calendarContainer,"rightMost",f),Ie.config.static||(Ie.calendarContainer.style.top=u+"px",f?(Ie.calendarContainer.style.left="auto",Ie.calendarContainer.style.right=d+"px"):(Ie.calendarContainer.style.left=s+"px",Ie.calendarContainer.style.right="auto"))}}}function se(){Ie.config.noCalendar||Ie.isMobile||(z(),xe(),q())}function de(){Ie._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(Ie.close,0):Ie.close()}function fe(e){e.preventDefault(),e.stopPropagation();var n=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},a=r(e.target,n);if(void 0!==a){var i=a,o=Ie.latestSelectedDateObj=new Date(i.dateObj.getTime()),c=(o.getMonth()<Ie.currentMonth||o.getMonth()>Ie.currentMonth+Ie.config.showMonths-1)&&"range"!==Ie.config.mode;if(Ie.selectedDateElem=i,"single"===Ie.config.mode)Ie.selectedDates=[o];else if("multiple"===Ie.config.mode){var l=Ce(o);l?Ie.selectedDates.splice(parseInt(l),1):Ie.selectedDates.push(o)}else"range"===Ie.config.mode&&(2===Ie.selectedDates.length&&Ie.clear(!1),Ie.selectedDates.push(o),0!==t(o,Ie.selectedDates[0],!0)&&Ie.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(E(),c){var u=Ie.currentYear!==o.getFullYear();Ie.currentYear=o.getFullYear(),Ie.currentMonth=o.getMonth(),u&&De("onYearChange"),De("onMonthChange")}if(xe(),q(),Ie.config.minDate&&Ie.minDateHasTime&&Ie.config.enableTime&&0===t(o,Ie.config.minDate)&&S(Ie.config.minDate),Ee(),Ie.config.enableTime&&setTimeout(function(){return Ie.showTimeInput=!0},50),"range"===Ie.config.mode&&(1===Ie.selectedDates.length?ae(i):xe()),c||"range"===Ie.config.mode||1!==Ie.config.showMonths?Ie.selectedDateElem&&Ie.selectedDateElem.focus():H(i.$i,0),void 0!==Ie.hourElement&&setTimeout(function(){return void 0!==Ie.hourElement&&Ie.hourElement.select()},451),Ie.config.closeOnSelect){var s="single"===Ie.config.mode&&!Ie.config.enableTime,d="range"===Ie.config.mode&&2===Ie.selectedDates.length&&!Ie.config.enableTime;(s||d)&&de()}P()}}function me(e,t){null!==e&&"object"==typeof e?Object.assign(Ie.config,e):(Ie.config[e]=t,void 0!==ke[e]&&ke[e].forEach(function(e){return e()})),Ie.redraw(),j()}function ge(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return Ie.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[Ie.parseDate(e,t)];else if("string"==typeof e)switch(Ie.config.mode){case"single":n=[Ie.parseDate(e,t)];break;case"multiple":n=e.split(Ie.config.conjunction).map(function(e){return Ie.parseDate(e,t)});break;case"range":n=e.split(Ie.l10n.rangeSeparator).map(function(e){return Ie.parseDate(e,t)})}else Ie.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));Ie.selectedDates=n.filter(function(e){return e instanceof Date&&te(e,!1)}),"range"===Ie.config.mode&&Ie.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function pe(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=Ie.config.dateFormat),0!==e&&!e)return Ie.clear(t);ge(e,n),Ie.showTimeInput=Ie.selectedDates.length>0,Ie.latestSelectedDateObj=Ie.selectedDates[0],Ie.redraw(),j(),S(),Ee(t),t&&De("onChange")}function ve(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?Ie.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:Ie.parseDate(e.from,void 0),to:Ie.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function he(){Ie.selectedDates=[],Ie.now=Ie.parseDate(Ie.config.now)||new Date;var e=Ie.config.defaultDate||Ie.input.value;e&&ge(e,Ie.config.dateFormat);var t=Ie.selectedDates.length>0?Ie.selectedDates[0]:Ie.config.minDate&&Ie.config.minDate.getTime()>Ie.now.getTime()?Ie.config.minDate:Ie.config.maxDate&&Ie.config.maxDate.getTime()<Ie.now.getTime()?Ie.config.maxDate:Ie.now;Ie.currentYear=t.getFullYear(),Ie.currentMonth=t.getMonth(),Ie.selectedDates.length>0&&(Ie.latestSelectedDateObj=Ie.selectedDates[0]),void 0!==Ie.config.minTime&&(Ie.config.minTime=Ie.parseDate(Ie.config.minTime,"H:i")),void 0!==Ie.config.maxTime&&(Ie.config.maxTime=Ie.parseDate(Ie.config.maxTime,"H:i")),Ie.minDateHasTime=!!Ie.config.minDate&&(Ie.config.minDate.getHours()>0||Ie.config.minDate.getMinutes()>0||Ie.config.minDate.getSeconds()>0),Ie.maxDateHasTime=!!Ie.config.maxDate&&(Ie.config.maxDate.getHours()>0||Ie.config.maxDate.getMinutes()>0||Ie.config.maxDate.getSeconds()>0),Object.defineProperty(Ie,"showTimeInput",{get:function(){return Ie._showTimeInput},set:function(e){Ie._showTimeInput=e,Ie.calendarContainer&&n(Ie.calendarContainer,"showTimeInput",e),Ie.isOpen&&ue()}})}function ye(){if(Ie.input=Ie.config.wrap?c.querySelector("[data-input]"):c,!Ie.input)return void Ie.config.errorHandler(new Error("Invalid input element specified"));Ie.input._type=Ie.input.type,Ie.input.type="text",Ie.input.classList.add("flatpickr-input"),Ie._input=Ie.input,Ie.config.altInput&&(Ie.altInput=a(Ie.input.nodeName,Ie.input.className+" "+Ie.config.altInputClass),Ie._input=Ie.altInput,Ie.altInput.placeholder=Ie.input.placeholder,Ie.altInput.disabled=Ie.input.disabled,Ie.altInput.required=Ie.input.required,Ie.altInput.tabIndex=Ie.input.tabIndex,Ie.altInput.type="text",Ie.input.type="hidden",!Ie.config.static&&Ie.input.parentNode&&Ie.input.parentNode.insertBefore(Ie.altInput,Ie.input.nextSibling)),Ie.config.allowInput||Ie._input.setAttribute("readonly","readonly"),Ie._positionElement=Ie.config.positionElement||Ie._input}function be(){var e=Ie.config.enableTime?Ie.config.noCalendar?"time":"datetime-local":"date";Ie.mobileInput=a("input",Ie.input.className+" flatpickr-mobile"),Ie.mobileInput.step=Ie.input.getAttribute("step")||"any",Ie.mobileInput.tabIndex=1,Ie.mobileInput.type=e,Ie.mobileInput.disabled=Ie.input.disabled,Ie.mobileInput.required=Ie.input.required,Ie.mobileInput.placeholder=Ie.input.placeholder,Ie.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",Ie.selectedDates.length>0&&(Ie.mobileInput.defaultValue=Ie.mobileInput.value=Ie.formatDate(Ie.selectedDates[0],Ie.mobileFormatStr)),Ie.config.minDate&&(Ie.mobileInput.min=Ie.formatDate(Ie.config.minDate,"Y-m-d")),Ie.config.maxDate&&(Ie.mobileInput.max=Ie.formatDate(Ie.config.maxDate,"Y-m-d")),Ie.input.type="hidden",void 0!==Ie.altInput&&(Ie.altInput.type="hidden");try{Ie.input.parentNode&&Ie.input.parentNode.insertBefore(Ie.mobileInput,Ie.input.nextSibling)}catch(e){}k(Ie.mobileInput,"change",function(e){Ie.setDate(e.target.value,!1,Ie.mobileFormatStr),De("onChange"),De("onClose")})}function we(){if(Ie.isOpen)return Ie.close();Ie.open()}function De(e,t){var n=Ie.config[e];if(void 0!==n&&n.length>0)for(var a=0;n[a]&&a<n.length;a++)n[a](Ie.selectedDates,Ie.input.value,Ie,t);"onChange"===e&&(Ie.input.dispatchEvent(Me("change")),Ie.input.dispatchEvent(Me("input")))}function Me(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function Ce(e){for(var n=0;n<Ie.selectedDates.length;n++)if(0===t(Ie.selectedDates[n],e))return""+n;return!1}function Te(e){return!("range"!==Ie.config.mode||Ie.selectedDates.length<2)&&(t(e,Ie.selectedDates[0])>=0&&t(e,Ie.selectedDates[1])<=0)}function xe(){Ie.config.noCalendar||Ie.isMobile||!Ie.monthNav||(Ie.yearElements.forEach(function(e,t){var n=new Date(Ie.currentYear,Ie.currentMonth,1);n.setMonth(Ie.currentMonth+t),Ie.monthElements[t].textContent=m(n.getMonth(),Ie.config.shorthandCurrentMonth,Ie.l10n)+" ",e.value=n.getFullYear().toString()}),Ie._hidePrevMonthArrow=void 0!==Ie.config.minDate&&(Ie.currentYear===Ie.config.minDate.getFullYear()?Ie.currentMonth<=Ie.config.minDate.getMonth():Ie.currentYear<Ie.config.minDate.getFullYear()),Ie._hideNextMonthArrow=void 0!==Ie.config.maxDate&&(Ie.currentYear===Ie.config.maxDate.getFullYear()?Ie.currentMonth+1>Ie.config.maxDate.getMonth():Ie.currentYear>Ie.config.maxDate.getFullYear()))}function Ee(e){if(void 0===e&&(e=!0),0===Ie.selectedDates.length)return Ie.clear(e);void 0!==Ie.mobileInput&&Ie.mobileFormatStr&&(Ie.mobileInput.value=void 0!==Ie.latestSelectedDateObj?Ie.formatDate(Ie.latestSelectedDateObj,Ie.mobileFormatStr):"");var t="range"!==Ie.config.mode?Ie.config.conjunction:Ie.l10n.rangeSeparator;Ie.input.value=Ie.selectedDates.map(function(e){return Ie.formatDate(e,Ie.config.dateFormat)}).join(t),void 0!==Ie.altInput&&(Ie.altInput.value=Ie.selectedDates.map(function(e){return Ie.formatDate(e,Ie.config.altFormat)}).join(t)),!1!==e&&De("onValueUpdate")}function Se(e){var t=Ie.prevMonthNav.contains(e.target),n=Ie.nextMonthNav.contains(e.target);t||n?X(t?-1:1):Ie.yearElements.indexOf(e.target)>=0?(e.preventDefault(),e.target.select()):e.target.classList.contains("arrowUp")?Ie.changeYear(Ie.currentYear+1):e.target.classList.contains("arrowDown")&&Ie.changeYear(Ie.currentYear-1)}function Oe(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[s(Ie.amPM.textContent===Ie.l10n.amPM[0])]);var a=parseFloat(n.getAttribute("data-min")),i=parseFloat(n.getAttribute("data-max")),r=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),c=e.delta||(t?38===e.which?1:-1:0),l=o+r*c;if(void 0!==n.value&&2===n.value.length){var d=n===Ie.hourElement,f=n===Ie.minuteElement;l<a?(l=i+l+s(!d)+(s(d)&&s(!Ie.amPM)),f&&F(void 0,-1,Ie.hourElement)):l>i&&(l=n===Ie.hourElement?l-i-s(!Ie.amPM):a,f&&F(void 0,1,Ie.hourElement)),Ie.amPM&&d&&(1===r?l+o===23:Math.abs(l-o)>r)&&(Ie.amPM.textContent=Ie.l10n.amPM[s(Ie.amPM.textContent===Ie.l10n.amPM[0])]),n.value=u(l)}}var Ie={config:Object.assign({},x.defaultConfig),l10n:h};Ie.parseDate=b({config:Ie.config,l10n:Ie.l10n}),Ie._handlers=[],Ie._bind=k,Ie._setHoursFromDate=S,Ie.changeMonth=X,Ie.changeYear=ee,Ie.clear=$,Ie.close=G,Ie._createElement=a,Ie.destroy=V,Ie.isEnabled=te,Ie.jumpToDate=j,Ie.open=re,Ie.redraw=se,Ie.set=me,Ie.setDate=pe,Ie.toggle=we;var ke={locale:[le]};return function(){if(Ie.element=Ie.input=c,Ie.isOpen=!1,ce(),le(),ye(),he(),f(),Ie.isMobile||L(),A(),(Ie.selectedDates.length||Ie.config.noCalendar)&&(Ie.config.enableTime&&S(Ie.config.noCalendar?Ie.latestSelectedDateObj||Ie.config.minDate:void 0),Ee(!1)),Ie.showTimeInput=Ie.selectedDates.length>0||Ie.config.noCalendar,void 0!==Ie.daysContainer){Ie.calendarContainer.style.visibility="hidden",Ie.calendarContainer.style.display="block";var e=(Ie.daysContainer.offsetWidth+1)*Ie.config.showMonths;Ie.daysContainer.style.width=e+"px",Ie.calendarContainer.style.width=e+"px",void 0!==Ie.weekWrapper&&(Ie.calendarContainer.style.width=e+Ie.weekWrapper.offsetWidth+"px"),Ie.calendarContainer.style.visibility="visible",Ie.calendarContainer.style.display=null}var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!Ie.isMobile&&t&&ue(),De("onReady")}(),Ie}function l(e,t){for(var n=Array.prototype.slice.call(e),a=[],i=0;i<n.length;i++){var r=n[i];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=c(r,t||{}),a.push(r._flatpickr)}catch(e){console.error(e)}}return 1===a.length?a[0]:a}var u=function(e){return("0"+e).slice(-2)},s=function(e){return!0===e?1:0},d=function(e){return e instanceof Array?e:[e]},f=function(){},m=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},g={D:f,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*s(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:f,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:f,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},p={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},v={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[v.w(e,t,n)]},F:function(e,t,n){return m(v.n(e,t,n)-1,!1,t)},G:function(e,t,n){return u(v.h(e,t,n))},H:function(e){return u(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[s(e.getHours()>11)]},M:function(e,t){return m(e.getMonth(),!0,t)},S:function(e){return u(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return u(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return u(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return u(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},h={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},y=function(e){var t=e.config,n=void 0===t?C:t,a=e.l10n,i=void 0===a?h:a;return function(e,t,a){if(void 0!==n.formatDate)return n.formatDate(e,t);var r=a||i;return t.split("").map(function(t,a,i){return v[t]&&"\\"!==i[a-1]?v[t](e,r,n):"\\"!==t?t:""}).join("")}},b=function(e){var t=e.config,n=void 0===t?C:t,a=e.l10n,i=void 0===a?h:a;return function(e,t,a){if(0===e||e){var r,o=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"==typeof e){var c=t||(n||C).dateFormat,l=String(e).trim();if("today"===l)r=new Date,a=!0;else if(/Z$/.test(l)||/GMT$/.test(l))r=new Date(e);else if(n&&n.parseDate)r=n.parseDate(e,c);else{r=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var u,s=[],d=0,f=0,m="";d<c.length;d++){var v=c[d],h="\\"===v,y="\\"===c[d-1]||h;if(p[v]&&!y){m+=p[v];var b=new RegExp(m).exec(e);b&&(u=!0)&&s["Y"!==v?"push":"unshift"]({fn:g[v],val:b[++f]})}else h||(m+=".");s.forEach(function(e){var t=e.fn,n=e.val;return r=t(r,n,i)||r})}r=u?r:void 0}}return r instanceof Date?(!0===a&&r.setHours(0,0,0,0),r):void n.errorHandler(new Error("Invalid date provided: "+o))}}},w=function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},D=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},M={DAY:864e5},C={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:w,hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};"function"!=typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var r=n[i];!function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})}(r)}return e});var T=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return l(this,e)},HTMLElement.prototype.flatpickr=function(e){return l([this],e)});var x=function(e,t){return e instanceof NodeList?l(e,t):"string"==typeof e?l(window.document.querySelectorAll(e),t):l([e],t)};return x.defaultConfig=C,x.l10ns={en:Object.assign({},h),default:Object.assign({},h)},x.localize=function(e){x.l10ns.default=Object.assign({},x.l10ns.default,e)},x.setDefaults=function(e){x.defaultConfig=Object.assign({},x.defaultConfig,e)},x.parseDate=b({}),x.formatDate=y({}),x.compareDates=t,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return l(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},x})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".gallery-wrapper");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".add-gallery-images"),n=(0,c.default)(e,".image-gallery-hidden"),a=(0,l.removeItems)(n,l.onRemoveImage),i=(0,l.dragItems)(n,l.onDragImage),o=(0,r.default)(e,{list:".gallery-images",onDrag:i,onRemove:a,listTemplate:u}),s=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!0});t.addEventListener("click",function(e){e.preventDefault(),s.open()}),s.on("select",function(){s.state().get("selection").toJSON().forEach(function(e){o.add(e),n.add(e.id)})})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="gallery-image-item"><span class="gallery-iamge-id">'+e.id+'</span><img src="'+e.url+'" class="gallery-image"/><span><svg class="remove-gallery-image" viewBox="0 0 20 20">\n  <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n</svg></span></li>'}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".table-list");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".table-list-add"),n=(0,c.default)(e,".table-list-hidden"),a=(0,l.removeItems)(n,l.onRemoveTable),i=(0,l.dragItems)(n,l.onDragTable),o=(0,r.default)(e,{list:".table-list-list",onDrag:i,onRemove:a,listTemplate:u}),s=e.querySelector(".text-list-wrapper"),d=s.querySelector(".table-list-key"),f=s.querySelector(".table-list-value");t.addEventListener("click",function(e){e.preventDefault();var t={key:d.value,value:f.value};o.add(t),n.add(t),d.value="",f.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="text-list-item table-list-item">\n    <span class="table-list-key">'+e.key+'</span>\n    <span class="table-list-value">'+e.value+'</span>\n    <svg viewBox="0 0 20 20">\n        <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n    </svg>\n</li>'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA3NGMxMDY0NjAzOTdlMDVlYWRjMiIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc2VyaWFsaXplZC1pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vdGV4dC1saXN0LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2RyYWd1bGEuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGlja3kvdGlja3ktYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3VzdG9tLWV2ZW50L2luZGV4LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9hdXRvLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vaW1hZ2UtdXBsb2Fkcy5qcyIsIndlYnBhY2s6Ly8vLi9kYXRlcGlja2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuanMiLCJ3ZWJwYWNrOi8vLy4vZ2FsbGVyeS5qcyIsIndlYnBhY2s6Ly8vLi90YWJsZS1saXN0LmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJnIiwidGhpcyIsIkZ1bmN0aW9uIiwiZXZhbCIsImUiLCJ3aW5kb3ciLCJ2YWx1ZSIsImRlZmF1bHQiLCJwYXJlbnQiLCJhcmdzIiwibGlzdCIsInF1ZXJ5U2VsZWN0b3IiLCJyZWdpc3RlckRyYWdFdmVudHMiLCJvbkRyYWciLCJyZWdpc3RlclJlbW92ZUV2ZW50cyIsIm9uUmVtb3ZlIiwiYWRkIiwiaHRtbCIsImxpc3RUZW1wbGF0ZSIsImxpc3RJdGVtIiwiZG9jdW1lbnQiLCJjcmVhdGVSYW5nZSIsImNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCIsImFwcGVuZENoaWxkIiwiX2RyYWd1bGEiLCJfZHJhZ3VsYTIiLCJvYmoiLCJsaXN0SXRlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsInRhZ05hbWUiLCJjbG9zZXN0IiwiaW5uZXJIVE1MIiwicmVtb3ZlQ2hpbGQiLCJjYWxsYmFjayIsIm9uIiwiZWwiLCJoaWRkZW5JbnB1dCIsImhpZGRlbkVsIiwiZ2V0Q3VycmVudFZhbHVlIiwiSlNPTiIsInBhcnNlIiwiYWRkVmFsdWUiLCJjb25jYXQiLCJyZW1vdmVWYWx1ZSIsInN0cmluZ2lmeSIsInJlbW92ZSIsInVwZGF0ZSIsInZhbHVlcyIsInJlbW92ZUl0ZW1zIiwiSGlkZGVuIiwiZHJhZ0l0ZW1zIiwib25EcmFnT2JqZWN0IiwicmVkdWNlIiwiYWNjIiwiaWQiLCJkYXRhc2V0IiwidGl0bGUiLCJvbkRyYWdUZXh0Iiwib25EcmFnSW1hZ2UiLCJwYXJzZUludCIsIm9uUmVtb3ZlT2JqZWN0IiwiY3VycmVudFZhbHVlIiwibmV3VmFsdWUiLCJmaWx0ZXIiLCJjdXJyZW50Iiwib25SZW1vdmVUZXh0Iiwib25SZW1vdmVJbWFnZSIsIm9uRHJhZ1RhYmxlIiwia2V5Iiwib25SZW1vdmVUYWJsZSIsImF1dG9zdWdnZXN0IiwiZW5kcG9pbnQiLCJvblNlbGVjdCIsIm9uRW1wdHkiLCJ4aHIiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJnZXRPcHRpb25zIiwidXBkYXRlT3B0aW9ucyIsIm9uQXV0b1N1Z2dlc3RJbnB1dCIsImlucHV0IiwiaW5wdXRWYWx1ZSIsImxpc3ROYW1lIiwiZ2V0QXR0cmlidXRlIiwibGlzdE9wdGlvbnMiLCJnZXRFbGVtZW50QnlJZCIsImNoaWxkTm9kZXMiLCJtYXRjaCIsIm9wdGlvbiIsInF1ZXJ5IiwiYnVpbGRRdWVyeSIsInVybCIsImFib3J0IiwiWE1MSHR0cFJlcXVlc3QiLCJldnQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiaXNKU09OIiwicmVzcG9uc2VUZXh0IiwicmVzdWx0cyIsIm1lc3NhZ2UiLCJvcGVuIiwic2VuZCIsImVycm9yIiwicmVzcG9uc2UiLCJjb25zb2xlIiwid2FybiIsIkFycmF5IiwiaXNBcnJheSIsImNyZWF0ZU9wdGlvbnMiLCJkYXRhbGlzdCIsIm5ld09wdGlvbnMiLCJyZXN1bHQiLCJjcmVhdGVPcHRpb24iLCJyZW5kZXJlZCIsInN0ciIsImVuY29kZVVSSUNvbXBvbmVudCIsInRvTG93ZXJDYXNlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbmRleCIsIl90ZXh0TGlzdCIsIl90ZXh0TGlzdDIiLCJfYXV0b3N1Z2dlc3RMaXN0IiwiX2F1dG9zdWdnZXN0TGlzdDIiLCJfbGlzdCIsIl9hdXRvSXRlbSIsIl9hdXRvSXRlbTIiLCJfaW1hZ2VVcGxvYWRzIiwiX2ltYWdlVXBsb2FkczIiLCJfZGF0ZXBpY2tlciIsIl9kYXRlcGlja2VyMiIsIl9nYWxsZXJ5IiwiX2dhbGxlcnkyIiwiX3RhYmxlTGlzdCIsIl90YWJsZUxpc3QyIiwiY3JlYXRlVGV4dEl0ZW0iLCJjcmVhdGVBdXRvU3VnZ2VzdEl0ZW0iLCJidXR0b24iLCJoaWRkZW4iLCJsaXN0RmllbGRzIiwiZm9yRWFjaCIsImxpc3RGaWVsZCIsInRleHRJbnB1dCIsImFkZEJ1dHRvbiIsIl9zZXJpYWxpemVkSW5wdXQyIiwiX3V0aWxpdGllcyIsImRyYWciLCJMaXN0IiwiX2xpc3QyIiwiYXNzaWduIiwia2V5Q29kZSIsInByZXZlbnREZWZhdWx0IiwiX3NlcmlhbGl6ZWRJbnB1dCIsImdsb2JhbCIsImRyYWd1bGEiLCJpbml0aWFsQ29udGFpbmVycyIsIm9wdGlvbnMiLCJpc0NvbnRhaW5lciIsImRyYWtlIiwiY29udGFpbmVycyIsImluZGV4T2YiLCJldmVudHMiLCJvcCIsInRvdWNoeSIsImRvY3VtZW50RWxlbWVudCIsImdyYWIiLCJyZWxlYXNlIiwiZXZlbnR1YWxNb3ZlbWVudHMiLCJzdGFydEJlY2F1c2VNb3VzZU1vdmVkIiwibW92ZW1lbnRzIiwiY3Jvc3N2ZW50IiwicHJldmVudEdyYWJiZWQiLCJkZXN0cm95IiwiX2dyYWJiZWQiLCJfbW92ZVgiLCJjbGllbnRYIiwiX21vdmVZIiwiY2xpZW50WSIsIndoaWNoTW91c2VCdXR0b24iLCJtZXRhS2V5IiwiY3RybEtleSIsIml0ZW0iLCJjb250ZXh0IiwiY2FuU3RhcnQiLCJ0eXBlIiwiaXNJbnB1dCIsImZvY3VzIiwiaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uIiwiZ2V0Q29vcmQiLCJkb2MiLCJlbGVtZW50RnJvbVBvaW50IiwiZ3JhYmJlZCIsImVuZCIsInN0YXJ0Iiwib2Zmc2V0IiwiZ2V0T2Zmc2V0IiwiX2l0ZW0iLCJfb2Zmc2V0WCIsImxlZnQiLCJfb2Zmc2V0WSIsInRvcCIsImNsYXNzZXMiLCJfY29weSIsInJlbmRlck1pcnJvckltYWdlIiwiZHJhZ2dpbmciLCJfbWlycm9yIiwiaGFuZGxlIiwiZ2V0UGFyZW50IiwiaW52YWxpZCIsInNvdXJjZSIsIm1vdmVzIiwibmV4dEVsIiwiY2FuTW92ZSIsIm1hbnVhbFN0YXJ0IiwiaXNDb3B5IiwiY2xvbmVOb2RlIiwiZW1pdCIsIl9zb3VyY2UiLCJfaW5pdGlhbFNpYmxpbmciLCJfY3VycmVudFNpYmxpbmciLCJpbnZhbGlkVGFyZ2V0IiwiZHJvcCIsInVuZ3JhYiIsImVsZW1lbnRCZWhpbmRDdXJzb3IiLCJnZXRFbGVtZW50QmVoaW5kUG9pbnQiLCJkcm9wVGFyZ2V0IiwiZmluZERyb3BUYXJnZXQiLCJjb3B5U29ydFNvdXJjZSIsInJlbW92ZU9uU3BpbGwiLCJjYW5jZWwiLCJpc0luaXRpYWxQbGFjZW1lbnQiLCJjbGVhbnVwIiwicmV2ZXJ0IiwicmV2ZXJ0cyIsImFyZ3VtZW50cyIsInJldmVydE9uU3BpbGwiLCJpbml0aWFsIiwiaW5zZXJ0QmVmb3JlIiwicmVtb3ZlTWlycm9ySW1hZ2UiLCJybSIsIl9yZW5kZXJUaW1lciIsImNsZWFyVGltZW91dCIsIl9sYXN0RHJvcFRhcmdldCIsInNpYmxpbmciLCJpbW1lZGlhdGUiLCJnZXRJbW1lZGlhdGVDaGlsZCIsInJlZmVyZW5jZSIsImdldFJlZmVyZW5jZSIsImFjY2VwdHMiLCJtb3ZlZCIsIngiLCJ5Iiwic3R5bGUiLCJjaGFuZ2VkIiwic3BpbGxPdmVyIiwic3BpbGxPdXQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJnZXRSZWN0V2lkdGgiLCJoZWlnaHQiLCJnZXRSZWN0SGVpZ2h0IiwibWlycm9yQ29udGFpbmVyIiwicmVzb2x2ZSIsImFmdGVyIiwiaG9yaXpvbnRhbCIsImRpcmVjdGlvbiIsImxlbiIsImNoaWxkcmVuIiwiY29udGFpbmVyIiwiY29weSIsImFsd2F5cyIsIm5ldmVyIiwiYm9keSIsImVtaXR0ZXIiLCJmbiIsInRvdWNoIiwibW91c2V1cCIsIm1vdXNlZG93biIsIm1vdXNlbW92ZSIsInBvaW50ZXJzIiwibWljcm9zb2Z0IiwibmF2aWdhdG9yIiwicG9pbnRlckVuYWJsZWQiLCJtc1BvaW50ZXJFbmFibGVkIiwidG91Y2hlcyIsIndoaWNoIiwiYnV0dG9ucyIsImdldFNjcm9sbCIsInNjcm9sbFByb3AiLCJvZmZzZXRQcm9wIiwiY2xpZW50SGVpZ2h0IiwicG9pbnQiLCJzdGF0ZSIsImNsYXNzTmFtZSIsInJpZ2h0IiwiYm90dG9tIiwicGFyZW50Tm9kZSIsImlzRWRpdGFibGUiLCJjb250ZW50RWRpdGFibGUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJuZXh0U2libGluZyIsIm5vZGVUeXBlIiwiZ2V0RXZlbnRIb3N0IiwidGFyZ2V0VG91Y2hlcyIsImNoYW5nZWRUb3VjaGVzIiwiY29vcmQiLCJob3N0IiwibWlzc01hcCIsInBhZ2VYIiwicGFnZVkiLCJhdG9hIiwiZGVib3VuY2UiLCJ0aGluZyIsIm9wdHMiLCJ1bmRlZmluZWQiLCJwdXNoIiwib25jZSIsIl9vbmNlIiwib2ZmIiwiZXQiLCJzcGxpY2UiLCJlbWl0dGVyU25hcHNob3QiLCJzaGlmdCIsImFwcGx5Iiwic2xpY2UiLCJjdHgiLCJ0aHJvd3MiLCJsaXN0ZW4iLCJhc3luYyIsImEiLCJ0aWNreSIsInNldEltbWVkaWF0ZSIsInRpY2siLCJzaSIsInNldFRpbWVvdXQiLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwidGltZW91dCIsImNsb3NlIiwidW5yZWYiLCJyZWYiLCJlbnJvbGwiLCJtc2VjcyIsIl9pZGxlVGltZW91dElkIiwiX2lkbGVUaW1lb3V0IiwidW5lbnJvbGwiLCJfdW5yZWZBY3RpdmUiLCJhY3RpdmUiLCJfb25UaW1lb3V0Iiwic2VsZiIsImNsZWFySW1tZWRpYXRlIiwicHJvY2VzcyIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwicnVuIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwibmV4dFRpY2siLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwibWVzc2FnZVByZWZpeCIsIk1hdGgiLCJyYW5kb20iLCJvbkdsb2JhbE1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJjcmVhdGVFbGVtZW50Iiwic2NyaXB0IiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwibWFya2VyIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsImFkZEV2ZW50RWFzeSIsImNhcHR1cmluZyIsImFkZEV2ZW50SGFyZCIsIndyYXAiLCJyZW1vdmVFdmVudEVhc3kiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRIYXJkIiwibGlzdGVuZXIiLCJ1bndyYXAiLCJkZXRhY2hFdmVudCIsImZhYnJpY2F0ZUV2ZW50IiwibW9kZWwiLCJldmVudG1hcCIsImN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJjcmVhdGVFdmVudE9iamVjdCIsImRpc3BhdGNoRXZlbnQiLCJmaXJlRXZlbnQiLCJ3cmFwcGVyRmFjdG9yeSIsIm9yaWdpbmFsRXZlbnQiLCJzcmNFbGVtZW50IiwicmV0dXJuVmFsdWUiLCJzdG9wUHJvcGFnYXRpb24iLCJjYW5jZWxCdWJibGUiLCJ3cmFwcGVyIiwiaGFyZENhY2hlIiwiZWxlbWVudCIsImZpbmQiLCJhZGRFdmVudCIsInJlbW92ZUV2ZW50IiwiZmFicmljYXRlIiwiTmF0aXZlQ3VzdG9tRXZlbnQiLCJDdXN0b21FdmVudCIsImZvbyIsInBhcmFtcyIsImluaXRDdXN0b21FdmVudCIsImJ1YmJsZXMiLCJjYW5jZWxhYmxlIiwiQm9vbGVhbiIsImV2ZW50bmFtZSIsInJvbiIsInRlc3QiLCJsb29rdXBDbGFzcyIsImNhY2hlZCIsImNhY2hlIiwibGFzdEluZGV4IiwiUmVnRXhwIiwiYWRkQ2xhc3MiLCJybUNsYXNzIiwicmVwbGFjZSIsInRyaW0iLCJmaWVsZHMiLCJhdXRvTGlzdCIsImVsTmFtZSIsIk9NR0ZpZWxkcyIsImJhc2VVUkwiLCJyZXNvdXJjZSIsIl9hdXRvc3VnZ2VzdDIiLCJfYXV0b3N1Z2dlc3QiLCJhdXRvSXRlbSIsIm5hbWVzcGFjZSIsImltYWdlVXBsb2FkcyIsImZlYXR1cmVkSW1hZ2VXcmFwIiwibWFwIiwicmVtb3ZlSW1hZ2UiLCJyZXBsYWNlSW1hZ2UiLCJzZXRJbWFnZSIsImZlYXR1cmVkSW1hZ2VUYWciLCJmZWF0dXJlZEltYWdlSUQiLCJmZWF0dXJlZEltYWdlVGl0bGUiLCJtZWRpYUZyYW1lIiwid3AiLCJtZWRpYSIsInRleHQiLCJtdWx0aXBsZSIsImF0dGFjaG1lbnQiLCJmaXJzdCIsInRvSlNPTiIsInRvZ2dsZSIsInNldEF0dHJpYnV0ZSIsInNpemVzIiwidGh1bWJuYWlsIiwiaWNvbiIsImZpbGVuYW1lIiwiZGF0ZXBpY2tlcnMiLCJkYXRlRmllbGQiLCJjdXJyZW50RGF0ZSIsImRhdGUiLCJfZmxhdHBpY2tyMiIsImFsdElucHV0IiwiYWx0Rm9ybWF0IiwiZGF0ZUZvcm1hdCIsImRlZmF1bHREYXRlIiwiX2ZsYXRwaWNrciIsImZhY3RvcnkiLCJmdW5jIiwid2FpdCIsImNvbXBhcmVEYXRlcyIsImRhdGUxIiwiZGF0ZTIiLCJ0aW1lbGVzcyIsIkRhdGUiLCJnZXRUaW1lIiwic2V0SG91cnMiLCJ0b2dnbGVDbGFzcyIsImVsZW0iLCJib29sIiwidGFnIiwiY29udGVudCIsInRleHRDb250ZW50IiwiY2xlYXJOb2RlIiwibm9kZSIsImZpcnN0Q2hpbGQiLCJmaW5kUGFyZW50IiwiY29uZGl0aW9uIiwiY3JlYXRlTnVtYmVySW5wdXQiLCJpbnB1dENsYXNzTmFtZSIsIm51bUlucHV0IiwiYXJyb3dVcCIsImFycm93RG93biIsInBhdHRlcm4iLCJGbGF0cGlja3JJbnN0YW5jZSIsImluc3RhbmNlQ29uZmlnIiwic2V0dXBIZWxwZXJGdW5jdGlvbnMiLCJ1dGlscyIsImdldERheXNJbk1vbnRoIiwibW9udGgiLCJ5ciIsImN1cnJlbnRNb250aCIsImN1cnJlbnRZZWFyIiwibDEwbiIsImRheXNJbk1vbnRoIiwiYmluZFRvSW5zdGFuY2UiLCJiaW5kIiwidXBkYXRlVGltZSIsInNlbGVjdGVkRGF0ZXMiLCJ0aW1lV3JhcHBlciIsInNldEhvdXJzRnJvbUlucHV0cyIsInVwZGF0ZVZhbHVlIiwiREVCT1VOQ0VEX0NIQU5HRV9NUyIsImFtcG0ybWlsaXRhcnkiLCJob3VyIiwiYW1QTSIsImludCIsIm1pbGl0YXJ5MmFtcG0iLCJob3VyRWxlbWVudCIsIm1pbnV0ZUVsZW1lbnQiLCJob3VycyIsIm1pbnV0ZXMiLCJzZWNvbmRzIiwic2Vjb25kRWxlbWVudCIsImxpbWl0TWluSG91cnMiLCJjb25maWciLCJtaW5UaW1lIiwibWluRGF0ZSIsIm1pbkRhdGVIYXNUaW1lIiwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqIiwibWF4VGltZSIsIm1heERhdGUiLCJtYXhEYXRlSGFzVGltZSIsIm1pbiIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJtYXgiLCJzZXRIb3Vyc0Zyb21EYXRlIiwiZGF0ZU9iaiIsImlzTW9iaWxlIiwicGFkIiwidGltZV8yNGhyIiwib25ZZWFySW5wdXQiLCJ5ZWFyIiwiZGVsdGEiLCJibHVyIiwiY2hhbmdlWWVhciIsImhhbmRsZXIiLCJldiIsIl9oYW5kbGVycyIsIm9uQ2xpY2siLCJ0cmlnZ2VyQ2hhbmdlIiwidHJpZ2dlckV2ZW50IiwiYmluZEV2ZW50cyIsInNldHVwTW9iaWxlIiwiZGVib3VuY2VkUmVzaXplIiwib25SZXNpemUiLCJfZGVib3VuY2VkQ2hhbmdlIiwiZGF5c0NvbnRhaW5lciIsInVzZXJBZ2VudCIsIm1vZGUiLCJvbk1vdXNlT3ZlciIsIm9uS2V5RG93biIsInN0YXRpYyIsIl9pbnB1dCIsImlubGluZSIsIm9udG91Y2hzdGFydCIsImRvY3VtZW50Q2xpY2siLCJjYXB0dXJlIiwiY2xpY2tPcGVucyIsIm1vbnRoTmF2Iiwib25Nb250aE5hdkNsaWNrIiwic2VsZWN0RGF0ZSIsInRpbWVDb250YWluZXIiLCJzZWxUZXh0Iiwic2VsZWN0IiwidGltZUluY3JlbWVudCIsInBhc3NpdmUiLCJqdW1wVG9EYXRlIiwianVtcERhdGUiLCJqdW1wVG8iLCJwYXJzZURhdGUiLCJub3ciLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwiZXJyb3JIYW5kbGVyIiwicmVkcmF3IiwiaW5jcmVtZW50TnVtSW5wdXQiLCJjb250YWlucyIsImlucHV0RWxlbSIsImJ1aWxkIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiY2FsZW5kYXJDb250YWluZXIiLCJ0YWJJbmRleCIsIm5vQ2FsZW5kYXIiLCJidWlsZE1vbnRoTmF2IiwiaW5uZXJDb250YWluZXIiLCJ3ZWVrTnVtYmVycyIsIl9idWlsZFdlZWtzIiwiYnVpbGRXZWVrcyIsIndlZWtXcmFwcGVyIiwickNvbnRhaW5lciIsImJ1aWxkV2Vla2RheXMiLCJidWlsZERheXMiLCJlbmFibGVUaW1lIiwiYnVpbGRUaW1lIiwiYW5pbWF0ZSIsInNob3dNb250aHMiLCJjdXN0b21BcHBlbmQiLCJhcHBlbmRUbyIsImNyZWF0ZURheSIsImRheU51bWJlciIsImRhdGVJc0VuYWJsZWQiLCJpc0VuYWJsZWQiLCJkYXlFbGVtZW50IiwiZ2V0RGF0ZSIsIiRpIiwiZm9ybWF0RGF0ZSIsImFyaWFEYXRlRm9ybWF0IiwidG9kYXlEYXRlRWxlbSIsImlzRGF0ZVNlbGVjdGVkIiwic2VsZWN0ZWREYXRlRWxlbSIsImlzRGF0ZUluUmFuZ2UiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJnZXRXZWVrIiwiZm9jdXNPbkRheSIsImN1cnJlbnRJbmQiLCJjdXJyZW50SW5kZXgiLCJhY3RpdmVFbGVtZW50IiwibmV3SW5kZXgiLCJ0YXJnZXROb2RlIiwiZGF5cyIsImJ1aWxkTW9udGhEYXlzIiwiZmlyc3RPZk1vbnRoIiwiZ2V0RGF5IiwiZmlyc3REYXlPZldlZWsiLCJwcmV2TW9udGhEYXlzIiwiZGF5SW5kZXgiLCJkYXlOdW0iLCJkYXlDb250YWluZXIiLCJmcmFnIiwic2V0TW9udGgiLCJidWlsZE1vbnRoIiwibW9udGhOYXZGcmFnbWVudCIsIm1vbnRoRWxlbWVudCIsInNjcm9sbFRpdGxlIiwieWVhcklucHV0IiwidGFiaW5kZXgiLCJ5ZWFyRWxlbWVudCIsInllYXJBcmlhTGFiZWwiLCJkaXNhYmxlZCIsInllYXJFbGVtZW50cyIsIm1vbnRoRWxlbWVudHMiLCJwcmV2TW9udGhOYXYiLCJwcmV2QXJyb3ciLCJuZXh0TW9udGhOYXYiLCJuZXh0QXJyb3ciLCJfX2hpZGVQcmV2TW9udGhBcnJvdyIsInNldCIsIl9faGlkZU5leHRNb250aEFycm93IiwiY3VycmVudFllYXJFbGVtZW50IiwidXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCIsInNlcGFyYXRvciIsImhvdXJJbnB1dCIsIm1pbnV0ZUlucHV0IiwiZGVmYXVsdEhvdXIiLCJkZWZhdWx0TWludXRlIiwiaG91ckluY3JlbWVudCIsIm1pbnV0ZUluY3JlbWVudCIsImVuYWJsZVNlY29uZHMiLCJzZWNvbmRJbnB1dCIsImRlZmF1bHRTZWNvbmRzIiwidG9nZ2xlVGl0bGUiLCJ3ZWVrZGF5Q29udGFpbmVyIiwidXBkYXRlV2Vla2RheXMiLCJ3ZWVrZGF5cyIsInNob3J0aGFuZCIsImpvaW4iLCJ3ZWVrQWJicmV2aWF0aW9uIiwiY2hhbmdlTW9udGgiLCJpc19vZmZzZXQiLCJmcm9tX2tleWJvYXJkIiwiX2hpZGVQcmV2TW9udGhBcnJvdyIsIl9oaWRlTmV4dE1vbnRoQXJyb3ciLCJjbGVhciIsInRyaWdnZXJDaGFuZ2VFdmVudCIsIm1vYmlsZUlucHV0Iiwic2hvd1RpbWVJbnB1dCIsImlzT3BlbiIsImgiLCJfdHlwZSIsInJlbW92ZUF0dHJpYnV0ZSIsImsiLCJfIiwiaXNDYWxlbmRhckVsZW0iLCJpc0NhbGVuZGFyRWxlbWVudCIsInBhdGgiLCJsb3N0Rm9jdXMiLCJyZWxhdGVkVGFyZ2V0IiwiaXNJZ25vcmVkIiwiaWdub3JlZEZvY3VzRWxlbWVudHMiLCJzb21lIiwibmV3WWVhciIsIm5ld1llYXJOdW0iLCJpc05ld1llYXIiLCJkYXRlVG9DaGVjayIsImVuYWJsZSIsImRpc2FibGUiLCJwYXJzZWQiLCJmcm9tIiwidG8iLCJjYWxlbmRhckVsZW0iLCJhbGxvd0lucHV0IiwiYWxsb3dLZXlkb3duIiwiYWxsb3dJbmxpbmVLZXlkb3duIiwic2V0RGF0ZSIsImlzVGltZU9iaiIsImZvY3VzQW5kQ2xvc2UiLCJfZGVsdGEiLCJjaGFyQXQiLCJob3ZlckRhdGUiLCJpbml0aWFsRGF0ZSIsInJhbmdlU3RhcnREYXRlIiwicmFuZ2VFbmREYXRlIiwibW9udGhzIiwiZmlyc3REYXkiLCJsYXN0RGF5IiwibGFzdENoaWxkIiwiY29udGFpbnNEaXNhYmxlZCIsIm1pblJhbmdlIiwibWF4UmFuZ2UiLCJ0IiwiZHVyYXRpb24iLCJEQVkiLCJwcmV2TW9udGgiLCJkYXlFbGVtIiwidGltZXN0YW1wIiwib3V0T2ZSYW5nZSIsImlzQmV0d2VlbiIsInBvc2l0aW9uQ2FsZW5kYXIiLCJwb3NpdGlvbkVsZW1lbnQiLCJjbGljayIsIndhc09wZW4iLCJtaW5NYXhEYXRlU2V0dGVyIiwiaW52ZXJzZURhdGVPYmoiLCJwYXJzZUNvbmZpZyIsImJvb2xPcHRzIiwiaG9va3MiLCJ1c2VyQ29uZmlnIiwiZm9ybWF0cyQkMSIsIl9lbmFibGUiLCJkYXRlcyIsInBhcnNlRGF0ZVJ1bGVzIiwiX2Rpc2FibGUiLCJmbGF0cGlja3IiLCJkZWZhdWx0Q29uZmlnIiwiX21pbkRhdGUiLCJfbWF4RGF0ZSIsIm1pbk1heFRpbWVTZXR0ZXIiLCJ2YWwiLCJfbWluVGltZSIsIl9tYXhUaW1lIiwiX2kiLCJhcnJheWlmeSIsIl9pMiIsInBsdWdpbnMiLCJwbHVnaW5Db25mIiwiZGlzYWJsZU1vYmlsZSIsInNldHVwTG9jYWxlIiwibG9jYWxlIiwibDEwbnMiLCJ0b2tlblJlZ2V4IiwiSyIsImNyZWF0ZURhdGVGb3JtYXR0ZXIiLCJjdXN0b21Qb3NpdGlvbkVsZW1lbnQiLCJfcG9zaXRpb25FbGVtZW50IiwiY2FsZW5kYXJIZWlnaHQiLCJjaGlsZCIsIm9mZnNldEhlaWdodCIsImNhbGVuZGFyV2lkdGgiLCJvZmZzZXRXaWR0aCIsImNvbmZpZ1BvcyIsInBvc2l0aW9uIiwiaW5wdXRCb3VuZHMiLCJkaXN0YW5jZUZyb21Cb3R0b20iLCJpbm5lckhlaWdodCIsInNob3dPblRvcCIsInBhZ2VZT2Zmc2V0IiwicGFnZVhPZmZzZXQiLCJyaWdodE1vc3QiLCJtc01heFRvdWNoUG9pbnRzIiwiaXNTZWxlY3RhYmxlIiwiZGF5Iiwic2VsZWN0ZWREYXRlIiwic2hvdWxkQ2hhbmdlTW9udGgiLCJzZWxlY3RlZEluZGV4Iiwic29ydCIsImIiLCJjbG9zZU9uU2VsZWN0Iiwic2luZ2xlIiwicmFuZ2UiLCJDQUxMQkFDS1MiLCJzZXRTZWxlY3RlZERhdGUiLCJpbnB1dERhdGUiLCJmb3JtYXQiLCJzcGxpdCIsImNvbmp1bmN0aW9uIiwicmFuZ2VTZXBhcmF0b3IiLCJhcnIiLCJydWxlIiwic2V0dXBEYXRlcyIsInByZWxvYWRlZERhdGUiLCJfc2hvd1RpbWVJbnB1dCIsInNldHVwSW5wdXRzIiwibm9kZU5hbWUiLCJhbHRJbnB1dENsYXNzIiwicGxhY2Vob2xkZXIiLCJyZXF1aXJlZCIsImlucHV0VHlwZSIsInN0ZXAiLCJtb2JpbGVGb3JtYXRTdHIiLCJkZWZhdWx0VmFsdWUiLCJfYSIsIm1vbnRoVG9TdHIiLCJzaG9ydGhhbmRDdXJyZW50TW9udGgiLCJqb2luQ2hhciIsImRPYmoiLCJpc1ByZXZNb250aCIsImlzTmV4dE1vbnRoIiwiaXNLZXlEb3duIiwicGFyc2VGbG9hdCIsImN1clZhbHVlIiwiaXNIb3VyRWxlbSIsImlzTWludXRlRWxlbSIsImFicyIsImVuZ2xpc2giLCJjcmVhdGVEYXRlUGFyc2VyIiwiX2JpbmQiLCJfc2V0SG91cnNGcm9tRGF0ZSIsIl9jcmVhdGVFbGVtZW50IiwidmlzaWJpbGl0eSIsImRpc3BsYXkiLCJkYXlzV2lkdGgiLCJpc1NhZmFyaSIsIm5vZGVMaXN0Iiwibm9kZXMiLCJpbnN0YW5jZXMiLCJudW1iZXIiLCJkb19ub3RoaW5nIiwibW9udGhOdW1iZXIiLCJyZXZGb3JtYXQiLCJEIiwiRiIsIm1vbnRoTmFtZSIsImxvbmdoYW5kIiwiRyIsIkgiLCJKIiwiTSIsInNob3J0TW9udGgiLCJTIiwic2V0U2Vjb25kcyIsIlUiLCJ1bml4U2Vjb25kcyIsIlciLCJ3ZWVrTnVtIiwid2Vla051bWJlciIsIlkiLCJzZXRGdWxsWWVhciIsIloiLCJJU09EYXRlIiwic2V0TWludXRlcyIsImoiLCJ3IiwiZm9ybWF0cyIsInRvSVNPU3RyaW5nIiwib3JkaW5hbCIsIlN0cmluZyIsInN1YnN0cmluZyIsIm50aCIsIl9yZWYiLCJfcmVmJGNvbmZpZyIsImRlZmF1bHRzIiwiX3JlZiRsMTBuIiwiZnJtdCIsIm92ZXJyaWRlTG9jYWxlIiwiX3JlZjIiLCJfcmVmMiRjb25maWciLCJfcmVmMiRsMTBuIiwiZ2l2ZW5Gb3JtYXQiLCJwYXJzZWREYXRlIiwiZGF0ZV9vcmlnIiwidG9GaXhlZCIsImRhdGVzdHIiLCJtYXRjaGVkIiwib3BzIiwibWF0Y2hJbmRleCIsInJlZ2V4U3RyIiwidG9rZW4iLCJpc0JhY2tTbGFzaCIsImVzY2FwZWQiLCJleGVjIiwiX3JlZjMiLCJnaXZlbkRhdGUiLCJ3ZWVrMSIsInJvdW5kIiwidHMiLCJ0czEiLCJ0czIiLCJvbkNoYW5nZSIsIm9uQ2xvc2UiLCJvbkRheUNyZWF0ZSIsIm9uRGVzdHJveSIsIm9uTW9udGhDaGFuZ2UiLCJvbk9wZW4iLCJvblBhcnNlQ29uZmlnIiwib25SZWFkeSIsIm9uVmFsdWVVcGRhdGUiLCJvblllYXJDaGFuZ2UiLCJvblByZUNhbGVuZGFyUG9zaXRpb24iLCJUeXBlRXJyb3IiLCJfbGVuIiwiX2tleSIsImtleXMiLCJIVE1MRWxlbWVudCIsIkhUTUxDb2xsZWN0aW9uIiwiTm9kZUxpc3QiLCJzZWxlY3RvciIsImVuIiwibG9jYWxpemUiLCJzZXREZWZhdWx0cyIsImpRdWVyeSIsImZwX2luY3IiLCJnYWxsZXJ5U2VjdGlvbnMiLCJnYWxsZXJ5IiwiYWRkSW1hZ2UiLCJpbWFnZUl0ZW0iLCJpbWFnZSIsInRhYmxlTGlzdHMiLCJ0YWJsZUxpc3QiLCJhZGRSb3ciLCJ0YWJsZUl0ZW0iLCJyb3dEYXRhIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBSSxFQUFBSixFQUNBSyxHQUFBLEVBQ0FILFdBVUEsT0FOQUosR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxTQUFBUCxFQUFBUSxFQUFBQyxHQUNBWixFQUFBYSxFQUFBVixFQUFBUSxJQUNBRyxPQUFBQyxlQUFBWixFQUFBUSxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWYsR0FDQSxHQUFBUSxHQUFBUixLQUFBZ0IsV0FDQSxXQUEyQixNQUFBaEIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBSixHQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REdEIsRUFBQXlCLEVBQUEsR0FHQXpCLElBQUEwQixFQUFBLEtETU0sU0FBVXRCLEVBQVFELEdFbkV4QixHQUFBd0IsRUFHQUEsR0FBQSxXQUNBLE1BQUFDLFFBR0EsS0FFQUQsS0FBQUUsU0FBQSxxQkFBQUMsTUFBQSxRQUNDLE1BQUFDLEdBRUQsZ0JBQUFDLFVBQ0FMLEVBQUFLLFFBT0E1QixFQUFBRCxRQUFBd0IsR0YwRU0sU0FBVXZCLEVBQVFELEVBQVNILEdBRWpDLFlBR0FjLFFBQU9DLGVBQWVaLEVBQVMsY0FDM0I4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QkEsRUFBTWxPLGdCQUVOLElBQU0wMEIsSUFDSjc1QixJQUFLQSxFQUFJaEUsTUFDVEEsTUFBT0EsRUFBTUEsTUFHZitJLEdBQUtySSxJQUFJbTlCLEdBQ1RoN0IsRUFBT25DLElBQUltOUIsR0FFWDc1QixFQUFJaEUsTUFBUSxHQUNaQSxFQUFNQSxNQUFRLE9BNUNwQixJQUFBd0gsR0FBQXpKLEVBQUEsRzNCOHZJSWlMLEVBQVM5QixFQUF1Qk0sRzJCN3ZJcEM0QixFQUFBckwsRUFBQSxHM0Jpd0lJNkssRUFBb0IxQixFQUF1QmtDLEcyQmh3SS9DUCxFQUFBOUssRUFBQSxHQStDTTYvQixFQUFZLFNBQUFDLEdBQ2hCLHVGQUNpQ0EsRUFBUTc1QixJQUR6QywrQ0FFbUM2NUIsRUFBUTc5QixNQUYzQyIsImZpbGUiOiJpbmRleC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyZW50LCBhcmdzKSB7XG4gICAgdmFyIGxpc3QgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihhcmdzLmxpc3QpO1xuXG4gICAgcmVnaXN0ZXJEcmFnRXZlbnRzKGxpc3QsIGFyZ3Mub25EcmFnKTtcbiAgICByZWdpc3RlclJlbW92ZUV2ZW50cyhsaXN0LCBhcmdzLm9uUmVtb3ZlKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IGFyZ3MubGlzdFRlbXBsYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpO1xuXG4gICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGxpc3RJdGVtKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG52YXIgX2RyYWd1bGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX2RyYWd1bGEyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZHJhZ3VsYSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciByZWdpc3RlclJlbW92ZUV2ZW50cyA9IGZ1bmN0aW9uIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzKGxpc3QsIG9uUmVtb3ZlKSB7XG4gICAgdmFyIGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblxuICAgIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gJ3N2ZycgPT09IGUudGFyZ2V0LnRhZ05hbWUgPyBlLnRhcmdldCA6IGUudGFyZ2V0LmNsb3Nlc3QoJ3N2ZycpO1xuXG4gICAgICAgIGlmICgnc3ZnJyA9PT0gdGFyZ2V0LnRhZ05hbWUpIHtcbiAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgbGlzdC5yZW1vdmVDaGlsZChsaXN0SXRlbSk7XG4gICAgICAgICAgICBvblJlbW92ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBsaXN0SXRlbXM7XG59O1xuXG52YXIgcmVnaXN0ZXJEcmFnRXZlbnRzID0gZnVuY3Rpb24gcmVnaXN0ZXJEcmFnRXZlbnRzKGxpc3QsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGRyYWtlID0gKDAsIF9kcmFndWxhMi5kZWZhdWx0KShbbGlzdF0pO1xuXG4gICAgZHJha2Uub24oJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgdmFyIGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICAgICAgY2FsbGJhY2sobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICB9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyZW50LCBoaWRkZW5JbnB1dCkge1xuICB2YXIgaGlkZGVuRWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihoaWRkZW5JbnB1dCk7XG5cbiAgdmFyIGdldEN1cnJlbnRWYWx1ZSA9IGZ1bmN0aW9uIGdldEN1cnJlbnRWYWx1ZSgpIHtcbiAgICByZXR1cm4gaGlkZGVuRWwudmFsdWUgPyBKU09OLnBhcnNlKGhpZGRlbkVsLnZhbHVlKSA6IFtdO1xuICB9O1xuXG4gIHZhciBhZGRWYWx1ZSA9IGZ1bmN0aW9uIGFkZFZhbHVlKHZhbHVlKSB7XG4gICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgIHJldHVybiBjdXJyZW50VmFsdWUuY29uY2F0KHZhbHVlKTtcbiAgfTtcblxuICB2YXIgcmVtb3ZlVmFsdWUgPSBmdW5jdGlvbiByZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgcmV0dXJuIG9uUmVtb3ZlKGN1cnJlbnRWYWx1ZSwgdmFsdWUpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoYWRkVmFsdWUodmFsdWUpKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHZhbHVlLCBvblJlbW92ZSkge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShyZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpKTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlcykge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZXMpO1xuICAgIH1cbiAgfTtcbn07XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIHJlbW92ZUl0ZW1zID0gZXhwb3J0cy5yZW1vdmVJdGVtcyA9IGZ1bmN0aW9uIHJlbW92ZUl0ZW1zKEhpZGRlbiwgb25SZW1vdmUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIEhpZGRlbi5yZW1vdmUodmFsdWUsIG9uUmVtb3ZlKTtcbiAgfTtcbn07XG5cbnZhciBkcmFnSXRlbXMgPSBleHBvcnRzLmRyYWdJdGVtcyA9IGZ1bmN0aW9uIGRyYWdJdGVtcyhIaWRkZW4sIG9uRHJhZykge1xuICByZXR1cm4gZnVuY3Rpb24gKGxpc3QsIGxpc3RJdGVtcykge1xuICAgIHZhciB2YWx1ZXMgPSBvbkRyYWcobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICBIaWRkZW4udXBkYXRlKHZhbHVlcyk7XG4gIH07XG59O1xuXG52YXIgb25EcmFnT2JqZWN0ID0gZXhwb3J0cy5vbkRyYWdPYmplY3QgPSBmdW5jdGlvbiBvbkRyYWdPYmplY3QobGlzdCwgbGlzdEl0ZW1zKSB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChsaXN0SXRlbXMsIGZ1bmN0aW9uIChhY2MsIGxpc3RJdGVtKSB7XG4gICAgdmFyIHZhbHVlID0ge1xuICAgICAgaWQ6IGxpc3RJdGVtLmRhdGFzZXQuaWQsXG4gICAgICB0aXRsZTogbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTFxuICAgIH07XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBvbkRyYWdUZXh0ID0gZXhwb3J0cy5vbkRyYWdUZXh0ID0gZnVuY3Rpb24gb25EcmFnVGV4dChsaXN0LCBsaXN0SXRlbXMpIHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICB2YXIgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICB9LCBbXSk7XG59O1xuXG52YXIgb25EcmFnSW1hZ2UgPSBleHBvcnRzLm9uRHJhZ0ltYWdlID0gZnVuY3Rpb24gb25EcmFnSW1hZ2UobGlzdCwgbGlzdEl0ZW1zKSB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChsaXN0SXRlbXMsIGZ1bmN0aW9uIChhY2MsIGxpc3RJdGVtKSB7XG4gICAgdmFyIHZhbHVlID0gcGFyc2VJbnQobGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTCk7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBvblJlbW92ZU9iamVjdCA9IGV4cG9ydHMub25SZW1vdmVPYmplY3QgPSBmdW5jdGlvbiBvblJlbW92ZU9iamVjdChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChjdXJyZW50KSB7XG4gICAgcmV0dXJuIGN1cnJlbnQudGl0bGUgIT09IG5ld1ZhbHVlO1xuICB9KTtcbn07XG5cbnZhciBvblJlbW92ZVRleHQgPSBleHBvcnRzLm9uUmVtb3ZlVGV4dCA9IGZ1bmN0aW9uIG9uUmVtb3ZlVGV4dChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChjdXJyZW50KSB7XG4gICAgcmV0dXJuIGN1cnJlbnQgIT09IG5ld1ZhbHVlO1xuICB9KTtcbn07XG5cbnZhciBvblJlbW92ZUltYWdlID0gZXhwb3J0cy5vblJlbW92ZUltYWdlID0gZnVuY3Rpb24gb25SZW1vdmVJbWFnZShjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChjdXJyZW50KSB7XG4gICAgcmV0dXJuIGN1cnJlbnQgIT09IHBhcnNlSW50KG5ld1ZhbHVlKTtcbiAgfSk7XG59O1xuXG52YXIgb25EcmFnVGFibGUgPSBleHBvcnRzLm9uRHJhZ1RhYmxlID0gZnVuY3Rpb24gb25EcmFnVGFibGUobGlzdCwgbGlzdEl0ZW1zKSB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChsaXN0SXRlbXMsIGZ1bmN0aW9uIChhY2MsIGxpc3RJdGVtKSB7XG4gICAgdmFyIGtleSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LWtleScpLmlubmVySFRNTDtcbiAgICB2YXIgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC12YWx1ZScpLmlubmVySFRNTDtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChbeyBrZXk6IGtleSwgdmFsdWU6IHZhbHVlIH1dKTtcbiAgfSwgW10pO1xufTtcblxudmFyIG9uUmVtb3ZlVGFibGUgPSBleHBvcnRzLm9uUmVtb3ZlVGFibGUgPSBmdW5jdGlvbiBvblJlbW92ZVRhYmxlKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudC5rZXkgIT09IG5ld1ZhbHVlO1xuICB9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXV0b3N1Z2dlc3QsIGVuZHBvaW50LCBvblNlbGVjdCwgb25FbXB0eSkge1xuICBpZiAoIWF1dG9zdWdnZXN0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdmFyIHhociA9IGZhbHNlO1xuXG4gIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoMCA9PT0gZS50YXJnZXQudmFsdWUubGVuZ3RoICYmIG9uRW1wdHkpIHtcbiAgICAgIG9uRW1wdHkoKTtcbiAgICB9XG5cbiAgICBpZiAoMyA+IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGF1dG9zdWdnZXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICB4aHIgPSBnZXRPcHRpb25zKHhociwgdXBkYXRlT3B0aW9ucywgYXV0b3N1Z2dlc3QsIGVuZHBvaW50KTtcbiAgfSk7XG4gIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICB2YXIgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIG9uU2VsZWN0KHZhbHVlLCBhdXRvc3VnZ2VzdCk7XG4gICAgfVxuICB9KTtcbn07XG5cbnZhciBvbkF1dG9TdWdnZXN0SW5wdXQgPSBmdW5jdGlvbiBvbkF1dG9TdWdnZXN0SW5wdXQoZSkge1xuICB2YXIgaW5wdXQgPSBlLnRhcmdldDtcbiAgdmFyIGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgdmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gIHZhciBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG4gIHZhciBtYXRjaCA9IFtdLnJlZHVjZS5jYWxsKGxpc3RPcHRpb25zLCBmdW5jdGlvbiAoYWNjLCBvcHRpb24pIHtcbiAgICBpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdCh7XG4gICAgICAgIGlkOiBvcHRpb24uZGF0YXNldC5pZCxcbiAgICAgICAgdGl0bGU6IG9wdGlvbi52YWx1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhY2M7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gMCA9PT0gbWF0Y2gubGVuZ3RoID8gZmFsc2UgOiBtYXRjaFswXTtcbn07XG5cbnZhciBnZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucyh4aHIsIGNhbGxiYWNrLCBpbnB1dCwgZW5kcG9pbnQpIHtcbiAgdmFyIHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG4gIHZhciB1cmwgPSBlbmRwb2ludCArIHF1ZXJ5O1xuXG4gIGlmICh4aHIpIHtcbiAgICB4aHIuYWJvcnQoKTtcbiAgfVxuXG4gIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKGV2dCkge1xuICAgIGNhbGxiYWNrKGZhbHNlLCBldnQpO1xuICB9LCBmYWxzZSk7XG5cbiAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSwgeyByZXN1bHRzOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4aHIucmVzcG9uc2VUZXh0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgICBjYWxsYmFjayh7IG1lc3NhZ2U6IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCksIGlucHV0OiBpbnB1dCB9LCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBjYWxsYmFjayhldnQsIGZhbHNlKTtcbiAgfSwgZmFsc2UpO1xuXG4gIHhoci5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBjYWxsYmFjayh0cnVlLCBmYWxzZSk7XG4gIH0sIGZhbHNlKTtcblxuICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcblxuICB4aHIuc2VuZCgpO1xuXG4gIHJldHVybiB4aHI7XG59O1xuXG52YXIgdXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoZXJyb3IsIHJlc3BvbnNlKSB7XG4gIGlmIChlcnJvcikge1xuICAgIGlmICh0cnVlID09PSBlcnJvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGVycm9yLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG5cbiAgaWYgKHJlc3BvbnNlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3BvbnNlLnJlc3VsdHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCk7XG4gIH1cbn07XG5cbnZhciBjcmVhdGVPcHRpb25zID0gZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhyZXN1bHRzLCBpbnB1dCkge1xuICB2YXIgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgdmFyIGRhdGFsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpO1xuXG4gIHZhciBuZXdPcHRpb25zID0gcmVzdWx0cy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcmVzdWx0KSB7XG4gICAgdmFyIG9wdGlvbiA9IGNyZWF0ZU9wdGlvbihyZXN1bHQpO1xuICAgIHJldHVybiBhY2MuY29uY2F0KG9wdGlvbik7XG4gIH0sICcnKTtcblxuICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIGRhdGFsaXN0LmlubmVySFRNTCA9IG5ld09wdGlvbnM7XG59O1xuXG52YXIgY3JlYXRlT3B0aW9uID0gZnVuY3Rpb24gY3JlYXRlT3B0aW9uKHZhbHVlKSB7XG4gIGlmICh2YWx1ZS50aXRsZSkge1xuICAgIHJldHVybiAnPG9wdGlvbiBkYXRhLWlkPScgKyB2YWx1ZS5pZCArICcgdmFsdWU9XCInICsgdmFsdWUudGl0bGUucmVuZGVyZWQgKyAnXCI+JztcbiAgfVxuXG4gIGlmICh2YWx1ZS5uYW1lKSB7XG4gICAgcmV0dXJuICc8b3B0aW9uIGRhdGEtaWQ9JyArIHZhbHVlLmlkICsgJyB2YWx1ZT1cIicgKyB2YWx1ZS5uYW1lICsgJ1wiPic7XG4gIH1cbn07XG5cbnZhciBpc0pTT04gPSBmdW5jdGlvbiBpc0pTT04oc3RyKSB7XG4gIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIEpTT04ucGFyc2Uoc3RyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxudmFyIGJ1aWxkUXVlcnkgPSBmdW5jdGlvbiBidWlsZFF1ZXJ5KHZhbHVlKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9Mb3dlckNhc2UoKSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXG52YXIgX3RleHRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF90ZXh0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0TGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0TGlzdCk7XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9hdXRvSXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX2F1dG9JdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9JdGVtKTtcblxudmFyIF9pbWFnZVVwbG9hZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxudmFyIF9pbWFnZVVwbG9hZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW1hZ2VVcGxvYWRzKTtcblxudmFyIF9kYXRlcGlja2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cbnZhciBfZGF0ZXBpY2tlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXRlcGlja2VyKTtcblxudmFyIF9nYWxsZXJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cbnZhciBfZ2FsbGVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nYWxsZXJ5KTtcblxudmFyIF90YWJsZUxpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblxudmFyIF90YWJsZUxpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFibGVMaXN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZVRleHRJdGVtID0gZnVuY3Rpb24gY3JlYXRlVGV4dEl0ZW0odmFsdWUpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59O1xuXG52YXIgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gZnVuY3Rpb24gY3JlYXRlQXV0b1N1Z2dlc3RJdGVtKHZhbHVlKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIiBkYXRhLWlkPVwiJyArIHZhbHVlLmlkICsgJ1wiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlLnRpdGxlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAoMCwgX2ltYWdlVXBsb2FkczIuZGVmYXVsdCkoKTtcbiAgKDAsIF90ZXh0TGlzdDIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy50ZXh0LWxpc3QnLFxuICAgIGJ1dHRvbjogJy50ZXh0LWxpc3QtYWRkJyxcbiAgICBsaXN0OiAnLnRleHQtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcudGV4dC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVUZXh0SXRlbVxuICB9KTtcblxuICAoMCwgX2F1dG9zdWdnZXN0TGlzdDIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgICBpbnB1dDogJ2F1dG9zdWdnZXN0LWxpc3QtaW5wdXQnLFxuICAgIGxpc3Q6ICcuYXV0b3N1Z2dlc3QtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtXG4gIH0pO1xuXG4gICgwLCBfYXV0b0l0ZW0yLmRlZmF1bHQpKHtcbiAgICBwYXJlbnQ6ICcuYXV0b3N1Z2dlc3Qtd3JhcHBlcicsXG4gICAgaW5wdXQ6ICcuYXV0b3N1Z2dlc3QtaW5wdXQnLFxuICAgIGhpZGRlbjogJy5hdXRvc3VnZ2VzdC1oaWRkZW4nXG4gIH0pO1xuXG4gICgwLCBfZGF0ZXBpY2tlcjIuZGVmYXVsdCkoKTtcbiAgKDAsIF9nYWxsZXJ5Mi5kZWZhdWx0KSgpO1xuICAoMCwgX3RhYmxlTGlzdDIuZGVmYXVsdCkoKTtcbn0pO1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICB2YXIgbGlzdEZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCFsaXN0RmllbGRzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBbXS5mb3JFYWNoLmNhbGwobGlzdEZpZWxkcywgZnVuY3Rpb24gKGxpc3RGaWVsZCkge1xuICAgICAgICB2YXIgdGV4dElucHV0ID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9dGV4dF0nKTtcbiAgICAgICAgdmFyIGFkZEJ1dHRvbiA9IGxpc3RGaWVsZC5xdWVyeVNlbGVjdG9yKGFyZ3MuYnV0dG9uKTtcbiAgICAgICAgdmFyIEhpZGRlbiA9ICgwLCBfc2VyaWFsaXplZElucHV0Mi5kZWZhdWx0KShsaXN0RmllbGQsIGFyZ3MuaGlkZGVuKTtcbiAgICAgICAgdmFyIHJlbW92ZSA9ICgwLCBfdXRpbGl0aWVzLnJlbW92ZUl0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25SZW1vdmVUZXh0KTtcbiAgICAgICAgdmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdUZXh0KTtcbiAgICAgICAgdmFyIExpc3QgPSAoMCwgX2xpc3QyLmRlZmF1bHQpKGxpc3RGaWVsZCwgT2JqZWN0LmFzc2lnbihhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZSB9KSk7XG5cbiAgICAgICAgbGlzdEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICgxMyA9PT0gZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIExpc3QuYWRkKHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgSGlkZGVuLmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgTGlzdC5hZGQodGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIEhpZGRlbi5hZGQodGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIGVtaXR0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xudmFyIGNyb3NzdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xudmFyIGNsYXNzZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG5mdW5jdGlvbiBkcmFndWxhIChpbml0aWFsQ29udGFpbmVycywgb3B0aW9ucykge1xuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgaWYgKGxlbiA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGluaXRpYWxDb250YWluZXJzKSA9PT0gZmFsc2UpIHtcbiAgICBvcHRpb25zID0gaW5pdGlhbENvbnRhaW5lcnM7XG4gICAgaW5pdGlhbENvbnRhaW5lcnMgPSBbXTtcbiAgfVxuICB2YXIgX21pcnJvcjsgLy8gbWlycm9yIGltYWdlXG4gIHZhciBfc291cmNlOyAvLyBzb3VyY2UgY29udGFpbmVyXG4gIHZhciBfaXRlbTsgLy8gaXRlbSBiZWluZyBkcmFnZ2VkXG4gIHZhciBfb2Zmc2V0WDsgLy8gcmVmZXJlbmNlIHhcbiAgdmFyIF9vZmZzZXRZOyAvLyByZWZlcmVuY2UgeVxuICB2YXIgX21vdmVYOyAvLyByZWZlcmVuY2UgbW92ZSB4XG4gIHZhciBfbW92ZVk7IC8vIHJlZmVyZW5jZSBtb3ZlIHlcbiAgdmFyIF9pbml0aWFsU2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgd2hlbiBncmFiYmVkXG4gIHZhciBfY3VycmVudFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIG5vd1xuICB2YXIgX2NvcHk7IC8vIGl0ZW0gdXNlZCBmb3IgY29weWluZ1xuICB2YXIgX3JlbmRlclRpbWVyOyAvLyB0aW1lciBmb3Igc2V0VGltZW91dCByZW5kZXJNaXJyb3JJbWFnZVxuICB2YXIgX2xhc3REcm9wVGFyZ2V0ID0gbnVsbDsgLy8gbGFzdCBjb250YWluZXIgaXRlbSB3YXMgb3ZlclxuICB2YXIgX2dyYWJiZWQ7IC8vIGhvbGRzIG1vdXNlZG93biBjb250ZXh0IHVudGlsIGZpcnN0IG1vdXNlbW92ZVxuXG4gIHZhciBvID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKG8ubW92ZXMgPT09IHZvaWQgMCkgeyBvLm1vdmVzID0gYWx3YXlzOyB9XG4gIGlmIChvLmFjY2VwdHMgPT09IHZvaWQgMCkgeyBvLmFjY2VwdHMgPSBhbHdheXM7IH1cbiAgaWYgKG8uaW52YWxpZCA9PT0gdm9pZCAwKSB7IG8uaW52YWxpZCA9IGludmFsaWRUYXJnZXQ7IH1cbiAgaWYgKG8uY29udGFpbmVycyA9PT0gdm9pZCAwKSB7IG8uY29udGFpbmVycyA9IGluaXRpYWxDb250YWluZXJzIHx8IFtdOyB9XG4gIGlmIChvLmlzQ29udGFpbmVyID09PSB2b2lkIDApIHsgby5pc0NvbnRhaW5lciA9IG5ldmVyOyB9XG4gIGlmIChvLmNvcHkgPT09IHZvaWQgMCkgeyBvLmNvcHkgPSBmYWxzZTsgfVxuICBpZiAoby5jb3B5U29ydFNvdXJjZSA9PT0gdm9pZCAwKSB7IG8uY29weVNvcnRTb3VyY2UgPSBmYWxzZTsgfVxuICBpZiAoby5yZXZlcnRPblNwaWxsID09PSB2b2lkIDApIHsgby5yZXZlcnRPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmVtb3ZlT25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLmRpcmVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJzsgfVxuICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9IHRydWU7IH1cbiAgaWYgKG8ubWlycm9yQ29udGFpbmVyID09PSB2b2lkIDApIHsgby5taXJyb3JDb250YWluZXIgPSBkb2MuYm9keTsgfVxuXG4gIHZhciBkcmFrZSA9IGVtaXR0ZXIoe1xuICAgIGNvbnRhaW5lcnM6IG8uY29udGFpbmVycyxcbiAgICBzdGFydDogbWFudWFsU3RhcnQsXG4gICAgZW5kOiBlbmQsXG4gICAgY2FuY2VsOiBjYW5jZWwsXG4gICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICBjYW5Nb3ZlOiBjYW5Nb3ZlLFxuICAgIGRyYWdnaW5nOiBmYWxzZVxuICB9KTtcblxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB0cnVlKSB7XG4gICAgZHJha2Uub24oJ292ZXInLCBzcGlsbE92ZXIpLm9uKCdvdXQnLCBzcGlsbE91dCk7XG4gIH1cblxuICBldmVudHMoKTtcblxuICByZXR1cm4gZHJha2U7XG5cbiAgZnVuY3Rpb24gaXNDb250YWluZXIgKGVsKSB7XG4gICAgcmV0dXJuIGRyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZihlbCkgIT09IC0xIHx8IG8uaXNDb250YWluZXIoZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vkb3duJywgZ3JhYik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZXVwJywgcmVsZWFzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHVhbE1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlbW92ZScsIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIGNyb3NzdmVudFtvcF0oZG9jdW1lbnRFbGVtZW50LCAnc2VsZWN0c3RhcnQnLCBwcmV2ZW50R3JhYmJlZCk7IC8vIElFOFxuICAgIGNyb3NzdmVudFtvcF0oZG9jdW1lbnRFbGVtZW50LCAnY2xpY2snLCBwcmV2ZW50R3JhYmJlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95ICgpIHtcbiAgICBldmVudHModHJ1ZSk7XG4gICAgcmVsZWFzZSh7fSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50R3JhYmJlZCAoZSkge1xuICAgIGlmIChfZ3JhYmJlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdyYWIgKGUpIHtcbiAgICBfbW92ZVggPSBlLmNsaWVudFg7XG4gICAgX21vdmVZID0gZS5jbGllbnRZO1xuXG4gICAgdmFyIGlnbm9yZSA9IHdoaWNoTW91c2VCdXR0b24oZSkgIT09IDEgfHwgZS5tZXRhS2V5IHx8IGUuY3RybEtleTtcbiAgICBpZiAoaWdub3JlKSB7XG4gICAgICByZXR1cm47IC8vIHdlIG9ubHkgY2FyZSBhYm91dCBob25lc3QtdG8tZ29kIGxlZnQgY2xpY2tzIGFuZCB0b3VjaCBldmVudHNcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBlLnRhcmdldDtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfZ3JhYmJlZCA9IGNvbnRleHQ7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHMoKTtcbiAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgaWYgKGlzSW5wdXQoaXRlbSkpIHsgLy8gc2VlIGFsc286IGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yMDhcbiAgICAgICAgaXRlbS5mb2N1cygpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTc2XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNTVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydEJlY2F1c2VNb3VzZU1vdmVkIChlKSB7XG4gICAgaWYgKCFfZ3JhYmJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2hpY2hNb3VzZUJ1dHRvbihlKSA9PT0gMCkge1xuICAgICAgcmVsZWFzZSh7fSk7XG4gICAgICByZXR1cm47IC8vIHdoZW4gdGV4dCBpcyBzZWxlY3RlZCBvbiBhbiBpbnB1dCBhbmQgdGhlbiBkcmFnZ2VkLCBtb3VzZXVwIGRvZXNuJ3QgZmlyZS4gdGhpcyBpcyBvdXIgb25seSBob3BlXG4gICAgfVxuICAgIC8vIHRydXRoeSBjaGVjayBmaXhlcyAjMjM5LCBlcXVhbGl0eSBmaXhlcyAjMjA3XG4gICAgaWYgKGUuY2xpZW50WCAhPT0gdm9pZCAwICYmIGUuY2xpZW50WCA9PT0gX21vdmVYICYmIGUuY2xpZW50WSAhPT0gdm9pZCAwICYmIGUuY2xpZW50WSA9PT0gX21vdmVZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbikge1xuICAgICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBkb2MuZWxlbWVudEZyb21Qb2ludChjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIGlmIChpc0lucHV0KGVsZW1lbnRCZWhpbmRDdXJzb3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ3JhYmJlZCA9IF9ncmFiYmVkOyAvLyBjYWxsIHRvIGVuZCgpIHVuc2V0cyBfZ3JhYmJlZFxuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cygpO1xuICAgIGVuZCgpO1xuICAgIHN0YXJ0KGdyYWJiZWQpO1xuXG4gICAgdmFyIG9mZnNldCA9IGdldE9mZnNldChfaXRlbSk7XG4gICAgX29mZnNldFggPSBnZXRDb29yZCgncGFnZVgnLCBlKSAtIG9mZnNldC5sZWZ0O1xuICAgIF9vZmZzZXRZID0gZ2V0Q29vcmQoJ3BhZ2VZJywgZSkgLSBvZmZzZXQudG9wO1xuXG4gICAgY2xhc3Nlcy5hZGQoX2NvcHkgfHwgX2l0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgcmVuZGVyTWlycm9ySW1hZ2UoKTtcbiAgICBkcmFnKGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuU3RhcnQgKGl0ZW0pIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcgJiYgX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNDb250YWluZXIoaXRlbSkpIHtcbiAgICAgIHJldHVybjsgLy8gZG9uJ3QgZHJhZyBjb250YWluZXIgaXRzZWxmXG4gICAgfVxuICAgIHZhciBoYW5kbGUgPSBpdGVtO1xuICAgIHdoaWxlIChnZXRQYXJlbnQoaXRlbSkgJiYgaXNDb250YWluZXIoZ2V0UGFyZW50KGl0ZW0pKSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpdGVtID0gZ2V0UGFyZW50KGl0ZW0pOyAvLyBkcmFnIHRhcmdldCBzaG91bGQgYmUgYSB0b3AgZWxlbWVudFxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbW92YWJsZSA9IG8ubW92ZXMoaXRlbSwgc291cmNlLCBoYW5kbGUsIG5leHRFbChpdGVtKSk7XG4gICAgaWYgKCFtb3ZhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICBzb3VyY2U6IHNvdXJjZVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBjYW5Nb3ZlIChpdGVtKSB7XG4gICAgcmV0dXJuICEhY2FuU3RhcnQoaXRlbSk7XG4gIH1cblxuICBmdW5jdGlvbiBtYW51YWxTdGFydCAoaXRlbSkge1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgIHN0YXJ0KGNvbnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0IChjb250ZXh0KSB7XG4gICAgaWYgKGlzQ29weShjb250ZXh0Lml0ZW0sIGNvbnRleHQuc291cmNlKSkge1xuICAgICAgX2NvcHkgPSBjb250ZXh0Lml0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX2NvcHksIGNvbnRleHQuaXRlbSwgJ2NvcHknKTtcbiAgICB9XG5cbiAgICBfc291cmNlID0gY29udGV4dC5zb3VyY2U7XG4gICAgX2l0ZW0gPSBjb250ZXh0Lml0ZW07XG4gICAgX2luaXRpYWxTaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nID0gbmV4dEVsKGNvbnRleHQuaXRlbSk7XG5cbiAgICBkcmFrZS5kcmFnZ2luZyA9IHRydWU7XG4gICAgZHJha2UuZW1pdCgnZHJhZycsIF9pdGVtLCBfc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGludmFsaWRUYXJnZXQgKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZCAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIGRyb3AoaXRlbSwgZ2V0UGFyZW50KGl0ZW0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZ3JhYiAoKSB7XG4gICAgX2dyYWJiZWQgPSBmYWxzZTtcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHModHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWxlYXNlIChlKSB7XG4gICAgdW5ncmFiKCk7XG5cbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgZHJvcFRhcmdldCA9IGZpbmREcm9wVGFyZ2V0KGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIGlmIChkcm9wVGFyZ2V0ICYmICgoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSkgfHwgKCFfY29weSB8fCBkcm9wVGFyZ2V0ICE9PSBfc291cmNlKSkpIHtcbiAgICAgIGRyb3AoaXRlbSwgZHJvcFRhcmdldCk7XG4gICAgfSBlbHNlIGlmIChvLnJlbW92ZU9uU3BpbGwpIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcm9wIChpdGVtLCB0YXJnZXQpIHtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlICYmIHRhcmdldCA9PT0gX3NvdXJjZSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9pdGVtKTtcbiAgICB9XG4gICAgaWYgKGlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQpKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHRhcmdldCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoX2NvcHkgPyAnY2FuY2VsJyA6ICdyZW1vdmUnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UpO1xuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCAocmV2ZXJ0KSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmV2ZXJ0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwID8gcmV2ZXJ0IDogby5yZXZlcnRPblNwaWxsO1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICB2YXIgaW5pdGlhbCA9IGlzSW5pdGlhbFBsYWNlbWVudChwYXJlbnQpO1xuICAgIGlmIChpbml0aWFsID09PSBmYWxzZSAmJiByZXZlcnRzKSB7XG4gICAgICBpZiAoX2NvcHkpIHtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfY29weSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zb3VyY2UuaW5zZXJ0QmVmb3JlKGl0ZW0sIF9pbml0aWFsU2libGluZyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbml0aWFsIHx8IHJldmVydHMpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgcGFyZW50LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhbnVwICgpIHtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHVuZ3JhYigpO1xuICAgIHJlbW92ZU1pcnJvckltYWdlKCk7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNsYXNzZXMucm0oaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICB9XG4gICAgaWYgKF9yZW5kZXJUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KF9yZW5kZXJUaW1lcik7XG4gICAgfVxuICAgIGRyYWtlLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgaWYgKF9sYXN0RHJvcFRhcmdldCkge1xuICAgICAgZHJha2UuZW1pdCgnb3V0JywgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdCgnZHJhZ2VuZCcsIGl0ZW0pO1xuICAgIF9zb3VyY2UgPSBfaXRlbSA9IF9jb3B5ID0gX2luaXRpYWxTaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nID0gX3JlbmRlclRpbWVyID0gX2xhc3REcm9wVGFyZ2V0ID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSW5pdGlhbFBsYWNlbWVudCAodGFyZ2V0LCBzKSB7XG4gICAgdmFyIHNpYmxpbmc7XG4gICAgaWYgKHMgIT09IHZvaWQgMCkge1xuICAgICAgc2libGluZyA9IHM7XG4gICAgfSBlbHNlIGlmIChfbWlycm9yKSB7XG4gICAgICBzaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5nID0gbmV4dEVsKF9jb3B5IHx8IF9pdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldCA9PT0gX3NvdXJjZSAmJiBzaWJsaW5nID09PSBfaW5pdGlhbFNpYmxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kRHJvcFRhcmdldCAoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSkge1xuICAgIHZhciB0YXJnZXQgPSBlbGVtZW50QmVoaW5kQ3Vyc29yO1xuICAgIHdoaWxlICh0YXJnZXQgJiYgIWFjY2VwdGVkKCkpIHtcbiAgICAgIHRhcmdldCA9IGdldFBhcmVudCh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuXG4gICAgZnVuY3Rpb24gYWNjZXB0ZWQgKCkge1xuICAgICAgdmFyIGRyb3BwYWJsZSA9IGlzQ29udGFpbmVyKHRhcmdldCk7XG4gICAgICBpZiAoZHJvcHBhYmxlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZCh0YXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgICAgdmFyIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZSh0YXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICB2YXIgaW5pdGlhbCA9IGlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQsIHJlZmVyZW5jZSk7XG4gICAgICBpZiAoaW5pdGlhbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gc2hvdWxkIGFsd2F5cyBiZSBhYmxlIHRvIGRyb3AgaXQgcmlnaHQgYmFjayB3aGVyZSBpdCB3YXNcbiAgICAgIH1cbiAgICAgIHJldHVybiBvLmFjY2VwdHMoX2l0ZW0sIHRhcmdldCwgX3NvdXJjZSwgcmVmZXJlbmNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnIChlKSB7XG4gICAgaWYgKCFfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIHggPSBjbGllbnRYIC0gX29mZnNldFg7XG4gICAgdmFyIHkgPSBjbGllbnRZIC0gX29mZnNldFk7XG5cbiAgICBfbWlycm9yLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuXG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgZHJvcFRhcmdldCA9IGZpbmREcm9wVGFyZ2V0KGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBjaGFuZ2VkID0gZHJvcFRhcmdldCAhPT0gbnVsbCAmJiBkcm9wVGFyZ2V0ICE9PSBfbGFzdERyb3BUYXJnZXQ7XG4gICAgaWYgKGNoYW5nZWQgfHwgZHJvcFRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgb3V0KCk7XG4gICAgICBfbGFzdERyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0O1xuICAgICAgb3ZlcigpO1xuICAgIH1cbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChkcm9wVGFyZ2V0ID09PSBfc291cmNlICYmIF9jb3B5ICYmICFvLmNvcHlTb3J0U291cmNlKSB7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlZmVyZW5jZTtcbiAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQoZHJvcFRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgaWYgKGltbWVkaWF0ZSAhPT0gbnVsbCkge1xuICAgICAgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKGRyb3BUYXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgfSBlbHNlIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHRydWUgJiYgIV9jb3B5KSB7XG4gICAgICByZWZlcmVuY2UgPSBfaW5pdGlhbFNpYmxpbmc7XG4gICAgICBkcm9wVGFyZ2V0ID0gX3NvdXJjZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKF9jb3B5ICYmIHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChcbiAgICAgIChyZWZlcmVuY2UgPT09IG51bGwgJiYgY2hhbmdlZCkgfHxcbiAgICAgIHJlZmVyZW5jZSAhPT0gaXRlbSAmJlxuICAgICAgcmVmZXJlbmNlICE9PSBuZXh0RWwoaXRlbSlcbiAgICApIHtcbiAgICAgIF9jdXJyZW50U2libGluZyA9IHJlZmVyZW5jZTtcbiAgICAgIGRyb3BUYXJnZXQuaW5zZXJ0QmVmb3JlKGl0ZW0sIHJlZmVyZW5jZSk7XG4gICAgICBkcmFrZS5lbWl0KCdzaGFkb3cnLCBpdGVtLCBkcm9wVGFyZ2V0LCBfc291cmNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbW92ZWQgKHR5cGUpIHsgZHJha2UuZW1pdCh0eXBlLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpOyB9XG4gICAgZnVuY3Rpb24gb3ZlciAoKSB7IGlmIChjaGFuZ2VkKSB7IG1vdmVkKCdvdmVyJyk7IH0gfVxuICAgIGZ1bmN0aW9uIG91dCAoKSB7IGlmIChfbGFzdERyb3BUYXJnZXQpIHsgbW92ZWQoJ291dCcpOyB9IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3ZlciAoZWwpIHtcbiAgICBjbGFzc2VzLnJtKGVsLCAnZ3UtaGlkZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdXQgKGVsKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nKSB7IGNsYXNzZXMuYWRkKGVsLCAnZ3UtaGlkZScpOyB9XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlY3QgPSBfaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBfbWlycm9yID0gX2l0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgIF9taXJyb3Iuc3R5bGUud2lkdGggPSBnZXRSZWN0V2lkdGgocmVjdCkgKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUuaGVpZ2h0ID0gZ2V0UmVjdEhlaWdodChyZWN0KSArICdweCc7XG4gICAgY2xhc3Nlcy5ybShfbWlycm9yLCAnZ3UtdHJhbnNpdCcpO1xuICAgIGNsYXNzZXMuYWRkKF9taXJyb3IsICdndS1taXJyb3InKTtcbiAgICBvLm1pcnJvckNvbnRhaW5lci5hcHBlbmRDaGlsZChfbWlycm9yKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAnYWRkJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgIGNsYXNzZXMuYWRkKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX21pcnJvciwgX2l0ZW0sICdtaXJyb3InKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZU1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgY2xhc3Nlcy5ybShvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ3JlbW92ZScsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICAgIGdldFBhcmVudChfbWlycm9yKS5yZW1vdmVDaGlsZChfbWlycm9yKTtcbiAgICAgIF9taXJyb3IgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEltbWVkaWF0ZUNoaWxkIChkcm9wVGFyZ2V0LCB0YXJnZXQpIHtcbiAgICB2YXIgaW1tZWRpYXRlID0gdGFyZ2V0O1xuICAgIHdoaWxlIChpbW1lZGlhdGUgIT09IGRyb3BUYXJnZXQgJiYgZ2V0UGFyZW50KGltbWVkaWF0ZSkgIT09IGRyb3BUYXJnZXQpIHtcbiAgICAgIGltbWVkaWF0ZSA9IGdldFBhcmVudChpbW1lZGlhdGUpO1xuICAgIH1cbiAgICBpZiAoaW1tZWRpYXRlID09PSBkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaW1tZWRpYXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmVmZXJlbmNlIChkcm9wVGFyZ2V0LCB0YXJnZXQsIHgsIHkpIHtcbiAgICB2YXIgaG9yaXpvbnRhbCA9IG8uZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIHJlZmVyZW5jZSA9IHRhcmdldCAhPT0gZHJvcFRhcmdldCA/IGluc2lkZSgpIDogb3V0c2lkZSgpO1xuICAgIHJldHVybiByZWZlcmVuY2U7XG5cbiAgICBmdW5jdGlvbiBvdXRzaWRlICgpIHsgLy8gc2xvd2VyLCBidXQgYWJsZSB0byBmaWd1cmUgb3V0IGFueSBwb3NpdGlvblxuICAgICAgdmFyIGxlbiA9IGRyb3BUYXJnZXQuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgZWw7XG4gICAgICB2YXIgcmVjdDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBlbCA9IGRyb3BUYXJnZXQuY2hpbGRyZW5baV07XG4gICAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgaWYgKGhvcml6b250YWwgJiYgKHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyKSA+IHgpIHsgcmV0dXJuIGVsOyB9XG4gICAgICAgIGlmICghaG9yaXpvbnRhbCAmJiAocmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIpID4geSkgeyByZXR1cm4gZWw7IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc2lkZSAoKSB7IC8vIGZhc3RlciwgYnV0IG9ubHkgYXZhaWxhYmxlIGlmIGRyb3BwZWQgaW5zaWRlIGEgY2hpbGQgZWxlbWVudFxuICAgICAgdmFyIHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBpZiAoaG9yaXpvbnRhbCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh4ID4gcmVjdC5sZWZ0ICsgZ2V0UmVjdFdpZHRoKHJlY3QpIC8gMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzb2x2ZSh5ID4gcmVjdC50b3AgKyBnZXRSZWN0SGVpZ2h0KHJlY3QpIC8gMik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSAoYWZ0ZXIpIHtcbiAgICAgIHJldHVybiBhZnRlciA/IG5leHRFbCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQ29weSAoaXRlbSwgY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvLmNvcHkgPT09ICdib29sZWFuJyA/IG8uY29weSA6IG8uY29weShpdGVtLCBjb250YWluZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvdWNoeSAoZWwsIG9wLCB0eXBlLCBmbikge1xuICB2YXIgdG91Y2ggPSB7XG4gICAgbW91c2V1cDogJ3RvdWNoZW5kJyxcbiAgICBtb3VzZWRvd246ICd0b3VjaHN0YXJ0JyxcbiAgICBtb3VzZW1vdmU6ICd0b3VjaG1vdmUnXG4gIH07XG4gIHZhciBwb2ludGVycyA9IHtcbiAgICBtb3VzZXVwOiAncG9pbnRlcnVwJyxcbiAgICBtb3VzZWRvd246ICdwb2ludGVyZG93bicsXG4gICAgbW91c2Vtb3ZlOiAncG9pbnRlcm1vdmUnXG4gIH07XG4gIHZhciBtaWNyb3NvZnQgPSB7XG4gICAgbW91c2V1cDogJ01TUG9pbnRlclVwJyxcbiAgICBtb3VzZWRvd246ICdNU1BvaW50ZXJEb3duJyxcbiAgICBtb3VzZW1vdmU6ICdNU1BvaW50ZXJNb3ZlJ1xuICB9O1xuICBpZiAoZ2xvYmFsLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHBvaW50ZXJzW3R5cGVdLCBmbik7XG4gIH0gZWxzZSBpZiAoZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgbWljcm9zb2Z0W3R5cGVdLCBmbik7XG4gIH0gZWxzZSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdG91Y2hbdHlwZV0sIGZuKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0eXBlLCBmbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2hpY2hNb3VzZUJ1dHRvbiAoZSkge1xuICBpZiAoZS50b3VjaGVzICE9PSB2b2lkIDApIHsgcmV0dXJuIGUudG91Y2hlcy5sZW5ndGg7IH1cbiAgaWYgKGUud2hpY2ggIT09IHZvaWQgMCAmJiBlLndoaWNoICE9PSAwKSB7IHJldHVybiBlLndoaWNoOyB9IC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjYxXG4gIGlmIChlLmJ1dHRvbnMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS5idXR0b25zOyB9XG4gIHZhciBidXR0b24gPSBlLmJ1dHRvbjtcbiAgaWYgKGJ1dHRvbiAhPT0gdm9pZCAwKSB7IC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9ibG9iLzk5ZThmZjFiYWE3YWUzNDFlOTRiYjg5YzNlODQ1NzBjN2MzYWQ5ZWEvc3JjL2V2ZW50LmpzI0w1NzMtTDU3NVxuICAgIHJldHVybiBidXR0b24gJiAxID8gMSA6IGJ1dHRvbiAmIDIgPyAzIDogKGJ1dHRvbiAmIDQgPyAyIDogMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0T2Zmc2V0IChlbCkge1xuICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IHJlY3QubGVmdCArIGdldFNjcm9sbCgnc2Nyb2xsTGVmdCcsICdwYWdlWE9mZnNldCcpLFxuICAgIHRvcDogcmVjdC50b3AgKyBnZXRTY3JvbGwoJ3Njcm9sbFRvcCcsICdwYWdlWU9mZnNldCcpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbCAoc2Nyb2xsUHJvcCwgb2Zmc2V0UHJvcCkge1xuICBpZiAodHlwZW9mIGdsb2JhbFtvZmZzZXRQcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZ2xvYmFsW29mZnNldFByb3BdO1xuICB9XG4gIGlmIChkb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50RWxlbWVudFtzY3JvbGxQcm9wXTtcbiAgfVxuICByZXR1cm4gZG9jLmJvZHlbc2Nyb2xsUHJvcF07XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRCZWhpbmRQb2ludCAocG9pbnQsIHgsIHkpIHtcbiAgdmFyIHAgPSBwb2ludCB8fCB7fTtcbiAgdmFyIHN0YXRlID0gcC5jbGFzc05hbWU7XG4gIHZhciBlbDtcbiAgcC5jbGFzc05hbWUgKz0gJyBndS1oaWRlJztcbiAgZWwgPSBkb2MuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgcC5jbGFzc05hbWUgPSBzdGF0ZTtcbiAgcmV0dXJuIGVsO1xufVxuXG5mdW5jdGlvbiBuZXZlciAoKSB7IHJldHVybiBmYWxzZTsgfVxuZnVuY3Rpb24gYWx3YXlzICgpIHsgcmV0dXJuIHRydWU7IH1cbmZ1bmN0aW9uIGdldFJlY3RXaWR0aCAocmVjdCkgeyByZXR1cm4gcmVjdC53aWR0aCB8fCAocmVjdC5yaWdodCAtIHJlY3QubGVmdCk7IH1cbmZ1bmN0aW9uIGdldFJlY3RIZWlnaHQgKHJlY3QpIHsgcmV0dXJuIHJlY3QuaGVpZ2h0IHx8IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTsgfVxuZnVuY3Rpb24gZ2V0UGFyZW50IChlbCkgeyByZXR1cm4gZWwucGFyZW50Tm9kZSA9PT0gZG9jID8gbnVsbCA6IGVsLnBhcmVudE5vZGU7IH1cbmZ1bmN0aW9uIGlzSW5wdXQgKGVsKSB7IHJldHVybiBlbC50YWdOYW1lID09PSAnSU5QVVQnIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwgaXNFZGl0YWJsZShlbCk7IH1cbmZ1bmN0aW9uIGlzRWRpdGFibGUgKGVsKSB7XG4gIGlmICghZWwpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIG5vIHBhcmVudHMgd2VyZSBlZGl0YWJsZVxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAnZmFsc2UnKSB7IHJldHVybiBmYWxzZTsgfSAvLyBzdG9wIHRoZSBsb29rdXBcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKSB7IHJldHVybiB0cnVlOyB9IC8vIGZvdW5kIGEgY29udGVudEVkaXRhYmxlIGVsZW1lbnQgaW4gdGhlIGNoYWluXG4gIHJldHVybiBpc0VkaXRhYmxlKGdldFBhcmVudChlbCkpOyAvLyBjb250ZW50RWRpdGFibGUgaXMgc2V0IHRvICdpbmhlcml0J1xufVxuXG5mdW5jdGlvbiBuZXh0RWwgKGVsKSB7XG4gIHJldHVybiBlbC5uZXh0RWxlbWVudFNpYmxpbmcgfHwgbWFudWFsbHkoKTtcbiAgZnVuY3Rpb24gbWFudWFsbHkgKCkge1xuICAgIHZhciBzaWJsaW5nID0gZWw7XG4gICAgZG8ge1xuICAgICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgfSB3aGlsZSAoc2libGluZyAmJiBzaWJsaW5nLm5vZGVUeXBlICE9PSAxKTtcbiAgICByZXR1cm4gc2libGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRFdmVudEhvc3QgKGUpIHtcbiAgLy8gb24gdG91Y2hlbmQgZXZlbnQsIHdlIGhhdmUgdG8gdXNlIGBlLmNoYW5nZWRUb3VjaGVzYFxuICAvLyBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MTkyNTYzL3RvdWNoZW5kLWV2ZW50LXByb3BlcnRpZXNcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8zNFxuICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdO1xuICB9XG4gIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGdldENvb3JkIChjb29yZCwgZSkge1xuICB2YXIgaG9zdCA9IGdldEV2ZW50SG9zdChlKTtcbiAgdmFyIG1pc3NNYXAgPSB7XG4gICAgcGFnZVg6ICdjbGllbnRYJywgLy8gSUU4XG4gICAgcGFnZVk6ICdjbGllbnRZJyAvLyBJRThcbiAgfTtcbiAgaWYgKGNvb3JkIGluIG1pc3NNYXAgJiYgIShjb29yZCBpbiBob3N0KSAmJiBtaXNzTWFwW2Nvb3JkXSBpbiBob3N0KSB7XG4gICAgY29vcmQgPSBtaXNzTWFwW2Nvb3JkXTtcbiAgfVxuICByZXR1cm4gaG9zdFtjb29yZF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZHJhZ3VsYTtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGF0b2EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcbnZhciBkZWJvdW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtaXR0ZXIgKHRoaW5nLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGV2dCA9IHt9O1xuICBpZiAodGhpbmcgPT09IHVuZGVmaW5lZCkgeyB0aGluZyA9IHt9OyB9XG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgaWYgKCFldnRbdHlwZV0pIHtcbiAgICAgIGV2dFt0eXBlXSA9IFtmbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2dFt0eXBlXS5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxuICAgIHRoaW5nLm9uKHR5cGUsIGZuKTtcbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoYyA9PT0gMSkge1xuICAgICAgZGVsZXRlIGV2dFt0eXBlXTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDApIHtcbiAgICAgIGV2dCA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXQgPSBldnRbdHlwZV07XG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxuICAgICAgZXQuc3BsaWNlKGV0LmluZGV4T2YoZm4pLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5lbWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGluZy5lbWl0dGVyU25hcHNob3QoYXJncy5zaGlmdCgpKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZXQgPSAoZXZ0W3R5cGVdIHx8IFtdKS5zbGljZSgwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgICB2YXIgY3R4ID0gdGhpcyB8fCB0aGluZztcbiAgICAgIGlmICh0eXBlID09PSAnZXJyb3InICYmIG9wdHMudGhyb3dzICE9PSBmYWxzZSAmJiAhZXQubGVuZ3RoKSB7IHRocm93IGFyZ3MubGVuZ3RoID09PSAxID8gYXJnc1swXSA6IGFyZ3M7IH1cbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XG4gICAgICAgIGlmIChvcHRzLmFzeW5jKSB7IGRlYm91bmNlKGxpc3RlbiwgYXJncywgY3R4KTsgfSBlbHNlIHsgbGlzdGVuLmFwcGx5KGN0eCwgYXJncyk7IH1cbiAgICAgICAgaWYgKGxpc3Rlbi5fb25jZSkgeyB0aGluZy5vZmYodHlwZSwgbGlzdGVuKTsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpbmc7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHRoaW5nO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXRvYSAoYSwgbikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgbik7IH1cblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB0aWNreSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oc2V0SW1tZWRpYXRlKSB7dmFyIHNpID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJywgdGljaztcbmlmIChzaSkge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldEltbWVkaWF0ZShmbik7IH07XG59IGVsc2Uge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldFRpbWVvdXQoZm4sIDApOyB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRpY2s7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMykuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcbi8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1laWRhdGVgIHdhc1xuLy8gYWJsZSB0byBpbnN0YWxsIG9udG8uICBTZWFyY2ggZWFjaCBwb3NzaWJpbGl0eSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcbi8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSkpXG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgY3VzdG9tRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcbnZhciBldmVudG1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xudmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBhZGRFdmVudCA9IGFkZEV2ZW50RWFzeTtcbnZhciByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50RWFzeTtcbnZhciBoYXJkQ2FjaGUgPSBbXTtcblxuaWYgKCFnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICBhZGRFdmVudCA9IGFkZEV2ZW50SGFyZDtcbiAgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEhhcmQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZEV2ZW50LFxuICByZW1vdmU6IHJlbW92ZUV2ZW50LFxuICBmYWJyaWNhdGU6IGZhYnJpY2F0ZUV2ZW50XG59O1xuXG5mdW5jdGlvbiBhZGRFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHdyYXAoZWwsIHR5cGUsIGZuKSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBsaXN0ZW5lciA9IHVud3JhcChlbCwgdHlwZSwgZm4pO1xuICBpZiAobGlzdGVuZXIpIHtcbiAgICByZXR1cm4gZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmYWJyaWNhdGVFdmVudCAoZWwsIHR5cGUsIG1vZGVsKSB7XG4gIHZhciBlID0gZXZlbnRtYXAuaW5kZXhPZih0eXBlKSA9PT0gLTEgPyBtYWtlQ3VzdG9tRXZlbnQoKSA6IG1ha2VDbGFzc2ljRXZlbnQoKTtcbiAgaWYgKGVsLmRpc3BhdGNoRXZlbnQpIHtcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmZpcmVFdmVudCgnb24nICsgdHlwZSwgZSk7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUNsYXNzaWNFdmVudCAoKSB7XG4gICAgdmFyIGU7XG4gICAgaWYgKGRvYy5jcmVhdGVFdmVudCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDdXN0b21FdmVudCAoKSB7XG4gICAgcmV0dXJuIG5ldyBjdXN0b21FdmVudCh0eXBlLCB7IGRldGFpbDogbW9kZWwgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JhcHBlckZhY3RvcnkgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcHBlciAob3JpZ2luYWxFdmVudCkge1xuICAgIHZhciBlID0gb3JpZ2luYWxFdmVudCB8fCBnbG9iYWwuZXZlbnQ7XG4gICAgZS50YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCA9IGUucHJldmVudERlZmF1bHQgfHwgZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCkgeyBlLnJldHVyblZhbHVlID0gZmFsc2U7IH07XG4gICAgZS5zdG9wUHJvcGFnYXRpb24gPSBlLnN0b3BQcm9wYWdhdGlvbiB8fCBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24gKCkgeyBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7IH07XG4gICAgZS53aGljaCA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xuICAgIGZuLmNhbGwoZWwsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB3cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIHdyYXBwZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKSB8fCB3cmFwcGVyRmFjdG9yeShlbCwgdHlwZSwgZm4pO1xuICBoYXJkQ2FjaGUucHVzaCh7XG4gICAgd3JhcHBlcjogd3JhcHBlcixcbiAgICBlbGVtZW50OiBlbCxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGZuOiBmblxuICB9KTtcbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbmZ1bmN0aW9uIHVud3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpID0gZmluZChlbCwgdHlwZSwgZm4pO1xuICBpZiAoaSkge1xuICAgIHZhciB3cmFwcGVyID0gaGFyZENhY2hlW2ldLndyYXBwZXI7XG4gICAgaGFyZENhY2hlLnNwbGljZShpLCAxKTsgLy8gZnJlZSB1cCBhIHRhZCBvZiBtZW1vcnlcbiAgICByZXR1cm4gd3JhcHBlcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGksIGl0ZW07XG4gIGZvciAoaSA9IDA7IGkgPCBoYXJkQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBpdGVtID0gaGFyZENhY2hlW2ldO1xuICAgIGlmIChpdGVtLmVsZW1lbnQgPT09IGVsICYmIGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBpdGVtLmZuID09PSBmbikge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG59XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuXG4gICAgdmFyIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCFmaWVsZHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGZ1bmN0aW9uIChhdXRvTGlzdCkge1xuICAgICAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGF1dG9MaXN0LCBhcmdzLmhpZGRlbik7XG4gICAgICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlT2JqZWN0KTtcbiAgICAgICAgdmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdPYmplY3QpO1xuICAgICAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkoYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmUgfSkpO1xuICAgICAgICB2YXIgaW5wdXQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtbGlzdC1pbnB1dCcpO1xuICAgICAgICB2YXIgZWxOYW1lID0gJ2F1dG9MaXN0XycgKyBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICAgICAgdmFyIGVuZHBvaW50ID0gT01HRmllbGRzLmJhc2VVUkwgKyAnL3dwLWpzb24vd3AvdjIvJyArIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlICsgJz9zZWFyY2g9JztcblxuICAgICAgICAoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShpbnB1dCwgZW5kcG9pbnQsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXQpIHtcbiAgICAgICAgICAgIExpc3QuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICBIaWRkZW4uYWRkKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgdmFyIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gIGlmICghZmllbGRzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGZpZWxkcywgZnVuY3Rpb24gKGF1dG9JdGVtKSB7XG4gICAgdmFyIGhpZGRlbiA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoYXJncy5oaWRkZW4pO1xuICAgIHZhciBpbnB1dCA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hdXRvc3VnZ2VzdC1pbnB1dCcpO1xuICAgIHZhciBlbE5hbWUgPSAnYXV0b0xpc3RfJyArIGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICAgIHZhciBlbmRwb2ludCA9IHZvaWQgMDtcblxuICAgIGlmICh3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2UpIHtcbiAgICAgIGVuZHBvaW50ID0gT01HRmllbGRzLmJhc2VVUkwgKyAnL3dwLWpzb24vJyArIHdpbmRvd1tlbE5hbWVdLm5hbWVzcGFjZSArICcvJyArIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlICsgJz9zZWFyY2g9JztcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kcG9pbnQgPSBPTUdGaWVsZHMuYmFzZVVSTCArICcvd3AtanNvbi93cC92Mi8nICsgd2luZG93W2VsTmFtZV0ucmVzb3VyY2UgKyAnP3NlYXJjaD0nO1xuICAgIH1cblxuICAgICgwLCBfYXV0b3N1Z2dlc3QyLmRlZmF1bHQpKGlucHV0LCBlbmRwb2ludCwgZnVuY3Rpb24gKHZhbHVlLCBpbnB1dCkge1xuICAgICAgaGlkZGVuLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIGhpZGRlbi52YWx1ZSA9ICcnO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gaW1hZ2VVcGxvYWRzO1xuZnVuY3Rpb24gaW1hZ2VVcGxvYWRzKCkge1xuXHR2YXIgZmVhdHVyZWRJbWFnZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLW1lZGlhLXVwbG9hZCcpO1xuXG5cdGlmIChmZWF0dXJlZEltYWdlV3JhcC5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRbXS5tYXAuY2FsbChmZWF0dXJlZEltYWdlV3JhcCwgZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHQvLyB2YXIgSW1hZ2VXcmFwSWQgPSBpdGVtLmF0dHJpYnV0ZS5pZDtcblx0XHR2YXIgcmVtb3ZlSW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUtaW1hZ2UnKTtcblx0XHR2YXIgcmVwbGFjZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVwbGFjZS1pbWFnZScpO1xuXHRcdHZhciBzZXRJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnNldC1pbWFnZScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGFnID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdhLnJlcGxhY2UtaW1hZ2UgaW1nJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VJRCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGl0bGUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy50aHVtYm5haWwtdGl0bGUnKTtcblx0XHR2YXIgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcblx0XHRcdHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcblx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHR0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJ1xuXHRcdFx0fSxcblx0XHRcdG11bHRpcGxlOiBmYWxzZVxuXHRcdH0pO1xuXG5cdFx0bWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS5maXJzdCgpLnRvSlNPTigpO1xuXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gYXR0YWNobWVudC5pZDtcblx0XHRcdGlmIChhdHRhY2htZW50Lmhhc093blByb3BlcnR5KCdzaXplcycpKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50LnNpemVzLnRodW1ibmFpbC51cmwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuaWNvbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChmZWF0dXJlZEltYWdlVGl0bGUpIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRpdGxlLmlubmVySFRNTCA9IGF0dGFjaG1lbnQuZmlsZW5hbWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZW1vdmVJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gJyc7XG5cblx0XHRcdGlmIChmZWF0dXJlZEltYWdlVGl0bGUpIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRpdGxlLmlubmVySFRNTCA9ICcnO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmVwbGFjZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cblx0XHRzZXRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXHR9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZGF0ZXBpY2tlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZXBpY2tlci1pbnB1dCcpO1xuXG4gIGlmICghZGF0ZXBpY2tlcnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZGF0ZXBpY2tlcnMsIGZ1bmN0aW9uIChkYXRlRmllbGQpIHtcbiAgICB2YXIgY3VycmVudERhdGUgPSBkYXRlRmllbGQuZGF0YXNldC5kYXRlO1xuXG4gICAgKDAsIF9mbGF0cGlja3IyLmRlZmF1bHQpKGRhdGVGaWVsZCwge1xuICAgICAgYWx0SW5wdXQ6IHRydWUsXG4gICAgICBhbHRGb3JtYXQ6ICdGIGosIFknLFxuICAgICAgZGF0ZUZvcm1hdDogJ1UnLFxuICAgICAgZGVmYXVsdERhdGU6ICFjdXJyZW50RGF0ZSA/ICcnIDogY3VycmVudERhdGVcbiAgICB9KTtcbiAgfSk7XG59O1xuXG52YXIgX2ZsYXRwaWNrciA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXG52YXIgX2ZsYXRwaWNrcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9mbGF0cGlja3IpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIGZsYXRwaWNrciB2NC40LjMsIEBsaWNlbnNlIE1JVCAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICAgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuZmxhdHBpY2tyID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIHBhZCA9IGZ1bmN0aW9uIHBhZChudW1iZXIpIHtcbiAgICAgIHJldHVybiAoXCIwXCIgKyBudW1iZXIpLnNsaWNlKC0yKTtcbiAgICB9O1xuICAgIHZhciBpbnQgPSBmdW5jdGlvbiBpbnQoYm9vbCkge1xuICAgICAgcmV0dXJuIGJvb2wgPT09IHRydWUgPyAxIDogMDtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgaWYgKGltbWVkaWF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGltbWVkaWF0ZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGltZW91dDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHRpbWVvdXQgIT09IG51bGwgJiYgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgaWYgKGltbWVkaWF0ZSAmJiAhdGltZW91dCkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHZhciBhcnJheWlmeSA9IGZ1bmN0aW9uIGFycmF5aWZ5KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07XG4gICAgfTtcblxuICAgIHZhciBkb19ub3RoaW5nID0gZnVuY3Rpb24gZG9fbm90aGluZygpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gbW9udGhUb1N0cihtb250aE51bWJlciwgc2hvcnRoYW5kLCBsb2NhbGUpIHtcbiAgICAgIHJldHVybiBsb2NhbGUubW9udGhzW3Nob3J0aGFuZCA/IFwic2hvcnRoYW5kXCIgOiBcImxvbmdoYW5kXCJdW21vbnRoTnVtYmVyXTtcbiAgICB9O1xuICAgIHZhciByZXZGb3JtYXQgPSB7XG4gICAgICBEOiBkb19ub3RoaW5nLFxuICAgICAgRjogZnVuY3Rpb24gRihkYXRlT2JqLCBtb250aE5hbWUsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTtcbiAgICAgIH0sXG4gICAgICBHOiBmdW5jdGlvbiBHKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBIOiBmdW5jdGlvbiBIKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBKOiBmdW5jdGlvbiBKKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICAgIH0sXG4gICAgICBLOiBmdW5jdGlvbiBLKGRhdGVPYmosIGFtUE0sIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKGRhdGVPYmouZ2V0SG91cnMoKSAlIDEyICsgMTIgKiBpbnQobmV3IFJlZ0V4cChsb2NhbGUuYW1QTVsxXSwgXCJpXCIpLnRlc3QoYW1QTSkpKTtcbiAgICAgIH0sXG4gICAgICBNOiBmdW5jdGlvbiBNKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpO1xuICAgICAgfSxcbiAgICAgIFM6IGZ1bmN0aW9uIFMoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24gVShfLCB1bml4U2Vjb25kcykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VGbG9hdCh1bml4U2Vjb25kcykgKiAxMDAwKTtcbiAgICAgIH0sXG4gICAgICBXOiBmdW5jdGlvbiBXKGRhdGVPYmosIHdlZWtOdW0pIHtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXIgPSBwYXJzZUludCh3ZWVrTnVtKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVPYmouZ2V0RnVsbFllYXIoKSwgMCwgMiArICh3ZWVrTnVtYmVyIC0gMSkgKiA3LCAwLCAwLCAwLCAwKTtcbiAgICAgIH0sXG4gICAgICBZOiBmdW5jdGlvbiBZKGRhdGVPYmosIHllYXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRGdWxsWWVhcihwYXJzZUZsb2F0KHllYXIpKTtcbiAgICAgIH0sXG4gICAgICBaOiBmdW5jdGlvbiBaKF8sIElTT0RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKElTT0RhdGUpO1xuICAgICAgfSxcbiAgICAgIGQ6IGZ1bmN0aW9uIGQoZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uIGgoZGF0ZU9iaiwgaG91cikge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKHBhcnNlRmxvYXQoaG91cikpO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoZGF0ZU9iaiwgbWludXRlcykge1xuICAgICAgICBkYXRlT2JqLnNldE1pbnV0ZXMocGFyc2VGbG9hdChtaW51dGVzKSk7XG4gICAgICB9LFxuICAgICAgajogZnVuY3Rpb24gaihkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgICB9LFxuICAgICAgbDogZG9fbm90aGluZyxcbiAgICAgIG06IGZ1bmN0aW9uIG0oZGF0ZU9iaiwgbW9udGgpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xuICAgICAgfSxcbiAgICAgIG46IGZ1bmN0aW9uIG4oZGF0ZU9iaiwgbW9udGgpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgICB9LFxuICAgICAgdzogZG9fbm90aGluZyxcbiAgICAgIHk6IGZ1bmN0aW9uIHkoZGF0ZU9iaiwgeWVhcikge1xuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKDIwMDAgKyBwYXJzZUZsb2F0KHllYXIpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciB0b2tlblJlZ2V4ID0ge1xuICAgICAgRDogXCIoXFxcXHcrKVwiLFxuICAgICAgRjogXCIoXFxcXHcrKVwiLFxuICAgICAgRzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIEg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBKOiBcIihcXFxcZFxcXFxkfFxcXFxkKVxcXFx3K1wiLFxuICAgICAgSzogXCJcIixcbiAgICAgIE06IFwiKFxcXFx3KylcIixcbiAgICAgIFM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBVOiBcIiguKylcIixcbiAgICAgIFc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBZOiBcIihcXFxcZHs0fSlcIixcbiAgICAgIFo6IFwiKC4rKVwiLFxuICAgICAgZDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBpOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgajogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGw6IFwiKFxcXFx3KylcIixcbiAgICAgIG06IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBuOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgczogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIHc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICB5OiBcIihcXFxcZHsyfSlcIlxuICAgIH07XG4gICAgdmFyIGZvcm1hdHMgPSB7XG4gICAgICBaOiBmdW5jdGlvbiBaKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcbiAgICAgIH0sXG4gICAgICBEOiBmdW5jdGlvbiBEKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLnNob3J0aGFuZFtmb3JtYXRzLncoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKV07XG4gICAgICB9LFxuICAgICAgRjogZnVuY3Rpb24gRihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZm9ybWF0cy5uKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykgLSAxLCBmYWxzZSwgbG9jYWxlKTtcbiAgICAgIH0sXG4gICAgICBHOiBmdW5jdGlvbiBHKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcbiAgICAgIH0sXG4gICAgICBIOiBmdW5jdGlvbiBIKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldEhvdXJzKCkpO1xuICAgICAgfSxcbiAgICAgIEo6IGZ1bmN0aW9uIEooZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkID8gZGF0ZS5nZXREYXRlKCkgKyBsb2NhbGUub3JkaW5hbChkYXRlLmdldERhdGUoKSkgOiBkYXRlLmdldERhdGUoKTtcbiAgICAgIH0sXG4gICAgICBLOiBmdW5jdGlvbiBLKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLmFtUE1baW50KGRhdGUuZ2V0SG91cnMoKSA+IDExKV07XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTShkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZGF0ZS5nZXRNb250aCgpLCB0cnVlLCBsb2NhbGUpO1xuICAgICAgfSxcbiAgICAgIFM6IGZ1bmN0aW9uIFMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTtcbiAgICAgIH0sXG4gICAgICBVOiBmdW5jdGlvbiBVKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIC8gMTAwMDtcbiAgICAgIH0sXG4gICAgICBXOiBmdW5jdGlvbiBXKGRhdGUsIF8sIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0V2VlayhkYXRlKTtcbiAgICAgIH0sXG4gICAgICBZOiBmdW5jdGlvbiBZKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbiBkKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldERhdGUoKSk7XG4gICAgICB9LFxuICAgICAgaDogZnVuY3Rpb24gaChkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTI7XG4gICAgICB9LFxuICAgICAgaTogZnVuY3Rpb24gaShkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRNaW51dGVzKCkpO1xuICAgICAgfSxcbiAgICAgIGo6IGZ1bmN0aW9uIGooZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuICAgICAgbDogZnVuY3Rpb24gbChkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5sb25naGFuZFtkYXRlLmdldERheSgpXTtcbiAgICAgIH0sXG4gICAgICBtOiBmdW5jdGlvbiBtKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldE1vbnRoKCkgKyAxKTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICB9LFxuICAgICAgczogZnVuY3Rpb24gcyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFNlY29uZHMoKTtcbiAgICAgIH0sXG4gICAgICB3OiBmdW5jdGlvbiB3KGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7XG4gICAgICB9LFxuICAgICAgeTogZnVuY3Rpb24geShkYXRlKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBlbmdsaXNoID0ge1xuICAgICAgd2Vla2RheXM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXVxuICAgICAgfSxcbiAgICAgIG1vbnRoczoge1xuICAgICAgICBzaG9ydGhhbmQ6IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXSxcbiAgICAgICAgbG9uZ2hhbmQ6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdXG4gICAgICB9LFxuICAgICAgZGF5c0luTW9udGg6IFszMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXSxcbiAgICAgIGZpcnN0RGF5T2ZXZWVrOiAwLFxuICAgICAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudGgpIHtcbiAgICAgICAgdmFyIHMgPSBudGggJSAxMDA7XG4gICAgICAgIGlmIChzID4gMyAmJiBzIDwgMjEpIHJldHVybiBcInRoXCI7XG5cbiAgICAgICAgc3dpdGNoIChzICUgMTApIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gXCJzdFwiO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIFwibmRcIjtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBcInJkXCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwidGhcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJhbmdlU2VwYXJhdG9yOiBcIiB0byBcIixcbiAgICAgIHdlZWtBYmJyZXZpYXRpb246IFwiV2tcIixcbiAgICAgIHNjcm9sbFRpdGxlOiBcIlNjcm9sbCB0byBpbmNyZW1lbnRcIixcbiAgICAgIHRvZ2dsZVRpdGxlOiBcIkNsaWNrIHRvIHRvZ2dsZVwiLFxuICAgICAgYW1QTTogW1wiQU1cIiwgXCJQTVwiXSxcbiAgICAgIHllYXJBcmlhTGFiZWw6IFwiWWVhclwiXG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gY3JlYXRlRGF0ZUZvcm1hdHRlcihfcmVmKSB7XG4gICAgICB2YXIgX3JlZiRjb25maWcgPSBfcmVmLmNvbmZpZyxcbiAgICAgICAgICBjb25maWcgPSBfcmVmJGNvbmZpZyA9PT0gdm9pZCAwID8gZGVmYXVsdHMgOiBfcmVmJGNvbmZpZyxcbiAgICAgICAgICBfcmVmJGwxMG4gPSBfcmVmLmwxMG4sXG4gICAgICAgICAgbDEwbiA9IF9yZWYkbDEwbiA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9yZWYkbDEwbjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5mb3JtYXREYXRlICE9PSB1bmRlZmluZWQpIHJldHVybiBjb25maWcuZm9ybWF0RGF0ZShkYXRlT2JqLCBmcm10KTtcbiAgICAgICAgdmFyIGxvY2FsZSA9IG92ZXJyaWRlTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIHJldHVybiBmcm10LnNwbGl0KFwiXCIpLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdHNbY10gJiYgYXJyW2kgLSAxXSAhPT0gXCJcXFxcXCIgPyBmb3JtYXRzW2NdKGRhdGVPYmosIGxvY2FsZSwgY29uZmlnKSA6IGMgIT09IFwiXFxcXFwiID8gYyA6IFwiXCI7XG4gICAgICAgIH0pLmpvaW4oXCJcIik7XG4gICAgICB9O1xuICAgIH07XG4gICAgdmFyIGNyZWF0ZURhdGVQYXJzZXIgPSBmdW5jdGlvbiBjcmVhdGVEYXRlUGFyc2VyKF9yZWYyKSB7XG4gICAgICB2YXIgX3JlZjIkY29uZmlnID0gX3JlZjIuY29uZmlnLFxuICAgICAgICAgIGNvbmZpZyA9IF9yZWYyJGNvbmZpZyA9PT0gdm9pZCAwID8gZGVmYXVsdHMgOiBfcmVmMiRjb25maWcsXG4gICAgICAgICAgX3JlZjIkbDEwbiA9IF9yZWYyLmwxMG4sXG4gICAgICAgICAgbDEwbiA9IF9yZWYyJGwxMG4gPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfcmVmMiRsMTBuO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlLCBnaXZlbkZvcm1hdCwgdGltZWxlc3MpIHtcbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBwYXJzZWREYXRlO1xuICAgICAgICB2YXIgZGF0ZV9vcmlnID0gZGF0ZTtcbiAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO2Vsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSBcInN0cmluZ1wiICYmIGRhdGUudG9GaXhlZCAhPT0gdW5kZWZpbmVkKSBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7ZWxzZSBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB2YXIgZm9ybWF0ID0gZ2l2ZW5Gb3JtYXQgfHwgKGNvbmZpZyB8fCBkZWZhdWx0cykuZGF0ZUZvcm1hdDtcbiAgICAgICAgICB2YXIgZGF0ZXN0ciA9IFN0cmluZyhkYXRlKS50cmltKCk7XG5cbiAgICAgICAgICBpZiAoZGF0ZXN0ciA9PT0gXCJ0b2RheVwiKSB7XG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fCAvR01UJC8udGVzdChkYXRlc3RyKSkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO2Vsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKSBwYXJzZWREYXRlID0gY29uZmlnLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO2Vsc2Uge1xuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9ICFjb25maWcgfHwgIWNvbmZpZy5ub0NhbGVuZGFyID8gbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAwLCAxLCAwLCAwLCAwLCAwKSA6IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICAgICAgdmFyIG1hdGNoZWQsXG4gICAgICAgICAgICAgICAgb3BzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTtcbiAgICAgICAgICAgICAgdmFyIGlzQmFja1NsYXNoID0gdG9rZW4gPT09IFwiXFxcXFwiO1xuICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xuXG4gICAgICAgICAgICAgIGlmICh0b2tlblJlZ2V4W3Rva2VuXSAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIHJlZ2V4U3RyICs9IHRva2VuUmVnZXhbdG9rZW5dO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5ldyBSZWdFeHAocmVnZXhTdHIpLmV4ZWMoZGF0ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoZWQgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgb3BzW3Rva2VuICE9PSBcIllcIiA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKHtcbiAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbWF0Y2hbKyttYXRjaEluZGV4XVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0JhY2tTbGFzaCkgcmVnZXhTdHIgKz0gXCIuXCI7XG5cbiAgICAgICAgICAgICAgb3BzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZuID0gX3JlZjMuZm4sXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IF9yZWYzLnZhbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbDEwbikgfHwgcGFyc2VkRGF0ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBtYXRjaGVkID8gcGFyc2VkRGF0ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIShwYXJzZWREYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgICBjb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBwcm92aWRlZDogXCIgKyBkYXRlX29yaWcpKTtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpbWVsZXNzID09PSB0cnVlKSBwYXJzZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICAgIH07XG4gICAgfTtcbiAgICBmdW5jdGlvbiBjb21wYXJlRGF0ZXMoZGF0ZTEsIGRhdGUyLCB0aW1lbGVzcykge1xuICAgICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHtcbiAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGltZWxlc3MgIT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlMS5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApIC0gbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGUxLmdldFRpbWUoKSAtIGRhdGUyLmdldFRpbWUoKTtcbiAgICB9XG4gICAgdmFyIGdldFdlZWsgPSBmdW5jdGlvbiBnZXRXZWVrKGdpdmVuRGF0ZSkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xuICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcbiAgICAgIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC0gMyArICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgLyA3KTtcbiAgICB9O1xuICAgIHZhciBpc0JldHdlZW4gPSBmdW5jdGlvbiBpc0JldHdlZW4odHMsIHRzMSwgdHMyKSB7XG4gICAgICByZXR1cm4gdHMgPiBNYXRoLm1pbih0czEsIHRzMikgJiYgdHMgPCBNYXRoLm1heCh0czEsIHRzMik7XG4gICAgfTtcbiAgICB2YXIgZHVyYXRpb24gPSB7XG4gICAgICBEQVk6IDg2NDAwMDAwXG4gICAgfTtcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgIF9kaXNhYmxlOiBbXSxcbiAgICAgIF9lbmFibGU6IFtdLFxuICAgICAgYWxsb3dJbnB1dDogZmFsc2UsXG4gICAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgICBhbHRJbnB1dDogZmFsc2UsXG4gICAgICBhbHRJbnB1dENsYXNzOiBcImZvcm0tY29udHJvbCBpbnB1dFwiLFxuICAgICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSA9PT0gLTEsXG4gICAgICBhcmlhRGF0ZUZvcm1hdDogXCJGIGosIFlcIixcbiAgICAgIGNsaWNrT3BlbnM6IHRydWUsXG4gICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLFxuICAgICAgY29uanVuY3Rpb246IFwiLCBcIixcbiAgICAgIGRhdGVGb3JtYXQ6IFwiWS1tLWRcIixcbiAgICAgIGRlZmF1bHRIb3VyOiAxMixcbiAgICAgIGRlZmF1bHRNaW51dGU6IDAsXG4gICAgICBkZWZhdWx0U2Vjb25kczogMCxcbiAgICAgIGRpc2FibGU6IFtdLFxuICAgICAgZGlzYWJsZU1vYmlsZTogZmFsc2UsXG4gICAgICBlbmFibGU6IFtdLFxuICAgICAgZW5hYmxlU2Vjb25kczogZmFsc2UsXG4gICAgICBlbmFibGVUaW1lOiBmYWxzZSxcbiAgICAgIGVycm9ySGFuZGxlcjogY29uc29sZS53YXJuLFxuICAgICAgZ2V0V2VlazogZ2V0V2VlayxcbiAgICAgIGhvdXJJbmNyZW1lbnQ6IDEsXG4gICAgICBpZ25vcmVkRm9jdXNFbGVtZW50czogW10sXG4gICAgICBpbmxpbmU6IGZhbHNlLFxuICAgICAgbG9jYWxlOiBcImRlZmF1bHRcIixcbiAgICAgIG1pbnV0ZUluY3JlbWVudDogNSxcbiAgICAgIG1vZGU6IFwic2luZ2xlXCIsXG4gICAgICBuZXh0QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J00xMy4yMDcgOC40NzJsLTcuODU0IDcuODU0LTAuNzA3LTAuNzA3IDcuMTQ2LTcuMTQ2LTcuMTQ2LTcuMTQ4IDAuNzA3LTAuNzA3IDcuODU0IDcuODU0eicgLz48L3N2Zz5cIixcbiAgICAgIG5vQ2FsZW5kYXI6IGZhbHNlLFxuICAgICAgbm93OiBuZXcgRGF0ZSgpLFxuICAgICAgb25DaGFuZ2U6IFtdLFxuICAgICAgb25DbG9zZTogW10sXG4gICAgICBvbkRheUNyZWF0ZTogW10sXG4gICAgICBvbkRlc3Ryb3k6IFtdLFxuICAgICAgb25LZXlEb3duOiBbXSxcbiAgICAgIG9uTW9udGhDaGFuZ2U6IFtdLFxuICAgICAgb25PcGVuOiBbXSxcbiAgICAgIG9uUGFyc2VDb25maWc6IFtdLFxuICAgICAgb25SZWFkeTogW10sXG4gICAgICBvblZhbHVlVXBkYXRlOiBbXSxcbiAgICAgIG9uWWVhckNoYW5nZTogW10sXG4gICAgICBvblByZUNhbGVuZGFyUG9zaXRpb246IFtdLFxuICAgICAgcGx1Z2luczogW10sXG4gICAgICBwb3NpdGlvbjogXCJhdXRvXCIsXG4gICAgICBwb3NpdGlvbkVsZW1lbnQ6IHVuZGVmaW5lZCxcbiAgICAgIHByZXZBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTUuMjA3IDguNDcxbDcuMTQ2IDcuMTQ3LTAuNzA3IDAuNzA3LTcuODUzLTcuODU0IDcuODU0LTcuODUzIDAuNzA3IDAuNzA3LTcuMTQ3IDcuMTQ2eicgLz48L3N2Zz5cIixcbiAgICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsXG4gICAgICBzaG93TW9udGhzOiAxLFxuICAgICAgc3RhdGljOiBmYWxzZSxcbiAgICAgIHRpbWVfMjRocjogZmFsc2UsXG4gICAgICB3ZWVrTnVtYmVyczogZmFsc2UsXG4gICAgICB3cmFwOiBmYWxzZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjbGFzc05hbWUsIGJvb2wpIHtcbiAgICAgIGlmIChib29sID09PSB0cnVlKSByZXR1cm4gZWxlbS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgY29udGVudCkge1xuICAgICAgdmFyIGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XG4gICAgICBjb250ZW50ID0gY29udGVudCB8fCBcIlwiO1xuICAgICAgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKSBlLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkge1xuICAgICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCkge1xuICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSwgY29uZGl0aW9uKSB7XG4gICAgICBpZiAoY29uZGl0aW9uKG5vZGUpKSByZXR1cm4gbm9kZTtlbHNlIGlmIChub2RlLnBhcmVudE5vZGUpIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU51bWJlcklucHV0KGlucHV0Q2xhc3NOYW1lLCBvcHRzKSB7XG4gICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJudW1JbnB1dFdyYXBwZXJcIiksXG4gICAgICAgICAgbnVtSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJudW1JbnB1dCBcIiArIGlucHV0Q2xhc3NOYW1lKSxcbiAgICAgICAgICBhcnJvd1VwID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJhcnJvd1VwXCIpLFxuICAgICAgICAgIGFycm93RG93biA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dEb3duXCIpO1xuICAgICAgbnVtSW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgbnVtSW5wdXQucGF0dGVybiA9IFwiXFxcXGQqXCI7XG4gICAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKSBmb3IgKHZhciBrZXkgaW4gb3B0cykge1xuICAgICAgICBudW1JbnB1dC5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRzW2tleV0pO1xuICAgICAgfVxuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChudW1JbnB1dCk7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93VXApO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd0Rvd24pO1xuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoc291cmNlKSB7XG4gICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3MubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3NbX2ldO1xuXG4gICAgICAgICAgX2xvb3Aoc291cmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBERUJPVU5DRURfQ0hBTkdFX01TID0gMzAwO1xuXG4gICAgZnVuY3Rpb24gRmxhdHBpY2tySW5zdGFuY2UoZWxlbWVudCwgaW5zdGFuY2VDb25maWcpIHtcbiAgICAgIHZhciBzZWxmID0ge1xuICAgICAgICBjb25maWc6IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSxcbiAgICAgICAgbDEwbjogZW5nbGlzaFxuICAgICAgfTtcbiAgICAgIHNlbGYucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7XG4gICAgICAgIGNvbmZpZzogc2VsZi5jb25maWcsXG4gICAgICAgIGwxMG46IHNlbGYubDEwblxuICAgICAgfSk7XG4gICAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuICAgICAgc2VsZi5fYmluZCA9IGJpbmQ7XG4gICAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcbiAgICAgIHNlbGYuY2hhbmdlTW9udGggPSBjaGFuZ2VNb250aDtcbiAgICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7XG4gICAgICBzZWxmLmNsZWFyID0gY2xlYXI7XG4gICAgICBzZWxmLmNsb3NlID0gY2xvc2U7XG4gICAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcbiAgICAgIHNlbGYuZGVzdHJveSA9IGRlc3Ryb3k7XG4gICAgICBzZWxmLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XG4gICAgICBzZWxmLm9wZW4gPSBvcGVuO1xuICAgICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XG4gICAgICBzZWxmLnNldCA9IHNldDtcbiAgICAgIHNlbGYuc2V0RGF0ZSA9IHNldERhdGU7XG4gICAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcblxuICAgICAgZnVuY3Rpb24gc2V0dXBIZWxwZXJGdW5jdGlvbnMoKSB7XG4gICAgICAgIHNlbGYudXRpbHMgPSB7XG4gICAgICAgICAgZ2V0RGF5c0luTW9udGg6IGZ1bmN0aW9uIGdldERheXNJbk1vbnRoKG1vbnRoLCB5cikge1xuICAgICAgICAgICAgaWYgKG1vbnRoID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgbW9udGggPSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHlyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgeXIgPSBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobW9udGggPT09IDEgJiYgKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCB8fCB5ciAlIDQwMCA9PT0gMCkpIHJldHVybiAyOTtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgc2VsZi5lbGVtZW50ID0gc2VsZi5pbnB1dCA9IGVsZW1lbnQ7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHBhcnNlQ29uZmlnKCk7XG4gICAgICAgIHNldHVwTG9jYWxlKCk7XG4gICAgICAgIHNldHVwSW5wdXRzKCk7XG4gICAgICAgIHNldHVwRGF0ZXMoKTtcbiAgICAgICAgc2V0dXBIZWxwZXJGdW5jdGlvbnMoKTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSBidWlsZCgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG5cbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fCBzZWxmLmNvbmZpZy5taW5EYXRlIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB1cGRhdGVWYWx1ZShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnNob3dUaW1lSW5wdXQgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyO1xuXG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIHZhciBkYXlzV2lkdGggPSAoc2VsZi5kYXlzQ29udGFpbmVyLm9mZnNldFdpZHRoICsgMSkgKiBzZWxmLmNvbmZpZy5zaG93TW9udGhzO1xuICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLndpZHRoID0gZGF5c1dpZHRoICsgXCJweFwiO1xuXG4gICAgICAgICAgaWYgKHNlbGYud2Vla1dyYXBwZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIHNlbGYud2Vla1dyYXBwZXIub2Zmc2V0V2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlICYmIGlzU2FmYXJpKSB7XG4gICAgICAgICAgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25SZWFkeVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuLmJpbmQoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICB0aW1lV3JhcHBlcihlKTtcblxuICAgICAgICBpZiAoZS50eXBlICE9PSBcImlucHV0XCIpIHtcbiAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH0sIERFQk9VTkNFRF9DSEFOR0VfTVMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFtcG0ybWlsaXRhcnkoaG91ciwgYW1QTSkge1xuICAgICAgICByZXR1cm4gaG91ciAlIDEyICsgMTIgKiBpbnQoYW1QTSA9PT0gc2VsZi5sMTBuLmFtUE1bMV0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtaWxpdGFyeTJhbXBtKGhvdXIpIHtcbiAgICAgICAgc3dpdGNoIChob3VyICUgMjQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgIHJldHVybiAxMjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gaG91ciAlIDEyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbUlucHV0cygpIHtcbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgPT09IHVuZGVmaW5lZCB8fCBzZWxmLm1pbnV0ZUVsZW1lbnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB2YXIgaG91cnMgPSAocGFyc2VJbnQoc2VsZi5ob3VyRWxlbWVudC52YWx1ZS5zbGljZSgtMiksIDEwKSB8fCAwKSAlIDI0LFxuICAgICAgICAgICAgbWludXRlcyA9IChwYXJzZUludChzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwLFxuICAgICAgICAgICAgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkID8gKHBhcnNlSW50KHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSwgMTApIHx8IDApICUgNjAgOiAwO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIGhvdXJzID0gYW1wbTJtaWxpdGFyeShob3Vycywgc2VsZi5hbVBNLnRleHRDb250ZW50KTtcbiAgICAgICAgdmFyIGxpbWl0TWluSG91cnMgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQgfHwgc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLm1pbkRhdGVIYXNUaW1lICYmIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICYmIGNvbXBhcmVEYXRlcyhzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5jb25maWcubWluRGF0ZSwgdHJ1ZSkgPT09IDA7XG4gICAgICAgIHZhciBsaW1pdE1heEhvdXJzID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkIHx8IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5tYXhEYXRlSGFzVGltZSAmJiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJiBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1heERhdGUsIHRydWUpID09PSAwO1xuXG4gICAgICAgIGlmIChsaW1pdE1heEhvdXJzKSB7XG4gICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQgPyBzZWxmLmNvbmZpZy5tYXhUaW1lIDogc2VsZi5jb25maWcubWF4RGF0ZTtcbiAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKSBtaW51dGVzID0gTWF0aC5taW4obWludXRlcywgbWF4VGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSkgc2Vjb25kcyA9IE1hdGgubWluKHNlY29uZHMsIG1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7XG4gICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQgPyBzZWxmLmNvbmZpZy5taW5UaW1lIDogc2VsZi5jb25maWcubWluRGF0ZTtcbiAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgIGlmIChob3VycyA9PT0gbWluVGltZS5nZXRIb3VycygpKSBtaW51dGVzID0gTWF0aC5tYXgobWludXRlcywgbWluVGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgIGlmIChtaW51dGVzID09PSBtaW5UaW1lLmdldE1pbnV0ZXMoKSkgc2Vjb25kcyA9IE1hdGgubWF4KHNlY29uZHMsIG1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKSB7XG4gICAgICAgIHZhciBkYXRlID0gZGF0ZU9iaiB8fCBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iajtcbiAgICAgICAgaWYgKGRhdGUpIHNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCksIGRhdGUuZ2V0U2Vjb25kcygpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgICAgICAgaWYgKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5zZXRIb3Vycyhob3VycyAlIDI0LCBtaW51dGVzLCBzZWNvbmRzIHx8IDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxmLmhvdXJFbGVtZW50IHx8ICFzZWxmLm1pbnV0ZUVsZW1lbnQgfHwgc2VsZi5pc01vYmlsZSkgcmV0dXJuO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnZhbHVlID0gcGFkKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyAoMTIgKyBob3VycykgJSAxMiArIDEyICogaW50KGhvdXJzICUgMTIgPT09IDApIDogaG91cnMpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07XG4gICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlY29uZHMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblllYXJJbnB1dChldmVudCkge1xuICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZSkgKyAoZXZlbnQuZGVsdGEgfHwgMCk7XG5cbiAgICAgICAgaWYgKHllYXIudG9TdHJpbmcoKS5sZW5ndGggPT09IDQgfHwgZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC50YXJnZXQuYmx1cigpO1xuICAgICAgICAgIGlmICghL1teXFxkXS8udGVzdCh5ZWFyLnRvU3RyaW5nKCkpKSBjaGFuZ2VZZWFyKHllYXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgIHJldHVybiBiaW5kKGVsZW1lbnQsIGV2LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBlbGVtZW50LmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgc2VsZi5faGFuZGxlcnMucHVzaCh7XG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25DbGljayhoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgZXZ0LndoaWNoID09PSAxICYmIGhhbmRsZXIoZXZ0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdHJpZ2dlckNoYW5nZSgpIHtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy53cmFwKSB7XG4gICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtXCIgKyBldnQgKyBcIl1cIiksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICByZXR1cm4gYmluZChlbCwgXCJjbGlja1wiLCBzZWxmW2V2dF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSkge1xuICAgICAgICAgIHNldHVwTW9iaWxlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlYm91bmNlZFJlc2l6ZSA9IGRlYm91bmNlKG9uUmVzaXplLCA1MCk7XG4gICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSA9IGRlYm91bmNlKHRyaWdnZXJDaGFuZ2UsIERFQk9VTkNFRF9DSEFOR0VfTVMpO1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICYmICEvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIG9uTW91c2VPdmVyKGUudGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LmJvZHksIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYykgYmluZChzZWxmLl9pbnB1dCwgXCJrZXlkb3duXCIsIG9uS2V5RG93bik7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpIGJpbmQod2luZG93LCBcInJlc2l6ZVwiLCBkZWJvdW5jZWRSZXNpemUpO1xuICAgICAgICBpZiAod2luZG93Lm9udG91Y2hzdGFydCAhPT0gdW5kZWZpbmVkKSBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJ0b3VjaHN0YXJ0XCIsIGRvY3VtZW50Q2xpY2spO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJtb3VzZWRvd25cIiwgb25DbGljayhkb2N1bWVudENsaWNrKSk7XG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcImZvY3VzXCIsIGRvY3VtZW50Q2xpY2ssIHtcbiAgICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XG4gICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soc2VsZi5vcGVuKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2sob25Nb250aE5hdkNsaWNrKSk7XG4gICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBbXCJrZXl1cFwiLCBcImluY3JlbWVudFwiXSwgb25ZZWFySW5wdXQpO1xuICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGVjdERhdGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1pbnV0ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YXIgc2VsVGV4dCA9IGZ1bmN0aW9uIHNlbFRleHQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgW1wiaW5wdXRcIiwgXCJpbmNyZW1lbnRcIl0sIHVwZGF0ZVRpbWUpO1xuICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHRpbWVJbmNyZW1lbnQpKTtcbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgW1wiaW5wdXRcIiwgXCJpbmNyZW1lbnRcIl0sIHNlbGYuX2RlYm91bmNlZENoYW5nZSwge1xuICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJpbmQoW3NlbGYuaG91ckVsZW1lbnQsIHNlbGYubWludXRlRWxlbWVudF0sIFtcImZvY3VzXCIsIFwiY2xpY2tcIl0sIHNlbFRleHQpO1xuICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsIFwiZm9jdXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5hbVBNLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XG4gICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2UoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24ganVtcFRvRGF0ZShqdW1wRGF0ZSkge1xuICAgICAgICB2YXIganVtcFRvID0ganVtcERhdGUgIT09IHVuZGVmaW5lZCA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKSA6IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8IChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vdyA/IHNlbGYuY29uZmlnLm1pbkRhdGUgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUgPCBzZWxmLm5vdyA/IHNlbGYuY29uZmlnLm1heERhdGUgOiBzZWxmLm5vdyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoanVtcFRvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0ganVtcFRvLmdldE1vbnRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZS5tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsganVtcFRvO1xuICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkge1xuICAgICAgICBpZiAofmUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiYXJyb3dcIikpIGluY3JlbWVudE51bUlucHV0KGUsIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikgPyAxIDogLTEpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpbmNyZW1lbnROdW1JbnB1dChlLCBkZWx0YSwgaW5wdXRFbGVtKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlICYmIGUudGFyZ2V0O1xuICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dEVsZW0gfHwgdGFyZ2V0ICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KFwiaW5jcmVtZW50XCIpO1xuICAgICAgICBldmVudC5kZWx0YSA9IGRlbHRhO1xuICAgICAgICBpbnB1dCAmJiBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGQoKSB7XG4gICAgICAgIHZhciBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWNhbGVuZGFyXCIpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG5cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRNb250aE5hdigpKTtcbiAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1pbm5lckNvbnRhaW5lclwiKTtcblxuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy53ZWVrTnVtYmVycykge1xuICAgICAgICAgICAgdmFyIF9idWlsZFdlZWtzID0gYnVpbGRXZWVrcygpLFxuICAgICAgICAgICAgICAgIHdlZWtXcmFwcGVyID0gX2J1aWxkV2Vla3Mud2Vla1dyYXBwZXIsXG4gICAgICAgICAgICAgICAgd2Vla051bWJlcnMgPSBfYnVpbGRXZWVrcy53ZWVrTnVtYmVycztcblxuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XG4gICAgICAgICAgICBzZWxmLndlZWtOdW1iZXJzID0gd2Vla051bWJlcnM7XG4gICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5yQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1yQ29udGFpbmVyXCIpO1xuICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpO1xuXG4gICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItZGF5c1wiKTtcbiAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5yQ29udGFpbmVyKTtcbiAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzZWxmLmlubmVyQ29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRUaW1lKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyYW5nZU1vZGVcIiwgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhbmltYXRlXCIsIHNlbGYuY29uZmlnLmFuaW1hdGUgPT09IHRydWUpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcIm11bHRpTW9udGhcIiwgc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgdmFyIGN1c3RvbUFwcGVuZCA9IHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQgJiYgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lIHx8IHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChzZWxmLmNvbmZpZy5pbmxpbmUgPyBcImlubGluZVwiIDogXCJzdGF0aWNcIik7XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICBpZiAoIWN1c3RvbUFwcGVuZCAmJiBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSkgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIHNlbGYuX2lucHV0Lm5leHRTaWJsaW5nKTtlbHNlIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkKSBzZWxmLmNvbmZpZy5hcHBlbmRUby5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd3JhcHBlclwiKTtcbiAgICAgICAgICAgIGlmIChzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSkgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQgPyBzZWxmLmNvbmZpZy5hcHBlbmRUbyA6IHdpbmRvdy5kb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRGF5KGNsYXNzTmFtZSwgZGF0ZSwgZGF5TnVtYmVyLCBpKSB7XG4gICAgICAgIHZhciBkYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKGRhdGUsIHRydWUpLFxuICAgICAgICAgICAgZGF5RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWRheSBcIiArIGNsYXNzTmFtZSwgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKSk7XG4gICAgICAgIGRheUVsZW1lbnQuZGF0ZU9iaiA9IGRhdGU7XG4gICAgICAgIGRheUVsZW1lbnQuJGkgPSBpO1xuICAgICAgICBkYXlFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5mb3JtYXREYXRlKGRhdGUsIHNlbGYuY29uZmlnLmFyaWFEYXRlRm9ybWF0KSk7XG5cbiAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLm5vdykgPT09IDApIHtcbiAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvZGF5XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcbiAgICAgICAgICBkYXlFbGVtZW50LnRhYkluZGV4ID0gLTE7XG5cbiAgICAgICAgICBpZiAoaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gZGF5RWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHRydWUpID09PSAwKTtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJlbmRSYW5nZVwiLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0gJiYgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSwgdHJ1ZSkgPT09IDApO1xuICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09PSBcIm5leHRNb250aERheVwiKSBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycyAmJiBzZWxmLmNvbmZpZy5zaG93TW9udGhzID09PSAxICYmIGNsYXNzTmFtZSAhPT0gXCJwcmV2TW9udGhEYXlcIiAmJiBkYXlOdW1iZXIgJSA3ID09PSAxKSB7XG4gICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+XCIgKyBzZWxmLmNvbmZpZy5nZXRXZWVrKGRhdGUpICsgXCI8L3NwYW4+XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25EYXlDcmVhdGVcIiwgZGF5RWxlbWVudCk7XG4gICAgICAgIHJldHVybiBkYXlFbGVtZW50O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb2N1c09uRGF5KGN1cnJlbnRJbmQsIG9mZnNldCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gY3VycmVudEluZCAhPT0gdW5kZWZpbmVkID8gY3VycmVudEluZCA6IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuJGk7XG4gICAgICAgIHZhciBuZXdJbmRleCA9IChjdXJyZW50SW5kZXggfHwgMCkgKyBvZmZzZXQgfHwgMCxcbiAgICAgICAgICAgIHRhcmdldE5vZGUgPSBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKHNlbGYuZGF5cy5jaGlsZHJlbiwgZnVuY3Rpb24gKGMsIGkpIHtcbiAgICAgICAgICByZXR1cm4gaSA+PSBuZXdJbmRleCAmJiBjLmNsYXNzTmFtZS5pbmRleE9mKFwiTW9udGhEYXlcIikgPT09IC0xICYmIGlzRW5hYmxlZChjLmRhdGVPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGFyZ2V0Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGFyZ2V0Tm9kZS5mb2N1cygpO1xuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIG9uTW91c2VPdmVyKHRhcmdldE5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhEYXlzKHllYXIsIG1vbnRoKSB7XG4gICAgICAgIHZhciBmaXJzdE9mTW9udGggPSAobmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpIC0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrICsgNykgJSA3O1xuICAgICAgICB2YXIgcHJldk1vbnRoRGF5cyA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgoKG1vbnRoIC0gMSArIDEyKSAlIDEyKTtcbiAgICAgICAgdmFyIGRheXNJbk1vbnRoID0gc2VsZi51dGlscy5nZXREYXlzSW5Nb250aChtb250aCksXG4gICAgICAgICAgICBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLFxuICAgICAgICAgICAgZGF5SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcInByZXZNb250aERheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoZGF5TnVtYmVyID0gMTsgZGF5TnVtYmVyIDw9IGRheXNJbk1vbnRoOyBkYXlOdW1iZXIrKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiXCIsIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBkYXlOdW0gPSBkYXlzSW5Nb250aCArIDE7IGRheU51bSA8PSA0MiAtIGZpcnN0T2ZNb250aCAmJiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwibmV4dE1vbnRoRGF5XCIsIG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImRheUNvbnRhaW5lclwiKTtcbiAgICAgICAgZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRheXMpO1xuICAgICAgICByZXR1cm4gZGF5Q29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZERheXMoKSB7XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyTm9kZShzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycykgY2xlYXJOb2RlKHNlbGYud2Vla051bWJlcnMpO1xuICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykge1xuICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpO1xuICAgICAgICAgIGQuc2V0TW9udGgoc2VsZi5jdXJyZW50TW9udGggKyBpKTtcbiAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmRheXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgIHNlbGYuZGF5cyA9IHNlbGYuZGF5c0NvbnRhaW5lci5maXJzdENoaWxkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aFwiKTtcbiAgICAgICAgdmFyIG1vbnRoTmF2RnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICB2YXIgbW9udGhFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJjdXItbW9udGhcIik7XG4gICAgICAgIG1vbnRoRWxlbWVudC50aXRsZSA9IHNlbGYubDEwbi5zY3JvbGxUaXRsZTtcbiAgICAgICAgdmFyIHllYXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiY3VyLXllYXJcIiwge1xuICAgICAgICAgIHRhYmluZGV4OiBcIi0xXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICB5ZWFyRWxlbWVudC50aXRsZSA9IHNlbGYubDEwbi5zY3JvbGxUaXRsZTtcbiAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmwxMG4ueWVhckFyaWFMYWJlbCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKSB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHtcbiAgICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgeWVhckVsZW1lbnQuZGlzYWJsZWQgPSAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3VycmVudE1vbnRoID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jdXJyZW50LW1vbnRoXCIpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQobW9udGhFbGVtZW50KTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKHllYXJJbnB1dCk7XG4gICAgICAgIG1vbnRoTmF2RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoTmF2RnJhZ21lbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCxcbiAgICAgICAgICBtb250aEVsZW1lbnQ6IG1vbnRoRWxlbWVudFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoTmF2KCkge1xuICAgICAgICBzZWxmLm1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aHNcIik7XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXByZXYtbW9udGhcIik7XG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1uZXh0LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLm5leHRNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5uZXh0QXJyb3c7XG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5wcmV2TW9udGhOYXYpO1xuXG4gICAgICAgIGZvciAodmFyIG0gPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtLS07KSB7XG4gICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpO1xuICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLnB1c2gobW9udGgueWVhckVsZW1lbnQpO1xuICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50cy5wdXNoKG1vbnRoLm1vbnRoRWxlbWVudCk7XG4gICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChzZWxmLm5leHRNb250aE5hdik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3c7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLnByZXZNb250aE5hdiwgXCJkaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2wpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZU5leHRNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYubmV4dE1vbnRoTmF2LCBcImRpc2FibGVkXCIsIGJvb2wpO1xuICAgICAgICAgICAgICBzZWxmLl9faGlkZU5leHRNb250aEFycm93ID0gYm9vbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudCA9IHNlbGYueWVhckVsZW1lbnRzWzBdO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIHJldHVybiBzZWxmLm1vbnRoTmF2O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFRpbWUoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1RpbWVcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXRpbWVcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xuICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItaG91clwiKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9IGhvdXJJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1taW51dGVcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmNoaWxkTm9kZXNbMF07XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudGFiSW5kZXggPSBzZWxmLm1pbnV0ZUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldEhvdXJzKCkgOiBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBzZWxmLmNvbmZpZy5kZWZhdWx0SG91ciA6IG1pbGl0YXJ5MmFtcG0oc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0TWludXRlcygpIDogc2VsZi5jb25maWcuZGVmYXVsdE1pbnV0ZSk7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIiwgc2VsZi5jb25maWcubWludXRlSW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMFwiIDogXCIxXCIpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBcIjBcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBcIjU5XCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaG91cklucHV0KTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlcGFyYXRvcik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGltZTI0aHJcIik7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVNlY29uZHMpIHtcbiAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XG4gICAgICAgICAgdmFyIHNlY29uZElucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3Itc2Vjb25kXCIpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudCA9IHNlY29uZElucHV0LmNoaWxkTm9kZXNbMF07XG4gICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpIDogc2VsZi5jb25maWcuZGVmYXVsdFNlY29uZHMpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSk7XG4gICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiKSk7XG4gICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiKSk7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKSk7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlY29uZElucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcudGltZV8yNGhyKSB7XG4gICAgICAgICAgc2VsZi5hbVBNID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItYW0tcG1cIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYuaG91ckVsZW1lbnQudmFsdWUgOiBzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikgPiAxMSldKTtcbiAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7XG4gICAgICAgICAgc2VsZi5hbVBNLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuYW1QTSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZi50aW1lQ29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFdlZWtkYXlzKCkge1xuICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcikgc2VsZi53ZWVrZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5c1wiKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtkYXljb250YWluZXJcIik7XG4gICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVXZWVrZGF5cygpO1xuICAgICAgICByZXR1cm4gc2VsZi53ZWVrZGF5Q29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVXZWVrZGF5cygpIHtcbiAgICAgICAgdmFyIGZpcnN0RGF5T2ZXZWVrID0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrO1xuICAgICAgICB2YXIgd2Vla2RheXMgPSBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLmNvbmNhdCgpO1xuXG4gICAgICAgIGlmIChmaXJzdERheU9mV2VlayA+IDAgJiYgZmlyc3REYXlPZldlZWsgPCB3ZWVrZGF5cy5sZW5ndGgpIHtcbiAgICAgICAgICB3ZWVrZGF5cyA9IHdlZWtkYXlzLnNwbGljZShmaXJzdERheU9mV2Vlaywgd2Vla2RheXMubGVuZ3RoKS5jb25jYXQod2Vla2RheXMuc3BsaWNlKDAsIGZpcnN0RGF5T2ZXZWVrKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5jaGlsZHJlbltpXS5pbm5lckhUTUwgPSBcIlxcbiAgICAgIDxzcGFuIGNsYXNzPWZsYXRwaWNrci13ZWVrZGF5PlxcbiAgICAgICAgXCIgKyB3ZWVrZGF5cy5qb2luKFwiPC9zcGFuPjxzcGFuIGNsYXNzPWZsYXRwaWNrci13ZWVrZGF5PlwiKSArIFwiXFxuICAgICAgPC9zcGFuPlxcbiAgICAgIFwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla3MoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1dlZWtzXCIpO1xuICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWt3cmFwcGVyXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci13ZWVrZGF5XCIsIHNlbGYubDEwbi53ZWVrQWJicmV2aWF0aW9uKSk7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3NcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3ZWVrV3JhcHBlcjogd2Vla1dyYXBwZXIsXG4gICAgICAgICAgd2Vla051bWJlcnM6IHdlZWtOdW1iZXJzXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNoYW5nZU1vbnRoKHZhbHVlLCBpc19vZmZzZXQsIGZyb21fa2V5Ym9hcmQpIHtcbiAgICAgICAgaWYgKGlzX29mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgaXNfb2Zmc2V0ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcm9tX2tleWJvYXJkID09PSB2b2lkIDApIHtcbiAgICAgICAgICBmcm9tX2tleWJvYXJkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVsdGEgPSBpc19vZmZzZXQgPyB2YWx1ZSA6IHZhbHVlIC0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgIGlmIChkZWx0YSA8IDAgJiYgc2VsZi5faGlkZVByZXZNb250aEFycm93ID09PSB0cnVlIHx8IGRlbHRhID4gMCAmJiBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPT09IHRydWUpIHJldHVybjtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggKz0gZGVsdGE7XG5cbiAgICAgICAgaWYgKHNlbGYuY3VycmVudE1vbnRoIDwgMCB8fCBzZWxmLmN1cnJlbnRNb250aCA+IDExKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50WWVhciArPSBzZWxmLmN1cnJlbnRNb250aCA+IDExID8gMSA6IC0xO1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gKHNlbGYuY3VycmVudE1vbnRoICsgMTIpICUgMTI7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcblxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhcih0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSBzZWxmLmFsdElucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCkgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xuICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHVuZGVmaW5lZDtcbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkKSBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO2Vsc2Ugc2V0SG91cnMoc2VsZi5jb25maWcuZGVmYXVsdEhvdXIsIHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUsIHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuXG4gICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2xvc2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZyAhPT0gdW5kZWZpbmVkKSB0cmlnZ2VyRXZlbnQoXCJvbkRlc3Ryb3lcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuX2hhbmRsZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgIHZhciBoID0gc2VsZi5faGFuZGxlcnNbaV07XG4gICAgICAgICAgaC5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoaC5ldmVudCwgaC5oYW5kbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzID0gW107XG5cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcbiAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlKSBzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2VsZi5tb2JpbGVJbnB1dCk7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICYmIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZSkgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuXG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZSkgc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgIGRlbGV0ZSBzZWxmLmFsdElucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaW5wdXQpIHtcbiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBzZWxmLmlucHV0Ll90eXBlO1xuICAgICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZsYXRwaWNrci1pbnB1dFwiKTtcbiAgICAgICAgICBzZWxmLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgW1wiX3Nob3dUaW1lSW5wdXRcIiwgXCJsYXRlc3RTZWxlY3RlZERhdGVPYmpcIiwgXCJfaGlkZU5leHRNb250aEFycm93XCIsIFwiX2hpZGVQcmV2TW9udGhBcnJvd1wiLCBcIl9faGlkZU5leHRNb250aEFycm93XCIsIFwiX19oaWRlUHJldk1vbnRoQXJyb3dcIiwgXCJpc01vYmlsZVwiLCBcImlzT3BlblwiLCBcInNlbGVjdGVkRGF0ZUVsZW1cIiwgXCJtaW5EYXRlSGFzVGltZVwiLCBcIm1heERhdGVIYXNUaW1lXCIsIFwiZGF5c1wiLCBcImRheXNDb250YWluZXJcIiwgXCJfaW5wdXRcIiwgXCJfcG9zaXRpb25FbGVtZW50XCIsIFwiaW5uZXJDb250YWluZXJcIiwgXCJyQ29udGFpbmVyXCIsIFwibW9udGhOYXZcIiwgXCJ0b2RheURhdGVFbGVtXCIsIFwiY2FsZW5kYXJDb250YWluZXJcIiwgXCJ3ZWVrZGF5Q29udGFpbmVyXCIsIFwicHJldk1vbnRoTmF2XCIsIFwibmV4dE1vbnRoTmF2XCIsIFwiY3VycmVudE1vbnRoRWxlbWVudFwiLCBcImN1cnJlbnRZZWFyRWxlbWVudFwiLCBcIm5hdmlnYXRpb25DdXJyZW50TW9udGhcIiwgXCJzZWxlY3RlZERhdGVFbGVtXCIsIFwiY29uZmlnXCJdLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGZba107XG4gICAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFwcGVuZFRvICYmIHNlbGYuY29uZmlnLmFwcGVuZFRvLmNvbnRhaW5zKGVsZW0pKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgIHZhciBpc0NhbGVuZGFyRWxlbWVudCA9IGlzQ2FsZW5kYXJFbGVtKGUudGFyZ2V0KTtcbiAgICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8IGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0IHx8IHNlbGYuZWxlbWVudC5jb250YWlucyhlLnRhcmdldCkgfHwgZS5wYXRoICYmIGUucGF0aC5pbmRleE9mICYmICh+ZS5wYXRoLmluZGV4T2Yoc2VsZi5pbnB1dCkgfHwgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKTtcbiAgICAgICAgICB2YXIgbG9zdEZvY3VzID0gZS50eXBlID09PSBcImJsdXJcIiA/IGlzSW5wdXQgJiYgZS5yZWxhdGVkVGFyZ2V0ICYmICFpc0NhbGVuZGFyRWxlbShlLnJlbGF0ZWRUYXJnZXQpIDogIWlzSW5wdXQgJiYgIWlzQ2FsZW5kYXJFbGVtZW50O1xuICAgICAgICAgIHZhciBpc0lnbm9yZWQgPSAhc2VsZi5jb25maWcuaWdub3JlZEZvY3VzRWxlbWVudHMuc29tZShmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGxvc3RGb2N1cyAmJiBpc0lnbm9yZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VZZWFyKG5ld1llYXIpIHtcbiAgICAgICAgaWYgKCFuZXdZZWFyIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgbmV3WWVhciA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIG5ld1llYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHJldHVybjtcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLFxuICAgICAgICAgICAgaXNOZXdZZWFyID0gc2VsZi5jdXJyZW50WWVhciAhPT0gbmV3WWVhck51bTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IG5ld1llYXJOdW0gfHwgc2VsZi5jdXJyZW50WWVhcjtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1heChzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc05ld1llYXIpIHtcbiAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0VuYWJsZWQoZGF0ZSwgdGltZWxlc3MpIHtcbiAgICAgICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0ZVRvQ2hlY2sgPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCB1bmRlZmluZWQsIHRpbWVsZXNzKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgZGF0ZVRvQ2hlY2sgJiYgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5taW5EYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5taW5EYXRlSGFzVGltZSkgPCAwIHx8IHNlbGYuY29uZmlnLm1heERhdGUgJiYgZGF0ZVRvQ2hlY2sgJiYgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5tYXhEYXRlSGFzVGltZSkgPiAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoID09PSAwICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGRhdGVUb0NoZWNrID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGJvb2wgPSBzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoID4gMCxcbiAgICAgICAgICAgIGFycmF5ID0gYm9vbCA/IHNlbGYuY29uZmlnLmVuYWJsZSA6IHNlbGYuY29uZmlnLmRpc2FibGU7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGQ7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGQgPSBhcnJheVtpXTtcbiAgICAgICAgICBpZiAodHlwZW9mIGQgPT09IFwiZnVuY3Rpb25cIiAmJiBkKGRhdGVUb0NoZWNrKSkgcmV0dXJuIGJvb2w7ZWxzZSBpZiAoZCBpbnN0YW5jZW9mIERhdGUgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJiBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKSByZXR1cm4gYm9vbDtlbHNlIGlmICh0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIiAmJiBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gc2VsZi5wYXJzZURhdGUoZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpID8gYm9vbCA6ICFib29sO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGQgPT09IFwib2JqZWN0XCIgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJiBkLmZyb20gJiYgZC50byAmJiBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPj0gZC5mcm9tLmdldFRpbWUoKSAmJiBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPD0gZC50by5nZXRUaW1lKCkpIHJldHVybiBib29sO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFib29sO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcbiAgICAgICAgdmFyIGNhbGVuZGFyRWxlbSA9IGlzQ2FsZW5kYXJFbGVtKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIGFsbG93SW5wdXQgPSBzZWxmLmNvbmZpZy5hbGxvd0lucHV0O1xuICAgICAgICB2YXIgYWxsb3dLZXlkb3duID0gc2VsZi5pc09wZW4gJiYgKCFhbGxvd0lucHV0IHx8ICFpc0lucHV0KTtcbiAgICAgICAgdmFyIGFsbG93SW5saW5lS2V5ZG93biA9IHNlbGYuY29uZmlnLmlubGluZSAmJiBpc0lucHV0ICYmICFhbGxvd0lucHV0O1xuXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzICYmIGlzSW5wdXQpIHtcbiAgICAgICAgICBpZiAoYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdCA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICB9IGVsc2Ugc2VsZi5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJFbGVtIHx8IGFsbG93S2V5ZG93biB8fCBhbGxvd0lubGluZUtleWRvd24pIHtcbiAgICAgICAgICB2YXIgaXNUaW1lT2JqID0gISFzZWxmLnRpbWVDb250YWluZXIgJiYgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KTtcblxuICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICBpZiAoaXNUaW1lT2JqKSB1cGRhdGVWYWx1ZSgpO2Vsc2Ugc2VsZWN0RGF0ZShlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgY2FzZSA0NjpcbiAgICAgICAgICAgICAgaWYgKGlzSW5wdXQgJiYgIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBfZGVsdGEgPSBpc0lucHV0ID8gMCA6IGUua2V5Q29kZSA9PT0gMzkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgIGlmICghZS5jdHJsS2V5KSBmb2N1c09uRGF5KHVuZGVmaW5lZCwgX2RlbHRhKTtlbHNlIGNoYW5nZU1vbnRoKF9kZWx0YSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5rZXlDb2RlID09PSA0MCA/IDEgOiAtMTtcblxuICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICYmIGUudGFyZ2V0LiRpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1RpbWVPYmopIGZvY3VzT25EYXkoZS50YXJnZXQuJGksIGRlbHRhICogNyk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmIHNlbGYuaG91ckVsZW1lbnQpIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHNlbGYuaG91ckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQgJiYgKHNlbGYuc2Vjb25kRWxlbWVudCB8fCBzZWxmLmFtUE0pKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2VsZi5zZWNvbmRFbGVtZW50LmZvY3VzKCk7ZWxzZSBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHNlbGYuYW1QTS5mb2N1cygpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuYW1QTS5mb2N1cygpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApOlxuICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVswXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGUudGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVswXTtcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApOlxuICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGUudGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVsxXTtcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uS2V5RG93blwiLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbk1vdXNlT3ZlcihlbGVtKSB7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICE9PSAxIHx8ICFlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgfHwgZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaG92ZXJEYXRlID0gZWxlbS5kYXRlT2JqLmdldFRpbWUoKSxcbiAgICAgICAgICAgIGluaXRpYWxEYXRlID0gc2VsZi5wYXJzZURhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB1bmRlZmluZWQsIHRydWUpLmdldFRpbWUoKSxcbiAgICAgICAgICAgIHJhbmdlU3RhcnREYXRlID0gTWF0aC5taW4oaG92ZXJEYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpKSxcbiAgICAgICAgICAgIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSk7XG4gICAgICAgIHZhciBtb250aHMgPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW4sXG4gICAgICAgICAgICBmaXJzdERheSA9IG1vbnRoc1swXS5jaGlsZHJlblswXS5kYXRlT2JqLmdldFRpbWUoKSxcbiAgICAgICAgICAgIGxhc3REYXkgPSBtb250aHNbbW9udGhzLmxlbmd0aCAtIDFdLmxhc3RDaGlsZC5kYXRlT2JqLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIGNvbnRhaW5zRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1pblJhbmdlID0gMCxcbiAgICAgICAgICAgIG1heFJhbmdlID0gMDtcblxuICAgICAgICBmb3IgKHZhciB0ID0gZmlyc3REYXk7IHQgPCBsYXN0RGF5OyB0ICs9IGR1cmF0aW9uLkRBWSkge1xuICAgICAgICAgIGlmICghaXNFbmFibGVkKG5ldyBEYXRlKHQpLCB0cnVlKSkge1xuICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9IGNvbnRhaW5zRGlzYWJsZWQgfHwgdCA+IHJhbmdlU3RhcnREYXRlICYmIHQgPCByYW5nZUVuZERhdGU7XG4gICAgICAgICAgICBpZiAodCA8IGluaXRpYWxEYXRlICYmICghbWluUmFuZ2UgfHwgdCA+IG1pblJhbmdlKSkgbWluUmFuZ2UgPSB0O2Vsc2UgaWYgKHQgPiBpbml0aWFsRGF0ZSAmJiAoIW1heFJhbmdlIHx8IHQgPCBtYXhSYW5nZSkpIG1heFJhbmdlID0gdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IG0rKykge1xuICAgICAgICAgIHZhciBtb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttXTtcbiAgICAgICAgICB2YXIgcHJldk1vbnRoID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuW20gLSAxXTtcblxuICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGksIGwpIHtcbiAgICAgICAgICAgIHZhciBkYXlFbGVtID0gbW9udGguY2hpbGRyZW5baV0sXG4gICAgICAgICAgICAgICAgZGF0ZSA9IGRheUVsZW0uZGF0ZU9iajtcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBvdXRPZlJhbmdlID0gbWluUmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA8IG1pblJhbmdlIHx8IG1heFJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPiBtYXhSYW5nZTtcblxuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcbiAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgW1wiaW5SYW5nZVwiLCBcInN0YXJ0UmFuZ2VcIiwgXCJlbmRSYW5nZVwiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSkgcmV0dXJuIFwiY29udGludWVcIjtcblxuICAgICAgICAgICAgW1wic3RhcnRSYW5nZVwiLCBcImluUmFuZ2VcIiwgXCJlbmRSYW5nZVwiLCBcIm5vdEFsbG93ZWRcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChob3ZlckRhdGUgPCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpID8gXCJzdGFydFJhbmdlXCIgOiBcImVuZFJhbmdlXCIpO1xuXG4gICAgICAgICAgICBpZiAobW9udGguY29udGFpbnMoZWxlbSkgfHwgIShtID4gMCAmJiBwcmV2TW9udGggJiYgcHJldk1vbnRoLmxhc3RDaGlsZC5kYXRlT2JqLmdldFRpbWUoKSA+PSB0aW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO2Vsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICBpZiAodGltZXN0YW1wID49IG1pblJhbmdlICYmIChtYXhSYW5nZSA9PT0gMCB8fCB0aW1lc3RhbXAgPD0gbWF4UmFuZ2UpICYmIGlzQmV0d2Vlbih0aW1lc3RhbXAsIGluaXRpYWxEYXRlLCBob3ZlckRhdGUpKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG1vbnRoLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcChpLCBsKTtcblxuICAgICAgICAgICAgaWYgKF9yZXQgPT09IFwiY29udGludWVcIikgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLnN0YXRpYyAmJiAhc2VsZi5jb25maWcuaW5saW5lKSBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9wZW4oZSwgcG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChwb3NpdGlvbkVsZW1lbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHBvc2l0aW9uRWxlbWVudCA9IHNlbGYuX2lucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS50YXJnZXQgJiYgZS50YXJnZXQuYmx1cigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuX2lucHV0LmRpc2FibGVkIHx8IHNlbGYuY29uZmlnLmlubGluZSkgcmV0dXJuO1xuICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuO1xuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XG5cbiAgICAgICAgaWYgKCF3YXNPcGVuKSB7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcblxuICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgcG9zaXRpb25DYWxlbmRhcihwb3NpdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUgJiYgc2VsZi5jb25maWcubm9DYWxlbmRhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkID8gbmV3IERhdGUoc2VsZi5jb25maWcubWluRGF0ZS5nZXRUaW1lKCkpIDogbmV3IERhdGUoKS5zZXRIb3VycyhzZWxmLmNvbmZpZy5kZWZhdWx0SG91ciwgc2VsZi5jb25maWcuZGVmYXVsdE1pbnV0ZSwgc2VsZi5jb25maWcuZGVmYXVsdFNlY29uZHMsIDApLCBmYWxzZSk7XG4gICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5ob3VyRWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWluTWF4RGF0ZVNldHRlcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgIHZhciBkYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyB0eXBlICsgXCJEYXRlXCJdID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyAodHlwZSA9PT0gXCJtaW5cIiA/IFwibWF4XCIgOiBcIm1pblwiKSArIFwiRGF0ZVwiXTtcblxuICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGZbdHlwZSA9PT0gXCJtaW5cIiA/IFwibWluRGF0ZUhhc1RpbWVcIiA6IFwibWF4RGF0ZUhhc1RpbWVcIl0gPSBkYXRlT2JqLmdldEhvdXJzKCkgPiAwIHx8IGRhdGVPYmouZ2V0TWludXRlcygpID4gMCB8fCBkYXRlT2JqLmdldFNlY29uZHMoKSA+IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcykge1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gc2VsZi5zZWxlY3RlZERhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gaXNFbmFibGVkKGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggJiYgdHlwZSA9PT0gXCJtaW5cIikgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgcmVkcmF3KCk7XG4gICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudFt0eXBlXSA9IGRhdGVPYmouZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO2Vsc2Ugc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPSAhIWludmVyc2VEYXRlT2JqICYmIGRhdGVPYmogIT09IHVuZGVmaW5lZCAmJiBpbnZlcnNlRGF0ZU9iai5nZXRGdWxsWWVhcigpID09PSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXJzZUNvbmZpZygpIHtcbiAgICAgICAgdmFyIGJvb2xPcHRzID0gW1wid3JhcFwiLCBcIndlZWtOdW1iZXJzXCIsIFwiYWxsb3dJbnB1dFwiLCBcImNsaWNrT3BlbnNcIiwgXCJ0aW1lXzI0aHJcIiwgXCJlbmFibGVUaW1lXCIsIFwibm9DYWxlbmRhclwiLCBcImFsdElucHV0XCIsIFwic2hvcnRoYW5kQ3VycmVudE1vbnRoXCIsIFwiaW5saW5lXCIsIFwic3RhdGljXCIsIFwiZW5hYmxlU2Vjb25kc1wiLCBcImRpc2FibGVNb2JpbGVcIl07XG4gICAgICAgIHZhciBob29rcyA9IFtcIm9uQ2hhbmdlXCIsIFwib25DbG9zZVwiLCBcIm9uRGF5Q3JlYXRlXCIsIFwib25EZXN0cm95XCIsIFwib25LZXlEb3duXCIsIFwib25Nb250aENoYW5nZVwiLCBcIm9uT3BlblwiLCBcIm9uUGFyc2VDb25maWdcIiwgXCJvblJlYWR5XCIsIFwib25WYWx1ZVVwZGF0ZVwiLCBcIm9uWWVhckNoYW5nZVwiLCBcIm9uUHJlQ2FsZW5kYXJQb3NpdGlvblwiXTtcbiAgICAgICAgdmFyIHVzZXJDb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XG4gICAgICAgIHZhciBmb3JtYXRzJCQxID0ge307XG4gICAgICAgIHNlbGYuY29uZmlnLnBhcnNlRGF0ZSA9IHVzZXJDb25maWcucGFyc2VEYXRlO1xuICAgICAgICBzZWxmLmNvbmZpZy5mb3JtYXREYXRlID0gdXNlckNvbmZpZy5mb3JtYXREYXRlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwiZW5hYmxlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fZW5hYmxlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLl9lbmFibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImRpc2FibGVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLl9kaXNhYmxlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLl9kaXNhYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmRhdGVGb3JtYXQgJiYgdXNlckNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgZm9ybWF0cyQkMS5kYXRlRm9ybWF0ID0gdXNlckNvbmZpZy5ub0NhbGVuZGFyID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKSA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgKyBcIiBIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VyQ29uZmlnLmFsdElucHV0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSAmJiAhdXNlckNvbmZpZy5hbHRGb3JtYXQpIHtcbiAgICAgICAgICBmb3JtYXRzJCQxLmFsdEZvcm1hdCA9IHVzZXJDb25maWcubm9DYWxlbmRhciA/IFwiaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6UyBLXCIgOiBcIiBLXCIpIDogZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0ICsgKFwiIGg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpICsgXCIgS1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5EYXRlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWluRGF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1pblwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heERhdGVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWF4XCIpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBtaW5NYXhUaW1lU2V0dGVyID0gZnVuY3Rpb24gbWluTWF4VGltZVNldHRlcih0eXBlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW3R5cGUgPT09IFwibWluXCIgPyBcIl9taW5UaW1lXCIgOiBcIl9tYXhUaW1lXCJdID0gc2VsZi5wYXJzZURhdGUodmFsLCBcIkg6aVwiKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5UaW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWluVGltZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1pblwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heFRpbWVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhUaW1lO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWF4XCIpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBmb3JtYXRzJCQxLCB1c2VyQ29uZmlnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2xPcHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID0gc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSB0cnVlIHx8IHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaSA9IGhvb2tzLmxlbmd0aDsgX2ktLTspIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWdbaG9va3NbX2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tob29rc1tfaV1dID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va3NbX2ldXSB8fCBbXSkubWFwKGJpbmRUb0luc3RhbmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmNvbmZpZy5lbmFibGVUaW1lID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHNlbGYuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgIHZhciBwbHVnaW5Db25mID0gc2VsZi5jb25maWcucGx1Z2luc1tfaTJdKHNlbGYpIHx8IHt9O1xuXG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHBsdWdpbkNvbmYpIHtcbiAgICAgICAgICAgIGlmICh+aG9va3MuaW5kZXhPZihrZXkpKSB7XG4gICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pLm1hcChiaW5kVG9JbnN0YW5jZSkuY29uY2F0KHNlbGYuY29uZmlnW2tleV0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXNlckNvbmZpZ1trZXldID09PSBcInVuZGVmaW5lZFwiKSBzZWxmLmNvbmZpZ1trZXldID0gcGx1Z2luQ29uZltrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaXNNb2JpbGUgPSAhc2VsZi5jb25maWcuZGlzYWJsZU1vYmlsZSAmJiAhc2VsZi5jb25maWcuaW5saW5lICYmIHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoICYmICFzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoICYmICFzZWxmLmNvbmZpZy53ZWVrTnVtYmVycyAmJiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUGFyc2VDb25maWdcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwTG9jYWxlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgZmxhdHBpY2tyLmwxMG5zW3NlbGYuY29uZmlnLmxvY2FsZV0gPT09IFwidW5kZWZpbmVkXCIpIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJmbGF0cGlja3I6IGludmFsaWQgbG9jYWxlIFwiICsgc2VsZi5jb25maWcubG9jYWxlKSk7XG4gICAgICAgIHNlbGYubDEwbiA9IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0LCB0eXBlb2Ygc2VsZi5jb25maWcubG9jYWxlID09PSBcIm9iamVjdFwiID8gc2VsZi5jb25maWcubG9jYWxlIDogc2VsZi5jb25maWcubG9jYWxlICE9PSBcImRlZmF1bHRcIiA/IGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdIDogdW5kZWZpbmVkKTtcbiAgICAgICAgdG9rZW5SZWdleC5LID0gXCIoXCIgKyBzZWxmLmwxMG4uYW1QTVswXSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMV0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzBdLnRvTG93ZXJDYXNlKCkgKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdLnRvTG93ZXJDYXNlKCkgKyBcIilcIjtcbiAgICAgICAgc2VsZi5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcG9zaXRpb25DYWxlbmRhcihjdXN0b21Qb3NpdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XG4gICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50O1xuICAgICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jaGlsZHJlbiwgZnVuY3Rpb24gKGFjYywgY2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gYWNjICsgY2hpbGQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9LCAwKSxcbiAgICAgICAgICAgIGNhbGVuZGFyV2lkdGggPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgY29uZmlnUG9zID0gc2VsZi5jb25maWcucG9zaXRpb24sXG4gICAgICAgICAgICBpbnB1dEJvdW5kcyA9IHBvc2l0aW9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIGRpc3RhbmNlRnJvbUJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGlucHV0Qm91bmRzLmJvdHRvbSxcbiAgICAgICAgICAgIHNob3dPblRvcCA9IGNvbmZpZ1BvcyA9PT0gXCJhYm92ZVwiIHx8IGNvbmZpZ1BvcyAhPT0gXCJiZWxvd1wiICYmIGRpc3RhbmNlRnJvbUJvdHRvbSA8IGNhbGVuZGFySGVpZ2h0ICYmIGlucHV0Qm91bmRzLnRvcCA+IGNhbGVuZGFySGVpZ2h0O1xuICAgICAgICB2YXIgdG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0ICsgaW5wdXRCb3VuZHMudG9wICsgKCFzaG93T25Ub3AgPyBwb3NpdGlvbkVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMiA6IC1jYWxlbmRhckhlaWdodCAtIDIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93VG9wXCIsICFzaG93T25Ub3ApO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93Qm90dG9tXCIsIHNob3dPblRvcCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpIHJldHVybjtcbiAgICAgICAgdmFyIGxlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5sZWZ0O1xuICAgICAgICB2YXIgcmlnaHQgPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIGlucHV0Qm91bmRzLnJpZ2h0O1xuICAgICAgICB2YXIgcmlnaHRNb3N0ID0gbGVmdCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgcmlnaHRNb3N0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykgcmV0dXJuO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcblxuICAgICAgICBpZiAoIXJpZ2h0TW9zdCkge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZWRyYXcoKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyIHx8IHNlbGYuaXNNb2JpbGUpIHJldHVybjtcbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9jdXNBbmRDbG9zZSgpIHtcbiAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcblxuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgIT09IC0xIHx8IG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2xvc2UsIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZWxlY3REYXRlKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHZhciBpc1NlbGVjdGFibGUgPSBmdW5jdGlvbiBpc1NlbGVjdGFibGUoZGF5KSB7XG4gICAgICAgICAgcmV0dXJuIGRheS5jbGFzc0xpc3QgJiYgZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgJiYgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKSAmJiAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHQgPSBmaW5kUGFyZW50KGUudGFyZ2V0LCBpc1NlbGVjdGFibGUpO1xuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIHZhciB0YXJnZXQgPSB0O1xuICAgICAgICB2YXIgc2VsZWN0ZWREYXRlID0gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0YXJnZXQuZGF0ZU9iai5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSAoc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPCBzZWxmLmN1cnJlbnRNb250aCB8fCBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKSA+IHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmIHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIjtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gdGFyZ2V0O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIikgc2VsZi5zZWxlY3RlZERhdGVzID0gW3NlbGVjdGVkRGF0ZV07ZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSBpc0RhdGVTZWxlY3RlZChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4KSBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtlbHNlIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIpIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgIT09IDApIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcblxuICAgICAgICBpZiAoc2hvdWxkQ2hhbmdlTW9udGgpIHtcbiAgICAgICAgICB2YXIgaXNOZXdZZWFyID0gc2VsZi5jdXJyZW50WWVhciAhPT0gc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZWN0ZWREYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgaWYgKGlzTmV3WWVhcikgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLm1pbkRhdGVIYXNUaW1lICYmIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgJiYgY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5jb25maWcubWluRGF0ZSkgPT09IDApIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubWluRGF0ZSk7XG4gICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5zaG93VGltZUlucHV0ID0gdHJ1ZTtcbiAgICAgICAgfSwgNTApO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXIodGFyZ2V0KTtcbiAgICAgICAgICB9IGVsc2UgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzaG91bGRDaGFuZ2VNb250aCAmJiBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgJiYgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSkgZm9jdXNPbkRheSh0YXJnZXQuJGksIDApO2Vsc2Ugc2VsZi5zZWxlY3RlZERhdGVFbGVtICYmIHNlbGYuc2VsZWN0ZWREYXRlRWxlbS5mb2N1cygpO1xuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgIH0sIDQ1MSk7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmNsb3NlT25TZWxlY3QpIHtcbiAgICAgICAgICB2YXIgc2luZ2xlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcblxuICAgICAgICAgIGlmIChzaW5nbGUgfHwgcmFuZ2UpIHtcbiAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBDQUxMQkFDS1MgPSB7XG4gICAgICAgIGxvY2FsZTogW3NldHVwTG9jYWxlXVxuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9wdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2Ygb3B0aW9uID09PSBcIm9iamVjdFwiKSBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBvcHRpb24pO2Vsc2Uge1xuICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSB2YWx1ZTtcbiAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZCkgQ0FMTEJBQ0tTW29wdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHgoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBqdW1wVG9EYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkRGF0ZShpbnB1dERhdGUsIGZvcm1hdCkge1xuICAgICAgICB2YXIgZGF0ZXMgPSBbXTtcbiAgICAgICAgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIEFycmF5KSBkYXRlcyA9IGlucHV0RGF0ZS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZURhdGUoZCwgZm9ybWF0KTtcbiAgICAgICAgfSk7ZWxzZSBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgaW5wdXREYXRlID09PSBcIm51bWJlclwiKSBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO2Vsc2UgaWYgKHR5cGVvZiBpbnB1dERhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzaW5nbGVcIjpcbiAgICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJtdWx0aXBsZVwiOlxuICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5zcGxpdChzZWxmLmNvbmZpZy5jb25qdW5jdGlvbikubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInJhbmdlXCI6XG4gICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlLnNwbGl0KHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcikubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Ugc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBzdXBwbGllZDogXCIgKyBKU09OLnN0cmluZ2lmeShpbnB1dERhdGUpKSk7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IGRhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkIGluc3RhbmNlb2YgRGF0ZSAmJiBpc0VuYWJsZWQoZCwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikgc2VsZi5zZWxlY3RlZERhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgdHJpZ2dlckNoYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBmb3JtYXQgPSBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRTZWxlY3RlZERhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDA7XG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBqdW1wVG9EYXRlKCk7XG4gICAgICAgIHNldEhvdXJzRnJvbURhdGUoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKSB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VEYXRlUnVsZXMoYXJyKSB7XG4gICAgICAgIHJldHVybiBhcnIubWFwKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBydWxlID09PSBcIm51bWJlclwiIHx8IHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZURhdGUocnVsZSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGUgJiYgdHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCIgJiYgcnVsZS5mcm9tICYmIHJ1bGUudG8pIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tOiBzZWxmLnBhcnNlRGF0ZShydWxlLmZyb20sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICB0bzogc2VsZi5wYXJzZURhdGUocnVsZS50bywgdW5kZWZpbmVkKVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cERhdGVzKCkge1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5ub3cgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5ub3cpIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBwcmVsb2FkZWREYXRlID0gc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHwgc2VsZi5pbnB1dC52YWx1ZTtcbiAgICAgICAgaWYgKHByZWxvYWRlZERhdGUpIHNldFNlbGVjdGVkRGF0ZShwcmVsb2FkZWREYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgdmFyIGluaXRpYWxEYXRlID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDAgPyBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0gOiBzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpID4gc2VsZi5ub3cuZ2V0VGltZSgpID8gc2VsZi5jb25maWcubWluRGF0ZSA6IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRUaW1lKCkgPCBzZWxmLm5vdy5nZXRUaW1lKCkgPyBzZWxmLmNvbmZpZy5tYXhEYXRlIDogc2VsZi5ub3c7XG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBpbml0aWFsRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGluaXRpYWxEYXRlLmdldE1vbnRoKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF07XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQpIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCkgc2VsZi5jb25maWcubWF4VGltZSA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm1heFRpbWUsIFwiSDppXCIpO1xuICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lID0gISFzZWxmLmNvbmZpZy5taW5EYXRlICYmIChzZWxmLmNvbmZpZy5taW5EYXRlLmdldEhvdXJzKCkgPiAwIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpID4gMCB8fCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFNlY29uZHMoKSA+IDApO1xuICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lID0gISFzZWxmLmNvbmZpZy5tYXhEYXRlICYmIChzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCkgPiAwIHx8IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TWludXRlcygpID4gMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFNlY29uZHMoKSA+IDApO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJzaG93VGltZUlucHV0XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9zaG93VGltZUlucHV0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbCkge1xuICAgICAgICAgICAgc2VsZi5fc2hvd1RpbWVJbnB1dCA9IGJvb2w7XG4gICAgICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJzaG93VGltZUlucHV0XCIsIGJvb2wpO1xuICAgICAgICAgICAgc2VsZi5pc09wZW4gJiYgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkge1xuICAgICAgICBzZWxmLmlucHV0ID0gc2VsZi5jb25maWcud3JhcCA/IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWlucHV0XVwiKSA6IGVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7XG4gICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZWxlbWVudCBzcGVjaWZpZWRcIikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaW5wdXQuX3R5cGUgPSBzZWxmLmlucHV0LnR5cGU7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5hZGQoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcbiAgICAgICAgICBzZWxmLmFsdElucHV0ID0gY3JlYXRlRWxlbWVudChzZWxmLmlucHV0Lm5vZGVOYW1lLCBzZWxmLmlucHV0LmNsYXNzTmFtZSArIFwiIFwiICsgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyk7XG4gICAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmFsdElucHV0O1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQuZGlzYWJsZWQgPSBzZWxmLmlucHV0LmRpc2FibGVkO1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudGFiSW5kZXggPSBzZWxmLmlucHV0LnRhYkluZGV4O1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgc2VsZi5pbnB1dC5wYXJlbnROb2RlKSBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSBzZWxmLl9pbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICBzZWxmLl9wb3NpdGlvbkVsZW1lbnQgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5faW5wdXQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwTW9iaWxlKCkge1xuICAgICAgICB2YXIgaW5wdXRUeXBlID0gc2VsZi5jb25maWcuZW5hYmxlVGltZSA/IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPyBcInRpbWVcIiA6IFwiZGF0ZXRpbWUtbG9jYWxcIiA6IFwiZGF0ZVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHNlbGYuaW5wdXQuY2xhc3NOYW1lICsgXCIgZmxhdHBpY2tyLW1vYmlsZVwiKTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5zdGVwID0gc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpIHx8IFwiYW55XCI7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQudGFiSW5kZXggPSAxO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnR5cGUgPSBpbnB1dFR5cGU7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQuZGlzYWJsZWQgPSBzZWxmLmlucHV0LmRpc2FibGVkO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgIHNlbGYubW9iaWxlRm9ybWF0U3RyID0gaW5wdXRUeXBlID09PSBcImRhdGV0aW1lLWxvY2FsXCIgPyBcIlktbS1kXFxcXFRIOmk6U1wiIDogaW5wdXRUeXBlID09PSBcImRhdGVcIiA/IFwiWS1tLWRcIiA6IFwiSDppOlNcIjtcblxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRlZmF1bHRWYWx1ZSA9IHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSkgc2VsZi5tb2JpbGVJbnB1dC5taW4gPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgXCJZLW0tZFwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHNlbGYubW9iaWxlSW5wdXQubWF4ID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1heERhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5wYXJlbnROb2RlKSBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYubW9iaWxlSW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGNhdGNoIChfYSkge31cblxuICAgICAgICBiaW5kKHNlbGYubW9iaWxlSW5wdXQsIFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgc2VsZi5zZXREYXRlKGUudGFyZ2V0LnZhbHVlLCBmYWxzZSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2xvc2VcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgIGlmIChzZWxmLmlzT3BlbikgcmV0dXJuIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgc2VsZi5vcGVuKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChldmVudCwgZGF0YSkge1xuICAgICAgICB2YXIgaG9va3MgPSBzZWxmLmNvbmZpZ1tldmVudF07XG5cbiAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGhvb2tzW2ldKHNlbGYuc2VsZWN0ZWREYXRlcywgc2VsZi5pbnB1dC52YWx1ZSwgc2VsZiwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50ID09PSBcIm9uQ2hhbmdlXCIpIHtcbiAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xuICAgICAgICAgIHNlbGYuaW5wdXQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudChcImlucHV0XCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVFdmVudChuYW1lKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICAgICAgZS5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0RhdGVTZWxlY3RlZChkYXRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxmLnNlbGVjdGVkRGF0ZXNbaV0sIGRhdGUpID09PSAwKSByZXR1cm4gXCJcIiArIGk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdKSA+PSAwICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDA7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyIHx8IHNlbGYuaXNNb2JpbGUgfHwgIXNlbGYubW9udGhOYXYpIHJldHVybjtcbiAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoeWVhckVsZW1lbnQsIGkpIHtcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKTtcbiAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzW2ldLnRleHRDb250ZW50ID0gbW9udGhUb1N0cihkLmdldE1vbnRoKCksIHNlbGYuY29uZmlnLnNob3J0aGFuZEN1cnJlbnRNb250aCwgc2VsZi5sMTBuKSArIFwiIFwiO1xuICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPSBzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiYgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKSA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPSBzZWxmLmNvbmZpZy5tYXhEYXRlICE9PSB1bmRlZmluZWQgJiYgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSA/IHNlbGYuY3VycmVudE1vbnRoICsgMSA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcblxuICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlRm9ybWF0U3RyKSB7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQgPyBzZWxmLmZvcm1hdERhdGUoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYubW9iaWxlRm9ybWF0U3RyKSA6IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgam9pbkNoYXIgPSBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgPyBzZWxmLmNvbmZpZy5jb25qdW5jdGlvbiA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcjtcbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5tYXAoZnVuY3Rpb24gKGRPYmopIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICB9KS5qb2luKGpvaW5DaGFyKTtcblxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5tYXAoZnVuY3Rpb24gKGRPYmopIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZvcm1hdERhdGUoZE9iaiwgc2VsZi5jb25maWcuYWx0Rm9ybWF0KTtcbiAgICAgICAgICB9KS5qb2luKGpvaW5DaGFyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSkgdHJpZ2dlckV2ZW50KFwib25WYWx1ZVVwZGF0ZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25Nb250aE5hdkNsaWNrKGUpIHtcbiAgICAgICAgdmFyIGlzUHJldk1vbnRoID0gc2VsZi5wcmV2TW9udGhOYXYuY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhlLnRhcmdldCk7XG5cbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKSB7XG4gICAgICAgICAgY2hhbmdlTW9udGgoaXNQcmV2TW9udGggPyAtMSA6IDEpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYueWVhckVsZW1lbnRzLmluZGV4T2YoZS50YXJnZXQpID49IDApIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS50YXJnZXQuc2VsZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSkge1xuICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dEb3duXCIpKSB7XG4gICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aW1lV3JhcHBlcihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGlzS2V5RG93biA9IGUudHlwZSA9PT0gXCJrZXlkb3duXCIsXG4gICAgICAgICAgICBpbnB1dCA9IGUudGFyZ2V0O1xuXG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWluXCIpKSxcbiAgICAgICAgICAgIG1heCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIikpLFxuICAgICAgICAgICAgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIpKSxcbiAgICAgICAgICAgIGN1clZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSxcbiAgICAgICAgICAgIGRlbHRhID0gZS5kZWx0YSB8fCAoaXNLZXlEb3duID8gZS53aGljaCA9PT0gMzggPyAxIDogLTEgOiAwKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gY3VyVmFsdWUgKyBzdGVwICogZGVsdGE7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICB2YXIgaXNIb3VyRWxlbSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50LFxuICAgICAgICAgICAgICBpc01pbnV0ZUVsZW0gPSBpbnB1dCA9PT0gc2VsZi5taW51dGVFbGVtZW50O1xuXG4gICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IG1heCArIG5ld1ZhbHVlICsgaW50KCFpc0hvdXJFbGVtKSArIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcbiAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgLTEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQgPyBuZXdWYWx1ZSAtIG1heCAtIGludCghc2VsZi5hbVBNKSA6IG1pbjtcbiAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuYW1QTSAmJiBpc0hvdXJFbGVtICYmIChzdGVwID09PSAxID8gbmV3VmFsdWUgKyBjdXJWYWx1ZSA9PT0gMjMgOiBNYXRoLmFicyhuZXdWYWx1ZSAtIGN1clZhbHVlKSA+IHN0ZXApKSB7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbml0KCk7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcbiAgICAgIHZhciBub2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcbiAgICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1mcC1vbWl0XCIpICE9PSBudWxsKSBjb250aW51ZTtcblxuICAgICAgICAgIGlmIChub2RlLl9mbGF0cGlja3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyLmRlc3Ryb3koKTtcblxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IEZsYXRwaWNrckluc3RhbmNlKG5vZGUsIGNvbmZpZyB8fCB7fSk7XG4gICAgICAgICAgaW5zdGFuY2VzLnB1c2gobm9kZS5fZmxhdHBpY2tyKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbmNlcy5sZW5ndGggPT09IDEgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgICB9O1xuXG4gICAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihbdGhpc10sIGNvbmZpZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBmbGF0cGlja3IgPSBmdW5jdGlvbiBmbGF0cGlja3Ioc2VsZWN0b3IsIGNvbmZpZykge1xuICAgICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgTm9kZUxpc3QpIHJldHVybiBfZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpO2Vsc2UgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xuICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcbiAgICB9O1xuXG4gICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSBkZWZhdWx0cztcbiAgICBmbGF0cGlja3IubDEwbnMgPSB7XG4gICAgICBlbjogT2JqZWN0LmFzc2lnbih7fSwgZW5nbGlzaCksXG4gICAgICBkZWZhdWx0OiBPYmplY3QuYXNzaWduKHt9LCBlbmdsaXNoKVxuICAgIH07XG5cbiAgICBmbGF0cGlja3IubG9jYWxpemUgPSBmdW5jdGlvbiAobDEwbikge1xuICAgICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgbDEwbik7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5zZXREZWZhdWx0cyA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcsIGNvbmZpZyk7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTtcbiAgICBmbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pO1xuICAgIGZsYXRwaWNrci5jb21wYXJlRGF0ZXMgPSBjb21wYXJlRGF0ZXM7XG5cbiAgICBpZiAodHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgalF1ZXJ5LmZuLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IodGhpcywgY29uZmlnKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRGF0ZS5wcm90b3R5cGUuZnBfaW5jciA9IGZ1bmN0aW9uIChkYXlzKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLCB0aGlzLmdldE1vbnRoKCksIHRoaXMuZ2V0RGF0ZSgpICsgKHR5cGVvZiBkYXlzID09PSBcInN0cmluZ1wiID8gcGFyc2VJbnQoZGF5cywgMTApIDogZGF5cykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gZmxhdHBpY2tyO1xuXG59KSkpO1xuXG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZ2FsbGVyeVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnktd3JhcHBlcicpO1xuXG4gIGlmICghZ2FsbGVyeVNlY3Rpb25zKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGdhbGxlcnlTZWN0aW9ucywgZnVuY3Rpb24gKGdhbGxlcnkpIHtcbiAgICB2YXIgYWRkSW1hZ2UgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZ2FsbGVyeS1pbWFnZXMnKTtcbiAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGdhbGxlcnksICcuaW1hZ2UtZ2FsbGVyeS1oaWRkZW4nKTtcblxuICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlSW1hZ2UpO1xuICAgIHZhciBkcmFnID0gKDAsIF91dGlsaXRpZXMuZHJhZ0l0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25EcmFnSW1hZ2UpO1xuICAgIHZhciBMaXN0ID0gKDAsIF9saXN0Mi5kZWZhdWx0KShnYWxsZXJ5LCB7XG4gICAgICBsaXN0OiAnLmdhbGxlcnktaW1hZ2VzJyxcbiAgICAgIG9uRHJhZzogZHJhZyxcbiAgICAgIG9uUmVtb3ZlOiByZW1vdmUsXG4gICAgICBsaXN0VGVtcGxhdGU6IGltYWdlSXRlbVxuICAgIH0pO1xuXG4gICAgdmFyIG1lZGlhRnJhbWUgPSB3cC5tZWRpYSh7XG4gICAgICB0aXRsZTogJ0Nob29zZSBNZWRpYScsXG4gICAgICBidXR0b246IHtcbiAgICAgICAgdGV4dDogJ1VzZSBTZWxlY3RlZCBNZWRpYSdcbiAgICAgIH0sXG4gICAgICBtdWx0aXBsZTogdHJ1ZVxuICAgIH0pO1xuXG4gICAgYWRkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBtZWRpYUZyYW1lLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIG1lZGlhRnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhdHRhY2htZW50cyA9IG1lZGlhRnJhbWUuc3RhdGUoKS5nZXQoJ3NlbGVjdGlvbicpLnRvSlNPTigpO1xuXG4gICAgICBhdHRhY2htZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRhY2htZW50KSB7XG4gICAgICAgIExpc3QuYWRkKGF0dGFjaG1lbnQpO1xuICAgICAgICBIaWRkZW4uYWRkKGF0dGFjaG1lbnQuaWQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc2VyaWFsaXplZElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcmlhbGl6ZWRJbnB1dCk7XG5cbnZhciBfdXRpbGl0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGltYWdlSXRlbSA9IGZ1bmN0aW9uIGltYWdlSXRlbShpbWFnZSkge1xuICByZXR1cm4gJzxsaSBjbGFzcz1cImdhbGxlcnktaW1hZ2UtaXRlbVwiPjxzcGFuIGNsYXNzPVwiZ2FsbGVyeS1pYW1nZS1pZFwiPicgKyBpbWFnZS5pZCArICc8L3NwYW4+PGltZyBzcmM9XCInICsgaW1hZ2UudXJsICsgJ1wiIGNsYXNzPVwiZ2FsbGVyeS1pbWFnZVwiLz48c3Bhbj48c3ZnIGNsYXNzPVwicmVtb3ZlLWdhbGxlcnktaW1hZ2VcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XFxuICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XFxuPC9zdmc+PC9zcGFuPjwvbGk+Jztcbn07XG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdGFibGVMaXN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZS1saXN0Jyk7XG5cbiAgaWYgKCF0YWJsZUxpc3RzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKHRhYmxlTGlzdHMsIGZ1bmN0aW9uICh0YWJsZUxpc3QpIHtcbiAgICB2YXIgYWRkUm93ID0gdGFibGVMaXN0LnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LWFkZCcpO1xuICAgIHZhciBIaWRkZW4gPSAoMCwgX3NlcmlhbGl6ZWRJbnB1dDIuZGVmYXVsdCkodGFibGVMaXN0LCAnLnRhYmxlLWxpc3QtaGlkZGVuJyk7XG4gICAgdmFyIHJlbW92ZSA9ICgwLCBfdXRpbGl0aWVzLnJlbW92ZUl0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25SZW1vdmVUYWJsZSk7XG4gICAgdmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdUYWJsZSk7XG4gICAgdmFyIExpc3QgPSAoMCwgX2xpc3QyLmRlZmF1bHQpKHRhYmxlTGlzdCwge1xuICAgICAgbGlzdDogJy50YWJsZS1saXN0LWxpc3QnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogdGFibGVJdGVtXG4gICAgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGV4dC1saXN0LXdyYXBwZXInKTtcbiAgICB2YXIga2V5ID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1rZXknKTtcbiAgICB2YXIgdmFsdWUgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LXZhbHVlJyk7XG5cbiAgICBhZGRSb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHZhciByb3dEYXRhID0ge1xuICAgICAgICBrZXk6IGtleS52YWx1ZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlXG4gICAgICB9O1xuXG4gICAgICBMaXN0LmFkZChyb3dEYXRhKTtcbiAgICAgIEhpZGRlbi5hZGQocm93RGF0YSk7XG5cbiAgICAgIGtleS52YWx1ZSA9ICcnO1xuICAgICAgdmFsdWUudmFsdWUgPSAnJztcbiAgICB9KTtcbiAgfSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfc2VyaWFsaXplZElucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VyaWFsaXplZElucHV0KTtcblxudmFyIF91dGlsaXRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgdGFibGVJdGVtID0gZnVuY3Rpb24gdGFibGVJdGVtKHJvd0RhdGEpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbSB0YWJsZS1saXN0LWl0ZW1cIj5cXG4gICAgPHNwYW4gY2xhc3M9XCJ0YWJsZS1saXN0LWtleVwiPicgKyByb3dEYXRhLmtleSArICc8L3NwYW4+XFxuICAgIDxzcGFuIGNsYXNzPVwidGFibGUtbGlzdC12YWx1ZVwiPicgKyByb3dEYXRhLnZhbHVlICsgJzwvc3Bhbj5cXG4gICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XFxuICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XFxuICAgIDwvc3ZnPlxcbjwvbGk+Jztcbn07XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXguYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNzRjMTA2NDYwMzk3ZTA1ZWFkYzIiLCJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGRyYWd1bGEgZnJvbSAnZHJhZ3VsYSc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCBwYXJlbnQsIGFyZ3MgKSB7XG4gICAgY29uc3QgbGlzdCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGFyZ3MubGlzdCk7XG5cbiAgICByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgYXJncy5vbkRyYWcpO1xuICAgIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzKGxpc3QsIGFyZ3Mub25SZW1vdmUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgaHRtbCA9IGFyZ3MubGlzdFRlbXBsYXRlKCB2YWx1ZSApO1xuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTtcblxuICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZCggbGlzdEl0ZW0gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgcmVnaXN0ZXJSZW1vdmVFdmVudHMgPSAobGlzdCwgb25SZW1vdmUpID0+IHtcbiAgICBjb25zdCBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG5cbiAgICBsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gKCdzdmcnID09PSBlLnRhcmdldC50YWdOYW1lKSA/IGUudGFyZ2V0IDogZS50YXJnZXQuY2xvc2VzdCgnc3ZnJyk7XG5cbiAgICAgICAgaWYgKCAnc3ZnJyA9PT0gdGFyZ2V0LnRhZ05hbWUgKSB7XG4gICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKCBsaXN0SXRlbSApO1xuICAgICAgICAgICAgb25SZW1vdmUoIHZhbHVlICk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBsaXN0SXRlbXM7XG59XG5cbmNvbnN0IHJlZ2lzdGVyRHJhZ0V2ZW50cyA9IChsaXN0LCBjYWxsYmFjaykgPT4ge1xuICAgIGNvbnN0IGRyYWtlID0gZHJhZ3VsYShbbGlzdF0pO1xuXG4gICAgZHJha2Uub24oJ2RyYWdlbmQnLCAoZWwpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICBjYWxsYmFjayhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbGlzdC5qcyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHBhcmVudCwgaGlkZGVuSW5wdXQpIHtcbiAgY29uc3QgaGlkZGVuRWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihoaWRkZW5JbnB1dCk7XG5cbiAgY29uc3QgZ2V0Q3VycmVudFZhbHVlID0gKCkgPT5cbiAgICBoaWRkZW5FbC52YWx1ZSA/IEpTT04ucGFyc2UoaGlkZGVuRWwudmFsdWUpIDogW107XG5cbiAgY29uc3QgYWRkVmFsdWUgPSB2YWx1ZSA9PiB7XG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5jb25jYXQodmFsdWUpO1xuICB9O1xuXG4gIGNvbnN0IHJlbW92ZVZhbHVlID0gKHZhbHVlLCBvblJlbW92ZSkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgIHJldHVybiBvblJlbW92ZShjdXJyZW50VmFsdWUsIHZhbHVlKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFkZDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoYWRkVmFsdWUodmFsdWUpKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24odmFsdWUsIG9uUmVtb3ZlKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkpO1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWVzKTtcbiAgICB9LFxuICB9O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc2VyaWFsaXplZC1pbnB1dC5qcyIsImV4cG9ydCBjb25zdCByZW1vdmVJdGVtcyA9IChIaWRkZW4sIG9uUmVtb3ZlKSA9PiB7XG4gIHJldHVybiB2YWx1ZSA9PiB7XG4gICAgSGlkZGVuLnJlbW92ZSh2YWx1ZSwgb25SZW1vdmUpO1xuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGRyYWdJdGVtcyA9IChIaWRkZW4sIG9uRHJhZykgPT4ge1xuICByZXR1cm4gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICAgIGNvbnN0IHZhbHVlcyA9IG9uRHJhZyhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIEhpZGRlbi51cGRhdGUodmFsdWVzKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRyYWdPYmplY3QgPSAobGlzdCwgbGlzdEl0ZW1zKSA9PiB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChcbiAgICBsaXN0SXRlbXMsXG4gICAgKGFjYywgbGlzdEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0ge1xuICAgICAgICBpZDogbGlzdEl0ZW0uZGF0YXNldC5pZCxcbiAgICAgICAgdGl0bGU6IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRyYWdUZXh0ID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdEl0ZW1zLFxuICAgIChhY2MsIGxpc3RJdGVtKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uRHJhZ0ltYWdlID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdEl0ZW1zLFxuICAgIChhY2MsIGxpc3RJdGVtKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwpO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZU9iamVjdCA9IChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGN1cnJlbnQgPT4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uUmVtb3ZlVGV4dCA9IChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGN1cnJlbnQgPT4gY3VycmVudCAhPT0gbmV3VmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uUmVtb3ZlSW1hZ2UgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihjdXJyZW50ID0+IGN1cnJlbnQgIT09IHBhcnNlSW50KG5ld1ZhbHVlKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnVGFibGUgPSAobGlzdCwgbGlzdEl0ZW1zKSA9PiB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChcbiAgICBsaXN0SXRlbXMsXG4gICAgKGFjYywgbGlzdEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGtleSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LWtleScpLmlubmVySFRNTDtcbiAgICAgIGNvbnN0IHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3QtdmFsdWUnKS5pbm5lckhUTUw7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChbeyBrZXk6IGtleSwgdmFsdWU6IHZhbHVlIH1dKTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uUmVtb3ZlVGFibGUgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihjdXJyZW50ID0+IGN1cnJlbnQua2V5ICE9PSBuZXdWYWx1ZSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdXRpbGl0aWVzLmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYXV0b3N1Z2dlc3QsIGVuZHBvaW50LCBvblNlbGVjdCwgb25FbXB0eSkge1xuICBpZiAoIWF1dG9zdWdnZXN0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IHhociA9IGZhbHNlO1xuXG4gIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZSA9PiB7XG4gICAgaWYgKDAgPT09IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCAmJiBvbkVtcHR5KSB7XG4gICAgICBvbkVtcHR5KCk7XG4gICAgfVxuXG4gICAgaWYgKDMgPiBlLnRhcmdldC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhdXRvc3VnZ2VzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgeGhyID0gZ2V0T3B0aW9ucyh4aHIsIHVwZGF0ZU9wdGlvbnMsIGF1dG9zdWdnZXN0LCBlbmRwb2ludCk7XG4gIH0pO1xuICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGUgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gb25BdXRvU3VnZ2VzdElucHV0KGUpO1xuXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBvblNlbGVjdCh2YWx1ZSwgYXV0b3N1Z2dlc3QpO1xuICAgIH1cbiAgfSk7XG59XG5cbmNvbnN0IG9uQXV0b1N1Z2dlc3RJbnB1dCA9IGUgPT4ge1xuICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xuICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXQudmFsdWU7XG4gIGNvbnN0IGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gIGNvbnN0IGxpc3RPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpLmNoaWxkTm9kZXM7XG5cbiAgY29uc3QgbWF0Y2ggPSBbXS5yZWR1Y2UuY2FsbChcbiAgICBsaXN0T3B0aW9ucyxcbiAgICAoYWNjLCBvcHRpb24pID0+IHtcbiAgICAgIGlmIChvcHRpb24udmFsdWUgPT09IGlucHV0VmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoe1xuICAgICAgICAgIGlkOiBvcHRpb24uZGF0YXNldC5pZCxcbiAgICAgICAgICB0aXRsZTogb3B0aW9uLnZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcblxuICByZXR1cm4gMCA9PT0gbWF0Y2gubGVuZ3RoID8gZmFsc2UgOiBtYXRjaFswXTtcbn07XG5cbmNvbnN0IGdldE9wdGlvbnMgPSAoeGhyLCBjYWxsYmFjaywgaW5wdXQsIGVuZHBvaW50KSA9PiB7XG4gIGNvbnN0IHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG4gIGNvbnN0IHVybCA9IGVuZHBvaW50ICsgcXVlcnk7XG5cbiAgaWYgKHhocikge1xuICAgIHhoci5hYm9ydCgpO1xuICB9XG5cbiAgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgJ2xvYWQnLFxuICAgIGV2dCA9PiB7XG4gICAgICBjYWxsYmFjayhmYWxzZSwgZXZ0KTtcbiAgICB9LFxuICAgIGZhbHNlLFxuICApO1xuXG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG4gICAgICBjYWxsYmFjayhmYWxzZSwgeyByZXN1bHRzOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh4aHIucmVzcG9uc2VUZXh0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgICBjYWxsYmFjayhcbiAgICAgICAgICB7IG1lc3NhZ2U6IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCksIGlucHV0OiBpbnB1dCB9LFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAnZXJyb3InLFxuICAgIGV2dCA9PiB7XG4gICAgICBjYWxsYmFjayhldnQsIGZhbHNlKTtcbiAgICB9LFxuICAgIGZhbHNlLFxuICApO1xuXG4gIHhoci5hZGRFdmVudExpc3RlbmVyKFxuICAgICdhYm9ydCcsXG4gICAgZXZ0ID0+IHtcbiAgICAgIGNhbGxiYWNrKHRydWUsIGZhbHNlKTtcbiAgICB9LFxuICAgIGZhbHNlLFxuICApO1xuXG4gIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gIHhoci5zZW5kKCk7XG5cbiAgcmV0dXJuIHhocjtcbn07XG5cbmNvbnN0IHVwZGF0ZU9wdGlvbnMgPSAoZXJyb3IsIHJlc3BvbnNlKSA9PiB7XG4gIGlmIChlcnJvcikge1xuICAgIGlmICh0cnVlID09PSBlcnJvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGVycm9yLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICB9XG5cbiAgaWYgKHJlc3BvbnNlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHJlc3BvbnNlLnJlc3VsdHMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCk7XG4gIH1cbn07XG5cbmNvbnN0IGNyZWF0ZU9wdGlvbnMgPSAocmVzdWx0cywgaW5wdXQpID0+IHtcbiAgY29uc3QgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgY29uc3QgZGF0YWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0TmFtZSk7XG5cbiAgY29uc3QgbmV3T3B0aW9ucyA9IHJlc3VsdHMucmVkdWNlKChhY2MsIHJlc3VsdCkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGNyZWF0ZU9wdGlvbihyZXN1bHQpO1xuICAgIHJldHVybiBhY2MuY29uY2F0KG9wdGlvbik7XG4gIH0sICcnKTtcblxuICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gIGRhdGFsaXN0LmlubmVySFRNTCA9IG5ld09wdGlvbnM7XG59O1xuXG5jb25zdCBjcmVhdGVPcHRpb24gPSB2YWx1ZSA9PiB7XG4gIGlmICh2YWx1ZS50aXRsZSkge1xuICAgIHJldHVybiBgPG9wdGlvbiBkYXRhLWlkPSR7dmFsdWUuaWR9IHZhbHVlPVwiJHt2YWx1ZS50aXRsZS5yZW5kZXJlZH1cIj5gO1xuICB9XG5cbiAgaWYgKHZhbHVlLm5hbWUpIHtcbiAgICByZXR1cm4gYDxvcHRpb24gZGF0YS1pZD0ke3ZhbHVlLmlkfSB2YWx1ZT1cIiR7dmFsdWUubmFtZX1cIj5gO1xuICB9XG59O1xuXG5jb25zdCBpc0pTT04gPSBzdHIgPT4ge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IGJ1aWxkUXVlcnkgPSB2YWx1ZSA9PiB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9Mb3dlckNhc2UoKSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QuanMiLCJpbXBvcnQgYmFzZUNzcyBmcm9tICcuLi9jc3MvaW5kZXguY3NzJztcbmltcG9ydCB0ZXh0TGlzdCBmcm9tICcuL3RleHQtbGlzdCc7XG5pbXBvcnQgYXV0b0xpc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdC1saXN0JztcbmltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgYXV0b0l0ZW0gZnJvbSAnLi9hdXRvLWl0ZW0nO1xuaW1wb3J0IGltYWdlVXBsb2FkcyBmcm9tICcuL2ltYWdlLXVwbG9hZHMnO1xuaW1wb3J0IGRhdGVwaWNrZXIgZnJvbSAnLi9kYXRlcGlja2VyJztcbmltcG9ydCBnYWxsZXJ5IGZyb20gJy4vZ2FsbGVyeSc7XG5pbXBvcnQgdGFibGVMaXN0IGZyb20gJy4vdGFibGUtbGlzdCc7XG5cbmNvbnN0IGNyZWF0ZVRleHRJdGVtID0gdmFsdWUgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCI+XG4gICAgICAgIDxzcGFuPiR7dmFsdWV9PC9zcGFuPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuY29uc3QgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gdmFsdWUgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCIgZGF0YS1pZD1cIiR7dmFsdWUuaWR9XCI+XG4gICAgICAgIDxzcGFuPiR7dmFsdWUudGl0bGV9PC9zcGFuPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICBpbWFnZVVwbG9hZHMoKTtcbiAgdGV4dExpc3Qoe1xuICAgIHBhcmVudDogJy50ZXh0LWxpc3QnLFxuICAgIGJ1dHRvbjogJy50ZXh0LWxpc3QtYWRkJyxcbiAgICBsaXN0OiAnLnRleHQtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcudGV4dC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVUZXh0SXRlbSxcbiAgfSk7XG5cbiAgYXV0b0xpc3Qoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgICBpbnB1dDogJ2F1dG9zdWdnZXN0LWxpc3QtaW5wdXQnLFxuICAgIGxpc3Q6ICcuYXV0b3N1Z2dlc3QtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtLFxuICB9KTtcblxuICBhdXRvSXRlbSh7XG4gICAgcGFyZW50OiAnLmF1dG9zdWdnZXN0LXdyYXBwZXInLFxuICAgIGlucHV0OiAnLmF1dG9zdWdnZXN0LWlucHV0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtaGlkZGVuJyxcbiAgfSk7XG5cbiAgZGF0ZXBpY2tlcigpO1xuICBnYWxsZXJ5KCk7XG4gIHRhYmxlTGlzdCgpO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC5qcyIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQgeyByZW1vdmVJdGVtcywgZHJhZ0l0ZW1zLCBvbkRyYWdUZXh0LCBvblJlbW92ZVRleHQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCBhcmdzICkge1xuICAgIGNvbnN0IGxpc3RGaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICAgIGlmICggISBsaXN0RmllbGRzICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgW10uZm9yRWFjaC5jYWxsKCBsaXN0RmllbGRzLCAoIGxpc3RGaWVsZCApID0+IHtcbiAgICAgICAgY29uc3QgdGV4dElucHV0ID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoICdpbnB1dFt0eXBlPXRleHRdJyApO1xuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvciggYXJncy5idXR0b24gKTtcbiAgICAgICAgY29uc3QgSGlkZGVuID0gaGlkZGVuKCBsaXN0RmllbGQsIGFyZ3MuaGlkZGVuICk7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKCBIaWRkZW4sIG9uUmVtb3ZlVGV4dCApO1xuICAgICAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKCBIaWRkZW4sIG9uRHJhZ1RleHQgKTtcbiAgICAgICAgY29uc3QgTGlzdCA9IGxpc3QoIGxpc3RGaWVsZCwgT2JqZWN0LmFzc2lnbiggYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmV9ICkgKTtcblxuICAgICAgICBsaXN0RmllbGQuYWRkRXZlbnRMaXN0ZW5lciggJ2tleXByZXNzJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICggMTMgPT09IGUua2V5Q29kZSApIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgTGlzdC5hZGQoIHRleHRJbnB1dC52YWx1ZSApO1xuICAgICAgICAgICAgICAgIEhpZGRlbi5hZGQoIHRleHRJbnB1dC52YWx1ZSApO1xuICAgICAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ICk7XG5cbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBMaXN0LmFkZCggdGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIEhpZGRlbi5hZGQoIHRleHRJbnB1dC52YWx1ZSApO1xuICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIH0gKTtcblxuICAgIH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3RleHQtbGlzdC5qcyIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVtaXR0ZXIgPSByZXF1aXJlKCdjb250cmEvZW1pdHRlcicpO1xudmFyIGNyb3NzdmVudCA9IHJlcXVpcmUoJ2Nyb3NzdmVudCcpO1xudmFyIGNsYXNzZXMgPSByZXF1aXJlKCcuL2NsYXNzZXMnKTtcbnZhciBkb2MgPSBkb2N1bWVudDtcbnZhciBkb2N1bWVudEVsZW1lbnQgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG5mdW5jdGlvbiBkcmFndWxhIChpbml0aWFsQ29udGFpbmVycywgb3B0aW9ucykge1xuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgaWYgKGxlbiA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGluaXRpYWxDb250YWluZXJzKSA9PT0gZmFsc2UpIHtcbiAgICBvcHRpb25zID0gaW5pdGlhbENvbnRhaW5lcnM7XG4gICAgaW5pdGlhbENvbnRhaW5lcnMgPSBbXTtcbiAgfVxuICB2YXIgX21pcnJvcjsgLy8gbWlycm9yIGltYWdlXG4gIHZhciBfc291cmNlOyAvLyBzb3VyY2UgY29udGFpbmVyXG4gIHZhciBfaXRlbTsgLy8gaXRlbSBiZWluZyBkcmFnZ2VkXG4gIHZhciBfb2Zmc2V0WDsgLy8gcmVmZXJlbmNlIHhcbiAgdmFyIF9vZmZzZXRZOyAvLyByZWZlcmVuY2UgeVxuICB2YXIgX21vdmVYOyAvLyByZWZlcmVuY2UgbW92ZSB4XG4gIHZhciBfbW92ZVk7IC8vIHJlZmVyZW5jZSBtb3ZlIHlcbiAgdmFyIF9pbml0aWFsU2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgd2hlbiBncmFiYmVkXG4gIHZhciBfY3VycmVudFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIG5vd1xuICB2YXIgX2NvcHk7IC8vIGl0ZW0gdXNlZCBmb3IgY29weWluZ1xuICB2YXIgX3JlbmRlclRpbWVyOyAvLyB0aW1lciBmb3Igc2V0VGltZW91dCByZW5kZXJNaXJyb3JJbWFnZVxuICB2YXIgX2xhc3REcm9wVGFyZ2V0ID0gbnVsbDsgLy8gbGFzdCBjb250YWluZXIgaXRlbSB3YXMgb3ZlclxuICB2YXIgX2dyYWJiZWQ7IC8vIGhvbGRzIG1vdXNlZG93biBjb250ZXh0IHVudGlsIGZpcnN0IG1vdXNlbW92ZVxuXG4gIHZhciBvID0gb3B0aW9ucyB8fCB7fTtcbiAgaWYgKG8ubW92ZXMgPT09IHZvaWQgMCkgeyBvLm1vdmVzID0gYWx3YXlzOyB9XG4gIGlmIChvLmFjY2VwdHMgPT09IHZvaWQgMCkgeyBvLmFjY2VwdHMgPSBhbHdheXM7IH1cbiAgaWYgKG8uaW52YWxpZCA9PT0gdm9pZCAwKSB7IG8uaW52YWxpZCA9IGludmFsaWRUYXJnZXQ7IH1cbiAgaWYgKG8uY29udGFpbmVycyA9PT0gdm9pZCAwKSB7IG8uY29udGFpbmVycyA9IGluaXRpYWxDb250YWluZXJzIHx8IFtdOyB9XG4gIGlmIChvLmlzQ29udGFpbmVyID09PSB2b2lkIDApIHsgby5pc0NvbnRhaW5lciA9IG5ldmVyOyB9XG4gIGlmIChvLmNvcHkgPT09IHZvaWQgMCkgeyBvLmNvcHkgPSBmYWxzZTsgfVxuICBpZiAoby5jb3B5U29ydFNvdXJjZSA9PT0gdm9pZCAwKSB7IG8uY29weVNvcnRTb3VyY2UgPSBmYWxzZTsgfVxuICBpZiAoby5yZXZlcnRPblNwaWxsID09PSB2b2lkIDApIHsgby5yZXZlcnRPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmVtb3ZlT25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLmRpcmVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uZGlyZWN0aW9uID0gJ3ZlcnRpY2FsJzsgfVxuICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9IHRydWU7IH1cbiAgaWYgKG8ubWlycm9yQ29udGFpbmVyID09PSB2b2lkIDApIHsgby5taXJyb3JDb250YWluZXIgPSBkb2MuYm9keTsgfVxuXG4gIHZhciBkcmFrZSA9IGVtaXR0ZXIoe1xuICAgIGNvbnRhaW5lcnM6IG8uY29udGFpbmVycyxcbiAgICBzdGFydDogbWFudWFsU3RhcnQsXG4gICAgZW5kOiBlbmQsXG4gICAgY2FuY2VsOiBjYW5jZWwsXG4gICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgZGVzdHJveTogZGVzdHJveSxcbiAgICBjYW5Nb3ZlOiBjYW5Nb3ZlLFxuICAgIGRyYWdnaW5nOiBmYWxzZVxuICB9KTtcblxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB0cnVlKSB7XG4gICAgZHJha2Uub24oJ292ZXInLCBzcGlsbE92ZXIpLm9uKCdvdXQnLCBzcGlsbE91dCk7XG4gIH1cblxuICBldmVudHMoKTtcblxuICByZXR1cm4gZHJha2U7XG5cbiAgZnVuY3Rpb24gaXNDb250YWluZXIgKGVsKSB7XG4gICAgcmV0dXJuIGRyYWtlLmNvbnRhaW5lcnMuaW5kZXhPZihlbCkgIT09IC0xIHx8IG8uaXNDb250YWluZXIoZWwpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vkb3duJywgZ3JhYik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZXVwJywgcmVsZWFzZSk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHVhbE1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlbW92ZScsIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gbW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIGNyb3NzdmVudFtvcF0oZG9jdW1lbnRFbGVtZW50LCAnc2VsZWN0c3RhcnQnLCBwcmV2ZW50R3JhYmJlZCk7IC8vIElFOFxuICAgIGNyb3NzdmVudFtvcF0oZG9jdW1lbnRFbGVtZW50LCAnY2xpY2snLCBwcmV2ZW50R3JhYmJlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZXN0cm95ICgpIHtcbiAgICBldmVudHModHJ1ZSk7XG4gICAgcmVsZWFzZSh7fSk7XG4gIH1cblxuICBmdW5jdGlvbiBwcmV2ZW50R3JhYmJlZCAoZSkge1xuICAgIGlmIChfZ3JhYmJlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdyYWIgKGUpIHtcbiAgICBfbW92ZVggPSBlLmNsaWVudFg7XG4gICAgX21vdmVZID0gZS5jbGllbnRZO1xuXG4gICAgdmFyIGlnbm9yZSA9IHdoaWNoTW91c2VCdXR0b24oZSkgIT09IDEgfHwgZS5tZXRhS2V5IHx8IGUuY3RybEtleTtcbiAgICBpZiAoaWdub3JlKSB7XG4gICAgICByZXR1cm47IC8vIHdlIG9ubHkgY2FyZSBhYm91dCBob25lc3QtdG8tZ29kIGxlZnQgY2xpY2tzIGFuZCB0b3VjaCBldmVudHNcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBlLnRhcmdldDtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmICghY29udGV4dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfZ3JhYmJlZCA9IGNvbnRleHQ7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHMoKTtcbiAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgICAgaWYgKGlzSW5wdXQoaXRlbSkpIHsgLy8gc2VlIGFsc286IGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yMDhcbiAgICAgICAgaXRlbS5mb2N1cygpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTc2XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNTVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydEJlY2F1c2VNb3VzZU1vdmVkIChlKSB7XG4gICAgaWYgKCFfZ3JhYmJlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2hpY2hNb3VzZUJ1dHRvbihlKSA9PT0gMCkge1xuICAgICAgcmVsZWFzZSh7fSk7XG4gICAgICByZXR1cm47IC8vIHdoZW4gdGV4dCBpcyBzZWxlY3RlZCBvbiBhbiBpbnB1dCBhbmQgdGhlbiBkcmFnZ2VkLCBtb3VzZXVwIGRvZXNuJ3QgZmlyZS4gdGhpcyBpcyBvdXIgb25seSBob3BlXG4gICAgfVxuICAgIC8vIHRydXRoeSBjaGVjayBmaXhlcyAjMjM5LCBlcXVhbGl0eSBmaXhlcyAjMjA3XG4gICAgaWYgKGUuY2xpZW50WCAhPT0gdm9pZCAwICYmIGUuY2xpZW50WCA9PT0gX21vdmVYICYmIGUuY2xpZW50WSAhPT0gdm9pZCAwICYmIGUuY2xpZW50WSA9PT0gX21vdmVZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbikge1xuICAgICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBkb2MuZWxlbWVudEZyb21Qb2ludChjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIGlmIChpc0lucHV0KGVsZW1lbnRCZWhpbmRDdXJzb3IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZ3JhYmJlZCA9IF9ncmFiYmVkOyAvLyBjYWxsIHRvIGVuZCgpIHVuc2V0cyBfZ3JhYmJlZFxuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cygpO1xuICAgIGVuZCgpO1xuICAgIHN0YXJ0KGdyYWJiZWQpO1xuXG4gICAgdmFyIG9mZnNldCA9IGdldE9mZnNldChfaXRlbSk7XG4gICAgX29mZnNldFggPSBnZXRDb29yZCgncGFnZVgnLCBlKSAtIG9mZnNldC5sZWZ0O1xuICAgIF9vZmZzZXRZID0gZ2V0Q29vcmQoJ3BhZ2VZJywgZSkgLSBvZmZzZXQudG9wO1xuXG4gICAgY2xhc3Nlcy5hZGQoX2NvcHkgfHwgX2l0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgcmVuZGVyTWlycm9ySW1hZ2UoKTtcbiAgICBkcmFnKGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuU3RhcnQgKGl0ZW0pIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcgJiYgX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNDb250YWluZXIoaXRlbSkpIHtcbiAgICAgIHJldHVybjsgLy8gZG9uJ3QgZHJhZyBjb250YWluZXIgaXRzZWxmXG4gICAgfVxuICAgIHZhciBoYW5kbGUgPSBpdGVtO1xuICAgIHdoaWxlIChnZXRQYXJlbnQoaXRlbSkgJiYgaXNDb250YWluZXIoZ2V0UGFyZW50KGl0ZW0pKSA9PT0gZmFsc2UpIHtcbiAgICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpdGVtID0gZ2V0UGFyZW50KGl0ZW0pOyAvLyBkcmFnIHRhcmdldCBzaG91bGQgYmUgYSB0b3AgZWxlbWVudFxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbW92YWJsZSA9IG8ubW92ZXMoaXRlbSwgc291cmNlLCBoYW5kbGUsIG5leHRFbChpdGVtKSk7XG4gICAgaWYgKCFtb3ZhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW06IGl0ZW0sXG4gICAgICBzb3VyY2U6IHNvdXJjZVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBjYW5Nb3ZlIChpdGVtKSB7XG4gICAgcmV0dXJuICEhY2FuU3RhcnQoaXRlbSk7XG4gIH1cblxuICBmdW5jdGlvbiBtYW51YWxTdGFydCAoaXRlbSkge1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgIHN0YXJ0KGNvbnRleHQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0IChjb250ZXh0KSB7XG4gICAgaWYgKGlzQ29weShjb250ZXh0Lml0ZW0sIGNvbnRleHQuc291cmNlKSkge1xuICAgICAgX2NvcHkgPSBjb250ZXh0Lml0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX2NvcHksIGNvbnRleHQuaXRlbSwgJ2NvcHknKTtcbiAgICB9XG5cbiAgICBfc291cmNlID0gY29udGV4dC5zb3VyY2U7XG4gICAgX2l0ZW0gPSBjb250ZXh0Lml0ZW07XG4gICAgX2luaXRpYWxTaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nID0gbmV4dEVsKGNvbnRleHQuaXRlbSk7XG5cbiAgICBkcmFrZS5kcmFnZ2luZyA9IHRydWU7XG4gICAgZHJha2UuZW1pdCgnZHJhZycsIF9pdGVtLCBfc291cmNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGludmFsaWRUYXJnZXQgKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZCAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIGRyb3AoaXRlbSwgZ2V0UGFyZW50KGl0ZW0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuZ3JhYiAoKSB7XG4gICAgX2dyYWJiZWQgPSBmYWxzZTtcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHModHJ1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZWxlYXNlIChlKSB7XG4gICAgdW5ncmFiKCk7XG5cbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgZHJvcFRhcmdldCA9IGZpbmREcm9wVGFyZ2V0KGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIGlmIChkcm9wVGFyZ2V0ICYmICgoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSkgfHwgKCFfY29weSB8fCBkcm9wVGFyZ2V0ICE9PSBfc291cmNlKSkpIHtcbiAgICAgIGRyb3AoaXRlbSwgZHJvcFRhcmdldCk7XG4gICAgfSBlbHNlIGlmIChvLnJlbW92ZU9uU3BpbGwpIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW5jZWwoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcm9wIChpdGVtLCB0YXJnZXQpIHtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlICYmIHRhcmdldCA9PT0gX3NvdXJjZSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9pdGVtKTtcbiAgICB9XG4gICAgaWYgKGlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQpKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHRhcmdldCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoX2NvcHkgPyAnY2FuY2VsJyA6ICdyZW1vdmUnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UpO1xuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCAocmV2ZXJ0KSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmV2ZXJ0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwID8gcmV2ZXJ0IDogby5yZXZlcnRPblNwaWxsO1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICB2YXIgaW5pdGlhbCA9IGlzSW5pdGlhbFBsYWNlbWVudChwYXJlbnQpO1xuICAgIGlmIChpbml0aWFsID09PSBmYWxzZSAmJiByZXZlcnRzKSB7XG4gICAgICBpZiAoX2NvcHkpIHtcbiAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfY29weSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zb3VyY2UuaW5zZXJ0QmVmb3JlKGl0ZW0sIF9pbml0aWFsU2libGluZyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbml0aWFsIHx8IHJldmVydHMpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgcGFyZW50LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhbnVwICgpIHtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHVuZ3JhYigpO1xuICAgIHJlbW92ZU1pcnJvckltYWdlKCk7XG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNsYXNzZXMucm0oaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICB9XG4gICAgaWYgKF9yZW5kZXJUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KF9yZW5kZXJUaW1lcik7XG4gICAgfVxuICAgIGRyYWtlLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgaWYgKF9sYXN0RHJvcFRhcmdldCkge1xuICAgICAgZHJha2UuZW1pdCgnb3V0JywgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdCgnZHJhZ2VuZCcsIGl0ZW0pO1xuICAgIF9zb3VyY2UgPSBfaXRlbSA9IF9jb3B5ID0gX2luaXRpYWxTaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nID0gX3JlbmRlclRpbWVyID0gX2xhc3REcm9wVGFyZ2V0ID0gbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzSW5pdGlhbFBsYWNlbWVudCAodGFyZ2V0LCBzKSB7XG4gICAgdmFyIHNpYmxpbmc7XG4gICAgaWYgKHMgIT09IHZvaWQgMCkge1xuICAgICAgc2libGluZyA9IHM7XG4gICAgfSBlbHNlIGlmIChfbWlycm9yKSB7XG4gICAgICBzaWJsaW5nID0gX2N1cnJlbnRTaWJsaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaWJsaW5nID0gbmV4dEVsKF9jb3B5IHx8IF9pdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldCA9PT0gX3NvdXJjZSAmJiBzaWJsaW5nID09PSBfaW5pdGlhbFNpYmxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBmaW5kRHJvcFRhcmdldCAoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSkge1xuICAgIHZhciB0YXJnZXQgPSBlbGVtZW50QmVoaW5kQ3Vyc29yO1xuICAgIHdoaWxlICh0YXJnZXQgJiYgIWFjY2VwdGVkKCkpIHtcbiAgICAgIHRhcmdldCA9IGdldFBhcmVudCh0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xuXG4gICAgZnVuY3Rpb24gYWNjZXB0ZWQgKCkge1xuICAgICAgdmFyIGRyb3BwYWJsZSA9IGlzQ29udGFpbmVyKHRhcmdldCk7XG4gICAgICBpZiAoZHJvcHBhYmxlID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZCh0YXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgICAgdmFyIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZSh0YXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICB2YXIgaW5pdGlhbCA9IGlzSW5pdGlhbFBsYWNlbWVudCh0YXJnZXQsIHJlZmVyZW5jZSk7XG4gICAgICBpZiAoaW5pdGlhbCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gc2hvdWxkIGFsd2F5cyBiZSBhYmxlIHRvIGRyb3AgaXQgcmlnaHQgYmFjayB3aGVyZSBpdCB3YXNcbiAgICAgIH1cbiAgICAgIHJldHVybiBvLmFjY2VwdHMoX2l0ZW0sIHRhcmdldCwgX3NvdXJjZSwgcmVmZXJlbmNlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcmFnIChlKSB7XG4gICAgaWYgKCFfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIHggPSBjbGllbnRYIC0gX29mZnNldFg7XG4gICAgdmFyIHkgPSBjbGllbnRZIC0gX29mZnNldFk7XG5cbiAgICBfbWlycm9yLnN0eWxlLmxlZnQgPSB4ICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLnRvcCA9IHkgKyAncHgnO1xuXG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGdldEVsZW1lbnRCZWhpbmRQb2ludChfbWlycm9yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgZHJvcFRhcmdldCA9IGZpbmREcm9wVGFyZ2V0KGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBjaGFuZ2VkID0gZHJvcFRhcmdldCAhPT0gbnVsbCAmJiBkcm9wVGFyZ2V0ICE9PSBfbGFzdERyb3BUYXJnZXQ7XG4gICAgaWYgKGNoYW5nZWQgfHwgZHJvcFRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgb3V0KCk7XG4gICAgICBfbGFzdERyb3BUYXJnZXQgPSBkcm9wVGFyZ2V0O1xuICAgICAgb3ZlcigpO1xuICAgIH1cbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChkcm9wVGFyZ2V0ID09PSBfc291cmNlICYmIF9jb3B5ICYmICFvLmNvcHlTb3J0U291cmNlKSB7XG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlZmVyZW5jZTtcbiAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQoZHJvcFRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgaWYgKGltbWVkaWF0ZSAhPT0gbnVsbCkge1xuICAgICAgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKGRyb3BUYXJnZXQsIGltbWVkaWF0ZSwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgfSBlbHNlIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHRydWUgJiYgIV9jb3B5KSB7XG4gICAgICByZWZlcmVuY2UgPSBfaW5pdGlhbFNpYmxpbmc7XG4gICAgICBkcm9wVGFyZ2V0ID0gX3NvdXJjZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKF9jb3B5ICYmIHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChcbiAgICAgIChyZWZlcmVuY2UgPT09IG51bGwgJiYgY2hhbmdlZCkgfHxcbiAgICAgIHJlZmVyZW5jZSAhPT0gaXRlbSAmJlxuICAgICAgcmVmZXJlbmNlICE9PSBuZXh0RWwoaXRlbSlcbiAgICApIHtcbiAgICAgIF9jdXJyZW50U2libGluZyA9IHJlZmVyZW5jZTtcbiAgICAgIGRyb3BUYXJnZXQuaW5zZXJ0QmVmb3JlKGl0ZW0sIHJlZmVyZW5jZSk7XG4gICAgICBkcmFrZS5lbWl0KCdzaGFkb3cnLCBpdGVtLCBkcm9wVGFyZ2V0LCBfc291cmNlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbW92ZWQgKHR5cGUpIHsgZHJha2UuZW1pdCh0eXBlLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpOyB9XG4gICAgZnVuY3Rpb24gb3ZlciAoKSB7IGlmIChjaGFuZ2VkKSB7IG1vdmVkKCdvdmVyJyk7IH0gfVxuICAgIGZ1bmN0aW9uIG91dCAoKSB7IGlmIChfbGFzdERyb3BUYXJnZXQpIHsgbW92ZWQoJ291dCcpOyB9IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3ZlciAoZWwpIHtcbiAgICBjbGFzc2VzLnJtKGVsLCAnZ3UtaGlkZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdXQgKGVsKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nKSB7IGNsYXNzZXMuYWRkKGVsLCAnZ3UtaGlkZScpOyB9XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJlY3QgPSBfaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBfbWlycm9yID0gX2l0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgIF9taXJyb3Iuc3R5bGUud2lkdGggPSBnZXRSZWN0V2lkdGgocmVjdCkgKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUuaGVpZ2h0ID0gZ2V0UmVjdEhlaWdodChyZWN0KSArICdweCc7XG4gICAgY2xhc3Nlcy5ybShfbWlycm9yLCAnZ3UtdHJhbnNpdCcpO1xuICAgIGNsYXNzZXMuYWRkKF9taXJyb3IsICdndS1taXJyb3InKTtcbiAgICBvLm1pcnJvckNvbnRhaW5lci5hcHBlbmRDaGlsZChfbWlycm9yKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAnYWRkJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgIGNsYXNzZXMuYWRkKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgZHJha2UuZW1pdCgnY2xvbmVkJywgX21pcnJvciwgX2l0ZW0sICdtaXJyb3InKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZU1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgY2xhc3Nlcy5ybShvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ3JlbW92ZScsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICAgIGdldFBhcmVudChfbWlycm9yKS5yZW1vdmVDaGlsZChfbWlycm9yKTtcbiAgICAgIF9taXJyb3IgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEltbWVkaWF0ZUNoaWxkIChkcm9wVGFyZ2V0LCB0YXJnZXQpIHtcbiAgICB2YXIgaW1tZWRpYXRlID0gdGFyZ2V0O1xuICAgIHdoaWxlIChpbW1lZGlhdGUgIT09IGRyb3BUYXJnZXQgJiYgZ2V0UGFyZW50KGltbWVkaWF0ZSkgIT09IGRyb3BUYXJnZXQpIHtcbiAgICAgIGltbWVkaWF0ZSA9IGdldFBhcmVudChpbW1lZGlhdGUpO1xuICAgIH1cbiAgICBpZiAoaW1tZWRpYXRlID09PSBkb2N1bWVudEVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gaW1tZWRpYXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UmVmZXJlbmNlIChkcm9wVGFyZ2V0LCB0YXJnZXQsIHgsIHkpIHtcbiAgICB2YXIgaG9yaXpvbnRhbCA9IG8uZGlyZWN0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgdmFyIHJlZmVyZW5jZSA9IHRhcmdldCAhPT0gZHJvcFRhcmdldCA/IGluc2lkZSgpIDogb3V0c2lkZSgpO1xuICAgIHJldHVybiByZWZlcmVuY2U7XG5cbiAgICBmdW5jdGlvbiBvdXRzaWRlICgpIHsgLy8gc2xvd2VyLCBidXQgYWJsZSB0byBmaWd1cmUgb3V0IGFueSBwb3NpdGlvblxuICAgICAgdmFyIGxlbiA9IGRyb3BUYXJnZXQuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgdmFyIGk7XG4gICAgICB2YXIgZWw7XG4gICAgICB2YXIgcmVjdDtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBlbCA9IGRyb3BUYXJnZXQuY2hpbGRyZW5baV07XG4gICAgICAgIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgaWYgKGhvcml6b250YWwgJiYgKHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyKSA+IHgpIHsgcmV0dXJuIGVsOyB9XG4gICAgICAgIGlmICghaG9yaXpvbnRhbCAmJiAocmVjdC50b3AgKyByZWN0LmhlaWdodCAvIDIpID4geSkgeyByZXR1cm4gZWw7IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc2lkZSAoKSB7IC8vIGZhc3RlciwgYnV0IG9ubHkgYXZhaWxhYmxlIGlmIGRyb3BwZWQgaW5zaWRlIGEgY2hpbGQgZWxlbWVudFxuICAgICAgdmFyIHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBpZiAoaG9yaXpvbnRhbCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh4ID4gcmVjdC5sZWZ0ICsgZ2V0UmVjdFdpZHRoKHJlY3QpIC8gMik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzb2x2ZSh5ID4gcmVjdC50b3AgKyBnZXRSZWN0SGVpZ2h0KHJlY3QpIC8gMik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZSAoYWZ0ZXIpIHtcbiAgICAgIHJldHVybiBhZnRlciA/IG5leHRFbCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQ29weSAoaXRlbSwgY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvLmNvcHkgPT09ICdib29sZWFuJyA/IG8uY29weSA6IG8uY29weShpdGVtLCBjb250YWluZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRvdWNoeSAoZWwsIG9wLCB0eXBlLCBmbikge1xuICB2YXIgdG91Y2ggPSB7XG4gICAgbW91c2V1cDogJ3RvdWNoZW5kJyxcbiAgICBtb3VzZWRvd246ICd0b3VjaHN0YXJ0JyxcbiAgICBtb3VzZW1vdmU6ICd0b3VjaG1vdmUnXG4gIH07XG4gIHZhciBwb2ludGVycyA9IHtcbiAgICBtb3VzZXVwOiAncG9pbnRlcnVwJyxcbiAgICBtb3VzZWRvd246ICdwb2ludGVyZG93bicsXG4gICAgbW91c2Vtb3ZlOiAncG9pbnRlcm1vdmUnXG4gIH07XG4gIHZhciBtaWNyb3NvZnQgPSB7XG4gICAgbW91c2V1cDogJ01TUG9pbnRlclVwJyxcbiAgICBtb3VzZWRvd246ICdNU1BvaW50ZXJEb3duJyxcbiAgICBtb3VzZW1vdmU6ICdNU1BvaW50ZXJNb3ZlJ1xuICB9O1xuICBpZiAoZ2xvYmFsLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHBvaW50ZXJzW3R5cGVdLCBmbik7XG4gIH0gZWxzZSBpZiAoZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgbWljcm9zb2Z0W3R5cGVdLCBmbik7XG4gIH0gZWxzZSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdG91Y2hbdHlwZV0sIGZuKTtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0eXBlLCBmbik7XG4gIH1cbn1cblxuZnVuY3Rpb24gd2hpY2hNb3VzZUJ1dHRvbiAoZSkge1xuICBpZiAoZS50b3VjaGVzICE9PSB2b2lkIDApIHsgcmV0dXJuIGUudG91Y2hlcy5sZW5ndGg7IH1cbiAgaWYgKGUud2hpY2ggIT09IHZvaWQgMCAmJiBlLndoaWNoICE9PSAwKSB7IHJldHVybiBlLndoaWNoOyB9IC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjYxXG4gIGlmIChlLmJ1dHRvbnMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS5idXR0b25zOyB9XG4gIHZhciBidXR0b24gPSBlLmJ1dHRvbjtcbiAgaWYgKGJ1dHRvbiAhPT0gdm9pZCAwKSB7IC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9ibG9iLzk5ZThmZjFiYWE3YWUzNDFlOTRiYjg5YzNlODQ1NzBjN2MzYWQ5ZWEvc3JjL2V2ZW50LmpzI0w1NzMtTDU3NVxuICAgIHJldHVybiBidXR0b24gJiAxID8gMSA6IGJ1dHRvbiAmIDIgPyAzIDogKGJ1dHRvbiAmIDQgPyAyIDogMCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0T2Zmc2V0IChlbCkge1xuICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IHJlY3QubGVmdCArIGdldFNjcm9sbCgnc2Nyb2xsTGVmdCcsICdwYWdlWE9mZnNldCcpLFxuICAgIHRvcDogcmVjdC50b3AgKyBnZXRTY3JvbGwoJ3Njcm9sbFRvcCcsICdwYWdlWU9mZnNldCcpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFNjcm9sbCAoc2Nyb2xsUHJvcCwgb2Zmc2V0UHJvcCkge1xuICBpZiAodHlwZW9mIGdsb2JhbFtvZmZzZXRQcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gZ2xvYmFsW29mZnNldFByb3BdO1xuICB9XG4gIGlmIChkb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50RWxlbWVudFtzY3JvbGxQcm9wXTtcbiAgfVxuICByZXR1cm4gZG9jLmJvZHlbc2Nyb2xsUHJvcF07XG59XG5cbmZ1bmN0aW9uIGdldEVsZW1lbnRCZWhpbmRQb2ludCAocG9pbnQsIHgsIHkpIHtcbiAgdmFyIHAgPSBwb2ludCB8fCB7fTtcbiAgdmFyIHN0YXRlID0gcC5jbGFzc05hbWU7XG4gIHZhciBlbDtcbiAgcC5jbGFzc05hbWUgKz0gJyBndS1oaWRlJztcbiAgZWwgPSBkb2MuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgcC5jbGFzc05hbWUgPSBzdGF0ZTtcbiAgcmV0dXJuIGVsO1xufVxuXG5mdW5jdGlvbiBuZXZlciAoKSB7IHJldHVybiBmYWxzZTsgfVxuZnVuY3Rpb24gYWx3YXlzICgpIHsgcmV0dXJuIHRydWU7IH1cbmZ1bmN0aW9uIGdldFJlY3RXaWR0aCAocmVjdCkgeyByZXR1cm4gcmVjdC53aWR0aCB8fCAocmVjdC5yaWdodCAtIHJlY3QubGVmdCk7IH1cbmZ1bmN0aW9uIGdldFJlY3RIZWlnaHQgKHJlY3QpIHsgcmV0dXJuIHJlY3QuaGVpZ2h0IHx8IChyZWN0LmJvdHRvbSAtIHJlY3QudG9wKTsgfVxuZnVuY3Rpb24gZ2V0UGFyZW50IChlbCkgeyByZXR1cm4gZWwucGFyZW50Tm9kZSA9PT0gZG9jID8gbnVsbCA6IGVsLnBhcmVudE5vZGU7IH1cbmZ1bmN0aW9uIGlzSW5wdXQgKGVsKSB7IHJldHVybiBlbC50YWdOYW1lID09PSAnSU5QVVQnIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgfHwgZWwudGFnTmFtZSA9PT0gJ1NFTEVDVCcgfHwgaXNFZGl0YWJsZShlbCk7IH1cbmZ1bmN0aW9uIGlzRWRpdGFibGUgKGVsKSB7XG4gIGlmICghZWwpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIG5vIHBhcmVudHMgd2VyZSBlZGl0YWJsZVxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAnZmFsc2UnKSB7IHJldHVybiBmYWxzZTsgfSAvLyBzdG9wIHRoZSBsb29rdXBcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ3RydWUnKSB7IHJldHVybiB0cnVlOyB9IC8vIGZvdW5kIGEgY29udGVudEVkaXRhYmxlIGVsZW1lbnQgaW4gdGhlIGNoYWluXG4gIHJldHVybiBpc0VkaXRhYmxlKGdldFBhcmVudChlbCkpOyAvLyBjb250ZW50RWRpdGFibGUgaXMgc2V0IHRvICdpbmhlcml0J1xufVxuXG5mdW5jdGlvbiBuZXh0RWwgKGVsKSB7XG4gIHJldHVybiBlbC5uZXh0RWxlbWVudFNpYmxpbmcgfHwgbWFudWFsbHkoKTtcbiAgZnVuY3Rpb24gbWFudWFsbHkgKCkge1xuICAgIHZhciBzaWJsaW5nID0gZWw7XG4gICAgZG8ge1xuICAgICAgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgfSB3aGlsZSAoc2libGluZyAmJiBzaWJsaW5nLm5vZGVUeXBlICE9PSAxKTtcbiAgICByZXR1cm4gc2libGluZztcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRFdmVudEhvc3QgKGUpIHtcbiAgLy8gb24gdG91Y2hlbmQgZXZlbnQsIHdlIGhhdmUgdG8gdXNlIGBlLmNoYW5nZWRUb3VjaGVzYFxuICAvLyBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy83MTkyNTYzL3RvdWNoZW5kLWV2ZW50LXByb3BlcnRpZXNcbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8zNFxuICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdO1xuICB9XG4gIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGdldENvb3JkIChjb29yZCwgZSkge1xuICB2YXIgaG9zdCA9IGdldEV2ZW50SG9zdChlKTtcbiAgdmFyIG1pc3NNYXAgPSB7XG4gICAgcGFnZVg6ICdjbGllbnRYJywgLy8gSUU4XG4gICAgcGFnZVk6ICdjbGllbnRZJyAvLyBJRThcbiAgfTtcbiAgaWYgKGNvb3JkIGluIG1pc3NNYXAgJiYgIShjb29yZCBpbiBob3N0KSAmJiBtaXNzTWFwW2Nvb3JkXSBpbiBob3N0KSB7XG4gICAgY29vcmQgPSBtaXNzTWFwW2Nvb3JkXTtcbiAgfVxuICByZXR1cm4gaG9zdFtjb29yZF07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZHJhZ3VsYTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2RyYWd1bGEvZHJhZ3VsYS5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBhdG9hID0gcmVxdWlyZSgnYXRvYScpO1xudmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtaXR0ZXIgKHRoaW5nLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGV2dCA9IHt9O1xuICBpZiAodGhpbmcgPT09IHVuZGVmaW5lZCkgeyB0aGluZyA9IHt9OyB9XG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgaWYgKCFldnRbdHlwZV0pIHtcbiAgICAgIGV2dFt0eXBlXSA9IFtmbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2dFt0eXBlXS5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxuICAgIHRoaW5nLm9uKHR5cGUsIGZuKTtcbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoYyA9PT0gMSkge1xuICAgICAgZGVsZXRlIGV2dFt0eXBlXTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDApIHtcbiAgICAgIGV2dCA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXQgPSBldnRbdHlwZV07XG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxuICAgICAgZXQuc3BsaWNlKGV0LmluZGV4T2YoZm4pLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5lbWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGluZy5lbWl0dGVyU25hcHNob3QoYXJncy5zaGlmdCgpKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZXQgPSAoZXZ0W3R5cGVdIHx8IFtdKS5zbGljZSgwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgICB2YXIgY3R4ID0gdGhpcyB8fCB0aGluZztcbiAgICAgIGlmICh0eXBlID09PSAnZXJyb3InICYmIG9wdHMudGhyb3dzICE9PSBmYWxzZSAmJiAhZXQubGVuZ3RoKSB7IHRocm93IGFyZ3MubGVuZ3RoID09PSAxID8gYXJnc1swXSA6IGFyZ3M7IH1cbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XG4gICAgICAgIGlmIChvcHRzLmFzeW5jKSB7IGRlYm91bmNlKGxpc3RlbiwgYXJncywgY3R4KTsgfSBlbHNlIHsgbGlzdGVuLmFwcGx5KGN0eCwgYXJncyk7IH1cbiAgICAgICAgaWYgKGxpc3Rlbi5fb25jZSkgeyB0aGluZy5vZmYodHlwZSwgbGlzdGVuKTsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpbmc7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHRoaW5nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXRvYSAoYSwgbikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgbik7IH1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2F0b2EvYXRvYS5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdGlja3kgPSByZXF1aXJlKCd0aWNreScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jb250cmEvZGVib3VuY2UuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XG5pZiAoc2kpIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9O1xufSBlbHNlIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRUaW1lb3V0KGZuLCAwKTsgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aWNrO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbi8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1laWRhdGVgIHdhc1xuLy8gYWJsZSB0byBpbnN0YWxsIG9udG8uICBTZWFyY2ggZWFjaCBwb3NzaWJpbGl0eSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcbi8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnY3VzdG9tLWV2ZW50Jyk7XG52YXIgZXZlbnRtYXAgPSByZXF1aXJlKCcuL2V2ZW50bWFwJyk7XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGxpc3RlbmVyID0gdW53cmFwKGVsLCB0eXBlLCBmbik7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvY3Jvc3N2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciBOYXRpdmVDdXN0b21FdmVudCA9IGdsb2JhbC5DdXN0b21FdmVudDtcblxuZnVuY3Rpb24gdXNlTmF0aXZlICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcCA9IG5ldyBOYXRpdmVDdXN0b21FdmVudCgnY2F0JywgeyBkZXRhaWw6IHsgZm9vOiAnYmFyJyB9IH0pO1xuICAgIHJldHVybiAgJ2NhdCcgPT09IHAudHlwZSAmJiAnYmFyJyA9PT0gcC5kZXRhaWwuZm9vO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENyb3NzLWJyb3dzZXIgYEN1c3RvbUV2ZW50YCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQuQ3VzdG9tRXZlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VOYXRpdmUoKSA/IE5hdGl2ZUN1c3RvbUV2ZW50IDpcblxuLy8gSUUgPj0gOVxuJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID8gZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgfSBlbHNlIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UsIHZvaWQgMCk7XG4gIH1cbiAgcmV0dXJuIGU7XG59IDpcblxuLy8gSUUgPD0gOFxuZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gIGUudHlwZSA9IHR5cGU7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmJ1YmJsZXMgPSBCb29sZWFuKHBhcmFtcy5idWJibGVzKTtcbiAgICBlLmNhbmNlbGFibGUgPSBCb29sZWFuKHBhcmFtcy5jYW5jZWxhYmxlKTtcbiAgICBlLmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gIH0gZWxzZSB7XG4gICAgZS5idWJibGVzID0gZmFsc2U7XG4gICAgZS5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgZS5kZXRhaWwgPSB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jdXN0b20tZXZlbnQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9ldmVudG1hcC5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGUgPSB7fTtcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG52YXIgZW5kID0gJyg/OlxcXFxzfCQpJztcblxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xuICB2YXIgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBjYWNoZWQgPSBuZXcgUmVnRXhwKHN0YXJ0ICsgY2xhc3NOYW1lICsgZW5kLCAnZycpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIHZhciBjdXJyZW50ID0gZWwuY2xhc3NOYW1lO1xuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9IGVsc2UgaWYgKCFsb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJtQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobG9va3VwQ2xhc3MoY2xhc3NOYW1lKSwgJyAnKS50cmltKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZENsYXNzLFxuICBybTogcm1DbGFzc1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2RyYWd1bGEvY2xhc3Nlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7IHJlbW92ZUl0ZW1zLCBkcmFnSXRlbXMsIG9uRHJhZ09iamVjdCwgb25SZW1vdmVPYmplY3QgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCBhcmdzICkge1xuXG4gICAgY29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoICEgZmllbGRzICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgW10uZm9yRWFjaC5jYWxsKCBmaWVsZHMsICggYXV0b0xpc3QgKSA9PiB7XG4gICAgICAgIGNvbnN0IEhpZGRlbiA9IGhpZGRlbiggYXV0b0xpc3QsIGFyZ3MuaGlkZGVuICk7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKCBIaWRkZW4sIG9uUmVtb3ZlT2JqZWN0ICk7XG4gICAgICAgIGNvbnN0IGRyYWcgPSBkcmFnSXRlbXMoIEhpZGRlbiwgb25EcmFnT2JqZWN0ICk7XG4gICAgICAgIGNvbnN0IExpc3QgPSBsaXN0KCBhdXRvTGlzdCwgT2JqZWN0LmFzc2lnbiggYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmV9ICkgKTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCAnLmF1dG9zdWdnZXN0LWxpc3QtaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IGVsTmFtZSA9IGBhdXRvTGlzdF8ke2lucHV0LmdldEF0dHJpYnV0ZSggJ2xpc3QnICl9YDtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtPTUdGaWVsZHMuYmFzZVVSTH0vd3AtanNvbi93cC92Mi8ke3dpbmRvd1tlbE5hbWVdLnJlc291cmNlfT9zZWFyY2g9YDtcblxuICAgICAgICBhdXRvU3VnZ2VzdCggaW5wdXQsIGVuZHBvaW50LCAodmFsdWUsIGlucHV0KSA9PiB7XG4gICAgICAgICAgICBMaXN0LmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCggdmFsdWUgKTtcbiAgICAgICAgfSk7XG4gICAgfSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsImltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYXJncykge1xuICBjb25zdCBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICBpZiAoIWZpZWxkcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGF1dG9JdGVtID0+IHtcbiAgICBjb25zdCBoaWRkZW4gPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKGFyZ3MuaGlkZGVuKTtcbiAgICBjb25zdCBpbnB1dCA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hdXRvc3VnZ2VzdC1pbnB1dCcpO1xuICAgIGNvbnN0IGVsTmFtZSA9IGBhdXRvTGlzdF8ke2lucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpfWA7XG4gICAgbGV0IGVuZHBvaW50O1xuXG4gICAgaWYgKHdpbmRvd1tlbE5hbWVdLm5hbWVzcGFjZSkge1xuICAgICAgZW5kcG9pbnQgPSBgJHtPTUdGaWVsZHMuYmFzZVVSTH0vd3AtanNvbi8ke3dpbmRvd1tlbE5hbWVdLm5hbWVzcGFjZX0vJHtcbiAgICAgICAgd2luZG93W2VsTmFtZV0ucmVzb3VyY2VcbiAgICAgIH0/c2VhcmNoPWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vd3AvdjIvJHtcbiAgICAgICAgd2luZG93W2VsTmFtZV0ucmVzb3VyY2VcbiAgICAgIH0/c2VhcmNoPWA7XG4gICAgfVxuXG4gICAgYXV0b1N1Z2dlc3QoXG4gICAgICBpbnB1dCxcbiAgICAgIGVuZHBvaW50LFxuICAgICAgKHZhbHVlLCBpbnB1dCkgPT4ge1xuICAgICAgICBoaWRkZW4udmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICB9LFxuICAgICAgKCkgPT4ge1xuICAgICAgICBoaWRkZW4udmFsdWUgPSAnJztcbiAgICAgIH0sXG4gICAgKTtcbiAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hdXRvLWl0ZW0uanMiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbWFnZVVwbG9hZHMoKSB7XG5cdHZhciBmZWF0dXJlZEltYWdlV3JhcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jdXN0b20tbWVkaWEtdXBsb2FkJyk7XG5cblx0aWYgKCBmZWF0dXJlZEltYWdlV3JhcC5sZW5ndGggPT09IDAgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0W10ubWFwLmNhbGwoIGZlYXR1cmVkSW1hZ2VXcmFwLCBmdW5jdGlvbihpdGVtKSB7XG5cdFx0Ly8gdmFyIEltYWdlV3JhcElkID0gaXRlbS5hdHRyaWJ1dGUuaWQ7XG5cdFx0dmFyIHJlbW92ZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWltYWdlJyk7XG5cdFx0dmFyIHJlcGxhY2VJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnJlcGxhY2UtaW1hZ2UnKTtcblx0XHR2YXIgc2V0SW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zZXQtaW1hZ2UnKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRhZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignYS5yZXBsYWNlLWltYWdlIGltZycpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlSUQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRpdGxlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCAnLnRodW1ibmFpbC10aXRsZScgKTtcblx0XHR2YXIgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcblx0XHRcdHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcblx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHR0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJ1xuXHRcdFx0fSxcblx0XHRcdG11bHRpcGxlOiBmYWxzZVxuXHRcdH0pO1xuXG5cdFx0bWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgYXR0YWNobWVudCA9IG1lZGlhRnJhbWUuc3RhdGUoKS5nZXQoJ3NlbGVjdGlvbicpLmZpcnN0KCkudG9KU09OKCk7XG5cblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlSUQudmFsdWUgPSBhdHRhY2htZW50LmlkO1xuXHRcdFx0aWYgKGF0dGFjaG1lbnQuaGFzT3duUHJvcGVydHkoJ3NpemVzJykpIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuc2l6ZXMudGh1bWJuYWlsLnVybCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYXR0YWNobWVudC5pY29uKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBmZWF0dXJlZEltYWdlVGl0bGUgKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSBhdHRhY2htZW50LmZpbGVuYW1lO1xuXHRcdFx0fVxuXG5cdFx0fSk7XG5cblx0XHRyZW1vdmVJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtaW1hZ2UnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCAnJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlSUQudmFsdWUgPSAnJztcblxuXHRcdFx0aWYgKCBmZWF0dXJlZEltYWdlVGl0bGUgKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSAnJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJlcGxhY2VJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cblx0XHRzZXRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2ltYWdlLXVwbG9hZHMuanMiLCJpbXBvcnQgZmxhdHBpY2tyIGZyb20gJ2ZsYXRwaWNrcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICBjb25zdCBkYXRlcGlja2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlcGlja2VyLWlucHV0Jyk7XG5cbiAgaWYgKCFkYXRlcGlja2Vycykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChkYXRlcGlja2VycywgZGF0ZUZpZWxkID0+IHtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGVGaWVsZC5kYXRhc2V0LmRhdGU7XG5cbiAgICBmbGF0cGlja3IoZGF0ZUZpZWxkLCB7XG4gICAgICBhbHRJbnB1dDogdHJ1ZSxcbiAgICAgIGFsdEZvcm1hdDogJ0YgaiwgWScsXG4gICAgICBkYXRlRm9ybWF0OiAnVScsXG4gICAgICBkZWZhdWx0RGF0ZTogIWN1cnJlbnREYXRlID8gJycgOiBjdXJyZW50RGF0ZSxcbiAgICB9KTtcbiAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9kYXRlcGlja2VyLmpzIiwiLyogZmxhdHBpY2tyIHY0LjQuMywgQGxpY2Vuc2UgTUlUICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICAgIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuZmxhdHBpY2tyID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIHBhZCA9IGZ1bmN0aW9uIHBhZChudW1iZXIpIHtcbiAgICAgIHJldHVybiAoXCIwXCIgKyBudW1iZXIpLnNsaWNlKC0yKTtcbiAgICB9O1xuICAgIHZhciBpbnQgPSBmdW5jdGlvbiBpbnQoYm9vbCkge1xuICAgICAgcmV0dXJuIGJvb2wgPT09IHRydWUgPyAxIDogMDtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgaWYgKGltbWVkaWF0ZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGltbWVkaWF0ZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGltZW91dDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcyxcbiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHRpbWVvdXQgIT09IG51bGwgJiYgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgaWYgKGltbWVkaWF0ZSAmJiAhdGltZW91dCkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHZhciBhcnJheWlmeSA9IGZ1bmN0aW9uIGFycmF5aWZ5KG9iaikge1xuICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mIEFycmF5ID8gb2JqIDogW29ial07XG4gICAgfTtcblxuICAgIHZhciBkb19ub3RoaW5nID0gZnVuY3Rpb24gZG9fbm90aGluZygpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIHZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gbW9udGhUb1N0cihtb250aE51bWJlciwgc2hvcnRoYW5kLCBsb2NhbGUpIHtcbiAgICAgIHJldHVybiBsb2NhbGUubW9udGhzW3Nob3J0aGFuZCA/IFwic2hvcnRoYW5kXCIgOiBcImxvbmdoYW5kXCJdW21vbnRoTnVtYmVyXTtcbiAgICB9O1xuICAgIHZhciByZXZGb3JtYXQgPSB7XG4gICAgICBEOiBkb19ub3RoaW5nLFxuICAgICAgRjogZnVuY3Rpb24gRihkYXRlT2JqLCBtb250aE5hbWUsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTtcbiAgICAgIH0sXG4gICAgICBHOiBmdW5jdGlvbiBHKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBIOiBmdW5jdGlvbiBIKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBKOiBmdW5jdGlvbiBKKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICAgIH0sXG4gICAgICBLOiBmdW5jdGlvbiBLKGRhdGVPYmosIGFtUE0sIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKGRhdGVPYmouZ2V0SG91cnMoKSAlIDEyICsgMTIgKiBpbnQobmV3IFJlZ0V4cChsb2NhbGUuYW1QTVsxXSwgXCJpXCIpLnRlc3QoYW1QTSkpKTtcbiAgICAgIH0sXG4gICAgICBNOiBmdW5jdGlvbiBNKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMuc2hvcnRoYW5kLmluZGV4T2Yoc2hvcnRNb250aCkpO1xuICAgICAgfSxcbiAgICAgIFM6IGZ1bmN0aW9uIFMoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24gVShfLCB1bml4U2Vjb25kcykge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VGbG9hdCh1bml4U2Vjb25kcykgKiAxMDAwKTtcbiAgICAgIH0sXG4gICAgICBXOiBmdW5jdGlvbiBXKGRhdGVPYmosIHdlZWtOdW0pIHtcbiAgICAgICAgdmFyIHdlZWtOdW1iZXIgPSBwYXJzZUludCh3ZWVrTnVtKTtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVPYmouZ2V0RnVsbFllYXIoKSwgMCwgMiArICh3ZWVrTnVtYmVyIC0gMSkgKiA3LCAwLCAwLCAwLCAwKTtcbiAgICAgIH0sXG4gICAgICBZOiBmdW5jdGlvbiBZKGRhdGVPYmosIHllYXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRGdWxsWWVhcihwYXJzZUZsb2F0KHllYXIpKTtcbiAgICAgIH0sXG4gICAgICBaOiBmdW5jdGlvbiBaKF8sIElTT0RhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKElTT0RhdGUpO1xuICAgICAgfSxcbiAgICAgIGQ6IGZ1bmN0aW9uIGQoZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uIGgoZGF0ZU9iaiwgaG91cikge1xuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKHBhcnNlRmxvYXQoaG91cikpO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoZGF0ZU9iaiwgbWludXRlcykge1xuICAgICAgICBkYXRlT2JqLnNldE1pbnV0ZXMocGFyc2VGbG9hdChtaW51dGVzKSk7XG4gICAgICB9LFxuICAgICAgajogZnVuY3Rpb24gaihkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgICB9LFxuICAgICAgbDogZG9fbm90aGluZyxcbiAgICAgIG06IGZ1bmN0aW9uIG0oZGF0ZU9iaiwgbW9udGgpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xuICAgICAgfSxcbiAgICAgIG46IGZ1bmN0aW9uIG4oZGF0ZU9iaiwgbW9udGgpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoZGF0ZU9iaiwgc2Vjb25kcykge1xuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XG4gICAgICB9LFxuICAgICAgdzogZG9fbm90aGluZyxcbiAgICAgIHk6IGZ1bmN0aW9uIHkoZGF0ZU9iaiwgeWVhcikge1xuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKDIwMDAgKyBwYXJzZUZsb2F0KHllYXIpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciB0b2tlblJlZ2V4ID0ge1xuICAgICAgRDogXCIoXFxcXHcrKVwiLFxuICAgICAgRjogXCIoXFxcXHcrKVwiLFxuICAgICAgRzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIEg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBKOiBcIihcXFxcZFxcXFxkfFxcXFxkKVxcXFx3K1wiLFxuICAgICAgSzogXCJcIixcbiAgICAgIE06IFwiKFxcXFx3KylcIixcbiAgICAgIFM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBVOiBcIiguKylcIixcbiAgICAgIFc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBZOiBcIihcXFxcZHs0fSlcIixcbiAgICAgIFo6IFwiKC4rKVwiLFxuICAgICAgZDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGg6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBpOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgajogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGw6IFwiKFxcXFx3KylcIixcbiAgICAgIG06IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBuOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgczogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIHc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICB5OiBcIihcXFxcZHsyfSlcIlxuICAgIH07XG4gICAgdmFyIGZvcm1hdHMgPSB7XG4gICAgICBaOiBmdW5jdGlvbiBaKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcbiAgICAgIH0sXG4gICAgICBEOiBmdW5jdGlvbiBEKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbG9jYWxlLndlZWtkYXlzLnNob3J0aGFuZFtmb3JtYXRzLncoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKV07XG4gICAgICB9LFxuICAgICAgRjogZnVuY3Rpb24gRihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZm9ybWF0cy5uKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykgLSAxLCBmYWxzZSwgbG9jYWxlKTtcbiAgICAgIH0sXG4gICAgICBHOiBmdW5jdGlvbiBHKGRhdGUsIGxvY2FsZSwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcbiAgICAgIH0sXG4gICAgICBIOiBmdW5jdGlvbiBIKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldEhvdXJzKCkpO1xuICAgICAgfSxcbiAgICAgIEo6IGZ1bmN0aW9uIEooZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUub3JkaW5hbCAhPT0gdW5kZWZpbmVkID8gZGF0ZS5nZXREYXRlKCkgKyBsb2NhbGUub3JkaW5hbChkYXRlLmdldERhdGUoKSkgOiBkYXRlLmdldERhdGUoKTtcbiAgICAgIH0sXG4gICAgICBLOiBmdW5jdGlvbiBLKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLmFtUE1baW50KGRhdGUuZ2V0SG91cnMoKSA+IDExKV07XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTShkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRoVG9TdHIoZGF0ZS5nZXRNb250aCgpLCB0cnVlLCBsb2NhbGUpO1xuICAgICAgfSxcbiAgICAgIFM6IGZ1bmN0aW9uIFMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTtcbiAgICAgIH0sXG4gICAgICBVOiBmdW5jdGlvbiBVKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIC8gMTAwMDtcbiAgICAgIH0sXG4gICAgICBXOiBmdW5jdGlvbiBXKGRhdGUsIF8sIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0V2VlayhkYXRlKTtcbiAgICAgIH0sXG4gICAgICBZOiBmdW5jdGlvbiBZKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbiBkKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldERhdGUoKSk7XG4gICAgICB9LFxuICAgICAgaDogZnVuY3Rpb24gaChkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTI7XG4gICAgICB9LFxuICAgICAgaTogZnVuY3Rpb24gaShkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRNaW51dGVzKCkpO1xuICAgICAgfSxcbiAgICAgIGo6IGZ1bmN0aW9uIGooZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuICAgICAgbDogZnVuY3Rpb24gbChkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5sb25naGFuZFtkYXRlLmdldERheSgpXTtcbiAgICAgIH0sXG4gICAgICBtOiBmdW5jdGlvbiBtKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldE1vbnRoKCkgKyAxKTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICB9LFxuICAgICAgczogZnVuY3Rpb24gcyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFNlY29uZHMoKTtcbiAgICAgIH0sXG4gICAgICB3OiBmdW5jdGlvbiB3KGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF5KCk7XG4gICAgICB9LFxuICAgICAgeTogZnVuY3Rpb24geShkYXRlKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBlbmdsaXNoID0ge1xuICAgICAgd2Vla2RheXM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiXVxuICAgICAgfSxcbiAgICAgIG1vbnRoczoge1xuICAgICAgICBzaG9ydGhhbmQ6IFtcIkphblwiLCBcIkZlYlwiLCBcIk1hclwiLCBcIkFwclwiLCBcIk1heVwiLCBcIkp1blwiLCBcIkp1bFwiLCBcIkF1Z1wiLCBcIlNlcFwiLCBcIk9jdFwiLCBcIk5vdlwiLCBcIkRlY1wiXSxcbiAgICAgICAgbG9uZ2hhbmQ6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLCBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIiwgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJdXG4gICAgICB9LFxuICAgICAgZGF5c0luTW9udGg6IFszMSwgMjgsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXSxcbiAgICAgIGZpcnN0RGF5T2ZXZWVrOiAwLFxuICAgICAgb3JkaW5hbDogZnVuY3Rpb24gb3JkaW5hbChudGgpIHtcbiAgICAgICAgdmFyIHMgPSBudGggJSAxMDA7XG4gICAgICAgIGlmIChzID4gMyAmJiBzIDwgMjEpIHJldHVybiBcInRoXCI7XG5cbiAgICAgICAgc3dpdGNoIChzICUgMTApIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gXCJzdFwiO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIFwibmRcIjtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBcInJkXCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFwidGhcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJhbmdlU2VwYXJhdG9yOiBcIiB0byBcIixcbiAgICAgIHdlZWtBYmJyZXZpYXRpb246IFwiV2tcIixcbiAgICAgIHNjcm9sbFRpdGxlOiBcIlNjcm9sbCB0byBpbmNyZW1lbnRcIixcbiAgICAgIHRvZ2dsZVRpdGxlOiBcIkNsaWNrIHRvIHRvZ2dsZVwiLFxuICAgICAgYW1QTTogW1wiQU1cIiwgXCJQTVwiXSxcbiAgICAgIHllYXJBcmlhTGFiZWw6IFwiWWVhclwiXG4gICAgfTtcblxuICAgIHZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gY3JlYXRlRGF0ZUZvcm1hdHRlcihfcmVmKSB7XG4gICAgICB2YXIgX3JlZiRjb25maWcgPSBfcmVmLmNvbmZpZyxcbiAgICAgICAgICBjb25maWcgPSBfcmVmJGNvbmZpZyA9PT0gdm9pZCAwID8gZGVmYXVsdHMgOiBfcmVmJGNvbmZpZyxcbiAgICAgICAgICBfcmVmJGwxMG4gPSBfcmVmLmwxMG4sXG4gICAgICAgICAgbDEwbiA9IF9yZWYkbDEwbiA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9yZWYkbDEwbjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZU9iaiwgZnJtdCwgb3ZlcnJpZGVMb2NhbGUpIHtcbiAgICAgICAgaWYgKGNvbmZpZy5mb3JtYXREYXRlICE9PSB1bmRlZmluZWQpIHJldHVybiBjb25maWcuZm9ybWF0RGF0ZShkYXRlT2JqLCBmcm10KTtcbiAgICAgICAgdmFyIGxvY2FsZSA9IG92ZXJyaWRlTG9jYWxlIHx8IGwxMG47XG4gICAgICAgIHJldHVybiBmcm10LnNwbGl0KFwiXCIpLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdHNbY10gJiYgYXJyW2kgLSAxXSAhPT0gXCJcXFxcXCIgPyBmb3JtYXRzW2NdKGRhdGVPYmosIGxvY2FsZSwgY29uZmlnKSA6IGMgIT09IFwiXFxcXFwiID8gYyA6IFwiXCI7XG4gICAgICAgIH0pLmpvaW4oXCJcIik7XG4gICAgICB9O1xuICAgIH07XG4gICAgdmFyIGNyZWF0ZURhdGVQYXJzZXIgPSBmdW5jdGlvbiBjcmVhdGVEYXRlUGFyc2VyKF9yZWYyKSB7XG4gICAgICB2YXIgX3JlZjIkY29uZmlnID0gX3JlZjIuY29uZmlnLFxuICAgICAgICAgIGNvbmZpZyA9IF9yZWYyJGNvbmZpZyA9PT0gdm9pZCAwID8gZGVmYXVsdHMgOiBfcmVmMiRjb25maWcsXG4gICAgICAgICAgX3JlZjIkbDEwbiA9IF9yZWYyLmwxMG4sXG4gICAgICAgICAgbDEwbiA9IF9yZWYyJGwxMG4gPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfcmVmMiRsMTBuO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlLCBnaXZlbkZvcm1hdCwgdGltZWxlc3MpIHtcbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBwYXJzZWREYXRlO1xuICAgICAgICB2YXIgZGF0ZV9vcmlnID0gZGF0ZTtcbiAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlKSBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO2Vsc2UgaWYgKHR5cGVvZiBkYXRlICE9PSBcInN0cmluZ1wiICYmIGRhdGUudG9GaXhlZCAhPT0gdW5kZWZpbmVkKSBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7ZWxzZSBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB2YXIgZm9ybWF0ID0gZ2l2ZW5Gb3JtYXQgfHwgKGNvbmZpZyB8fCBkZWZhdWx0cykuZGF0ZUZvcm1hdDtcbiAgICAgICAgICB2YXIgZGF0ZXN0ciA9IFN0cmluZyhkYXRlKS50cmltKCk7XG5cbiAgICAgICAgICBpZiAoZGF0ZXN0ciA9PT0gXCJ0b2RheVwiKSB7XG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fCAvR01UJC8udGVzdChkYXRlc3RyKSkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO2Vsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKSBwYXJzZWREYXRlID0gY29uZmlnLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO2Vsc2Uge1xuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9ICFjb25maWcgfHwgIWNvbmZpZy5ub0NhbGVuZGFyID8gbmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCAwLCAxLCAwLCAwLCAwLCAwKSA6IG5ldyBEYXRlKG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCkpO1xuICAgICAgICAgICAgdmFyIG1hdGNoZWQsXG4gICAgICAgICAgICAgICAgb3BzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciB0b2tlbiA9IGZvcm1hdFtpXTtcbiAgICAgICAgICAgICAgdmFyIGlzQmFja1NsYXNoID0gdG9rZW4gPT09IFwiXFxcXFwiO1xuICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xuXG4gICAgICAgICAgICAgIGlmICh0b2tlblJlZ2V4W3Rva2VuXSAmJiAhZXNjYXBlZCkge1xuICAgICAgICAgICAgICAgIHJlZ2V4U3RyICs9IHRva2VuUmVnZXhbdG9rZW5dO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5ldyBSZWdFeHAocmVnZXhTdHIpLmV4ZWMoZGF0ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgKG1hdGNoZWQgPSB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgb3BzW3Rva2VuICE9PSBcIllcIiA/IFwicHVzaFwiIDogXCJ1bnNoaWZ0XCJdKHtcbiAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXG4gICAgICAgICAgICAgICAgICAgIHZhbDogbWF0Y2hbKyttYXRjaEluZGV4XVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc0JhY2tTbGFzaCkgcmVnZXhTdHIgKz0gXCIuXCI7XG5cbiAgICAgICAgICAgICAgb3BzLmZvckVhY2goZnVuY3Rpb24gKF9yZWYzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZuID0gX3JlZjMuZm4sXG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IF9yZWYzLnZhbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZSA9IGZuKHBhcnNlZERhdGUsIHZhbCwgbDEwbikgfHwgcGFyc2VkRGF0ZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSBtYXRjaGVkID8gcGFyc2VkRGF0ZSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIShwYXJzZWREYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgICBjb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBwcm92aWRlZDogXCIgKyBkYXRlX29yaWcpKTtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpbWVsZXNzID09PSB0cnVlKSBwYXJzZWREYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcbiAgICAgIH07XG4gICAgfTtcbiAgICBmdW5jdGlvbiBjb21wYXJlRGF0ZXMoZGF0ZTEsIGRhdGUyLCB0aW1lbGVzcykge1xuICAgICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHtcbiAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAodGltZWxlc3MgIT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlMS5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApIC0gbmV3IERhdGUoZGF0ZTIuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGUxLmdldFRpbWUoKSAtIGRhdGUyLmdldFRpbWUoKTtcbiAgICB9XG4gICAgdmFyIGdldFdlZWsgPSBmdW5jdGlvbiBnZXRXZWVrKGdpdmVuRGF0ZSkge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcbiAgICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xuICAgICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcbiAgICAgIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC0gMyArICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgLyA3KTtcbiAgICB9O1xuICAgIHZhciBpc0JldHdlZW4gPSBmdW5jdGlvbiBpc0JldHdlZW4odHMsIHRzMSwgdHMyKSB7XG4gICAgICByZXR1cm4gdHMgPiBNYXRoLm1pbih0czEsIHRzMikgJiYgdHMgPCBNYXRoLm1heCh0czEsIHRzMik7XG4gICAgfTtcbiAgICB2YXIgZHVyYXRpb24gPSB7XG4gICAgICBEQVk6IDg2NDAwMDAwXG4gICAgfTtcblxuICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgIF9kaXNhYmxlOiBbXSxcbiAgICAgIF9lbmFibGU6IFtdLFxuICAgICAgYWxsb3dJbnB1dDogZmFsc2UsXG4gICAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgICBhbHRJbnB1dDogZmFsc2UsXG4gICAgICBhbHRJbnB1dENsYXNzOiBcImZvcm0tY29udHJvbCBpbnB1dFwiLFxuICAgICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSA9PT0gLTEsXG4gICAgICBhcmlhRGF0ZUZvcm1hdDogXCJGIGosIFlcIixcbiAgICAgIGNsaWNrT3BlbnM6IHRydWUsXG4gICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLFxuICAgICAgY29uanVuY3Rpb246IFwiLCBcIixcbiAgICAgIGRhdGVGb3JtYXQ6IFwiWS1tLWRcIixcbiAgICAgIGRlZmF1bHRIb3VyOiAxMixcbiAgICAgIGRlZmF1bHRNaW51dGU6IDAsXG4gICAgICBkZWZhdWx0U2Vjb25kczogMCxcbiAgICAgIGRpc2FibGU6IFtdLFxuICAgICAgZGlzYWJsZU1vYmlsZTogZmFsc2UsXG4gICAgICBlbmFibGU6IFtdLFxuICAgICAgZW5hYmxlU2Vjb25kczogZmFsc2UsXG4gICAgICBlbmFibGVUaW1lOiBmYWxzZSxcbiAgICAgIGVycm9ySGFuZGxlcjogY29uc29sZS53YXJuLFxuICAgICAgZ2V0V2VlazogZ2V0V2VlayxcbiAgICAgIGhvdXJJbmNyZW1lbnQ6IDEsXG4gICAgICBpZ25vcmVkRm9jdXNFbGVtZW50czogW10sXG4gICAgICBpbmxpbmU6IGZhbHNlLFxuICAgICAgbG9jYWxlOiBcImRlZmF1bHRcIixcbiAgICAgIG1pbnV0ZUluY3JlbWVudDogNSxcbiAgICAgIG1vZGU6IFwic2luZ2xlXCIsXG4gICAgICBuZXh0QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J00xMy4yMDcgOC40NzJsLTcuODU0IDcuODU0LTAuNzA3LTAuNzA3IDcuMTQ2LTcuMTQ2LTcuMTQ2LTcuMTQ4IDAuNzA3LTAuNzA3IDcuODU0IDcuODU0eicgLz48L3N2Zz5cIixcbiAgICAgIG5vQ2FsZW5kYXI6IGZhbHNlLFxuICAgICAgbm93OiBuZXcgRGF0ZSgpLFxuICAgICAgb25DaGFuZ2U6IFtdLFxuICAgICAgb25DbG9zZTogW10sXG4gICAgICBvbkRheUNyZWF0ZTogW10sXG4gICAgICBvbkRlc3Ryb3k6IFtdLFxuICAgICAgb25LZXlEb3duOiBbXSxcbiAgICAgIG9uTW9udGhDaGFuZ2U6IFtdLFxuICAgICAgb25PcGVuOiBbXSxcbiAgICAgIG9uUGFyc2VDb25maWc6IFtdLFxuICAgICAgb25SZWFkeTogW10sXG4gICAgICBvblZhbHVlVXBkYXRlOiBbXSxcbiAgICAgIG9uWWVhckNoYW5nZTogW10sXG4gICAgICBvblByZUNhbGVuZGFyUG9zaXRpb246IFtdLFxuICAgICAgcGx1Z2luczogW10sXG4gICAgICBwb3NpdGlvbjogXCJhdXRvXCIsXG4gICAgICBwb3NpdGlvbkVsZW1lbnQ6IHVuZGVmaW5lZCxcbiAgICAgIHByZXZBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTUuMjA3IDguNDcxbDcuMTQ2IDcuMTQ3LTAuNzA3IDAuNzA3LTcuODUzLTcuODU0IDcuODU0LTcuODUzIDAuNzA3IDAuNzA3LTcuMTQ3IDcuMTQ2eicgLz48L3N2Zz5cIixcbiAgICAgIHNob3J0aGFuZEN1cnJlbnRNb250aDogZmFsc2UsXG4gICAgICBzaG93TW9udGhzOiAxLFxuICAgICAgc3RhdGljOiBmYWxzZSxcbiAgICAgIHRpbWVfMjRocjogZmFsc2UsXG4gICAgICB3ZWVrTnVtYmVyczogZmFsc2UsXG4gICAgICB3cmFwOiBmYWxzZVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjbGFzc05hbWUsIGJvb2wpIHtcbiAgICAgIGlmIChib29sID09PSB0cnVlKSByZXR1cm4gZWxlbS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgY29udGVudCkge1xuICAgICAgdmFyIGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XG4gICAgICBjb250ZW50ID0gY29udGVudCB8fCBcIlwiO1xuICAgICAgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gICAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKSBlLnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbGVhck5vZGUobm9kZSkge1xuICAgICAgd2hpbGUgKG5vZGUuZmlyc3RDaGlsZCkge1xuICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUuZmlyc3RDaGlsZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSwgY29uZGl0aW9uKSB7XG4gICAgICBpZiAoY29uZGl0aW9uKG5vZGUpKSByZXR1cm4gbm9kZTtlbHNlIGlmIChub2RlLnBhcmVudE5vZGUpIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZU51bWJlcklucHV0KGlucHV0Q2xhc3NOYW1lLCBvcHRzKSB7XG4gICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJudW1JbnB1dFdyYXBwZXJcIiksXG4gICAgICAgICAgbnVtSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJudW1JbnB1dCBcIiArIGlucHV0Q2xhc3NOYW1lKSxcbiAgICAgICAgICBhcnJvd1VwID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJhcnJvd1VwXCIpLFxuICAgICAgICAgIGFycm93RG93biA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dEb3duXCIpO1xuICAgICAgbnVtSW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgbnVtSW5wdXQucGF0dGVybiA9IFwiXFxcXGQqXCI7XG4gICAgICBpZiAob3B0cyAhPT0gdW5kZWZpbmVkKSBmb3IgKHZhciBrZXkgaW4gb3B0cykge1xuICAgICAgICBudW1JbnB1dC5zZXRBdHRyaWJ1dGUoa2V5LCBvcHRzW2tleV0pO1xuICAgICAgfVxuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChudW1JbnB1dCk7XG4gICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93VXApO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd0Rvd24pO1xuICAgICAgcmV0dXJuIHdyYXBwZXI7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24gPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgICAgdGhyb3cgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3Aoc291cmNlKSB7XG4gICAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3MubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3NbX2ldO1xuXG4gICAgICAgICAgX2xvb3Aoc291cmNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBERUJPVU5DRURfQ0hBTkdFX01TID0gMzAwO1xuXG4gICAgZnVuY3Rpb24gRmxhdHBpY2tySW5zdGFuY2UoZWxlbWVudCwgaW5zdGFuY2VDb25maWcpIHtcbiAgICAgIHZhciBzZWxmID0ge1xuICAgICAgICBjb25maWc6IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKSxcbiAgICAgICAgbDEwbjogZW5nbGlzaFxuICAgICAgfTtcbiAgICAgIHNlbGYucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7XG4gICAgICAgIGNvbmZpZzogc2VsZi5jb25maWcsXG4gICAgICAgIGwxMG46IHNlbGYubDEwblxuICAgICAgfSk7XG4gICAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuICAgICAgc2VsZi5fYmluZCA9IGJpbmQ7XG4gICAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcbiAgICAgIHNlbGYuY2hhbmdlTW9udGggPSBjaGFuZ2VNb250aDtcbiAgICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7XG4gICAgICBzZWxmLmNsZWFyID0gY2xlYXI7XG4gICAgICBzZWxmLmNsb3NlID0gY2xvc2U7XG4gICAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcbiAgICAgIHNlbGYuZGVzdHJveSA9IGRlc3Ryb3k7XG4gICAgICBzZWxmLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XG4gICAgICBzZWxmLm9wZW4gPSBvcGVuO1xuICAgICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XG4gICAgICBzZWxmLnNldCA9IHNldDtcbiAgICAgIHNlbGYuc2V0RGF0ZSA9IHNldERhdGU7XG4gICAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcblxuICAgICAgZnVuY3Rpb24gc2V0dXBIZWxwZXJGdW5jdGlvbnMoKSB7XG4gICAgICAgIHNlbGYudXRpbHMgPSB7XG4gICAgICAgICAgZ2V0RGF5c0luTW9udGg6IGZ1bmN0aW9uIGdldERheXNJbk1vbnRoKG1vbnRoLCB5cikge1xuICAgICAgICAgICAgaWYgKG1vbnRoID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgbW9udGggPSBzZWxmLmN1cnJlbnRNb250aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHlyID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgeXIgPSBzZWxmLmN1cnJlbnRZZWFyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobW9udGggPT09IDEgJiYgKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCB8fCB5ciAlIDQwMCA9PT0gMCkpIHJldHVybiAyOTtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgc2VsZi5lbGVtZW50ID0gc2VsZi5pbnB1dCA9IGVsZW1lbnQ7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHBhcnNlQ29uZmlnKCk7XG4gICAgICAgIHNldHVwTG9jYWxlKCk7XG4gICAgICAgIHNldHVwSW5wdXRzKCk7XG4gICAgICAgIHNldHVwRGF0ZXMoKTtcbiAgICAgICAgc2V0dXBIZWxwZXJGdW5jdGlvbnMoKTtcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSBidWlsZCgpO1xuICAgICAgICBiaW5kRXZlbnRzKCk7XG5cbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fCBzZWxmLmNvbmZpZy5taW5EYXRlIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB1cGRhdGVWYWx1ZShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnNob3dUaW1lSW5wdXQgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyO1xuXG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIHZhciBkYXlzV2lkdGggPSAoc2VsZi5kYXlzQ29udGFpbmVyLm9mZnNldFdpZHRoICsgMSkgKiBzZWxmLmNvbmZpZy5zaG93TW9udGhzO1xuICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLndpZHRoID0gZGF5c1dpZHRoICsgXCJweFwiO1xuXG4gICAgICAgICAgaWYgKHNlbGYud2Vla1dyYXBwZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIHNlbGYud2Vla1dyYXBwZXIub2Zmc2V0V2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc1NhZmFyaSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlICYmIGlzU2FmYXJpKSB7XG4gICAgICAgICAgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25SZWFkeVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYmluZFRvSW5zdGFuY2UoZm4pIHtcbiAgICAgICAgcmV0dXJuIGZuLmJpbmQoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVRpbWUoZSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICB0aW1lV3JhcHBlcihlKTtcblxuICAgICAgICBpZiAoZS50eXBlICE9PSBcImlucHV0XCIpIHtcbiAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH0sIERFQk9VTkNFRF9DSEFOR0VfTVMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGFtcG0ybWlsaXRhcnkoaG91ciwgYW1QTSkge1xuICAgICAgICByZXR1cm4gaG91ciAlIDEyICsgMTIgKiBpbnQoYW1QTSA9PT0gc2VsZi5sMTBuLmFtUE1bMV0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBtaWxpdGFyeTJhbXBtKGhvdXIpIHtcbiAgICAgICAgc3dpdGNoIChob3VyICUgMjQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgIHJldHVybiAxMjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gaG91ciAlIDEyO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbUlucHV0cygpIHtcbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgPT09IHVuZGVmaW5lZCB8fCBzZWxmLm1pbnV0ZUVsZW1lbnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB2YXIgaG91cnMgPSAocGFyc2VJbnQoc2VsZi5ob3VyRWxlbWVudC52YWx1ZS5zbGljZSgtMiksIDEwKSB8fCAwKSAlIDI0LFxuICAgICAgICAgICAgbWludXRlcyA9IChwYXJzZUludChzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwLFxuICAgICAgICAgICAgc2Vjb25kcyA9IHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkID8gKHBhcnNlSW50KHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSwgMTApIHx8IDApICUgNjAgOiAwO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIGhvdXJzID0gYW1wbTJtaWxpdGFyeShob3Vycywgc2VsZi5hbVBNLnRleHRDb250ZW50KTtcbiAgICAgICAgdmFyIGxpbWl0TWluSG91cnMgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQgfHwgc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLm1pbkRhdGVIYXNUaW1lICYmIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICYmIGNvbXBhcmVEYXRlcyhzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiwgc2VsZi5jb25maWcubWluRGF0ZSwgdHJ1ZSkgPT09IDA7XG4gICAgICAgIHZhciBsaW1pdE1heEhvdXJzID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkIHx8IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5tYXhEYXRlSGFzVGltZSAmJiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJiBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1heERhdGUsIHRydWUpID09PSAwO1xuXG4gICAgICAgIGlmIChsaW1pdE1heEhvdXJzKSB7XG4gICAgICAgICAgdmFyIG1heFRpbWUgPSBzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQgPyBzZWxmLmNvbmZpZy5tYXhUaW1lIDogc2VsZi5jb25maWcubWF4RGF0ZTtcbiAgICAgICAgICBob3VycyA9IE1hdGgubWluKGhvdXJzLCBtYXhUaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKSBtaW51dGVzID0gTWF0aC5taW4obWludXRlcywgbWF4VGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgIGlmIChtaW51dGVzID09PSBtYXhUaW1lLmdldE1pbnV0ZXMoKSkgc2Vjb25kcyA9IE1hdGgubWluKHNlY29uZHMsIG1heFRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaW1pdE1pbkhvdXJzKSB7XG4gICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQgPyBzZWxmLmNvbmZpZy5taW5UaW1lIDogc2VsZi5jb25maWcubWluRGF0ZTtcbiAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xuICAgICAgICAgIGlmIChob3VycyA9PT0gbWluVGltZS5nZXRIb3VycygpKSBtaW51dGVzID0gTWF0aC5tYXgobWludXRlcywgbWluVGltZS5nZXRNaW51dGVzKCkpO1xuICAgICAgICAgIGlmIChtaW51dGVzID09PSBtaW5UaW1lLmdldE1pbnV0ZXMoKSkgc2Vjb25kcyA9IE1hdGgubWF4KHNlY29uZHMsIG1pblRpbWUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKSB7XG4gICAgICAgIHZhciBkYXRlID0gZGF0ZU9iaiB8fCBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iajtcbiAgICAgICAgaWYgKGRhdGUpIHNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKSwgZGF0ZS5nZXRNaW51dGVzKCksIGRhdGUuZ2V0U2Vjb25kcygpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcbiAgICAgICAgaWYgKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5zZXRIb3Vycyhob3VycyAlIDI0LCBtaW51dGVzLCBzZWNvbmRzIHx8IDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxmLmhvdXJFbGVtZW50IHx8ICFzZWxmLm1pbnV0ZUVsZW1lbnQgfHwgc2VsZi5pc01vYmlsZSkgcmV0dXJuO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnZhbHVlID0gcGFkKCFzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyAoMTIgKyBob3VycykgJSAxMiArIDEyICogaW50KGhvdXJzICUgMTIgPT09IDApIDogaG91cnMpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7XG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCkgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KGhvdXJzID49IDEyKV07XG4gICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlY29uZHMpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblllYXJJbnB1dChldmVudCkge1xuICAgICAgICB2YXIgeWVhciA9IHBhcnNlSW50KGV2ZW50LnRhcmdldC52YWx1ZSkgKyAoZXZlbnQuZGVsdGEgfHwgMCk7XG5cbiAgICAgICAgaWYgKHllYXIudG9TdHJpbmcoKS5sZW5ndGggPT09IDQgfHwgZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBldmVudC50YXJnZXQuYmx1cigpO1xuICAgICAgICAgIGlmICghL1teXFxkXS8udGVzdCh5ZWFyLnRvU3RyaW5nKCkpKSBjaGFuZ2VZZWFyKHllYXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBldmVudC5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgIHJldHVybiBiaW5kKGVsZW1lbnQsIGV2LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBlbGVtZW50LmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG5cbiAgICAgICAgc2VsZi5faGFuZGxlcnMucHVzaCh7XG4gICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICBldmVudDogZXZlbnQsXG4gICAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25DbGljayhoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgZXZ0LndoaWNoID09PSAxICYmIGhhbmRsZXIoZXZ0KTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdHJpZ2dlckNoYW5nZSgpIHtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy53cmFwKSB7XG4gICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtXCIgKyBldnQgKyBcIl1cIiksIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICByZXR1cm4gYmluZChlbCwgXCJjbGlja1wiLCBzZWxmW2V2dF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSkge1xuICAgICAgICAgIHNldHVwTW9iaWxlKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlYm91bmNlZFJlc2l6ZSA9IGRlYm91bmNlKG9uUmVzaXplLCA1MCk7XG4gICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSA9IGRlYm91bmNlKHRyaWdnZXJDaGFuZ2UsIERFQk9VTkNFRF9DSEFOR0VfTVMpO1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICYmICEvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIG9uTW91c2VPdmVyKGUudGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LmJvZHksIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYykgYmluZChzZWxmLl9pbnB1dCwgXCJrZXlkb3duXCIsIG9uS2V5RG93bik7XG4gICAgICAgIGlmICghc2VsZi5jb25maWcuaW5saW5lICYmICFzZWxmLmNvbmZpZy5zdGF0aWMpIGJpbmQod2luZG93LCBcInJlc2l6ZVwiLCBkZWJvdW5jZWRSZXNpemUpO1xuICAgICAgICBpZiAod2luZG93Lm9udG91Y2hzdGFydCAhPT0gdW5kZWZpbmVkKSBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJ0b3VjaHN0YXJ0XCIsIGRvY3VtZW50Q2xpY2spO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJtb3VzZWRvd25cIiwgb25DbGljayhkb2N1bWVudENsaWNrKSk7XG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LCBcImZvY3VzXCIsIGRvY3VtZW50Q2xpY2ssIHtcbiAgICAgICAgICBjYXB0dXJlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XG4gICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJmb2N1c1wiLCBzZWxmLm9wZW4pO1xuICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soc2VsZi5vcGVuKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2sob25Nb250aE5hdkNsaWNrKSk7XG4gICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBbXCJrZXl1cFwiLCBcImluY3JlbWVudFwiXSwgb25ZZWFySW5wdXQpO1xuICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGVjdERhdGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLnRpbWVDb250YWluZXIgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1pbnV0ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICB2YXIgc2VsVGV4dCA9IGZ1bmN0aW9uIHNlbFRleHQoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgW1wiaW5wdXRcIiwgXCJpbmNyZW1lbnRcIl0sIHVwZGF0ZVRpbWUpO1xuICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHRpbWVJbmNyZW1lbnQpKTtcbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgW1wiaW5wdXRcIiwgXCJpbmNyZW1lbnRcIl0sIHNlbGYuX2RlYm91bmNlZENoYW5nZSwge1xuICAgICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGJpbmQoW3NlbGYuaG91ckVsZW1lbnQsIHNlbGYubWludXRlRWxlbWVudF0sIFtcImZvY3VzXCIsIFwiY2xpY2tcIl0sIHNlbFRleHQpO1xuICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkgYmluZChzZWxmLnNlY29uZEVsZW1lbnQsIFwiZm9jdXNcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGJpbmQoc2VsZi5hbVBNLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XG4gICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2UoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24ganVtcFRvRGF0ZShqdW1wRGF0ZSkge1xuICAgICAgICB2YXIganVtcFRvID0ganVtcERhdGUgIT09IHVuZGVmaW5lZCA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKSA6IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8IChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUgPiBzZWxmLm5vdyA/IHNlbGYuY29uZmlnLm1pbkRhdGUgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUgPCBzZWxmLm5vdyA/IHNlbGYuY29uZmlnLm1heERhdGUgOiBzZWxmLm5vdyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoanVtcFRvICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0ganVtcFRvLmdldE1vbnRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgZS5tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsganVtcFRvO1xuICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRpbWVJbmNyZW1lbnQoZSkge1xuICAgICAgICBpZiAofmUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiYXJyb3dcIikpIGluY3JlbWVudE51bUlucHV0KGUsIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikgPyAxIDogLTEpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpbmNyZW1lbnROdW1JbnB1dChlLCBkZWx0YSwgaW5wdXRFbGVtKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlICYmIGUudGFyZ2V0O1xuICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dEVsZW0gfHwgdGFyZ2V0ICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XG4gICAgICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KFwiaW5jcmVtZW50XCIpO1xuICAgICAgICBldmVudC5kZWx0YSA9IGRlbHRhO1xuICAgICAgICBpbnB1dCAmJiBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGQoKSB7XG4gICAgICAgIHZhciBmcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWNhbGVuZGFyXCIpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnRhYkluZGV4ID0gLTE7XG5cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRNb250aE5hdigpKTtcbiAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1pbm5lckNvbnRhaW5lclwiKTtcblxuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy53ZWVrTnVtYmVycykge1xuICAgICAgICAgICAgdmFyIF9idWlsZFdlZWtzID0gYnVpbGRXZWVrcygpLFxuICAgICAgICAgICAgICAgIHdlZWtXcmFwcGVyID0gX2J1aWxkV2Vla3Mud2Vla1dyYXBwZXIsXG4gICAgICAgICAgICAgICAgd2Vla051bWJlcnMgPSBfYnVpbGRXZWVrcy53ZWVrTnVtYmVycztcblxuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XG4gICAgICAgICAgICBzZWxmLndlZWtOdW1iZXJzID0gd2Vla051bWJlcnM7XG4gICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2VsZi5yQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1yQ29udGFpbmVyXCIpO1xuICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChidWlsZFdlZWtkYXlzKCkpO1xuXG4gICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItZGF5c1wiKTtcbiAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICAgIHNlbGYuckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5yQ29udGFpbmVyKTtcbiAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzZWxmLmlubmVyQ29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRUaW1lKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyYW5nZU1vZGVcIiwgc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhbmltYXRlXCIsIHNlbGYuY29uZmlnLmFuaW1hdGUgPT09IHRydWUpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcIm11bHRpTW9udGhcIiwgc2VsZi5jb25maWcuc2hvd01vbnRocyA+IDEpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICAgICAgdmFyIGN1c3RvbUFwcGVuZCA9IHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQgJiYgc2VsZi5jb25maWcuYXBwZW5kVG8ubm9kZVR5cGUgIT09IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lIHx8IHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChzZWxmLmNvbmZpZy5pbmxpbmUgPyBcImlubGluZVwiIDogXCJzdGF0aWNcIik7XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XG4gICAgICAgICAgICBpZiAoIWN1c3RvbUFwcGVuZCAmJiBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSkgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIHNlbGYuX2lucHV0Lm5leHRTaWJsaW5nKTtlbHNlIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkKSBzZWxmLmNvbmZpZy5hcHBlbmRUby5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd3JhcHBlclwiKTtcbiAgICAgICAgICAgIGlmIChzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSkgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkgKHNlbGYuY29uZmlnLmFwcGVuZFRvICE9PSB1bmRlZmluZWQgPyBzZWxmLmNvbmZpZy5hcHBlbmRUbyA6IHdpbmRvdy5kb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRGF5KGNsYXNzTmFtZSwgZGF0ZSwgZGF5TnVtYmVyLCBpKSB7XG4gICAgICAgIHZhciBkYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKGRhdGUsIHRydWUpLFxuICAgICAgICAgICAgZGF5RWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWRheSBcIiArIGNsYXNzTmFtZSwgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKSk7XG4gICAgICAgIGRheUVsZW1lbnQuZGF0ZU9iaiA9IGRhdGU7XG4gICAgICAgIGRheUVsZW1lbnQuJGkgPSBpO1xuICAgICAgICBkYXlFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5mb3JtYXREYXRlKGRhdGUsIHNlbGYuY29uZmlnLmFyaWFEYXRlRm9ybWF0KSk7XG5cbiAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLm5vdykgPT09IDApIHtcbiAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xuICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRvZGF5XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcbiAgICAgICAgICBkYXlFbGVtZW50LnRhYkluZGV4ID0gLTE7XG5cbiAgICAgICAgICBpZiAoaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIHtcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gZGF5RWxlbWVudDtcblxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHRydWUpID09PSAwKTtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJlbmRSYW5nZVwiLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0gJiYgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSwgdHJ1ZSkgPT09IDApO1xuICAgICAgICAgICAgICBpZiAoY2xhc3NOYW1lID09PSBcIm5leHRNb250aERheVwiKSBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICBpZiAoaXNEYXRlSW5SYW5nZShkYXRlKSAmJiAhaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImluUmFuZ2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycyAmJiBzZWxmLmNvbmZpZy5zaG93TW9udGhzID09PSAxICYmIGNsYXNzTmFtZSAhPT0gXCJwcmV2TW9udGhEYXlcIiAmJiBkYXlOdW1iZXIgJSA3ID09PSAxKSB7XG4gICAgICAgICAgc2VsZi53ZWVrTnVtYmVycy5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgXCI8c3BhbiBjbGFzcz0nZmxhdHBpY2tyLWRheSc+XCIgKyBzZWxmLmNvbmZpZy5nZXRXZWVrKGRhdGUpICsgXCI8L3NwYW4+XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25EYXlDcmVhdGVcIiwgZGF5RWxlbWVudCk7XG4gICAgICAgIHJldHVybiBkYXlFbGVtZW50O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmb2N1c09uRGF5KGN1cnJlbnRJbmQsIG9mZnNldCkge1xuICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gY3VycmVudEluZCAhPT0gdW5kZWZpbmVkID8gY3VycmVudEluZCA6IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuJGk7XG4gICAgICAgIHZhciBuZXdJbmRleCA9IChjdXJyZW50SW5kZXggfHwgMCkgKyBvZmZzZXQgfHwgMCxcbiAgICAgICAgICAgIHRhcmdldE5vZGUgPSBBcnJheS5wcm90b3R5cGUuZmluZC5jYWxsKHNlbGYuZGF5cy5jaGlsZHJlbiwgZnVuY3Rpb24gKGMsIGkpIHtcbiAgICAgICAgICByZXR1cm4gaSA+PSBuZXdJbmRleCAmJiBjLmNsYXNzTmFtZS5pbmRleE9mKFwiTW9udGhEYXlcIikgPT09IC0xICYmIGlzRW5hYmxlZChjLmRhdGVPYmopO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGFyZ2V0Tm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGFyZ2V0Tm9kZS5mb2N1cygpO1xuICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIG9uTW91c2VPdmVyKHRhcmdldE5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkTW9udGhEYXlzKHllYXIsIG1vbnRoKSB7XG4gICAgICAgIHZhciBmaXJzdE9mTW9udGggPSAobmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpIC0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrICsgNykgJSA3O1xuICAgICAgICB2YXIgcHJldk1vbnRoRGF5cyA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgoKG1vbnRoIC0gMSArIDEyKSAlIDEyKTtcbiAgICAgICAgdmFyIGRheXNJbk1vbnRoID0gc2VsZi51dGlscy5nZXREYXlzSW5Nb250aChtb250aCksXG4gICAgICAgICAgICBkYXlzID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLFxuICAgICAgICAgICAgZGF5SW5kZXggPSAwO1xuXG4gICAgICAgIGZvciAoOyBkYXlOdW1iZXIgPD0gcHJldk1vbnRoRGF5czsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcInByZXZNb250aERheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoZGF5TnVtYmVyID0gMTsgZGF5TnVtYmVyIDw9IGRheXNJbk1vbnRoOyBkYXlOdW1iZXIrKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwiXCIsIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBkYXlOdW0gPSBkYXlzSW5Nb250aCArIDE7IGRheU51bSA8PSA0MiAtIGZpcnN0T2ZNb250aCAmJiAoc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSB8fCBkYXlJbmRleCAlIDcgIT09IDApOyBkYXlOdW0rKywgZGF5SW5kZXgrKykge1xuICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwibmV4dE1vbnRoRGF5XCIsIG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImRheUNvbnRhaW5lclwiKTtcbiAgICAgICAgZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRheXMpO1xuICAgICAgICByZXR1cm4gZGF5Q29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZERheXMoKSB7XG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFyTm9kZShzZWxmLmRheXNDb250YWluZXIpO1xuICAgICAgICBpZiAoc2VsZi53ZWVrTnVtYmVycykgY2xlYXJOb2RlKHNlbGYud2Vla051bWJlcnMpO1xuICAgICAgICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGkrKykge1xuICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIDEpO1xuICAgICAgICAgIGQuc2V0TW9udGgoc2VsZi5jdXJyZW50TW9udGggKyBpKTtcbiAgICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGJ1aWxkTW9udGhEYXlzKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmRheXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICAgIHNlbGYuZGF5cyA9IHNlbGYuZGF5c0NvbnRhaW5lci5maXJzdENoaWxkO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoKCkge1xuICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aFwiKTtcbiAgICAgICAgdmFyIG1vbnRoTmF2RnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICB2YXIgbW9udGhFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJjdXItbW9udGhcIik7XG4gICAgICAgIG1vbnRoRWxlbWVudC50aXRsZSA9IHNlbGYubDEwbi5zY3JvbGxUaXRsZTtcbiAgICAgICAgdmFyIHllYXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiY3VyLXllYXJcIiwge1xuICAgICAgICAgIHRhYmluZGV4OiBcIi0xXCJcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB5ZWFyRWxlbWVudCA9IHllYXJJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICB5ZWFyRWxlbWVudC50aXRsZSA9IHNlbGYubDEwbi5zY3JvbGxUaXRsZTtcbiAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmwxMG4ueWVhckFyaWFMYWJlbCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlKSB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHtcbiAgICAgICAgICB5ZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgeWVhckVsZW1lbnQuZGlzYWJsZWQgPSAhIXNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3VycmVudE1vbnRoID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jdXJyZW50LW1vbnRoXCIpO1xuICAgICAgICBjdXJyZW50TW9udGguYXBwZW5kQ2hpbGQobW9udGhFbGVtZW50KTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKHllYXJJbnB1dCk7XG4gICAgICAgIG1vbnRoTmF2RnJhZ21lbnQuYXBwZW5kQ2hpbGQoY3VycmVudE1vbnRoKTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG1vbnRoTmF2RnJhZ21lbnQpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGNvbnRhaW5lcjogY29udGFpbmVyLFxuICAgICAgICAgIHllYXJFbGVtZW50OiB5ZWFyRWxlbWVudCxcbiAgICAgICAgICBtb250aEVsZW1lbnQ6IG1vbnRoRWxlbWVudFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoTmF2KCkge1xuICAgICAgICBzZWxmLm1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1tb250aHNcIik7XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzID0gW107XG4gICAgICAgIHNlbGYubW9udGhFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXByZXYtbW9udGhcIik7XG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1uZXh0LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLm5leHRNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5uZXh0QXJyb3c7XG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5wcmV2TW9udGhOYXYpO1xuXG4gICAgICAgIGZvciAodmFyIG0gPSBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtLS07KSB7XG4gICAgICAgICAgdmFyIG1vbnRoID0gYnVpbGRNb250aCgpO1xuICAgICAgICAgIHNlbGYueWVhckVsZW1lbnRzLnB1c2gobW9udGgueWVhckVsZW1lbnQpO1xuICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50cy5wdXNoKG1vbnRoLm1vbnRoRWxlbWVudCk7XG4gICAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aC5jb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChzZWxmLm5leHRNb250aE5hdik7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3c7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLnByZXZNb250aE5hdiwgXCJkaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdztcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2wpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9faGlkZU5leHRNb250aEFycm93ICE9PSBib29sKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYubmV4dE1vbnRoTmF2LCBcImRpc2FibGVkXCIsIGJvb2wpO1xuICAgICAgICAgICAgICBzZWxmLl9faGlkZU5leHRNb250aEFycm93ID0gYm9vbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudCA9IHNlbGYueWVhckVsZW1lbnRzWzBdO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIHJldHVybiBzZWxmLm1vbnRoTmF2O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFRpbWUoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1RpbWVcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXRpbWVcIik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xuICAgICAgICB2YXIgaG91cklucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItaG91clwiKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudCA9IGhvdXJJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1taW51dGVcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudCA9IG1pbnV0ZUlucHV0LmNoaWxkTm9kZXNbMF07XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudGFiSW5kZXggPSBzZWxmLm1pbnV0ZUVsZW1lbnQudGFiSW5kZXggPSAtMTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldEhvdXJzKCkgOiBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBzZWxmLmNvbmZpZy5kZWZhdWx0SG91ciA6IG1pbGl0YXJ5MmFtcG0oc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0TWludXRlcygpIDogc2VsZi5jb25maWcuZGVmYXVsdE1pbnV0ZSk7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIiwgc2VsZi5jb25maWcubWludXRlSW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMFwiIDogXCIxXCIpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBcIjBcIik7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBcIjU5XCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQoaG91cklucHV0KTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlcGFyYXRvcik7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy50aW1lXzI0aHIpIHNlbGYudGltZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGltZTI0aHJcIik7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVNlY29uZHMpIHtcbiAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XG4gICAgICAgICAgdmFyIHNlY29uZElucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3Itc2Vjb25kXCIpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudCA9IHNlY29uZElucHV0LmNoaWxkTm9kZXNbMF07XG4gICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouZ2V0U2Vjb25kcygpIDogc2VsZi5jb25maWcuZGVmYXVsdFNlY29uZHMpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSk7XG4gICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiKSk7XG4gICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiKSk7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKSk7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlY29uZElucHV0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcudGltZV8yNGhyKSB7XG4gICAgICAgICAgc2VsZi5hbVBNID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItYW0tcG1cIiwgc2VsZi5sMTBuLmFtUE1baW50KChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYuaG91ckVsZW1lbnQudmFsdWUgOiBzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikgPiAxMSldKTtcbiAgICAgICAgICBzZWxmLmFtUE0udGl0bGUgPSBzZWxmLmwxMG4udG9nZ2xlVGl0bGU7XG4gICAgICAgICAgc2VsZi5hbVBNLnRhYkluZGV4ID0gLTE7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuYW1QTSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2VsZi50aW1lQ29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFdlZWtkYXlzKCkge1xuICAgICAgICBpZiAoIXNlbGYud2Vla2RheUNvbnRhaW5lcikgc2VsZi53ZWVrZGF5Q29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5c1wiKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgIHZhciBjb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtkYXljb250YWluZXJcIik7XG4gICAgICAgICAgc2VsZi53ZWVrZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVXZWVrZGF5cygpO1xuICAgICAgICByZXR1cm4gc2VsZi53ZWVrZGF5Q29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVXZWVrZGF5cygpIHtcbiAgICAgICAgdmFyIGZpcnN0RGF5T2ZXZWVrID0gc2VsZi5sMTBuLmZpcnN0RGF5T2ZXZWVrO1xuICAgICAgICB2YXIgd2Vla2RheXMgPSBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLmNvbmNhdCgpO1xuXG4gICAgICAgIGlmIChmaXJzdERheU9mV2VlayA+IDAgJiYgZmlyc3REYXlPZldlZWsgPCB3ZWVrZGF5cy5sZW5ndGgpIHtcbiAgICAgICAgICB3ZWVrZGF5cyA9IHdlZWtkYXlzLnNwbGljZShmaXJzdERheU9mV2Vlaywgd2Vla2RheXMubGVuZ3RoKS5jb25jYXQod2Vla2RheXMuc3BsaWNlKDAsIGZpcnN0RGF5T2ZXZWVrKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgaS0tOykge1xuICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5jaGlsZHJlbltpXS5pbm5lckhUTUwgPSBcIlxcbiAgICAgIDxzcGFuIGNsYXNzPWZsYXRwaWNrci13ZWVrZGF5PlxcbiAgICAgICAgXCIgKyB3ZWVrZGF5cy5qb2luKFwiPC9zcGFuPjxzcGFuIGNsYXNzPWZsYXRwaWNrci13ZWVrZGF5PlwiKSArIFwiXFxuICAgICAgPC9zcGFuPlxcbiAgICAgIFwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkV2Vla3MoKSB7XG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1dlZWtzXCIpO1xuICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWt3cmFwcGVyXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci13ZWVrZGF5XCIsIHNlbGYubDEwbi53ZWVrQWJicmV2aWF0aW9uKSk7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVycyA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla3NcIik7XG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB3ZWVrV3JhcHBlcjogd2Vla1dyYXBwZXIsXG4gICAgICAgICAgd2Vla051bWJlcnM6IHdlZWtOdW1iZXJzXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNoYW5nZU1vbnRoKHZhbHVlLCBpc19vZmZzZXQsIGZyb21fa2V5Ym9hcmQpIHtcbiAgICAgICAgaWYgKGlzX29mZnNldCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgaXNfb2Zmc2V0ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcm9tX2tleWJvYXJkID09PSB2b2lkIDApIHtcbiAgICAgICAgICBmcm9tX2tleWJvYXJkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGVsdGEgPSBpc19vZmZzZXQgPyB2YWx1ZSA6IHZhbHVlIC0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgIGlmIChkZWx0YSA8IDAgJiYgc2VsZi5faGlkZVByZXZNb250aEFycm93ID09PSB0cnVlIHx8IGRlbHRhID4gMCAmJiBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPT09IHRydWUpIHJldHVybjtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggKz0gZGVsdGE7XG5cbiAgICAgICAgaWYgKHNlbGYuY3VycmVudE1vbnRoIDwgMCB8fCBzZWxmLmN1cnJlbnRNb250aCA+IDExKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50WWVhciArPSBzZWxmLmN1cnJlbnRNb250aCA+IDExID8gMSA6IC0xO1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gKHNlbGYuY3VycmVudE1vbnRoICsgMTIpICUgMTI7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcblxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGZvY3VzT25EYXkodW5kZWZpbmVkLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbGVhcih0cmlnZ2VyQ2hhbmdlRXZlbnQpIHtcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZUV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSBzZWxmLmFsdElucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCkgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xuICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHVuZGVmaW5lZDtcbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkKSBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO2Vsc2Ugc2V0SG91cnMoc2VsZi5jb25maWcuZGVmYXVsdEhvdXIsIHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUsIHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuXG4gICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2xvc2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZyAhPT0gdW5kZWZpbmVkKSB0cmlnZ2VyRXZlbnQoXCJvbkRlc3Ryb3lcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuX2hhbmRsZXJzLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgIHZhciBoID0gc2VsZi5faGFuZGxlcnNbaV07XG4gICAgICAgICAgaC5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoaC5ldmVudCwgaC5oYW5kbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzID0gW107XG5cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcbiAgICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlKSBzZWxmLm1vYmlsZUlucHV0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2VsZi5tb2JpbGVJbnB1dCk7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyICYmIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZSkgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuXG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0KSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZSkgc2VsZi5hbHRJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYuYWx0SW5wdXQpO1xuICAgICAgICAgIGRlbGV0ZSBzZWxmLmFsdElucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaW5wdXQpIHtcbiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBzZWxmLmlucHV0Ll90eXBlO1xuICAgICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZsYXRwaWNrci1pbnB1dFwiKTtcbiAgICAgICAgICBzZWxmLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcInJlYWRvbmx5XCIpO1xuICAgICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgW1wiX3Nob3dUaW1lSW5wdXRcIiwgXCJsYXRlc3RTZWxlY3RlZERhdGVPYmpcIiwgXCJfaGlkZU5leHRNb250aEFycm93XCIsIFwiX2hpZGVQcmV2TW9udGhBcnJvd1wiLCBcIl9faGlkZU5leHRNb250aEFycm93XCIsIFwiX19oaWRlUHJldk1vbnRoQXJyb3dcIiwgXCJpc01vYmlsZVwiLCBcImlzT3BlblwiLCBcInNlbGVjdGVkRGF0ZUVsZW1cIiwgXCJtaW5EYXRlSGFzVGltZVwiLCBcIm1heERhdGVIYXNUaW1lXCIsIFwiZGF5c1wiLCBcImRheXNDb250YWluZXJcIiwgXCJfaW5wdXRcIiwgXCJfcG9zaXRpb25FbGVtZW50XCIsIFwiaW5uZXJDb250YWluZXJcIiwgXCJyQ29udGFpbmVyXCIsIFwibW9udGhOYXZcIiwgXCJ0b2RheURhdGVFbGVtXCIsIFwiY2FsZW5kYXJDb250YWluZXJcIiwgXCJ3ZWVrZGF5Q29udGFpbmVyXCIsIFwicHJldk1vbnRoTmF2XCIsIFwibmV4dE1vbnRoTmF2XCIsIFwiY3VycmVudE1vbnRoRWxlbWVudFwiLCBcImN1cnJlbnRZZWFyRWxlbWVudFwiLCBcIm5hdmlnYXRpb25DdXJyZW50TW9udGhcIiwgXCJzZWxlY3RlZERhdGVFbGVtXCIsIFwiY29uZmlnXCJdLmZvckVhY2goZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVsZXRlIHNlbGZba107XG4gICAgICAgICAgfSBjYXRjaCAoXykge31cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFwcGVuZFRvICYmIHNlbGYuY29uZmlnLmFwcGVuZFRvLmNvbnRhaW5zKGVsZW0pKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY29udGFpbnMoZWxlbSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGRvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgIHZhciBpc0NhbGVuZGFyRWxlbWVudCA9IGlzQ2FsZW5kYXJFbGVtKGUudGFyZ2V0KTtcbiAgICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8IGUudGFyZ2V0ID09PSBzZWxmLmFsdElucHV0IHx8IHNlbGYuZWxlbWVudC5jb250YWlucyhlLnRhcmdldCkgfHwgZS5wYXRoICYmIGUucGF0aC5pbmRleE9mICYmICh+ZS5wYXRoLmluZGV4T2Yoc2VsZi5pbnB1dCkgfHwgfmUucGF0aC5pbmRleE9mKHNlbGYuYWx0SW5wdXQpKTtcbiAgICAgICAgICB2YXIgbG9zdEZvY3VzID0gZS50eXBlID09PSBcImJsdXJcIiA/IGlzSW5wdXQgJiYgZS5yZWxhdGVkVGFyZ2V0ICYmICFpc0NhbGVuZGFyRWxlbShlLnJlbGF0ZWRUYXJnZXQpIDogIWlzSW5wdXQgJiYgIWlzQ2FsZW5kYXJFbGVtZW50O1xuICAgICAgICAgIHZhciBpc0lnbm9yZWQgPSAhc2VsZi5jb25maWcuaWdub3JlZEZvY3VzRWxlbWVudHMuc29tZShmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW0uY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKGxvc3RGb2N1cyAmJiBpc0lnbm9yZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY2xvc2UoKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VZZWFyKG5ld1llYXIpIHtcbiAgICAgICAgaWYgKCFuZXdZZWFyIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgbmV3WWVhciA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIG5ld1llYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHJldHVybjtcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLFxuICAgICAgICAgICAgaXNOZXdZZWFyID0gc2VsZi5jdXJyZW50WWVhciAhPT0gbmV3WWVhck51bTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IG5ld1llYXJOdW0gfHwgc2VsZi5jdXJyZW50WWVhcjtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpIHtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IE1hdGgubWluKHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSwgc2VsZi5jdXJyZW50TW9udGgpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1heChzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc05ld1llYXIpIHtcbiAgICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0VuYWJsZWQoZGF0ZSwgdGltZWxlc3MpIHtcbiAgICAgICAgaWYgKHRpbWVsZXNzID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGF0ZVRvQ2hlY2sgPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCB1bmRlZmluZWQsIHRpbWVsZXNzKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgZGF0ZVRvQ2hlY2sgJiYgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5taW5EYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5taW5EYXRlSGFzVGltZSkgPCAwIHx8IHNlbGYuY29uZmlnLm1heERhdGUgJiYgZGF0ZVRvQ2hlY2sgJiYgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5tYXhEYXRlSGFzVGltZSkgPiAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoID09PSAwICYmIHNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKGRhdGVUb0NoZWNrID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGJvb2wgPSBzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoID4gMCxcbiAgICAgICAgICAgIGFycmF5ID0gYm9vbCA/IHNlbGYuY29uZmlnLmVuYWJsZSA6IHNlbGYuY29uZmlnLmRpc2FibGU7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGQ7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGQgPSBhcnJheVtpXTtcbiAgICAgICAgICBpZiAodHlwZW9mIGQgPT09IFwiZnVuY3Rpb25cIiAmJiBkKGRhdGVUb0NoZWNrKSkgcmV0dXJuIGJvb2w7ZWxzZSBpZiAoZCBpbnN0YW5jZW9mIERhdGUgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJiBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKSByZXR1cm4gYm9vbDtlbHNlIGlmICh0eXBlb2YgZCA9PT0gXCJzdHJpbmdcIiAmJiBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgcGFyc2VkID0gc2VsZi5wYXJzZURhdGUoZCwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQgJiYgcGFyc2VkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpID8gYm9vbCA6ICFib29sO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGQgPT09IFwib2JqZWN0XCIgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCAmJiBkLmZyb20gJiYgZC50byAmJiBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPj0gZC5mcm9tLmdldFRpbWUoKSAmJiBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPD0gZC50by5nZXRUaW1lKCkpIHJldHVybiBib29sO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICFib29sO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbktleURvd24oZSkge1xuICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcbiAgICAgICAgdmFyIGNhbGVuZGFyRWxlbSA9IGlzQ2FsZW5kYXJFbGVtKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIGFsbG93SW5wdXQgPSBzZWxmLmNvbmZpZy5hbGxvd0lucHV0O1xuICAgICAgICB2YXIgYWxsb3dLZXlkb3duID0gc2VsZi5pc09wZW4gJiYgKCFhbGxvd0lucHV0IHx8ICFpc0lucHV0KTtcbiAgICAgICAgdmFyIGFsbG93SW5saW5lS2V5ZG93biA9IHNlbGYuY29uZmlnLmlubGluZSAmJiBpc0lucHV0ICYmICFhbGxvd0lucHV0O1xuXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzICYmIGlzSW5wdXQpIHtcbiAgICAgICAgICBpZiAoYWxsb3dJbnB1dCkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCA/IHNlbGYuY29uZmlnLmFsdEZvcm1hdCA6IHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgICAgcmV0dXJuIGUudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICB9IGVsc2Ugc2VsZi5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJFbGVtIHx8IGFsbG93S2V5ZG93biB8fCBhbGxvd0lubGluZUtleWRvd24pIHtcbiAgICAgICAgICB2YXIgaXNUaW1lT2JqID0gISFzZWxmLnRpbWVDb250YWluZXIgJiYgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KTtcblxuICAgICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgICAgICBpZiAoaXNUaW1lT2JqKSB1cGRhdGVWYWx1ZSgpO2Vsc2Ugc2VsZWN0RGF0ZShlKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgZm9jdXNBbmRDbG9zZSgpO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgY2FzZSA0NjpcbiAgICAgICAgICAgICAgaWYgKGlzSW5wdXQgJiYgIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzc6XG4gICAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaikge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBfZGVsdGEgPSBpc0lucHV0ID8gMCA6IGUua2V5Q29kZSA9PT0gMzkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgIGlmICghZS5jdHJsS2V5KSBmb2N1c09uRGF5KHVuZGVmaW5lZCwgX2RlbHRhKTtlbHNlIGNoYW5nZU1vbnRoKF9kZWx0YSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuaG91ckVsZW1lbnQpIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgdmFyIGRlbHRhID0gZS5rZXlDb2RlID09PSA0MCA/IDEgOiAtMTtcblxuICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICYmIGUudGFyZ2V0LiRpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCAwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1RpbWVPYmopIGZvY3VzT25EYXkoZS50YXJnZXQuJGksIGRlbHRhICogNyk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmIHNlbGYuaG91ckVsZW1lbnQpIHNlbGYuaG91ckVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlKCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHNlbGYuaG91ckVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQgJiYgKHNlbGYuc2Vjb25kRWxlbWVudCB8fCBzZWxmLmFtUE0pKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2VsZi5zZWNvbmRFbGVtZW50LmZvY3VzKCk7ZWxzZSBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHNlbGYuYW1QTS5mb2N1cygpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuYW1QTS5mb2N1cygpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApOlxuICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVswXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGUudGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVswXTtcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApOlxuICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKTpcbiAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGUudGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVsxXTtcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uS2V5RG93blwiLCBlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvbk1vdXNlT3ZlcihlbGVtKSB7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICE9PSAxIHx8ICFlbGVtLmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgfHwgZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKSkgcmV0dXJuO1xuICAgICAgICB2YXIgaG92ZXJEYXRlID0gZWxlbS5kYXRlT2JqLmdldFRpbWUoKSxcbiAgICAgICAgICAgIGluaXRpYWxEYXRlID0gc2VsZi5wYXJzZURhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB1bmRlZmluZWQsIHRydWUpLmdldFRpbWUoKSxcbiAgICAgICAgICAgIHJhbmdlU3RhcnREYXRlID0gTWF0aC5taW4oaG92ZXJEYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpKSxcbiAgICAgICAgICAgIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSk7XG4gICAgICAgIHZhciBtb250aHMgPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW4sXG4gICAgICAgICAgICBmaXJzdERheSA9IG1vbnRoc1swXS5jaGlsZHJlblswXS5kYXRlT2JqLmdldFRpbWUoKSxcbiAgICAgICAgICAgIGxhc3REYXkgPSBtb250aHNbbW9udGhzLmxlbmd0aCAtIDFdLmxhc3RDaGlsZC5kYXRlT2JqLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIGNvbnRhaW5zRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1pblJhbmdlID0gMCxcbiAgICAgICAgICAgIG1heFJhbmdlID0gMDtcblxuICAgICAgICBmb3IgKHZhciB0ID0gZmlyc3REYXk7IHQgPCBsYXN0RGF5OyB0ICs9IGR1cmF0aW9uLkRBWSkge1xuICAgICAgICAgIGlmICghaXNFbmFibGVkKG5ldyBEYXRlKHQpLCB0cnVlKSkge1xuICAgICAgICAgICAgY29udGFpbnNEaXNhYmxlZCA9IGNvbnRhaW5zRGlzYWJsZWQgfHwgdCA+IHJhbmdlU3RhcnREYXRlICYmIHQgPCByYW5nZUVuZERhdGU7XG4gICAgICAgICAgICBpZiAodCA8IGluaXRpYWxEYXRlICYmICghbWluUmFuZ2UgfHwgdCA+IG1pblJhbmdlKSkgbWluUmFuZ2UgPSB0O2Vsc2UgaWYgKHQgPiBpbml0aWFsRGF0ZSAmJiAoIW1heFJhbmdlIHx8IHQgPCBtYXhSYW5nZSkpIG1heFJhbmdlID0gdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IHNlbGYuY29uZmlnLnNob3dNb250aHM7IG0rKykge1xuICAgICAgICAgIHZhciBtb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttXTtcbiAgICAgICAgICB2YXIgcHJldk1vbnRoID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuW20gLSAxXTtcblxuICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGksIGwpIHtcbiAgICAgICAgICAgIHZhciBkYXlFbGVtID0gbW9udGguY2hpbGRyZW5baV0sXG4gICAgICAgICAgICAgICAgZGF0ZSA9IGRheUVsZW0uZGF0ZU9iajtcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBvdXRPZlJhbmdlID0gbWluUmFuZ2UgPiAwICYmIHRpbWVzdGFtcCA8IG1pblJhbmdlIHx8IG1heFJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPiBtYXhSYW5nZTtcblxuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcbiAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwibm90QWxsb3dlZFwiKTtcbiAgICAgICAgICAgICAgW1wiaW5SYW5nZVwiLCBcInN0YXJ0UmFuZ2VcIiwgXCJlbmRSYW5nZVwiXS5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIFwiY29udGludWVcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSkgcmV0dXJuIFwiY29udGludWVcIjtcblxuICAgICAgICAgICAgW1wic3RhcnRSYW5nZVwiLCBcImluUmFuZ2VcIiwgXCJlbmRSYW5nZVwiLCBcIm5vdEFsbG93ZWRcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChob3ZlckRhdGUgPCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0uZ2V0VGltZSgpID8gXCJzdGFydFJhbmdlXCIgOiBcImVuZFJhbmdlXCIpO1xuXG4gICAgICAgICAgICBpZiAobW9udGguY29udGFpbnMoZWxlbSkgfHwgIShtID4gMCAmJiBwcmV2TW9udGggJiYgcHJldk1vbnRoLmxhc3RDaGlsZC5kYXRlT2JqLmdldFRpbWUoKSA+PSB0aW1lc3RhbXApKSB7XG4gICAgICAgICAgICAgIGlmIChpbml0aWFsRGF0ZSA8IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO2Vsc2UgaWYgKGluaXRpYWxEYXRlID4gaG92ZXJEYXRlICYmIHRpbWVzdGFtcCA9PT0gaW5pdGlhbERhdGUpIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xuICAgICAgICAgICAgICBpZiAodGltZXN0YW1wID49IG1pblJhbmdlICYmIChtYXhSYW5nZSA9PT0gMCB8fCB0aW1lc3RhbXAgPD0gbWF4UmFuZ2UpICYmIGlzQmV0d2Vlbih0aW1lc3RhbXAsIGluaXRpYWxEYXRlLCBob3ZlckRhdGUpKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG1vbnRoLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcChpLCBsKTtcblxuICAgICAgICAgICAgaWYgKF9yZXQgPT09IFwiY29udGludWVcIikgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uUmVzaXplKCkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4gJiYgIXNlbGYuY29uZmlnLnN0YXRpYyAmJiAhc2VsZi5jb25maWcuaW5saW5lKSBwb3NpdGlvbkNhbGVuZGFyKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9wZW4oZSwgcG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChwb3NpdGlvbkVsZW1lbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHBvc2l0aW9uRWxlbWVudCA9IHNlbGYuX2lucHV0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS50YXJnZXQgJiYgZS50YXJnZXQuYmx1cigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuX2lucHV0LmRpc2FibGVkIHx8IHNlbGYuY29uZmlnLmlubGluZSkgcmV0dXJuO1xuICAgICAgICB2YXIgd2FzT3BlbiA9IHNlbGYuaXNPcGVuO1xuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XG5cbiAgICAgICAgaWYgKCF3YXNPcGVuKSB7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwib3BlblwiKTtcblxuICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk9wZW5cIik7XG4gICAgICAgICAgcG9zaXRpb25DYWxlbmRhcihwb3NpdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPT09IHRydWUgJiYgc2VsZi5jb25maWcubm9DYWxlbmRhciA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkID8gbmV3IERhdGUoc2VsZi5jb25maWcubWluRGF0ZS5nZXRUaW1lKCkpIDogbmV3IERhdGUoKS5zZXRIb3VycyhzZWxmLmNvbmZpZy5kZWZhdWx0SG91ciwgc2VsZi5jb25maWcuZGVmYXVsdE1pbnV0ZSwgc2VsZi5jb25maWcuZGVmYXVsdFNlY29uZHMsIDApLCBmYWxzZSk7XG4gICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5ob3VyRWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWluTWF4RGF0ZVNldHRlcih0eXBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgIHZhciBkYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyB0eXBlICsgXCJEYXRlXCJdID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgICAgdmFyIGludmVyc2VEYXRlT2JqID0gc2VsZi5jb25maWdbXCJfXCIgKyAodHlwZSA9PT0gXCJtaW5cIiA/IFwibWF4XCIgOiBcIm1pblwiKSArIFwiRGF0ZVwiXTtcblxuICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGZbdHlwZSA9PT0gXCJtaW5cIiA/IFwibWluRGF0ZUhhc1RpbWVcIiA6IFwibWF4RGF0ZUhhc1RpbWVcIl0gPSBkYXRlT2JqLmdldEhvdXJzKCkgPiAwIHx8IGRhdGVPYmouZ2V0TWludXRlcygpID4gMCB8fCBkYXRlT2JqLmdldFNlY29uZHMoKSA+IDA7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcykge1xuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gc2VsZi5zZWxlY3RlZERhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgICByZXR1cm4gaXNFbmFibGVkKGQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggJiYgdHlwZSA9PT0gXCJtaW5cIikgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgcmVkcmF3KCk7XG4gICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudFt0eXBlXSA9IGRhdGVPYmouZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO2Vsc2Ugc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPSAhIWludmVyc2VEYXRlT2JqICYmIGRhdGVPYmogIT09IHVuZGVmaW5lZCAmJiBpbnZlcnNlRGF0ZU9iai5nZXRGdWxsWWVhcigpID09PSBkYXRlT2JqLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwYXJzZUNvbmZpZygpIHtcbiAgICAgICAgdmFyIGJvb2xPcHRzID0gW1wid3JhcFwiLCBcIndlZWtOdW1iZXJzXCIsIFwiYWxsb3dJbnB1dFwiLCBcImNsaWNrT3BlbnNcIiwgXCJ0aW1lXzI0aHJcIiwgXCJlbmFibGVUaW1lXCIsIFwibm9DYWxlbmRhclwiLCBcImFsdElucHV0XCIsIFwic2hvcnRoYW5kQ3VycmVudE1vbnRoXCIsIFwiaW5saW5lXCIsIFwic3RhdGljXCIsIFwiZW5hYmxlU2Vjb25kc1wiLCBcImRpc2FibGVNb2JpbGVcIl07XG4gICAgICAgIHZhciBob29rcyA9IFtcIm9uQ2hhbmdlXCIsIFwib25DbG9zZVwiLCBcIm9uRGF5Q3JlYXRlXCIsIFwib25EZXN0cm95XCIsIFwib25LZXlEb3duXCIsIFwib25Nb250aENoYW5nZVwiLCBcIm9uT3BlblwiLCBcIm9uUGFyc2VDb25maWdcIiwgXCJvblJlYWR5XCIsIFwib25WYWx1ZVVwZGF0ZVwiLCBcIm9uWWVhckNoYW5nZVwiLCBcIm9uUHJlQ2FsZW5kYXJQb3NpdGlvblwiXTtcbiAgICAgICAgdmFyIHVzZXJDb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XG4gICAgICAgIHZhciBmb3JtYXRzJCQxID0ge307XG4gICAgICAgIHNlbGYuY29uZmlnLnBhcnNlRGF0ZSA9IHVzZXJDb25maWcucGFyc2VEYXRlO1xuICAgICAgICBzZWxmLmNvbmZpZy5mb3JtYXREYXRlID0gdXNlckNvbmZpZy5mb3JtYXREYXRlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwiZW5hYmxlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fZW5hYmxlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLl9lbmFibGUgPSBwYXJzZURhdGVSdWxlcyhkYXRlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImRpc2FibGVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLl9kaXNhYmxlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLl9kaXNhYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF1c2VyQ29uZmlnLmRhdGVGb3JtYXQgJiYgdXNlckNvbmZpZy5lbmFibGVUaW1lKSB7XG4gICAgICAgICAgZm9ybWF0cyQkMS5kYXRlRm9ybWF0ID0gdXNlckNvbmZpZy5ub0NhbGVuZGFyID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKSA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmRhdGVGb3JtYXQgKyBcIiBIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh1c2VyQ29uZmlnLmFsdElucHV0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSAmJiAhdXNlckNvbmZpZy5hbHRGb3JtYXQpIHtcbiAgICAgICAgICBmb3JtYXRzJCQxLmFsdEZvcm1hdCA9IHVzZXJDb25maWcubm9DYWxlbmRhciA/IFwiaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6UyBLXCIgOiBcIiBLXCIpIDogZmxhdHBpY2tyLmRlZmF1bHRDb25maWcuYWx0Rm9ybWF0ICsgKFwiIGg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpICsgXCIgS1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5EYXRlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWluRGF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1pblwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heERhdGVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBtaW5NYXhEYXRlU2V0dGVyKFwibWF4XCIpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBtaW5NYXhUaW1lU2V0dGVyID0gZnVuY3Rpb24gbWluTWF4VGltZVNldHRlcih0eXBlKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW3R5cGUgPT09IFwibWluXCIgPyBcIl9taW5UaW1lXCIgOiBcIl9tYXhUaW1lXCJdID0gc2VsZi5wYXJzZURhdGUodmFsLCBcIkg6aVwiKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtaW5UaW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWluVGltZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1pblwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heFRpbWVcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhUaW1lO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBtaW5NYXhUaW1lU2V0dGVyKFwibWF4XCIpXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBmb3JtYXRzJCQxLCB1c2VyQ29uZmlnKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2xPcHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID0gc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSB0cnVlIHx8IHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gXCJ0cnVlXCI7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaSA9IGhvb2tzLmxlbmd0aDsgX2ktLTspIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWdbaG9va3NbX2ldXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tob29rc1tfaV1dID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va3NbX2ldXSB8fCBbXSkubWFwKGJpbmRUb0luc3RhbmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJ0aW1lXCIpIHtcbiAgICAgICAgICBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID0gdHJ1ZTtcbiAgICAgICAgICBzZWxmLmNvbmZpZy5lbmFibGVUaW1lID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IHNlbGYuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgIHZhciBwbHVnaW5Db25mID0gc2VsZi5jb25maWcucGx1Z2luc1tfaTJdKHNlbGYpIHx8IHt9O1xuXG4gICAgICAgICAgZm9yICh2YXIga2V5IGluIHBsdWdpbkNvbmYpIHtcbiAgICAgICAgICAgIGlmICh+aG9va3MuaW5kZXhPZihrZXkpKSB7XG4gICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pLm1hcChiaW5kVG9JbnN0YW5jZSkuY29uY2F0KHNlbGYuY29uZmlnW2tleV0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXNlckNvbmZpZ1trZXldID09PSBcInVuZGVmaW5lZFwiKSBzZWxmLmNvbmZpZ1trZXldID0gcGx1Z2luQ29uZltrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaXNNb2JpbGUgPSAhc2VsZi5jb25maWcuZGlzYWJsZU1vYmlsZSAmJiAhc2VsZi5jb25maWcuaW5saW5lICYmIHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmRpc2FibGUubGVuZ3RoICYmICFzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoICYmICFzZWxmLmNvbmZpZy53ZWVrTnVtYmVycyAmJiAvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUGFyc2VDb25maWdcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwTG9jYWxlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgZmxhdHBpY2tyLmwxMG5zW3NlbGYuY29uZmlnLmxvY2FsZV0gPT09IFwidW5kZWZpbmVkXCIpIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJmbGF0cGlja3I6IGludmFsaWQgbG9jYWxlIFwiICsgc2VsZi5jb25maWcubG9jYWxlKSk7XG4gICAgICAgIHNlbGYubDEwbiA9IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0LCB0eXBlb2Ygc2VsZi5jb25maWcubG9jYWxlID09PSBcIm9iamVjdFwiID8gc2VsZi5jb25maWcubG9jYWxlIDogc2VsZi5jb25maWcubG9jYWxlICE9PSBcImRlZmF1bHRcIiA/IGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdIDogdW5kZWZpbmVkKTtcbiAgICAgICAgdG9rZW5SZWdleC5LID0gXCIoXCIgKyBzZWxmLmwxMG4uYW1QTVswXSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMV0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzBdLnRvTG93ZXJDYXNlKCkgKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdLnRvTG93ZXJDYXNlKCkgKyBcIilcIjtcbiAgICAgICAgc2VsZi5mb3JtYXREYXRlID0gY3JlYXRlRGF0ZUZvcm1hdHRlcihzZWxmKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcG9zaXRpb25DYWxlbmRhcihjdXN0b21Qb3NpdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XG4gICAgICAgIHZhciBwb3NpdGlvbkVsZW1lbnQgPSBjdXN0b21Qb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5fcG9zaXRpb25FbGVtZW50O1xuICAgICAgICB2YXIgY2FsZW5kYXJIZWlnaHQgPSBBcnJheS5wcm90b3R5cGUucmVkdWNlLmNhbGwoc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jaGlsZHJlbiwgZnVuY3Rpb24gKGFjYywgY2hpbGQpIHtcbiAgICAgICAgICByZXR1cm4gYWNjICsgY2hpbGQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9LCAwKSxcbiAgICAgICAgICAgIGNhbGVuZGFyV2lkdGggPSBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgY29uZmlnUG9zID0gc2VsZi5jb25maWcucG9zaXRpb24sXG4gICAgICAgICAgICBpbnB1dEJvdW5kcyA9IHBvc2l0aW9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcbiAgICAgICAgICAgIGRpc3RhbmNlRnJvbUJvdHRvbSA9IHdpbmRvdy5pbm5lckhlaWdodCAtIGlucHV0Qm91bmRzLmJvdHRvbSxcbiAgICAgICAgICAgIHNob3dPblRvcCA9IGNvbmZpZ1BvcyA9PT0gXCJhYm92ZVwiIHx8IGNvbmZpZ1BvcyAhPT0gXCJiZWxvd1wiICYmIGRpc3RhbmNlRnJvbUJvdHRvbSA8IGNhbGVuZGFySGVpZ2h0ICYmIGlucHV0Qm91bmRzLnRvcCA+IGNhbGVuZGFySGVpZ2h0O1xuICAgICAgICB2YXIgdG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0ICsgaW5wdXRCb3VuZHMudG9wICsgKCFzaG93T25Ub3AgPyBwb3NpdGlvbkVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMiA6IC1jYWxlbmRhckhlaWdodCAtIDIpO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93VG9wXCIsICFzaG93T25Ub3ApO1xuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcImFycm93Qm90dG9tXCIsIHNob3dPblRvcCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpIHJldHVybjtcbiAgICAgICAgdmFyIGxlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyBpbnB1dEJvdW5kcy5sZWZ0O1xuICAgICAgICB2YXIgcmlnaHQgPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCAtIGlucHV0Qm91bmRzLnJpZ2h0O1xuICAgICAgICB2YXIgcmlnaHRNb3N0ID0gbGVmdCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJyaWdodE1vc3RcIiwgcmlnaHRNb3N0KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykgcmV0dXJuO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcblxuICAgICAgICBpZiAoIXJpZ2h0TW9zdCkge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IGxlZnQgKyBcInB4XCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IFwiYXV0b1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUubGVmdCA9IFwiYXV0b1wiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiByZWRyYXcoKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyIHx8IHNlbGYuaXNNb2JpbGUpIHJldHVybjtcbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9jdXNBbmRDbG9zZSgpIHtcbiAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcblxuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgIT09IC0xIHx8IG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2xvc2UsIDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZWxlY3REYXRlKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHZhciBpc1NlbGVjdGFibGUgPSBmdW5jdGlvbiBpc1NlbGVjdGFibGUoZGF5KSB7XG4gICAgICAgICAgcmV0dXJuIGRheS5jbGFzc0xpc3QgJiYgZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImZsYXRwaWNrci1kYXlcIikgJiYgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlZFwiKSAmJiAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHQgPSBmaW5kUGFyZW50KGUudGFyZ2V0LCBpc1NlbGVjdGFibGUpO1xuICAgICAgICBpZiAodCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gICAgICAgIHZhciB0YXJnZXQgPSB0O1xuICAgICAgICB2YXIgc2VsZWN0ZWREYXRlID0gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0YXJnZXQuZGF0ZU9iai5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSAoc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPCBzZWxmLmN1cnJlbnRNb250aCB8fCBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKSA+IHNlbGYuY3VycmVudE1vbnRoICsgc2VsZi5jb25maWcuc2hvd01vbnRocyAtIDEpICYmIHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIjtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gdGFyZ2V0O1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIikgc2VsZi5zZWxlY3RlZERhdGVzID0gW3NlbGVjdGVkRGF0ZV07ZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSBpc0RhdGVTZWxlY3RlZChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgIGlmIChzZWxlY3RlZEluZGV4KSBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtlbHNlIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIpIHNlbGYuY2xlYXIoZmFsc2UpO1xuICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5wdXNoKHNlbGVjdGVkRGF0ZSk7XG4gICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdHJ1ZSkgIT09IDApIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcblxuICAgICAgICBpZiAoc2hvdWxkQ2hhbmdlTW9udGgpIHtcbiAgICAgICAgICB2YXIgaXNOZXdZZWFyID0gc2VsZi5jdXJyZW50WWVhciAhPT0gc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gc2VsZWN0ZWREYXRlLmdldE1vbnRoKCk7XG4gICAgICAgICAgaWYgKGlzTmV3WWVhcikgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uTW9udGhDaGFuZ2VcIik7XG4gICAgICAgIH1cblxuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLm1pbkRhdGVIYXNUaW1lICYmIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgJiYgY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5jb25maWcubWluRGF0ZSkgPT09IDApIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubWluRGF0ZSk7XG4gICAgICAgIHVwZGF0ZVZhbHVlKCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5zaG93VGltZUlucHV0ID0gdHJ1ZTtcbiAgICAgICAgfSwgNTApO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgb25Nb3VzZU92ZXIodGFyZ2V0KTtcbiAgICAgICAgICB9IGVsc2UgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzaG91bGRDaGFuZ2VNb250aCAmJiBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgJiYgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSkgZm9jdXNPbkRheSh0YXJnZXQuJGksIDApO2Vsc2Ugc2VsZi5zZWxlY3RlZERhdGVFbGVtICYmIHNlbGYuc2VsZWN0ZWREYXRlRWxlbS5mb2N1cygpO1xuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgIH0sIDQ1MSk7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmNsb3NlT25TZWxlY3QpIHtcbiAgICAgICAgICB2YXIgc2luZ2xlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcbiAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMiAmJiAhc2VsZi5jb25maWcuZW5hYmxlVGltZTtcblxuICAgICAgICAgIGlmIChzaW5nbGUgfHwgcmFuZ2UpIHtcbiAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBDQUxMQkFDS1MgPSB7XG4gICAgICAgIGxvY2FsZTogW3NldHVwTG9jYWxlXVxuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG9wdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2Ygb3B0aW9uID09PSBcIm9iamVjdFwiKSBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBvcHRpb24pO2Vsc2Uge1xuICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSB2YWx1ZTtcbiAgICAgICAgICBpZiAoQ0FMTEJBQ0tTW29wdGlvbl0gIT09IHVuZGVmaW5lZCkgQ0FMTEJBQ0tTW29wdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHgoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBqdW1wVG9EYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkRGF0ZShpbnB1dERhdGUsIGZvcm1hdCkge1xuICAgICAgICB2YXIgZGF0ZXMgPSBbXTtcbiAgICAgICAgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIEFycmF5KSBkYXRlcyA9IGlucHV0RGF0ZS5tYXAoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZURhdGUoZCwgZm9ybWF0KTtcbiAgICAgICAgfSk7ZWxzZSBpZiAoaW5wdXREYXRlIGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgaW5wdXREYXRlID09PSBcIm51bWJlclwiKSBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO2Vsc2UgaWYgKHR5cGVvZiBpbnB1dERhdGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzaW5nbGVcIjpcbiAgICAgICAgICAgICAgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJtdWx0aXBsZVwiOlxuICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5zcGxpdChzZWxmLmNvbmZpZy5jb25qdW5jdGlvbikubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcInJhbmdlXCI6XG4gICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlLnNwbGl0KHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcikubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Ugc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgZGF0ZSBzdXBwbGllZDogXCIgKyBKU09OLnN0cmluZ2lmeShpbnB1dERhdGUpKSk7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IGRhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkge1xuICAgICAgICAgIHJldHVybiBkIGluc3RhbmNlb2YgRGF0ZSAmJiBpc0VuYWJsZWQoZCwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikgc2VsZi5zZWxlY3RlZERhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgLSBiLmdldFRpbWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgdHJpZ2dlckNoYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZm9ybWF0ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBmb3JtYXQgPSBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBzZXRTZWxlY3RlZERhdGUoZGF0ZSwgZm9ybWF0KTtcbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDA7XG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBqdW1wVG9EYXRlKCk7XG4gICAgICAgIHNldEhvdXJzRnJvbURhdGUoKTtcbiAgICAgICAgdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKSB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VEYXRlUnVsZXMoYXJyKSB7XG4gICAgICAgIHJldHVybiBhcnIubWFwKGZ1bmN0aW9uIChydWxlKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBydWxlID09PSBcIm51bWJlclwiIHx8IHJ1bGUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5wYXJzZURhdGUocnVsZSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGUgJiYgdHlwZW9mIHJ1bGUgPT09IFwib2JqZWN0XCIgJiYgcnVsZS5mcm9tICYmIHJ1bGUudG8pIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tOiBzZWxmLnBhcnNlRGF0ZShydWxlLmZyb20sIHVuZGVmaW5lZCksXG4gICAgICAgICAgICB0bzogc2VsZi5wYXJzZURhdGUocnVsZS50bywgdW5kZWZpbmVkKVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cERhdGVzKCkge1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5ub3cgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5ub3cpIHx8IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBwcmVsb2FkZWREYXRlID0gc2VsZi5jb25maWcuZGVmYXVsdERhdGUgfHwgc2VsZi5pbnB1dC52YWx1ZTtcbiAgICAgICAgaWYgKHByZWxvYWRlZERhdGUpIHNldFNlbGVjdGVkRGF0ZShwcmVsb2FkZWREYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgdmFyIGluaXRpYWxEYXRlID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDAgPyBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0gOiBzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpID4gc2VsZi5ub3cuZ2V0VGltZSgpID8gc2VsZi5jb25maWcubWluRGF0ZSA6IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRUaW1lKCkgPCBzZWxmLm5vdy5nZXRUaW1lKCkgPyBzZWxmLmNvbmZpZy5tYXhEYXRlIDogc2VsZi5ub3c7XG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBpbml0aWFsRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGluaXRpYWxEYXRlLmdldE1vbnRoKCk7XG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCkgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBzZWxmLnNlbGVjdGVkRGF0ZXNbMF07XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQpIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCkgc2VsZi5jb25maWcubWF4VGltZSA9IHNlbGYucGFyc2VEYXRlKHNlbGYuY29uZmlnLm1heFRpbWUsIFwiSDppXCIpO1xuICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lID0gISFzZWxmLmNvbmZpZy5taW5EYXRlICYmIChzZWxmLmNvbmZpZy5taW5EYXRlLmdldEhvdXJzKCkgPiAwIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TWludXRlcygpID4gMCB8fCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFNlY29uZHMoKSA+IDApO1xuICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lID0gISFzZWxmLmNvbmZpZy5tYXhEYXRlICYmIChzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCkgPiAwIHx8IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TWludXRlcygpID4gMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldFNlY29uZHMoKSA+IDApO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJzaG93VGltZUlucHV0XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9zaG93VGltZUlucHV0O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbCkge1xuICAgICAgICAgICAgc2VsZi5fc2hvd1RpbWVJbnB1dCA9IGJvb2w7XG4gICAgICAgICAgICBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lcikgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJzaG93VGltZUlucHV0XCIsIGJvb2wpO1xuICAgICAgICAgICAgc2VsZi5pc09wZW4gJiYgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkge1xuICAgICAgICBzZWxmLmlucHV0ID0gc2VsZi5jb25maWcud3JhcCA/IGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWlucHV0XVwiKSA6IGVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlucHV0KSB7XG4gICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZWxlbWVudCBzcGVjaWZpZWRcIikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYuaW5wdXQuX3R5cGUgPSBzZWxmLmlucHV0LnR5cGU7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5hZGQoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcbiAgICAgICAgICBzZWxmLmFsdElucHV0ID0gY3JlYXRlRWxlbWVudChzZWxmLmlucHV0Lm5vZGVOYW1lLCBzZWxmLmlucHV0LmNsYXNzTmFtZSArIFwiIFwiICsgc2VsZi5jb25maWcuYWx0SW5wdXRDbGFzcyk7XG4gICAgICAgICAgc2VsZi5faW5wdXQgPSBzZWxmLmFsdElucHV0O1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQuZGlzYWJsZWQgPSBzZWxmLmlucHV0LmRpc2FibGVkO1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQucmVxdWlyZWQgPSBzZWxmLmlucHV0LnJlcXVpcmVkO1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudGFiSW5kZXggPSBzZWxmLmlucHV0LnRhYkluZGV4O1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgc2VsZi5pbnB1dC5wYXJlbnROb2RlKSBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSBzZWxmLl9pbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICBzZWxmLl9wb3NpdGlvbkVsZW1lbnQgPSBzZWxmLmNvbmZpZy5wb3NpdGlvbkVsZW1lbnQgfHwgc2VsZi5faW5wdXQ7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwTW9iaWxlKCkge1xuICAgICAgICB2YXIgaW5wdXRUeXBlID0gc2VsZi5jb25maWcuZW5hYmxlVGltZSA/IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPyBcInRpbWVcIiA6IFwiZGF0ZXRpbWUtbG9jYWxcIiA6IFwiZGF0ZVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHNlbGYuaW5wdXQuY2xhc3NOYW1lICsgXCIgZmxhdHBpY2tyLW1vYmlsZVwiKTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5zdGVwID0gc2VsZi5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJzdGVwXCIpIHx8IFwiYW55XCI7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQudGFiSW5kZXggPSAxO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnR5cGUgPSBpbnB1dFR5cGU7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQuZGlzYWJsZWQgPSBzZWxmLmlucHV0LmRpc2FibGVkO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XG4gICAgICAgIHNlbGYubW9iaWxlRm9ybWF0U3RyID0gaW5wdXRUeXBlID09PSBcImRhdGV0aW1lLWxvY2FsXCIgPyBcIlktbS1kXFxcXFRIOmk6U1wiIDogaW5wdXRUeXBlID09PSBcImRhdGVcIiA/IFwiWS1tLWRcIiA6IFwiSDppOlNcIjtcblxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRlZmF1bHRWYWx1ZSA9IHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5zZWxlY3RlZERhdGVzWzBdLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSkgc2VsZi5tb2JpbGVJbnB1dC5taW4gPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgXCJZLW0tZFwiKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUpIHNlbGYubW9iaWxlSW5wdXQubWF4ID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1heERhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoc2VsZi5pbnB1dC5wYXJlbnROb2RlKSBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYubW9iaWxlSW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9IGNhdGNoIChfYSkge31cblxuICAgICAgICBiaW5kKHNlbGYubW9iaWxlSW5wdXQsIFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgc2VsZi5zZXREYXRlKGUudGFyZ2V0LnZhbHVlLCBmYWxzZSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2xvc2VcIik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgIGlmIChzZWxmLmlzT3BlbikgcmV0dXJuIHNlbGYuY2xvc2UoKTtcbiAgICAgICAgc2VsZi5vcGVuKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChldmVudCwgZGF0YSkge1xuICAgICAgICB2YXIgaG9va3MgPSBzZWxmLmNvbmZpZ1tldmVudF07XG5cbiAgICAgICAgaWYgKGhvb2tzICE9PSB1bmRlZmluZWQgJiYgaG9va3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGhvb2tzW2ldKHNlbGYuc2VsZWN0ZWREYXRlcywgc2VsZi5pbnB1dC52YWx1ZSwgc2VsZiwgZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50ID09PSBcIm9uQ2hhbmdlXCIpIHtcbiAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xuICAgICAgICAgIHNlbGYuaW5wdXQuZGlzcGF0Y2hFdmVudChjcmVhdGVFdmVudChcImlucHV0XCIpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVFdmVudChuYW1lKSB7XG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcbiAgICAgICAgZS5pbml0RXZlbnQobmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0RhdGVTZWxlY3RlZChkYXRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGNvbXBhcmVEYXRlcyhzZWxmLnNlbGVjdGVkRGF0ZXNbaV0sIGRhdGUpID09PSAwKSByZXR1cm4gXCJcIiArIGk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiIHx8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPCAyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdKSA+PSAwICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0pIDw9IDA7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyIHx8IHNlbGYuaXNNb2JpbGUgfHwgIXNlbGYubW9udGhOYXYpIHJldHVybjtcbiAgICAgICAgc2VsZi55ZWFyRWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoeWVhckVsZW1lbnQsIGkpIHtcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKTtcbiAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgc2VsZi5tb250aEVsZW1lbnRzW2ldLnRleHRDb250ZW50ID0gbW9udGhUb1N0cihkLmdldE1vbnRoKCksIHNlbGYuY29uZmlnLnNob3J0aGFuZEN1cnJlbnRNb250aCwgc2VsZi5sMTBuKSArIFwiIFwiO1xuICAgICAgICAgIHllYXJFbGVtZW50LnZhbHVlID0gZC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPSBzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiYgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKSA6IHNlbGYuY3VycmVudFllYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgPSBzZWxmLmNvbmZpZy5tYXhEYXRlICE9PSB1bmRlZmluZWQgJiYgKHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0RnVsbFllYXIoKSA/IHNlbGYuY3VycmVudE1vbnRoICsgMSA+IHNlbGYuY29uZmlnLm1heERhdGUuZ2V0TW9udGgoKSA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHtcbiAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKSByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcblxuICAgICAgICBpZiAoc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlRm9ybWF0U3RyKSB7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICE9PSB1bmRlZmluZWQgPyBzZWxmLmZvcm1hdERhdGUoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYubW9iaWxlRm9ybWF0U3RyKSA6IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgam9pbkNoYXIgPSBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgPyBzZWxmLmNvbmZpZy5jb25qdW5jdGlvbiA6IHNlbGYubDEwbi5yYW5nZVNlcGFyYXRvcjtcbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5tYXAoZnVuY3Rpb24gKGRPYmopIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICB9KS5qb2luKGpvaW5DaGFyKTtcblxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5tYXAoZnVuY3Rpb24gKGRPYmopIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZvcm1hdERhdGUoZE9iaiwgc2VsZi5jb25maWcuYWx0Rm9ybWF0KTtcbiAgICAgICAgICB9KS5qb2luKGpvaW5DaGFyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlICE9PSBmYWxzZSkgdHJpZ2dlckV2ZW50KFwib25WYWx1ZVVwZGF0ZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25Nb250aE5hdkNsaWNrKGUpIHtcbiAgICAgICAgdmFyIGlzUHJldk1vbnRoID0gc2VsZi5wcmV2TW9udGhOYXYuY29udGFpbnMoZS50YXJnZXQpO1xuICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhlLnRhcmdldCk7XG5cbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKSB7XG4gICAgICAgICAgY2hhbmdlTW9udGgoaXNQcmV2TW9udGggPyAtMSA6IDEpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYueWVhckVsZW1lbnRzLmluZGV4T2YoZS50YXJnZXQpID49IDApIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS50YXJnZXQuc2VsZWN0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dVcFwiKSkge1xuICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXJyb3dEb3duXCIpKSB7XG4gICAgICAgICAgc2VsZi5jaGFuZ2VZZWFyKHNlbGYuY3VycmVudFllYXIgLSAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aW1lV3JhcHBlcihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGlzS2V5RG93biA9IGUudHlwZSA9PT0gXCJrZXlkb3duXCIsXG4gICAgICAgICAgICBpbnB1dCA9IGUudGFyZ2V0O1xuXG4gICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWluXCIpKSxcbiAgICAgICAgICAgIG1heCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIikpLFxuICAgICAgICAgICAgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIpKSxcbiAgICAgICAgICAgIGN1clZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSxcbiAgICAgICAgICAgIGRlbHRhID0gZS5kZWx0YSB8fCAoaXNLZXlEb3duID8gZS53aGljaCA9PT0gMzggPyAxIDogLTEgOiAwKTtcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gY3VyVmFsdWUgKyBzdGVwICogZGVsdGE7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC52YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpbnB1dC52YWx1ZS5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICB2YXIgaXNIb3VyRWxlbSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50LFxuICAgICAgICAgICAgICBpc01pbnV0ZUVsZW0gPSBpbnB1dCA9PT0gc2VsZi5taW51dGVFbGVtZW50O1xuXG4gICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgbWluKSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IG1heCArIG5ld1ZhbHVlICsgaW50KCFpc0hvdXJFbGVtKSArIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcbiAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgLTEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPiBtYXgpIHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQgPyBuZXdWYWx1ZSAtIG1heCAtIGludCghc2VsZi5hbVBNKSA6IG1pbjtcbiAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pIGluY3JlbWVudE51bUlucHV0KHVuZGVmaW5lZCwgMSwgc2VsZi5ob3VyRWxlbWVudCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuYW1QTSAmJiBpc0hvdXJFbGVtICYmIChzdGVwID09PSAxID8gbmV3VmFsdWUgKyBjdXJWYWx1ZSA9PT0gMjMgOiBNYXRoLmFicyhuZXdWYWx1ZSAtIGN1clZhbHVlKSA+IHN0ZXApKSB7XG4gICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbml0KCk7XG4gICAgICByZXR1cm4gc2VsZjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcbiAgICAgIHZhciBub2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcbiAgICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1mcC1vbWl0XCIpICE9PSBudWxsKSBjb250aW51ZTtcblxuICAgICAgICAgIGlmIChub2RlLl9mbGF0cGlja3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyLmRlc3Ryb3koKTtcblxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IEZsYXRwaWNrckluc3RhbmNlKG5vZGUsIGNvbmZpZyB8fCB7fSk7XG4gICAgICAgICAgaW5zdGFuY2VzLnB1c2gobm9kZS5fZmxhdHBpY2tyKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbmNlcy5sZW5ndGggPT09IDEgPyBpbnN0YW5jZXNbMF0gOiBpbnN0YW5jZXM7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlLmZsYXRwaWNrciA9IE5vZGVMaXN0LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgICB9O1xuXG4gICAgICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcihbdGhpc10sIGNvbmZpZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBmbGF0cGlja3IgPSBmdW5jdGlvbiBmbGF0cGlja3Ioc2VsZWN0b3IsIGNvbmZpZykge1xuICAgICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgTm9kZUxpc3QpIHJldHVybiBfZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpO2Vsc2UgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xuICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcbiAgICB9O1xuXG4gICAgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcgPSBkZWZhdWx0cztcbiAgICBmbGF0cGlja3IubDEwbnMgPSB7XG4gICAgICBlbjogT2JqZWN0LmFzc2lnbih7fSwgZW5nbGlzaCksXG4gICAgICBkZWZhdWx0OiBPYmplY3QuYXNzaWduKHt9LCBlbmdsaXNoKVxuICAgIH07XG5cbiAgICBmbGF0cGlja3IubG9jYWxpemUgPSBmdW5jdGlvbiAobDEwbikge1xuICAgICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgbDEwbik7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5zZXREZWZhdWx0cyA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgZmxhdHBpY2tyLmRlZmF1bHRDb25maWcsIGNvbmZpZyk7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5wYXJzZURhdGUgPSBjcmVhdGVEYXRlUGFyc2VyKHt9KTtcbiAgICBmbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pO1xuICAgIGZsYXRwaWNrci5jb21wYXJlRGF0ZXMgPSBjb21wYXJlRGF0ZXM7XG5cbiAgICBpZiAodHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgalF1ZXJ5LmZuLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IodGhpcywgY29uZmlnKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgRGF0ZS5wcm90b3R5cGUuZnBfaW5jciA9IGZ1bmN0aW9uIChkYXlzKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLCB0aGlzLmdldE1vbnRoKCksIHRoaXMuZ2V0RGF0ZSgpICsgKHR5cGVvZiBkYXlzID09PSBcInN0cmluZ1wiID8gcGFyc2VJbnQoZGF5cywgMTApIDogZGF5cykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gZmxhdHBpY2tyO1xuXG59KSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGhpZGRlbiBmcm9tICcuL3NlcmlhbGl6ZWQtaW5wdXQnO1xuaW1wb3J0IHtcbiAgcmVtb3ZlSXRlbXMsXG4gIGRyYWdJdGVtcyxcbiAgb25EcmFnSW1hZ2UsXG4gIG9uUmVtb3ZlSW1hZ2UsXG59IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGdhbGxlcnlTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5LXdyYXBwZXInKTtcblxuICBpZiAoIWdhbGxlcnlTZWN0aW9ucykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChnYWxsZXJ5U2VjdGlvbnMsIGdhbGxlcnkgPT4ge1xuICAgIGNvbnN0IGFkZEltYWdlID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCcuYWRkLWdhbGxlcnktaW1hZ2VzJyk7XG4gICAgY29uc3QgSGlkZGVuID0gaGlkZGVuKGdhbGxlcnksICcuaW1hZ2UtZ2FsbGVyeS1oaWRkZW4nKTtcblxuICAgIGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKEhpZGRlbiwgb25SZW1vdmVJbWFnZSk7XG4gICAgY29uc3QgZHJhZyA9IGRyYWdJdGVtcyhIaWRkZW4sIG9uRHJhZ0ltYWdlKTtcbiAgICBjb25zdCBMaXN0ID0gbGlzdChnYWxsZXJ5LCB7XG4gICAgICBsaXN0OiAnLmdhbGxlcnktaW1hZ2VzJyxcbiAgICAgIG9uRHJhZzogZHJhZyxcbiAgICAgIG9uUmVtb3ZlOiByZW1vdmUsXG4gICAgICBsaXN0VGVtcGxhdGU6IGltYWdlSXRlbSxcbiAgICB9KTtcblxuICAgIGNvbnN0IG1lZGlhRnJhbWUgPSB3cC5tZWRpYSh7XG4gICAgICB0aXRsZTogJ0Nob29zZSBNZWRpYScsXG4gICAgICBidXR0b246IHtcbiAgICAgICAgdGV4dDogJ1VzZSBTZWxlY3RlZCBNZWRpYScsXG4gICAgICB9LFxuICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgfSk7XG5cbiAgICBhZGRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBtZWRpYUZyYW1lLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIG1lZGlhRnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgYXR0YWNobWVudHMgPSBtZWRpYUZyYW1lXG4gICAgICAgIC5zdGF0ZSgpXG4gICAgICAgIC5nZXQoJ3NlbGVjdGlvbicpXG4gICAgICAgIC50b0pTT04oKTtcblxuICAgICAgYXR0YWNobWVudHMuZm9yRWFjaChhdHRhY2htZW50ID0+IHtcbiAgICAgICAgTGlzdC5hZGQoYXR0YWNobWVudCk7XG4gICAgICAgIEhpZGRlbi5hZGQoYXR0YWNobWVudC5pZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmNvbnN0IGltYWdlSXRlbSA9IGltYWdlID0+IHtcbiAgcmV0dXJuIGA8bGkgY2xhc3M9XCJnYWxsZXJ5LWltYWdlLWl0ZW1cIj48c3BhbiBjbGFzcz1cImdhbGxlcnktaWFtZ2UtaWRcIj4ke1xuICAgIGltYWdlLmlkXG4gIH08L3NwYW4+PGltZyBzcmM9XCIke1xuICAgIGltYWdlLnVybFxuICB9XCIgY2xhc3M9XCJnYWxsZXJ5LWltYWdlXCIvPjxzcGFuPjxzdmcgY2xhc3M9XCJyZW1vdmUtZ2FsbGVyeS1pbWFnZVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxuPC9zdmc+PC9zcGFuPjwvbGk+YDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9nYWxsZXJ5LmpzIiwiaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7XG4gIHJlbW92ZUl0ZW1zLFxuICBkcmFnSXRlbXMsXG4gIG9uRHJhZ1RhYmxlLFxuICBvblJlbW92ZVRhYmxlLFxufSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCkge1xuICBjb25zdCB0YWJsZUxpc3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYmxlLWxpc3QnKTtcblxuICBpZiAoIXRhYmxlTGlzdHMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwodGFibGVMaXN0cywgdGFibGVMaXN0ID0+IHtcbiAgICBjb25zdCBhZGRSb3cgPSB0YWJsZUxpc3QucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3QtYWRkJyk7XG4gICAgY29uc3QgSGlkZGVuID0gaGlkZGVuKHRhYmxlTGlzdCwgJy50YWJsZS1saXN0LWhpZGRlbicpO1xuICAgIGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKEhpZGRlbiwgb25SZW1vdmVUYWJsZSk7XG4gICAgY29uc3QgZHJhZyA9IGRyYWdJdGVtcyhIaWRkZW4sIG9uRHJhZ1RhYmxlKTtcbiAgICBjb25zdCBMaXN0ID0gbGlzdCh0YWJsZUxpc3QsIHtcbiAgICAgIGxpc3Q6ICcudGFibGUtbGlzdC1saXN0JyxcbiAgICAgIG9uRHJhZzogZHJhZyxcbiAgICAgIG9uUmVtb3ZlOiByZW1vdmUsXG4gICAgICBsaXN0VGVtcGxhdGU6IHRhYmxlSXRlbSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHdyYXBwZXIgPSB0YWJsZUxpc3QucXVlcnlTZWxlY3RvcignLnRleHQtbGlzdC13cmFwcGVyJyk7XG4gICAgY29uc3Qga2V5ID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1rZXknKTtcbiAgICBjb25zdCB2YWx1ZSA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3QtdmFsdWUnKTtcblxuICAgIGFkZFJvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGNvbnN0IHJvd0RhdGEgPSB7XG4gICAgICAgIGtleToga2V5LnZhbHVlLFxuICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICB9O1xuXG4gICAgICBMaXN0LmFkZChyb3dEYXRhKTtcbiAgICAgIEhpZGRlbi5hZGQocm93RGF0YSk7XG5cbiAgICAgIGtleS52YWx1ZSA9ICcnO1xuICAgICAgdmFsdWUudmFsdWUgPSAnJztcbiAgICB9KTtcbiAgfSk7XG59XG5cbmNvbnN0IHRhYmxlSXRlbSA9IHJvd0RhdGEgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtIHRhYmxlLWxpc3QtaXRlbVwiPlxuICAgIDxzcGFuIGNsYXNzPVwidGFibGUtbGlzdC1rZXlcIj4ke3Jvd0RhdGEua2V5fTwvc3Bhbj5cbiAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWxpc3QtdmFsdWVcIj4ke3Jvd0RhdGEudmFsdWV9PC9zcGFuPlxuICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG4gICAgPC9zdmc+XG48L2xpPmA7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdGFibGUtbGlzdC5qcyJdLCJzb3VyY2VSb290IjoiIn0=