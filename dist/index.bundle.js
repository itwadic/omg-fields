!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return o(n,t.onDrag),r(n,t.onRemove),{add:function(e){var a=t.listTemplate(e),i=document.createRange().createContextualFragment(a);n.appendChild(i)}}};var a=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(a),r=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var a=n.target.closest("li"),i=a.querySelector("span").innerHTML;e.removeChild(a),t(i)}}),n},o=function(e,t){(0,i.default)([e]).on("dragend",function(n){var a=e.querySelectorAll("li");t(e,a)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),a=function(){return n.value?JSON.parse(n.value):[]},i=function(e){return a().concat(e)},r=function(e,t){return t(a(),e)};return{add:function(e){n.value=JSON.stringify(i(e))},remove:function(e,t){n.value=JSON.stringify(r(e,t))},update:function(e){n.value=JSON.stringify(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeItems=function(e,t){return function(n){e.remove(n,t)}},t.dragItems=function(e,t){return function(n,a){var i=t(n,a);e.update(i)}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onDragImage=function(e,t){return[].reduce.call(t,function(e,t){var n=parseInt(t.querySelector("span").innerHTML);return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})},t.onRemoveImage=function(e,t){return e.filter(function(e){return e!==parseInt(t)})},t.onDragTable=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector(".table-list-key").innerHTML,a=t.querySelector(".table-list-value").innerHTML;return e.concat([{key:n,value:a}])},[])},t.onRemoveTable=function(e,t){return e.filter(function(e){return e.key!==t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if(!e)return!1;var c=!1;e.addEventListener("keyup",function(n){if(0===n.target.value.length&&o&&o(),3>n.target.value.length)return!1;e.classList.add("show"),c=i(c,r,e,t)}),e.addEventListener("input",function(t){var i=a(t);i&&n(i,e)})};var a=function(e){var t=e.target,n=t.value,a=t.getAttribute("list"),i=document.getElementById(a).childNodes,r=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==r.length&&r[0]},i=function(e,t,n,a){var i=u(n.value),r=a+i;return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){4===e.readyState&&l(e.responseText)?t(!1,{results:JSON.parse(e.responseText),input:n}):e.responseText&&l(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",r,!0),e.send(),e},r=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;o(t.results,t.input)}},o=function(e,t){var n=t.getAttribute("list"),a=document.getElementById(n),i=e.reduce(function(e,t){var n=c(t);return e.concat(n)},"");t.classList.remove("show"),a.innerHTML=i},c=function(e){return e.title?"<option data-id="+e.id+' value="'+e.title.rendered+'">':e.name?"<option data-id="+e.id+' value="'+e.name+'">':void 0},l=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},u=function(e){return encodeURIComponent(e.toLowerCase())}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(6),r=(a(i),n(7)),o=a(r),c=n(20),l=a(c),u=n(1),s=(a(u),n(21)),d=a(s),f=n(22),m=a(f),g=n(23),p=a(g),v=n(25),h=a(v),y=n(26),b=a(y),w=function(e){return'<li class="text-list-item">\n        <span>'+e+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'},D=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,m.default)(),(0,o.default)({parent:".text-list",button:".text-list-add",list:".text-list-list",hidden:".text-list-hidden",listTemplate:w}),(0,l.default)({parent:".autosuggest-list",input:"autosuggest-list-input",list:".autosuggest-list-list",hidden:".autosuggest-list-hidden",listTemplate:D}),(0,d.default)({parent:".autosuggest-wrapper",input:".autosuggest-input",hidden:".autosuggest-hidden"}),(0,p.default)(),(0,h.default)(),(0,b.default)()})},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector("input[type=text]"),a=t.querySelector(e.button),i=(0,c.default)(t,e.hidden),o=(0,l.removeItems)(i,l.onRemoveText),u=(0,l.dragItems)(i,l.onDragText),s=(0,r.default)(t,Object.assign(e,{onDrag:u,onRemove:o}));t.addEventListener("keypress",function(e){13===e.keyCode&&(e.preventDefault(),s.add(n.value),i.add(n.value),n.value="")}),a.addEventListener("click",function(e){e.preventDefault(),s.add(n.value),i.add(n.value),n.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3)},function(e,t,n){"use strict";(function(t){function a(e,t){function n(e){return-1!==ue.containers.indexOf(e)||le.isContainer(e)}function a(e){var t=e?"remove":"add";i(C,t,"mousedown",x),i(C,t,"mouseup",j)}function c(e){i(C,e?"remove":"add","mousemove",E)}function p(e){var t=e?"remove":"add";w[t](C,"selectstart",T),w[t](C,"click",T)}function h(){a(!0),j({})}function T(e){oe&&e.preventDefault()}function x(e){if(ee=e.clientX,te=e.clientY,!(1!==r(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=S(t);n&&(oe=n,c(),"mousedown"===e.type&&(g(t)?t.focus():e.preventDefault()))}}function E(e){if(oe){if(0===r(e))return void j({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(le.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(g(M.elementFromPoint(t,n)))return}var a=oe;c(!0),p(),P(),k(a);var i=o(V);Z=y("pageX",e)-i.left,Q=y("pageY",e)-i.top,D.add(ie||V,"gu-transit"),J(),q(e)}}}function S(e){if(!(ue.dragging&&$||n(e))){for(var t=e;m(e)&&!1===n(m(e));){if(le.invalid(e,t))return;if(!(e=m(e)))return}var a=m(e);if(a&&!le.invalid(e,t)){if(le.moves(e,a,t,v(e)))return{item:e,source:a}}}}function O(e){return!!S(e)}function I(e){var t=S(e);t&&k(t)}function k(e){X(e.item,e.source)&&(ie=e.item.cloneNode(!0),ue.emit("cloned",ie,e.item,"copy")),G=e.source,V=e.item,ne=ae=v(e.item),ue.dragging=!0,ue.emit("drag",V,G)}function _(){return!1}function P(){if(ue.dragging){var e=ie||V;N(e,m(e))}}function A(){oe=!1,c(!0),p(!0)}function j(e){if(A(),ue.dragging){var t=ie||V,n=y("clientX",e),a=y("clientY",e),i=l($,n,a),r=R(i,n,a);r&&(ie&&le.copySortSource||!ie||r!==G)?N(t,r):le.removeOnSpill?F():L()}}function N(e,t){var n=m(e);ie&&le.copySortSource&&t===G&&n.removeChild(V),H(t)?ue.emit("cancel",e,G,G):ue.emit("drop",e,t,G,ae),Y()}function F(){if(ue.dragging){var e=ie||V,t=m(e);t&&t.removeChild(e),ue.emit(ie?"cancel":"remove",e,t,G),Y()}}function L(e){if(ue.dragging){var t=arguments.length>0?e:le.revertOnSpill,n=ie||V,a=m(n),i=H(a);!1===i&&t&&(ie?a&&a.removeChild(ie):G.insertBefore(n,ne)),i||t?ue.emit("cancel",n,G,G):ue.emit("drop",n,a,G,ae),Y()}}function Y(){var e=ie||V;A(),U(),e&&D.rm(e,"gu-transit"),re&&clearTimeout(re),ue.dragging=!1,ce&&ue.emit("out",e,ce,G),ue.emit("dragend",e),G=V=ie=ne=ae=re=ce=null}function H(e,t){var n;return n=void 0!==t?t:$?ae:v(ie||V),e===G&&n===ne}function R(e,t,a){for(var i=e;i&&!function(){if(!1===n(i))return!1;var r=z(i,e),o=K(i,r,t,a);return!!H(i,o)||le.accepts(V,i,G,o)}();)i=m(i);return i}function q(e){function t(e){ue.emit(e,o,ce,G)}if($){e.preventDefault();var n=y("clientX",e),a=y("clientY",e),i=n-Z,r=a-Q;$.style.left=i+"px",$.style.top=r+"px";var o=ie||V,c=l($,n,a),u=R(c,n,a),s=null!==u&&u!==ce;(s||null===u)&&(function(){ce&&t("out")}(),ce=u,function(){s&&t("over")}());var d=m(o);if(u===G&&ie&&!le.copySortSource)return void(d&&d.removeChild(o));var f,g=z(u,c);if(null!==g)f=K(u,g,n,a);else{if(!0!==le.revertOnSpill||ie)return void(ie&&d&&d.removeChild(o));f=ne,u=G}(null===f&&s||f!==o&&f!==v(o))&&(ae=f,u.insertBefore(o,f),ue.emit("shadow",o,u,G))}}function B(e){D.rm(e,"gu-hide")}function W(e){ue.dragging&&D.add(e,"gu-hide")}function J(){if(!$){var e=V.getBoundingClientRect();$=V.cloneNode(!0),$.style.width=d(e)+"px",$.style.height=f(e)+"px",D.rm($,"gu-transit"),D.add($,"gu-mirror"),le.mirrorContainer.appendChild($),i(C,"add","mousemove",q),D.add(le.mirrorContainer,"gu-unselectable"),ue.emit("cloned",$,V,"mirror")}}function U(){$&&(D.rm(le.mirrorContainer,"gu-unselectable"),i(C,"remove","mousemove",q),m($).removeChild($),$=null)}function z(e,t){for(var n=t;n!==e&&m(n)!==e;)n=m(n);return n===C?null:n}function K(e,t,n,a){function i(e){return e?v(t):t}var r="horizontal"===le.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(r?n>e.left+d(e)/2:a>e.top+f(e)/2)}():function(){var t,i,o,c=e.children.length;for(t=0;t<c;t++){if(i=e.children[t],o=i.getBoundingClientRect(),r&&o.left+o.width/2>n)return i;if(!r&&o.top+o.height/2>a)return i}return null}()}function X(e,t){return"boolean"==typeof le.copy?le.copy:le.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var $,G,V,Z,Q,ee,te,ne,ae,ie,re,oe,ce=null,le=t||{};void 0===le.moves&&(le.moves=s),void 0===le.accepts&&(le.accepts=s),void 0===le.invalid&&(le.invalid=_),void 0===le.containers&&(le.containers=e||[]),void 0===le.isContainer&&(le.isContainer=u),void 0===le.copy&&(le.copy=!1),void 0===le.copySortSource&&(le.copySortSource=!1),void 0===le.revertOnSpill&&(le.revertOnSpill=!1),void 0===le.removeOnSpill&&(le.removeOnSpill=!1),void 0===le.direction&&(le.direction="vertical"),void 0===le.ignoreInputTextSelection&&(le.ignoreInputTextSelection=!0),void 0===le.mirrorContainer&&(le.mirrorContainer=M.body);var ue=b({containers:le.containers,start:I,end:P,cancel:L,remove:F,destroy:h,canMove:O,dragging:!1});return!0===le.removeOnSpill&&ue.on("over",B).on("out",W),a(),ue}function i(e,n,a,i){var r={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,o[a],i):t.navigator.msPointerEnabled?w[n](e,c[a],i):(w[n](e,r[a],i),w[n](e,a,i))}function r(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e){var t=e.getBoundingClientRect();return{left:t.left+c("scrollLeft","pageXOffset"),top:t.top+c("scrollTop","pageYOffset")}}function c(e,n){return void 0!==t[n]?t[n]:C.clientHeight?C[e]:M.body[e]}function l(e,t,n){var a,i=e||{},r=i.className;return i.className+=" gu-hide",a=M.elementFromPoint(t,n),i.className=r,a}function u(){return!1}function s(){return!0}function d(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function m(e){return e.parentNode===M?null:e.parentNode}function g(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(m(e))))}function v(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in n)&&a[e]in n&&(e=a[e]),n[e]}var b=n(9),w=n(16),D=n(19),M=document,C=M.documentElement;e.exports=a}).call(t,n(0))},function(e,t,n){"use strict";var a=n(10),i=n(11);e.exports=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var a=arguments.length;if(1===a)delete r[t];else if(0===a)r={};else{var i=r[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=a(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(r[t]||[]).slice(0);return function(){var r=a(arguments),c=this||e;if("error"===t&&!1!==n.throws&&!o.length)throw 1===r.length?r[0]:r;return o.forEach(function(a){n.async?i(a,r,c):a.apply(c,r),a._once&&e.off(t,a)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var a=n(12);e.exports=function(e,t,n){e&&a(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,a="function"==typeof t;n=a?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(13).setImmediate)},function(e,t,n){(function(e){function a(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(14),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function a(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,c(l),l++}function i(e){delete u[e]}function r(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}function o(e){if(s)setTimeout(o,0,e);else{var t=u[e];if(t){s=!0;try{r(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var c,l=1,u={},s=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},c=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;c=function(t){var n=d.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(o,0,e)}}(),f.setImmediate=a,f.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===a||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){p&&m&&(p=!1,m.length?g=m.concat(g):v=-1,g.length&&c())}function c(){if(!p){var e=i(o);p=!0;for(var t=g.length;t;){for(m=g,g=[];++v<t;)m&&m[v].run();v=-1,t=g.length}m=null,p=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var s,d,f=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{d="function"==typeof clearTimeout?clearTimeout:a}catch(e){d=a}}();var m,g=[],p=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||p||i(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function a(e,t,n,a){return e.addEventListener(t,n,a)}function i(e,t,n){return e.attachEvent("on"+t,u(e,t,n))}function r(e,t,n,a){return e.removeEventListener(t,n,a)}function o(e,t,n){var a=s(e,t,n);if(a)return e.detachEvent("on"+t,a)}function c(e,t,n){var a=-1===m.indexOf(t)?function(){return new f(t,{detail:n})}():function(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,n,a){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,a.call(e,i)}}function u(e,t,n){var a=s(e,t,n)||l(e,t,n);return h.push({wrapper:a,element:e,type:t,fn:n}),a}function s(e,t,n){var a=d(e,t,n);if(a){var i=h[a].wrapper;return h.splice(a,1),i}}function d(e,t,n){var a,i;for(a=0;a<h.length;a++)if(i=h[a],i.element===e&&i.type===t&&i.fn===n)return a}var f=n(17),m=n(18),g=t.document,p=a,v=r,h=[];t.addEventListener||(p=i,v=o),e.exports={add:p,remove:v,fabricate:c}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],a="",i=/^on/;for(a in t)i.test(a)&&n.push(a.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function a(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(c+e+l,"g"),t}function i(e,t){var n=e.className;n.length?a(t).test(n)||(e.className+=" "+t):e.className=t}function r(e,t){e.className=e.className.replace(a(t)," ").trim()}var o={},c="(?:^|\\s)",l="(?:\\s|$)";e.exports={add:i,rm:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,u.default)(t,e.hidden),a=(0,s.removeItems)(n,s.onRemoveObject),i=(0,s.dragItems)(n,s.onDragObject),o=(0,r.default)(t,Object.assign(e,{onDrag:i,onRemove:a})),l=t.querySelector(".autosuggest-list-input"),d="autoList_"+l.getAttribute("list"),f=OMGFields.baseURL+"/wp-json/wp/v2/"+window[d].resource+"?search=";(0,c.default)(l,f,function(e,t){o.add(e),t.value="",n.add(e)})})};var i=n(1),r=a(i),o=n(4),c=a(o),l=n(2),u=a(l),s=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden),a=t.querySelector(".autosuggest-input"),r="autoList_"+a.getAttribute("list"),o=void 0;o=window[r].namespace?OMGFields.baseURL+"/wp-json/"+window[r].namespace+"/"+window[r].resource+"?search=":OMGFields.baseURL+"/wp-json/wp/v2/"+window[r].resource+"?search=",(0,i.default)(a,o,function(e,t){n.value=JSON.stringify(e)},function(){n.value=""})})};var a=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function a(){var e=document.querySelectorAll(".custom-media-upload");0!==e.length&&[].map.call(e,function(e){var t=e.querySelector(".remove-image"),n=e.querySelector(".replace-image"),a=e.querySelector(".set-image"),i=e.querySelector("a.replace-image img"),r=e.querySelector('input[type="hidden"]'),o=e.querySelector(".thumbnail-title"),c=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!1});c.on("select",function(){var t=c.state().get("selection").first().toJSON();e.classList.toggle("has-image"),r.value=t.id,t.hasOwnProperty("sizes")?i.setAttribute("src",t.sizes.thumbnail.url):i.setAttribute("src",t.icon),o&&(o.innerHTML=t.filename)}),t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("has-image"),i.setAttribute("src",""),r.value="",o&&(o.innerHTML="")}),n.addEventListener("click",function(e){e.preventDefault(),c.open()}),a.addEventListener("click",function(e){e.preventDefault(),c.open()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".datepicker-input");if(!e)return!1;[].forEach.call(e,function(e){var t=e.dataset.date;(0,i.default)(e,{altInput:!0,altFormat:"F j, Y",dateFormat:"U",defaultDate:t||""})})};var a=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){/* flatpickr v4.4.3, @license MIT */
!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e,t,n){void 0===n&&(n=!1);var a;return function(){var i=this,r=arguments;null!==a&&clearTimeout(a),a=window.setTimeout(function(){a=null,n||e.apply(i,r)},t),n&&!a&&e.apply(i,r)}}function t(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function n(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function a(e,t,n){var a=window.document.createElement(e);return t=t||"",n=n||"",a.className=t,void 0!==n&&(a.textContent=n),a}function i(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t){return t(e)?e:e.parentNode?r(e.parentNode,t):void 0}function o(e,t){var n=a("div","numInputWrapper"),i=a("input","numInput "+e),r=a("span","arrowUp"),o=a("span","arrowDown");if(i.type="text",i.pattern="\\d*",void 0!==t)for(var c in t)i.setAttribute(c,t[c]);return n.appendChild(i),n.appendChild(r),n.appendChild(o),n}function c(c,l){function f(){Ie.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=Ie.currentMonth),void 0===t&&(t=Ie.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:Ie.l10n.daysInMonth[e]}}}function g(e){return e.bind(Ie)}function v(e){0!==Ie.selectedDates.length&&(Oe(e),"input"!==e.type?(E(),Ee()):setTimeout(function(){E(),Ee()},T))}function w(e,t){return e%12+12*s(t===Ie.l10n.amPM[1])}function C(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function E(){if(void 0!==Ie.hourElement&&void 0!==Ie.minuteElement){var e=(parseInt(Ie.hourElement.value.slice(-2),10)||0)%24,n=(parseInt(Ie.minuteElement.value,10)||0)%60,a=void 0!==Ie.secondElement?(parseInt(Ie.secondElement.value,10)||0)%60:0;void 0!==Ie.amPM&&(e=w(e,Ie.amPM.textContent));var i=void 0!==Ie.config.minTime||Ie.config.minDate&&Ie.minDateHasTime&&Ie.latestSelectedDateObj&&0===t(Ie.latestSelectedDateObj,Ie.config.minDate,!0);if(void 0!==Ie.config.maxTime||Ie.config.maxDate&&Ie.maxDateHasTime&&Ie.latestSelectedDateObj&&0===t(Ie.latestSelectedDateObj,Ie.config.maxDate,!0)){var r=void 0!==Ie.config.maxTime?Ie.config.maxTime:Ie.config.maxDate;e=Math.min(e,r.getHours()),e===r.getHours()&&(n=Math.min(n,r.getMinutes())),n===r.getMinutes()&&(a=Math.min(a,r.getSeconds()))}if(i){var o=void 0!==Ie.config.minTime?Ie.config.minTime:Ie.config.minDate;e=Math.max(e,o.getHours()),e===o.getHours()&&(n=Math.max(n,o.getMinutes())),n===o.getMinutes()&&(a=Math.max(a,o.getSeconds()))}O(e,n,a)}}function S(e){var t=e||Ie.latestSelectedDateObj;t&&O(t.getHours(),t.getMinutes(),t.getSeconds())}function O(e,t,n){void 0!==Ie.latestSelectedDateObj&&Ie.latestSelectedDateObj.setHours(e%24,t,n||0,0),Ie.hourElement&&Ie.minuteElement&&!Ie.isMobile&&(Ie.hourElement.value=u(Ie.config.time_24hr?e:(12+e)%12+12*s(e%12==0)),Ie.minuteElement.value=u(t),void 0!==Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[s(e>=12)]),void 0!==Ie.secondElement&&(Ie.secondElement.value=u(n)))}function I(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(e.target.blur(),/[^\d]/.test(t.toString())||ee(t))}function k(e,t,n,a){return t instanceof Array?t.forEach(function(t){return k(e,t,n,a)}):e instanceof Array?e.forEach(function(e){return k(e,t,n,a)}):(e.addEventListener(t,n,a),void Ie._handlers.push({element:e,event:t,handler:n}))}function _(e){return function(t){1===t.which&&e(t)}}function P(){De("onChange")}function A(){if(Ie.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(Ie.element.querySelectorAll("[data-"+e+"]"),function(t){return k(t,"click",Ie[e])})}),Ie.isMobile)return void be();var t=e(ie,50);if(Ie._debouncedChange=e(P,T),Ie.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&k(Ie.daysContainer,"mouseover",function(e){"range"===Ie.config.mode&&ae(e.target)}),k(window.document.body,"keydown",ne),Ie.config.static||k(Ie._input,"keydown",ne),Ie.config.inline||Ie.config.static||k(window,"resize",t),void 0!==window.ontouchstart&&k(window.document,"touchstart",Q),k(window.document,"mousedown",_(Q)),k(window.document,"focus",Q,{capture:!0}),!0===Ie.config.clickOpens&&(k(Ie._input,"focus",Ie.open),k(Ie._input,"mousedown",_(Ie.open))),void 0!==Ie.daysContainer&&(k(Ie.monthNav,"mousedown",_(Se)),k(Ie.monthNav,["keyup","increment"],I),k(Ie.daysContainer,"mousedown",_(fe))),void 0!==Ie.timeContainer&&void 0!==Ie.minuteElement&&void 0!==Ie.hourElement){var n=function(e){return e.target.select()};k(Ie.timeContainer,["input","increment"],v),k(Ie.timeContainer,"mousedown",_(N)),k(Ie.timeContainer,["input","increment"],Ie._debouncedChange,{passive:!0}),k([Ie.hourElement,Ie.minuteElement],["focus","click"],n),void 0!==Ie.secondElement&&k(Ie.secondElement,"focus",function(){return Ie.secondElement&&Ie.secondElement.select()}),void 0!==Ie.amPM&&k(Ie.amPM,"mousedown",_(function(e){v(e),P()}))}}function j(e){var t=void 0!==e?Ie.parseDate(e):Ie.latestSelectedDateObj||(Ie.config.minDate&&Ie.config.minDate>Ie.now?Ie.config.minDate:Ie.config.maxDate&&Ie.config.maxDate<Ie.now?Ie.config.maxDate:Ie.now);try{void 0!==t&&(Ie.currentYear=t.getFullYear(),Ie.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,Ie.config.errorHandler(e)}Ie.redraw()}function N(e){~e.target.className.indexOf("arrow")&&F(e,e.target.classList.contains("arrowUp")?1:-1)}function F(e,t,n){var a=e&&e.target,i=n||a&&a.parentNode&&a.parentNode.firstChild,r=Me("increment");r.delta=t,i&&i.dispatchEvent(r)}function L(){var e=window.document.createDocumentFragment();if(Ie.calendarContainer=a("div","flatpickr-calendar"),Ie.calendarContainer.tabIndex=-1,!Ie.config.noCalendar){if(e.appendChild(W()),Ie.innerContainer=a("div","flatpickr-innerContainer"),Ie.config.weekNumbers){var t=K(),i=t.weekWrapper,r=t.weekNumbers;Ie.innerContainer.appendChild(i),Ie.weekNumbers=r,Ie.weekWrapper=i}Ie.rContainer=a("div","flatpickr-rContainer"),Ie.rContainer.appendChild(U()),Ie.daysContainer||(Ie.daysContainer=a("div","flatpickr-days"),Ie.daysContainer.tabIndex=-1),q(),Ie.rContainer.appendChild(Ie.daysContainer),Ie.innerContainer.appendChild(Ie.rContainer),e.appendChild(Ie.innerContainer)}Ie.config.enableTime&&e.appendChild(J()),n(Ie.calendarContainer,"rangeMode","range"===Ie.config.mode),n(Ie.calendarContainer,"animate",!0===Ie.config.animate),n(Ie.calendarContainer,"multiMonth",Ie.config.showMonths>1),Ie.calendarContainer.appendChild(e);var o=void 0!==Ie.config.appendTo&&void 0!==Ie.config.appendTo.nodeType;if((Ie.config.inline||Ie.config.static)&&(Ie.calendarContainer.classList.add(Ie.config.inline?"inline":"static"),Ie.config.inline&&(!o&&Ie.element.parentNode?Ie.element.parentNode.insertBefore(Ie.calendarContainer,Ie._input.nextSibling):void 0!==Ie.config.appendTo&&Ie.config.appendTo.appendChild(Ie.calendarContainer)),Ie.config.static)){var c=a("div","flatpickr-wrapper");Ie.element.parentNode&&Ie.element.parentNode.insertBefore(c,Ie.element),c.appendChild(Ie.element),Ie.altInput&&c.appendChild(Ie.altInput),c.appendChild(Ie.calendarContainer)}Ie.config.static||Ie.config.inline||(void 0!==Ie.config.appendTo?Ie.config.appendTo:window.document.body).appendChild(Ie.calendarContainer)}function Y(e,i,r,o){var c=te(i,!0),l=a("span","flatpickr-day "+e,i.getDate().toString());return l.dateObj=i,l.$i=o,l.setAttribute("aria-label",Ie.formatDate(i,Ie.config.ariaDateFormat)),0===t(i,Ie.now)&&(Ie.todayDateElem=l,l.classList.add("today")),c?(l.tabIndex=-1,Ce(i)&&(l.classList.add("selected"),Ie.selectedDateElem=l,"range"===Ie.config.mode&&(n(l,"startRange",Ie.selectedDates[0]&&0===t(i,Ie.selectedDates[0],!0)),n(l,"endRange",Ie.selectedDates[1]&&0===t(i,Ie.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("disabled"),"range"===Ie.config.mode&&Te(i)&&!Ce(i)&&l.classList.add("inRange"),Ie.weekNumbers&&1===Ie.config.showMonths&&"prevMonthDay"!==e&&r%7==1&&Ie.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+Ie.config.getWeek(i)+"</span>"),De("onDayCreate",l),l}function H(e,t){var n=void 0!==e?e:document.activeElement.$i,a=(n||0)+t||0,i=Array.prototype.find.call(Ie.days.children,function(e,t){return t>=a&&-1===e.className.indexOf("MonthDay")&&te(e.dateObj)});void 0!==i&&(i.focus(),"range"===Ie.config.mode&&ae(i))}function R(e,t){for(var n=(new Date(e,t,1).getDay()-Ie.l10n.firstDayOfWeek+7)%7,i=Ie.utils.getDaysInMonth((t-1+12)%12),r=Ie.utils.getDaysInMonth(t),o=window.document.createDocumentFragment(),c=i+1-n,l=0;c<=i;c++,l++)o.appendChild(Y("prevMonthDay",new Date(e,t-1,c),c,l));for(c=1;c<=r;c++,l++)o.appendChild(Y("",new Date(e,t,c),c,l));for(var u=r+1;u<=42-n&&(1===Ie.config.showMonths||l%7!=0);u++,l++)o.appendChild(Y("nextMonthDay",new Date(e,t+1,u%r),u,l));var s=a("div","dayContainer");return s.appendChild(o),s}function q(){if(void 0!==Ie.daysContainer){i(Ie.daysContainer),Ie.weekNumbers&&i(Ie.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<Ie.config.showMonths;t++){var n=new Date(Ie.currentYear,Ie.currentMonth,1);n.setMonth(Ie.currentMonth+t),e.appendChild(R(n.getFullYear(),n.getMonth()))}Ie.daysContainer.appendChild(e),Ie.days=Ie.daysContainer.firstChild}}function B(){var e=a("div","flatpickr-month"),t=window.document.createDocumentFragment(),n=a("span","cur-month");n.title=Ie.l10n.scrollTitle;var i=o("cur-year",{tabindex:"-1"}),r=i.childNodes[0];r.title=Ie.l10n.scrollTitle,r.setAttribute("aria-label",Ie.l10n.yearAriaLabel),Ie.config.minDate&&r.setAttribute("data-min",Ie.config.minDate.getFullYear().toString()),Ie.config.maxDate&&(r.setAttribute("data-max",Ie.config.maxDate.getFullYear().toString()),r.disabled=!!Ie.config.minDate&&Ie.config.minDate.getFullYear()===Ie.config.maxDate.getFullYear());var c=a("div","flatpickr-current-month");return c.appendChild(n),c.appendChild(i),t.appendChild(c),e.appendChild(t),{container:e,yearElement:r,monthElement:n}}function W(){Ie.monthNav=a("div","flatpickr-months"),Ie.yearElements=[],Ie.monthElements=[],Ie.prevMonthNav=a("span","flatpickr-prev-month"),Ie.prevMonthNav.innerHTML=Ie.config.prevArrow,Ie.nextMonthNav=a("span","flatpickr-next-month"),Ie.nextMonthNav.innerHTML=Ie.config.nextArrow,Ie.monthNav.appendChild(Ie.prevMonthNav);for(var e=Ie.config.showMonths;e--;){var t=B();Ie.yearElements.push(t.yearElement),Ie.monthElements.push(t.monthElement),Ie.monthNav.appendChild(t.container)}return Ie.monthNav.appendChild(Ie.nextMonthNav),Object.defineProperty(Ie,"_hidePrevMonthArrow",{get:function(){return Ie.__hidePrevMonthArrow},set:function(e){Ie.__hidePrevMonthArrow!==e&&(n(Ie.prevMonthNav,"disabled",e),Ie.__hidePrevMonthArrow=e)}}),Object.defineProperty(Ie,"_hideNextMonthArrow",{get:function(){return Ie.__hideNextMonthArrow},set:function(e){Ie.__hideNextMonthArrow!==e&&(n(Ie.nextMonthNav,"disabled",e),Ie.__hideNextMonthArrow=e)}}),Ie.currentYearElement=Ie.yearElements[0],xe(),Ie.monthNav}function J(){Ie.calendarContainer.classList.add("hasTime"),Ie.config.noCalendar&&Ie.calendarContainer.classList.add("noCalendar"),Ie.timeContainer=a("div","flatpickr-time"),Ie.timeContainer.tabIndex=-1;var e=a("span","flatpickr-time-separator",":"),t=o("flatpickr-hour");Ie.hourElement=t.childNodes[0];var n=o("flatpickr-minute");if(Ie.minuteElement=n.childNodes[0],Ie.hourElement.tabIndex=Ie.minuteElement.tabIndex=-1,Ie.hourElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getHours():Ie.config.time_24hr?Ie.config.defaultHour:C(Ie.config.defaultHour)),Ie.minuteElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getMinutes():Ie.config.defaultMinute),Ie.hourElement.setAttribute("data-step",Ie.config.hourIncrement.toString()),Ie.minuteElement.setAttribute("data-step",Ie.config.minuteIncrement.toString()),Ie.hourElement.setAttribute("data-min",Ie.config.time_24hr?"0":"1"),Ie.hourElement.setAttribute("data-max",Ie.config.time_24hr?"23":"12"),Ie.minuteElement.setAttribute("data-min","0"),Ie.minuteElement.setAttribute("data-max","59"),Ie.timeContainer.appendChild(t),Ie.timeContainer.appendChild(e),Ie.timeContainer.appendChild(n),Ie.config.time_24hr&&Ie.timeContainer.classList.add("time24hr"),Ie.config.enableSeconds){Ie.timeContainer.classList.add("hasSeconds");var i=o("flatpickr-second");Ie.secondElement=i.childNodes[0],Ie.secondElement.value=u(Ie.latestSelectedDateObj?Ie.latestSelectedDateObj.getSeconds():Ie.config.defaultSeconds),Ie.secondElement.setAttribute("data-step",Ie.minuteElement.getAttribute("data-step")),Ie.secondElement.setAttribute("data-min",Ie.minuteElement.getAttribute("data-min")),Ie.secondElement.setAttribute("data-max",Ie.minuteElement.getAttribute("data-max")),Ie.timeContainer.appendChild(a("span","flatpickr-time-separator",":")),Ie.timeContainer.appendChild(i)}return Ie.config.time_24hr||(Ie.amPM=a("span","flatpickr-am-pm",Ie.l10n.amPM[s((Ie.latestSelectedDateObj?Ie.hourElement.value:Ie.config.defaultHour)>11)]),Ie.amPM.title=Ie.l10n.toggleTitle,Ie.amPM.tabIndex=-1,Ie.timeContainer.appendChild(Ie.amPM)),Ie.timeContainer}function U(){Ie.weekdayContainer||(Ie.weekdayContainer=a("div","flatpickr-weekdays"));for(var e=Ie.config.showMonths;e--;){var t=a("div","flatpickr-weekdaycontainer");Ie.weekdayContainer.appendChild(t)}return z(),Ie.weekdayContainer}function z(){var e=Ie.l10n.firstDayOfWeek,t=Ie.l10n.weekdays.shorthand.concat();e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e)));for(var n=Ie.config.showMonths;n--;)Ie.weekdayContainer.children[n].innerHTML="\n      <span class=flatpickr-weekday>\n        "+t.join("</span><span class=flatpickr-weekday>")+"\n      </span>\n      "}function K(){Ie.calendarContainer.classList.add("hasWeeks");var e=a("div","flatpickr-weekwrapper");e.appendChild(a("span","flatpickr-weekday",Ie.l10n.weekAbbreviation));var t=a("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function X(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1);var a=t?e:e-Ie.currentMonth;a<0&&!0===Ie._hidePrevMonthArrow||a>0&&!0===Ie._hideNextMonthArrow||(Ie.currentMonth+=a,(Ie.currentMonth<0||Ie.currentMonth>11)&&(Ie.currentYear+=Ie.currentMonth>11?1:-1,Ie.currentMonth=(Ie.currentMonth+12)%12,De("onYearChange")),q(),De("onMonthChange"),xe(),!0===n&&H(void 0,0))}function $(e){void 0===e&&(e=!0),Ie.input.value="",void 0!==Ie.altInput&&(Ie.altInput.value=""),void 0!==Ie.mobileInput&&(Ie.mobileInput.value=""),Ie.selectedDates=[],Ie.latestSelectedDateObj=void 0,Ie.showTimeInput=!1,!0===Ie.config.enableTime&&(void 0!==Ie.config.minDate?S(Ie.config.minDate):O(Ie.config.defaultHour,Ie.config.defaultMinute,Ie.config.defaultSeconds)),Ie.redraw(),e&&De("onChange")}function G(){Ie.isOpen=!1,Ie.isMobile||(Ie.calendarContainer.classList.remove("open"),Ie._input.classList.remove("active")),De("onClose")}function V(){void 0!==Ie.config&&De("onDestroy");for(var e=Ie._handlers.length;e--;){var t=Ie._handlers[e];t.element.removeEventListener(t.event,t.handler)}Ie._handlers=[],Ie.mobileInput?(Ie.mobileInput.parentNode&&Ie.mobileInput.parentNode.removeChild(Ie.mobileInput),Ie.mobileInput=void 0):Ie.calendarContainer&&Ie.calendarContainer.parentNode&&Ie.calendarContainer.parentNode.removeChild(Ie.calendarContainer),Ie.altInput&&(Ie.input.type="text",Ie.altInput.parentNode&&Ie.altInput.parentNode.removeChild(Ie.altInput),delete Ie.altInput),Ie.input&&(Ie.input.type=Ie.input._type,Ie.input.classList.remove("flatpickr-input"),Ie.input.removeAttribute("readonly"),Ie.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete Ie[e]}catch(e){}})}function Z(e){return!(!Ie.config.appendTo||!Ie.config.appendTo.contains(e))||Ie.calendarContainer.contains(e)}function Q(e){if(Ie.isOpen&&!Ie.config.inline){var t=Z(e.target),n=e.target===Ie.input||e.target===Ie.altInput||Ie.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(Ie.input)||~e.path.indexOf(Ie.altInput)),a="blur"===e.type?n&&e.relatedTarget&&!Z(e.relatedTarget):!n&&!t,i=!Ie.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});a&&i&&(Ie.close(),"range"===Ie.config.mode&&1===Ie.selectedDates.length&&(Ie.clear(!1),Ie.redraw()))}}function ee(e){if(!(!e||Ie.config.minDate&&e<Ie.config.minDate.getFullYear()||Ie.config.maxDate&&e>Ie.config.maxDate.getFullYear())){var t=e,n=Ie.currentYear!==t;Ie.currentYear=t||Ie.currentYear,Ie.config.maxDate&&Ie.currentYear===Ie.config.maxDate.getFullYear()?Ie.currentMonth=Math.min(Ie.config.maxDate.getMonth(),Ie.currentMonth):Ie.config.minDate&&Ie.currentYear===Ie.config.minDate.getFullYear()&&(Ie.currentMonth=Math.max(Ie.config.minDate.getMonth(),Ie.currentMonth)),n&&(Ie.redraw(),De("onYearChange"))}}function te(e,n){void 0===n&&(n=!0);var a=Ie.parseDate(e,void 0,n);if(Ie.config.minDate&&a&&t(a,Ie.config.minDate,void 0!==n?n:!Ie.minDateHasTime)<0||Ie.config.maxDate&&a&&t(a,Ie.config.maxDate,void 0!==n?n:!Ie.maxDateHasTime)>0)return!1;if(0===Ie.config.enable.length&&0===Ie.config.disable.length)return!0;if(void 0===a)return!1;for(var i,r=Ie.config.enable.length>0,o=r?Ie.config.enable:Ie.config.disable,c=0;c<o.length;c++){if("function"==typeof(i=o[c])&&i(a))return r;if(i instanceof Date&&void 0!==a&&i.getTime()===a.getTime())return r;if("string"==typeof i&&void 0!==a){var l=Ie.parseDate(i,void 0,!0);return l&&l.getTime()===a.getTime()?r:!r}if("object"==typeof i&&void 0!==a&&i.from&&i.to&&a.getTime()>=i.from.getTime()&&a.getTime()<=i.to.getTime())return r}return!r}function ne(e){var t=e.target===Ie._input,n=Z(e.target),a=Ie.config.allowInput,i=Ie.isOpen&&(!a||!t),r=Ie.config.inline&&t&&!a;if(13===e.keyCode&&t){if(a)return Ie.setDate(Ie._input.value,!0,e.target===Ie.altInput?Ie.config.altFormat:Ie.config.dateFormat),e.target.blur();Ie.open()}else if(n||i||r){var o=!!Ie.timeContainer&&Ie.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?Ee():fe(e);break;case 27:e.preventDefault(),de();break;case 8:case 46:t&&!Ie.config.allowInput&&(e.preventDefault(),Ie.clear());break;case 37:case 39:if(o)Ie.hourElement&&Ie.hourElement.focus();else if(e.preventDefault(),Ie.daysContainer){var c=t?0:39===e.keyCode?1:-1;e.ctrlKey?X(c,!0,!0):H(void 0,c)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;Ie.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(ee(Ie.currentYear-l),H(e.target.$i,0)):o||H(e.target.$i,7*l):Ie.config.enableTime&&(!o&&Ie.hourElement&&Ie.hourElement.focus(),v(e),Ie._debouncedChange());break;case 9:e.target===Ie.hourElement?(e.preventDefault(),Ie.minuteElement.select()):e.target===Ie.minuteElement&&(Ie.secondElement||Ie.amPM)?(e.preventDefault(),void 0!==Ie.secondElement?Ie.secondElement.focus():void 0!==Ie.amPM&&Ie.amPM.focus()):e.target===Ie.secondElement&&Ie.amPM&&(e.preventDefault(),Ie.amPM.focus())}switch(e.key){case Ie.l10n.amPM[0].charAt(0):case Ie.l10n.amPM[0].charAt(0).toLowerCase():void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[0],E(),Ee());break;case Ie.l10n.amPM[1].charAt(0):case Ie.l10n.amPM[1].charAt(0).toLowerCase():void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[1],E(),Ee())}De("onKeyDown",e)}}function ae(e){if(1===Ie.selectedDates.length&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")){for(var t=e.dateObj.getTime(),n=Ie.parseDate(Ie.selectedDates[0],void 0,!0).getTime(),a=Math.min(t,Ie.selectedDates[0].getTime()),i=Math.max(t,Ie.selectedDates[0].getTime()),r=Ie.daysContainer.children,o=r[0].children[0].dateObj.getTime(),c=r[r.length-1].lastChild.dateObj.getTime(),l=!1,u=0,s=0,d=o;d<c;d+=M.DAY)te(new Date(d),!0)||(l=l||d>a&&d<i,d<n&&(!u||d>u)?u=d:d>n&&(!s||d<s)&&(s=d));for(var f=0;f<Ie.config.showMonths;f++)for(var m=Ie.daysContainer.children[f],g=Ie.daysContainer.children[f-1],p=0,v=m.children.length;p<v;p++){(function(a,i){var r=m.children[a],o=r.dateObj,c=o.getTime(),d=u>0&&c<u||s>0&&c>s;d?(r.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){r.classList.remove(e)})):l&&!d||(["startRange","inRange","endRange","notAllowed"].forEach(function(e){r.classList.remove(e)}),e.classList.add(t<Ie.selectedDates[0].getTime()?"startRange":"endRange"),!m.contains(e)&&f>0&&g&&g.lastChild.dateObj.getTime()>=c||(n<t&&c===n?r.classList.add("startRange"):n>t&&c===n&&r.classList.add("endRange"),c>=u&&(0===s||c<=s)&&D(c,n,t)&&r.classList.add("inRange")))})(p)}}}function ie(){!Ie.isOpen||Ie.config.static||Ie.config.inline||ue()}function re(e,t){if(void 0===t&&(t=Ie._input),!0===Ie.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==Ie.mobileInput&&Ie.mobileInput.click()},0),void De("onOpen");if(!Ie._input.disabled&&!Ie.config.inline){var n=Ie.isOpen;Ie.isOpen=!0,n||(Ie.calendarContainer.classList.add("open"),Ie._input.classList.add("active"),De("onOpen"),ue(t)),!0===Ie.config.enableTime&&!0===Ie.config.noCalendar&&(0===Ie.selectedDates.length&&(Ie.setDate(void 0!==Ie.config.minDate?new Date(Ie.config.minDate.getTime()):(new Date).setHours(Ie.config.defaultHour,Ie.config.defaultMinute,Ie.config.defaultSeconds,0),!1),E(),Ee()),setTimeout(function(){return Ie.hourElement.select()},50))}}function oe(e){return function(t){var n=Ie.config["_"+e+"Date"]=Ie.parseDate(t,Ie.config.dateFormat),a=Ie.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(Ie["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),Ie.selectedDates&&(Ie.selectedDates=Ie.selectedDates.filter(function(e){return te(e)}),Ie.selectedDates.length||"min"!==e||S(n),Ee()),Ie.daysContainer&&(se(),void 0!==n?Ie.currentYearElement[e]=n.getFullYear().toString():Ie.currentYearElement.removeAttribute(e),Ie.currentYearElement.disabled=!!a&&void 0!==n&&a.getFullYear()===n.getFullYear())}}function ce(){var e=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],t=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],n=Object.assign({},l,JSON.parse(JSON.stringify(c.dataset||{}))),a={};Ie.config.parseDate=n.parseDate,Ie.config.formatDate=n.formatDate,Object.defineProperty(Ie.config,"enable",{get:function(){return Ie.config._enable},set:function(e){Ie.config._enable=ve(e)}}),Object.defineProperty(Ie.config,"disable",{get:function(){return Ie.config._disable},set:function(e){Ie.config._disable=ve(e)}}),!n.dateFormat&&n.enableTime&&(a.dateFormat=n.noCalendar?"H:i"+(n.enableSeconds?":S":""):x.defaultConfig.dateFormat+" H:i"+(n.enableSeconds?":S":"")),n.altInput&&n.enableTime&&!n.altFormat&&(a.altFormat=n.noCalendar?"h:i"+(n.enableSeconds?":S K":" K"):x.defaultConfig.altFormat+" h:i"+(n.enableSeconds?":S":"")+" K"),Object.defineProperty(Ie.config,"minDate",{get:function(){return Ie.config._minDate},set:oe("min")}),Object.defineProperty(Ie.config,"maxDate",{get:function(){return Ie.config._maxDate},set:oe("max")});var i=function(e){return function(t){Ie.config["min"===e?"_minTime":"_maxTime"]=Ie.parseDate(t,"H:i")}};Object.defineProperty(Ie.config,"minTime",{get:function(){return Ie.config._minTime},set:i("min")}),Object.defineProperty(Ie.config,"maxTime",{get:function(){return Ie.config._maxTime},set:i("max")}),Object.assign(Ie.config,a,n);for(var r=0;r<e.length;r++)Ie.config[e[r]]=!0===Ie.config[e[r]]||"true"===Ie.config[e[r]];for(var o=t.length;o--;)void 0!==Ie.config[t[o]]&&(Ie.config[t[o]]=d(Ie.config[t[o]]||[]).map(g));"time"===Ie.config.mode&&(Ie.config.noCalendar=!0,Ie.config.enableTime=!0);for(var u=0;u<Ie.config.plugins.length;u++){var s=Ie.config.plugins[u](Ie)||{};for(var f in s)~t.indexOf(f)?Ie.config[f]=d(s[f]).map(g).concat(Ie.config[f]):void 0===n[f]&&(Ie.config[f]=s[f])}Ie.isMobile=!Ie.config.disableMobile&&!Ie.config.inline&&"single"===Ie.config.mode&&!Ie.config.disable.length&&!Ie.config.enable.length&&!Ie.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),De("onParseConfig")}function le(){"object"!=typeof Ie.config.locale&&void 0===x.l10ns[Ie.config.locale]&&Ie.config.errorHandler(new Error("flatpickr: invalid locale "+Ie.config.locale)),Ie.l10n=Object.assign({},x.l10ns.default,"object"==typeof Ie.config.locale?Ie.config.locale:"default"!==Ie.config.locale?x.l10ns[Ie.config.locale]:void 0),p.K="("+Ie.l10n.amPM[0]+"|"+Ie.l10n.amPM[1]+"|"+Ie.l10n.amPM[0].toLowerCase()+"|"+Ie.l10n.amPM[1].toLowerCase()+")",Ie.formatDate=y(Ie)}function ue(e){if(void 0!==Ie.calendarContainer){De("onPreCalendarPosition");var t=e||Ie._positionElement,a=Array.prototype.reduce.call(Ie.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),i=Ie.calendarContainer.offsetWidth,r=Ie.config.position,o=t.getBoundingClientRect(),c=window.innerHeight-o.bottom,l="above"===r||"below"!==r&&c<a&&o.top>a,u=window.pageYOffset+o.top+(l?-a-2:t.offsetHeight+2);if(n(Ie.calendarContainer,"arrowTop",!l),n(Ie.calendarContainer,"arrowBottom",l),!Ie.config.inline){var s=window.pageXOffset+o.left,d=window.document.body.offsetWidth-o.right,f=s+i>window.document.body.offsetWidth;n(Ie.calendarContainer,"rightMost",f),Ie.config.static||(Ie.calendarContainer.style.top=u+"px",f?(Ie.calendarContainer.style.left="auto",Ie.calendarContainer.style.right=d+"px"):(Ie.calendarContainer.style.left=s+"px",Ie.calendarContainer.style.right="auto"))}}}function se(){Ie.config.noCalendar||Ie.isMobile||(z(),xe(),q())}function de(){Ie._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(Ie.close,0):Ie.close()}function fe(e){e.preventDefault(),e.stopPropagation();var n=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},a=r(e.target,n);if(void 0!==a){var i=a,o=Ie.latestSelectedDateObj=new Date(i.dateObj.getTime()),c=(o.getMonth()<Ie.currentMonth||o.getMonth()>Ie.currentMonth+Ie.config.showMonths-1)&&"range"!==Ie.config.mode;if(Ie.selectedDateElem=i,"single"===Ie.config.mode)Ie.selectedDates=[o];else if("multiple"===Ie.config.mode){var l=Ce(o);l?Ie.selectedDates.splice(parseInt(l),1):Ie.selectedDates.push(o)}else"range"===Ie.config.mode&&(2===Ie.selectedDates.length&&Ie.clear(!1),Ie.selectedDates.push(o),0!==t(o,Ie.selectedDates[0],!0)&&Ie.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(E(),c){var u=Ie.currentYear!==o.getFullYear();Ie.currentYear=o.getFullYear(),Ie.currentMonth=o.getMonth(),u&&De("onYearChange"),De("onMonthChange")}if(xe(),q(),Ie.config.minDate&&Ie.minDateHasTime&&Ie.config.enableTime&&0===t(o,Ie.config.minDate)&&S(Ie.config.minDate),Ee(),Ie.config.enableTime&&setTimeout(function(){return Ie.showTimeInput=!0},50),"range"===Ie.config.mode&&(1===Ie.selectedDates.length?ae(i):xe()),c||"range"===Ie.config.mode||1!==Ie.config.showMonths?Ie.selectedDateElem&&Ie.selectedDateElem.focus():H(i.$i,0),void 0!==Ie.hourElement&&setTimeout(function(){return void 0!==Ie.hourElement&&Ie.hourElement.select()},451),Ie.config.closeOnSelect){var s="single"===Ie.config.mode&&!Ie.config.enableTime,d="range"===Ie.config.mode&&2===Ie.selectedDates.length&&!Ie.config.enableTime;(s||d)&&de()}P()}}function me(e,t){null!==e&&"object"==typeof e?Object.assign(Ie.config,e):(Ie.config[e]=t,void 0!==ke[e]&&ke[e].forEach(function(e){return e()})),Ie.redraw(),j()}function ge(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return Ie.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[Ie.parseDate(e,t)];else if("string"==typeof e)switch(Ie.config.mode){case"single":n=[Ie.parseDate(e,t)];break;case"multiple":n=e.split(Ie.config.conjunction).map(function(e){return Ie.parseDate(e,t)});break;case"range":n=e.split(Ie.l10n.rangeSeparator).map(function(e){return Ie.parseDate(e,t)})}else Ie.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));Ie.selectedDates=n.filter(function(e){return e instanceof Date&&te(e,!1)}),"range"===Ie.config.mode&&Ie.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function pe(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=Ie.config.dateFormat),0!==e&&!e)return Ie.clear(t);ge(e,n),Ie.showTimeInput=Ie.selectedDates.length>0,Ie.latestSelectedDateObj=Ie.selectedDates[0],Ie.redraw(),j(),S(),Ee(t),t&&De("onChange")}function ve(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?Ie.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:Ie.parseDate(e.from,void 0),to:Ie.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function he(){Ie.selectedDates=[],Ie.now=Ie.parseDate(Ie.config.now)||new Date;var e=Ie.config.defaultDate||Ie.input.value;e&&ge(e,Ie.config.dateFormat);var t=Ie.selectedDates.length>0?Ie.selectedDates[0]:Ie.config.minDate&&Ie.config.minDate.getTime()>Ie.now.getTime()?Ie.config.minDate:Ie.config.maxDate&&Ie.config.maxDate.getTime()<Ie.now.getTime()?Ie.config.maxDate:Ie.now;Ie.currentYear=t.getFullYear(),Ie.currentMonth=t.getMonth(),Ie.selectedDates.length>0&&(Ie.latestSelectedDateObj=Ie.selectedDates[0]),void 0!==Ie.config.minTime&&(Ie.config.minTime=Ie.parseDate(Ie.config.minTime,"H:i")),void 0!==Ie.config.maxTime&&(Ie.config.maxTime=Ie.parseDate(Ie.config.maxTime,"H:i")),Ie.minDateHasTime=!!Ie.config.minDate&&(Ie.config.minDate.getHours()>0||Ie.config.minDate.getMinutes()>0||Ie.config.minDate.getSeconds()>0),Ie.maxDateHasTime=!!Ie.config.maxDate&&(Ie.config.maxDate.getHours()>0||Ie.config.maxDate.getMinutes()>0||Ie.config.maxDate.getSeconds()>0),Object.defineProperty(Ie,"showTimeInput",{get:function(){return Ie._showTimeInput},set:function(e){Ie._showTimeInput=e,Ie.calendarContainer&&n(Ie.calendarContainer,"showTimeInput",e),Ie.isOpen&&ue()}})}function ye(){if(Ie.input=Ie.config.wrap?c.querySelector("[data-input]"):c,!Ie.input)return void Ie.config.errorHandler(new Error("Invalid input element specified"));Ie.input._type=Ie.input.type,Ie.input.type="text",Ie.input.classList.add("flatpickr-input"),Ie._input=Ie.input,Ie.config.altInput&&(Ie.altInput=a(Ie.input.nodeName,Ie.input.className+" "+Ie.config.altInputClass),Ie._input=Ie.altInput,Ie.altInput.placeholder=Ie.input.placeholder,Ie.altInput.disabled=Ie.input.disabled,Ie.altInput.required=Ie.input.required,Ie.altInput.tabIndex=Ie.input.tabIndex,Ie.altInput.type="text",Ie.input.type="hidden",!Ie.config.static&&Ie.input.parentNode&&Ie.input.parentNode.insertBefore(Ie.altInput,Ie.input.nextSibling)),Ie.config.allowInput||Ie._input.setAttribute("readonly","readonly"),Ie._positionElement=Ie.config.positionElement||Ie._input}function be(){var e=Ie.config.enableTime?Ie.config.noCalendar?"time":"datetime-local":"date";Ie.mobileInput=a("input",Ie.input.className+" flatpickr-mobile"),Ie.mobileInput.step=Ie.input.getAttribute("step")||"any",Ie.mobileInput.tabIndex=1,Ie.mobileInput.type=e,Ie.mobileInput.disabled=Ie.input.disabled,Ie.mobileInput.required=Ie.input.required,Ie.mobileInput.placeholder=Ie.input.placeholder,Ie.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",Ie.selectedDates.length>0&&(Ie.mobileInput.defaultValue=Ie.mobileInput.value=Ie.formatDate(Ie.selectedDates[0],Ie.mobileFormatStr)),Ie.config.minDate&&(Ie.mobileInput.min=Ie.formatDate(Ie.config.minDate,"Y-m-d")),Ie.config.maxDate&&(Ie.mobileInput.max=Ie.formatDate(Ie.config.maxDate,"Y-m-d")),Ie.input.type="hidden",void 0!==Ie.altInput&&(Ie.altInput.type="hidden");try{Ie.input.parentNode&&Ie.input.parentNode.insertBefore(Ie.mobileInput,Ie.input.nextSibling)}catch(e){}k(Ie.mobileInput,"change",function(e){Ie.setDate(e.target.value,!1,Ie.mobileFormatStr),De("onChange"),De("onClose")})}function we(){if(Ie.isOpen)return Ie.close();Ie.open()}function De(e,t){var n=Ie.config[e];if(void 0!==n&&n.length>0)for(var a=0;n[a]&&a<n.length;a++)n[a](Ie.selectedDates,Ie.input.value,Ie,t);"onChange"===e&&(Ie.input.dispatchEvent(Me("change")),Ie.input.dispatchEvent(Me("input")))}function Me(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function Ce(e){for(var n=0;n<Ie.selectedDates.length;n++)if(0===t(Ie.selectedDates[n],e))return""+n;return!1}function Te(e){return!("range"!==Ie.config.mode||Ie.selectedDates.length<2)&&(t(e,Ie.selectedDates[0])>=0&&t(e,Ie.selectedDates[1])<=0)}function xe(){Ie.config.noCalendar||Ie.isMobile||!Ie.monthNav||(Ie.yearElements.forEach(function(e,t){var n=new Date(Ie.currentYear,Ie.currentMonth,1);n.setMonth(Ie.currentMonth+t),Ie.monthElements[t].textContent=m(n.getMonth(),Ie.config.shorthandCurrentMonth,Ie.l10n)+" ",e.value=n.getFullYear().toString()}),Ie._hidePrevMonthArrow=void 0!==Ie.config.minDate&&(Ie.currentYear===Ie.config.minDate.getFullYear()?Ie.currentMonth<=Ie.config.minDate.getMonth():Ie.currentYear<Ie.config.minDate.getFullYear()),Ie._hideNextMonthArrow=void 0!==Ie.config.maxDate&&(Ie.currentYear===Ie.config.maxDate.getFullYear()?Ie.currentMonth+1>Ie.config.maxDate.getMonth():Ie.currentYear>Ie.config.maxDate.getFullYear()))}function Ee(e){if(void 0===e&&(e=!0),0===Ie.selectedDates.length)return Ie.clear(e);void 0!==Ie.mobileInput&&Ie.mobileFormatStr&&(Ie.mobileInput.value=void 0!==Ie.latestSelectedDateObj?Ie.formatDate(Ie.latestSelectedDateObj,Ie.mobileFormatStr):"");var t="range"!==Ie.config.mode?Ie.config.conjunction:Ie.l10n.rangeSeparator;Ie.input.value=Ie.selectedDates.map(function(e){return Ie.formatDate(e,Ie.config.dateFormat)}).join(t),void 0!==Ie.altInput&&(Ie.altInput.value=Ie.selectedDates.map(function(e){return Ie.formatDate(e,Ie.config.altFormat)}).join(t)),!1!==e&&De("onValueUpdate")}function Se(e){var t=Ie.prevMonthNav.contains(e.target),n=Ie.nextMonthNav.contains(e.target);t||n?X(t?-1:1):Ie.yearElements.indexOf(e.target)>=0?(e.preventDefault(),e.target.select()):e.target.classList.contains("arrowUp")?Ie.changeYear(Ie.currentYear+1):e.target.classList.contains("arrowDown")&&Ie.changeYear(Ie.currentYear-1)}function Oe(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==Ie.amPM&&e.target===Ie.amPM&&(Ie.amPM.textContent=Ie.l10n.amPM[s(Ie.amPM.textContent===Ie.l10n.amPM[0])]);var a=parseFloat(n.getAttribute("data-min")),i=parseFloat(n.getAttribute("data-max")),r=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),c=e.delta||(t?38===e.which?1:-1:0),l=o+r*c;if(void 0!==n.value&&2===n.value.length){var d=n===Ie.hourElement,f=n===Ie.minuteElement;l<a?(l=i+l+s(!d)+(s(d)&&s(!Ie.amPM)),f&&F(void 0,-1,Ie.hourElement)):l>i&&(l=n===Ie.hourElement?l-i-s(!Ie.amPM):a,f&&F(void 0,1,Ie.hourElement)),Ie.amPM&&d&&(1===r?l+o===23:Math.abs(l-o)>r)&&(Ie.amPM.textContent=Ie.l10n.amPM[s(Ie.amPM.textContent===Ie.l10n.amPM[0])]),n.value=u(l)}}var Ie={config:Object.assign({},x.defaultConfig),l10n:h};Ie.parseDate=b({config:Ie.config,l10n:Ie.l10n}),Ie._handlers=[],Ie._bind=k,Ie._setHoursFromDate=S,Ie.changeMonth=X,Ie.changeYear=ee,Ie.clear=$,Ie.close=G,Ie._createElement=a,Ie.destroy=V,Ie.isEnabled=te,Ie.jumpToDate=j,Ie.open=re,Ie.redraw=se,Ie.set=me,Ie.setDate=pe,Ie.toggle=we;var ke={locale:[le]};return function(){if(Ie.element=Ie.input=c,Ie.isOpen=!1,ce(),le(),ye(),he(),f(),Ie.isMobile||L(),A(),(Ie.selectedDates.length||Ie.config.noCalendar)&&(Ie.config.enableTime&&S(Ie.config.noCalendar?Ie.latestSelectedDateObj||Ie.config.minDate:void 0),Ee(!1)),Ie.showTimeInput=Ie.selectedDates.length>0||Ie.config.noCalendar,void 0!==Ie.daysContainer){Ie.calendarContainer.style.visibility="hidden",Ie.calendarContainer.style.display="block";var e=(Ie.daysContainer.offsetWidth+1)*Ie.config.showMonths;Ie.daysContainer.style.width=e+"px",Ie.calendarContainer.style.width=e+"px",void 0!==Ie.weekWrapper&&(Ie.calendarContainer.style.width=e+Ie.weekWrapper.offsetWidth+"px"),Ie.calendarContainer.style.visibility="visible",Ie.calendarContainer.style.display=null}var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!Ie.isMobile&&t&&ue(),De("onReady")}(),Ie}function l(e,t){for(var n=Array.prototype.slice.call(e),a=[],i=0;i<n.length;i++){var r=n[i];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=c(r,t||{}),a.push(r._flatpickr)}catch(e){console.error(e)}}return 1===a.length?a[0]:a}var u=function(e){return("0"+e).slice(-2)},s=function(e){return!0===e?1:0},d=function(e){return e instanceof Array?e:[e]},f=function(){},m=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},g={D:f,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*s(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:f,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:f,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},p={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},v={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[v.w(e,t,n)]},F:function(e,t,n){return m(v.n(e,t,n)-1,!1,t)},G:function(e,t,n){return u(v.h(e,t,n))},H:function(e){return u(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[s(e.getHours()>11)]},M:function(e,t){return m(e.getMonth(),!0,t)},S:function(e){return u(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return u(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return u(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return u(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},h={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year"},y=function(e){var t=e.config,n=void 0===t?C:t,a=e.l10n,i=void 0===a?h:a;return function(e,t,a){if(void 0!==n.formatDate)return n.formatDate(e,t);var r=a||i;return t.split("").map(function(t,a,i){return v[t]&&"\\"!==i[a-1]?v[t](e,r,n):"\\"!==t?t:""}).join("")}},b=function(e){var t=e.config,n=void 0===t?C:t,a=e.l10n,i=void 0===a?h:a;return function(e,t,a){if(0===e||e){var r,o=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"==typeof e){var c=t||(n||C).dateFormat,l=String(e).trim();if("today"===l)r=new Date,a=!0;else if(/Z$/.test(l)||/GMT$/.test(l))r=new Date(e);else if(n&&n.parseDate)r=n.parseDate(e,c);else{r=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var u,s=[],d=0,f=0,m="";d<c.length;d++){var v=c[d],h="\\"===v,y="\\"===c[d-1]||h;if(p[v]&&!y){m+=p[v];var b=new RegExp(m).exec(e);b&&(u=!0)&&s["Y"!==v?"push":"unshift"]({fn:g[v],val:b[++f]})}else h||(m+=".");s.forEach(function(e){var t=e.fn,n=e.val;return r=t(r,n,i)||r})}r=u?r:void 0}}return r instanceof Date?(!0===a&&r.setHours(0,0,0,0),r):void n.errorHandler(new Error("Invalid date provided: "+o))}}},w=function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},D=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},M={DAY:864e5},C={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:w,hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};"function"!=typeof Object.assign&&(Object.assign=function(e){if(!e)throw TypeError("Cannot convert undefined or null to object");for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i++){var r=n[i];!function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})}(r)}return e});var T=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return l(this,e)},HTMLElement.prototype.flatpickr=function(e){return l([this],e)});var x=function(e,t){return e instanceof NodeList?l(e,t):"string"==typeof e?l(window.document.querySelectorAll(e),t):l([e],t)};return x.defaultConfig=C,x.l10ns={en:Object.assign({},h),default:Object.assign({},h)},x.localize=function(e){x.l10ns.default=Object.assign({},x.l10ns.default,e)},x.setDefaults=function(e){x.defaultConfig=Object.assign({},x.defaultConfig,e)},x.parseDate=b({}),x.formatDate=y({}),x.compareDates=t,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return l(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},x})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".gallery-wrapper");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".add-gallery-images"),n=(0,c.default)(e,".image-gallery-hidden"),a=(0,l.removeItems)(n,l.onRemoveImage),i=(0,l.dragItems)(n,l.onDragImage),o=(0,r.default)(e,{list:".gallery-images",onDrag:i,onRemove:a,listTemplate:u}),s=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!0});t.addEventListener("click",function(e){e.preventDefault(),s.open()}),s.on("select",function(){s.state().get("selection").toJSON().forEach(function(e){o.add(e),n.add(e.id)})})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="gallery-image-item"><span class="gallery-iamge-id">'+e.id+'</span><img src="'+e.url+'" class="gallery-image"/><span><svg class="remove-gallery-image" viewBox="0 0 20 20">\n  <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n</svg></span></li>'}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".table-list");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".table-list-add"),n=(0,c.default)(e,".table-list-hidden"),a=(0,l.removeItems)(n,l.onRemoveTable),i=(0,l.dragItems)(n,l.onDragTable),o=(0,r.default)(e,{list:".table-list-list",onDrag:i,onRemove:a,listTemplate:u}),s=e.querySelector(".text-list-wrapper"),d=s.querySelector(".table-list-key"),f=s.querySelector(".table-list-value");t.addEventListener("click",function(e){e.preventDefault();var t={key:d.value,value:f.value};o.add(t),n.add(t),d.value="",f.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="text-list-item table-list-item">\n    <span class="table-list-key">'+e.key+'</span>\n    <span class="table-list-value">'+e.value+'</span>\n    <svg viewBox="0 0 20 20">\n        <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n    </svg>\n</li>'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwZWViYjU4ZjEyMjMxZWJjNDMwZiIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc2VyaWFsaXplZC1pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vdGV4dC1saXN0LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZHJhZ3VsYS9kcmFndWxhLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jb250cmEvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy90aWNreS90aWNreS1icm93c2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvZXZlbnRtYXAuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9hdXRvLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vaW1hZ2UtdXBsb2Fkcy5qcyIsIndlYnBhY2s6Ly8vLi9kYXRlcGlja2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZmxhdHBpY2tyL2Rpc3QvZmxhdHBpY2tyLmpzIiwid2VicGFjazovLy8uL2dhbGxlcnkuanMiLCJ3ZWJwYWNrOi8vLy4vdGFibGUtbGlzdC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwidmFsdWUiLCJkZWZhdWx0IiwicGFyZW50IiwiYXJncyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yIiwicmVnaXN0ZXJEcmFnRXZlbnRzIiwib25EcmFnIiwicmVnaXN0ZXJSZW1vdmVFdmVudHMiLCJvblJlbW92ZSIsImFkZCIsImh0bWwiLCJsaXN0VGVtcGxhdGUiLCJsaXN0SXRlbSIsImRvY3VtZW50IiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCJhcHBlbmRDaGlsZCIsIl9kcmFndWxhIiwiX2RyYWd1bGEyIiwib2JqIiwibGlzdEl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsImlubmVySFRNTCIsInJlbW92ZUNoaWxkIiwiY2FsbGJhY2siLCJvbiIsImVsIiwiaGlkZGVuSW5wdXQiLCJoaWRkZW5FbCIsImdldEN1cnJlbnRWYWx1ZSIsIkpTT04iLCJwYXJzZSIsImFkZFZhbHVlIiwiY29uY2F0IiwicmVtb3ZlVmFsdWUiLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJ1cGRhdGUiLCJ2YWx1ZXMiLCJyZW1vdmVJdGVtcyIsIkhpZGRlbiIsImRyYWdJdGVtcyIsIm9uRHJhZ09iamVjdCIsInJlZHVjZSIsImFjYyIsImlkIiwiZGF0YXNldCIsInRpdGxlIiwib25EcmFnVGV4dCIsIm9uRHJhZ0ltYWdlIiwicGFyc2VJbnQiLCJvblJlbW92ZU9iamVjdCIsImN1cnJlbnRWYWx1ZSIsIm5ld1ZhbHVlIiwiZmlsdGVyIiwiY3VycmVudCIsIm9uUmVtb3ZlVGV4dCIsIm9uUmVtb3ZlSW1hZ2UiLCJvbkRyYWdUYWJsZSIsImtleSIsIm9uUmVtb3ZlVGFibGUiLCJhdXRvc3VnZ2VzdCIsImVuZHBvaW50Iiwib25TZWxlY3QiLCJvbkVtcHR5IiwieGhyIiwibGVuZ3RoIiwiY2xhc3NMaXN0IiwiZ2V0T3B0aW9ucyIsInVwZGF0ZU9wdGlvbnMiLCJvbkF1dG9TdWdnZXN0SW5wdXQiLCJpbnB1dCIsImlucHV0VmFsdWUiLCJsaXN0TmFtZSIsImdldEF0dHJpYnV0ZSIsImxpc3RPcHRpb25zIiwiZ2V0RWxlbWVudEJ5SWQiLCJjaGlsZE5vZGVzIiwibWF0Y2giLCJvcHRpb24iLCJxdWVyeSIsImJ1aWxkUXVlcnkiLCJ1cmwiLCJhYm9ydCIsIlhNTEh0dHBSZXF1ZXN0IiwiZXZ0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImlzSlNPTiIsInJlc3BvbnNlVGV4dCIsInJlc3VsdHMiLCJtZXNzYWdlIiwib3BlbiIsInNlbmQiLCJlcnJvciIsInJlc3BvbnNlIiwiY29uc29sZSIsIndhcm4iLCJBcnJheSIsImlzQXJyYXkiLCJjcmVhdGVPcHRpb25zIiwiZGF0YWxpc3QiLCJuZXdPcHRpb25zIiwicmVzdWx0IiwiY3JlYXRlT3B0aW9uIiwicmVuZGVyZWQiLCJzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0xvd2VyQ2FzZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5kZXgiLCJfdGV4dExpc3QiLCJfdGV4dExpc3QyIiwiX2F1dG9zdWdnZXN0TGlzdCIsIl9hdXRvc3VnZ2VzdExpc3QyIiwiX2xpc3QiLCJfYXV0b0l0ZW0iLCJfYXV0b0l0ZW0yIiwiX2ltYWdlVXBsb2FkcyIsIl9pbWFnZVVwbG9hZHMyIiwiX2RhdGVwaWNrZXIiLCJfZGF0ZXBpY2tlcjIiLCJfZ2FsbGVyeSIsIl9nYWxsZXJ5MiIsIl90YWJsZUxpc3QiLCJfdGFibGVMaXN0MiIsImNyZWF0ZVRleHRJdGVtIiwiY3JlYXRlQXV0b1N1Z2dlc3RJdGVtIiwiYnV0dG9uIiwiaGlkZGVuIiwibGlzdEZpZWxkcyIsImZvckVhY2giLCJsaXN0RmllbGQiLCJ0ZXh0SW5wdXQiLCJhZGRCdXR0b24iLCJfc2VyaWFsaXplZElucHV0MiIsIl91dGlsaXRpZXMiLCJkcmFnIiwiTGlzdCIsIl9saXN0MiIsImFzc2lnbiIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXJpYWxpemVkSW5wdXQiLCJnbG9iYWwiLCJkcmFndWxhIiwiaW5pdGlhbENvbnRhaW5lcnMiLCJvcHRpb25zIiwiaXNDb250YWluZXIiLCJkcmFrZSIsImNvbnRhaW5lcnMiLCJpbmRleE9mIiwiZXZlbnRzIiwib3AiLCJ0b3VjaHkiLCJkb2N1bWVudEVsZW1lbnQiLCJncmFiIiwicmVsZWFzZSIsImV2ZW50dWFsTW92ZW1lbnRzIiwic3RhcnRCZWNhdXNlTW91c2VNb3ZlZCIsIm1vdmVtZW50cyIsImNyb3NzdmVudCIsInByZXZlbnRHcmFiYmVkIiwiZGVzdHJveSIsIl9ncmFiYmVkIiwiX21vdmVYIiwiY2xpZW50WCIsIl9tb3ZlWSIsImNsaWVudFkiLCJ3aGljaE1vdXNlQnV0dG9uIiwibWV0YUtleSIsImN0cmxLZXkiLCJpdGVtIiwiY29udGV4dCIsImNhblN0YXJ0IiwidHlwZSIsImlzSW5wdXQiLCJmb2N1cyIsImlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiIsImdldENvb3JkIiwiZG9jIiwiZWxlbWVudEZyb21Qb2ludCIsImdyYWJiZWQiLCJlbmQiLCJzdGFydCIsIm9mZnNldCIsImdldE9mZnNldCIsIl9pdGVtIiwiX29mZnNldFgiLCJsZWZ0IiwiX29mZnNldFkiLCJ0b3AiLCJjbGFzc2VzIiwiX2NvcHkiLCJyZW5kZXJNaXJyb3JJbWFnZSIsImRyYWdnaW5nIiwiX21pcnJvciIsImhhbmRsZSIsImdldFBhcmVudCIsImludmFsaWQiLCJzb3VyY2UiLCJtb3ZlcyIsIm5leHRFbCIsImNhbk1vdmUiLCJtYW51YWxTdGFydCIsImlzQ29weSIsImNsb25lTm9kZSIsImVtaXQiLCJfc291cmNlIiwiX2luaXRpYWxTaWJsaW5nIiwiX2N1cnJlbnRTaWJsaW5nIiwiaW52YWxpZFRhcmdldCIsImRyb3AiLCJ1bmdyYWIiLCJlbGVtZW50QmVoaW5kQ3Vyc29yIiwiZ2V0RWxlbWVudEJlaGluZFBvaW50IiwiZHJvcFRhcmdldCIsImZpbmREcm9wVGFyZ2V0IiwiY29weVNvcnRTb3VyY2UiLCJyZW1vdmVPblNwaWxsIiwiY2FuY2VsIiwiaXNJbml0aWFsUGxhY2VtZW50IiwiY2xlYW51cCIsInJldmVydCIsInJldmVydHMiLCJhcmd1bWVudHMiLCJyZXZlcnRPblNwaWxsIiwiaW5pdGlhbCIsImluc2VydEJlZm9yZSIsInJlbW92ZU1pcnJvckltYWdlIiwicm0iLCJfcmVuZGVyVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfbGFzdERyb3BUYXJnZXQiLCJzaWJsaW5nIiwiaW1tZWRpYXRlIiwiZ2V0SW1tZWRpYXRlQ2hpbGQiLCJyZWZlcmVuY2UiLCJnZXRSZWZlcmVuY2UiLCJhY2NlcHRzIiwibW92ZWQiLCJ4IiwieSIsInN0eWxlIiwiY2hhbmdlZCIsInNwaWxsT3ZlciIsInNwaWxsT3V0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiZ2V0UmVjdFdpZHRoIiwiaGVpZ2h0IiwiZ2V0UmVjdEhlaWdodCIsIm1pcnJvckNvbnRhaW5lciIsInJlc29sdmUiLCJhZnRlciIsImhvcml6b250YWwiLCJkaXJlY3Rpb24iLCJsZW4iLCJjaGlsZHJlbiIsImNvbnRhaW5lciIsImNvcHkiLCJhbHdheXMiLCJuZXZlciIsImJvZHkiLCJlbWl0dGVyIiwiZm4iLCJ0b3VjaCIsIm1vdXNldXAiLCJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJwb2ludGVycyIsIm1pY3Jvc29mdCIsIm5hdmlnYXRvciIsInBvaW50ZXJFbmFibGVkIiwibXNQb2ludGVyRW5hYmxlZCIsInRvdWNoZXMiLCJ3aGljaCIsImJ1dHRvbnMiLCJnZXRTY3JvbGwiLCJzY3JvbGxQcm9wIiwib2Zmc2V0UHJvcCIsImNsaWVudEhlaWdodCIsInBvaW50Iiwic3RhdGUiLCJjbGFzc05hbWUiLCJyaWdodCIsImJvdHRvbSIsInBhcmVudE5vZGUiLCJpc0VkaXRhYmxlIiwiY29udGVudEVkaXRhYmxlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsImdldEV2ZW50SG9zdCIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNvb3JkIiwiaG9zdCIsIm1pc3NNYXAiLCJwYWdlWCIsInBhZ2VZIiwiYXRvYSIsImRlYm91bmNlIiwidGhpbmciLCJvcHRzIiwidW5kZWZpbmVkIiwicHVzaCIsIm9uY2UiLCJfb25jZSIsIm9mZiIsImV0Iiwic3BsaWNlIiwiZW1pdHRlclNuYXBzaG90Iiwic2hpZnQiLCJhcHBseSIsInNsaWNlIiwiY3R4IiwidGhyb3dzIiwibGlzdGVuIiwiYXN5bmMiLCJhIiwidGlja3kiLCJzZXRJbW1lZGlhdGUiLCJ0aWNrIiwic2kiLCJzZXRUaW1lb3V0IiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVvdXQiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsInNlbGYiLCJjbGVhckltbWVkaWF0ZSIsInByb2Nlc3MiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsInJ1biIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImF0dGFjaFRvIiwiZ2V0UHJvdG90eXBlT2YiLCJ0b1N0cmluZyIsIm5leHRUaWNrIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwiYXR0YWNoRXZlbnQiLCJNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJwb3J0MSIsInBvcnQyIiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdCIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJhZGRFdmVudEVhc3kiLCJjYXB0dXJpbmciLCJhZGRFdmVudEhhcmQiLCJ3cmFwIiwicmVtb3ZlRXZlbnRFYXN5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50SGFyZCIsImxpc3RlbmVyIiwidW53cmFwIiwiZGV0YWNoRXZlbnQiLCJmYWJyaWNhdGVFdmVudCIsIm1vZGVsIiwiZXZlbnRtYXAiLCJjdXN0b21FdmVudCIsImRldGFpbCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJkaXNwYXRjaEV2ZW50IiwiZmlyZUV2ZW50Iiwid3JhcHBlckZhY3RvcnkiLCJvcmlnaW5hbEV2ZW50Iiwic3JjRWxlbWVudCIsInJldHVyblZhbHVlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwid3JhcHBlciIsImhhcmRDYWNoZSIsImVsZW1lbnQiLCJmaW5kIiwiYWRkRXZlbnQiLCJyZW1vdmVFdmVudCIsImZhYnJpY2F0ZSIsIk5hdGl2ZUN1c3RvbUV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJmb28iLCJwYXJhbXMiLCJpbml0Q3VzdG9tRXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsIkJvb2xlYW4iLCJldmVudG5hbWUiLCJyb24iLCJ0ZXN0IiwibG9va3VwQ2xhc3MiLCJjYWNoZWQiLCJjYWNoZSIsImxhc3RJbmRleCIsIlJlZ0V4cCIsImFkZENsYXNzIiwicm1DbGFzcyIsInJlcGxhY2UiLCJ0cmltIiwiZmllbGRzIiwiYXV0b0xpc3QiLCJlbE5hbWUiLCJPTUdGaWVsZHMiLCJiYXNlVVJMIiwicmVzb3VyY2UiLCJfYXV0b3N1Z2dlc3QyIiwiX2F1dG9zdWdnZXN0IiwiYXV0b0l0ZW0iLCJuYW1lc3BhY2UiLCJpbWFnZVVwbG9hZHMiLCJmZWF0dXJlZEltYWdlV3JhcCIsIm1hcCIsInJlbW92ZUltYWdlIiwicmVwbGFjZUltYWdlIiwic2V0SW1hZ2UiLCJmZWF0dXJlZEltYWdlVGFnIiwiZmVhdHVyZWRJbWFnZUlEIiwiZmVhdHVyZWRJbWFnZVRpdGxlIiwibWVkaWFGcmFtZSIsIndwIiwibWVkaWEiLCJ0ZXh0IiwibXVsdGlwbGUiLCJhdHRhY2htZW50IiwiZmlyc3QiLCJ0b0pTT04iLCJ0b2dnbGUiLCJzZXRBdHRyaWJ1dGUiLCJzaXplcyIsInRodW1ibmFpbCIsImljb24iLCJmaWxlbmFtZSIsImRhdGVwaWNrZXJzIiwiZGF0ZUZpZWxkIiwiY3VycmVudERhdGUiLCJkYXRlIiwiX2ZsYXRwaWNrcjIiLCJhbHRJbnB1dCIsImFsdEZvcm1hdCIsImRhdGVGb3JtYXQiLCJkZWZhdWx0RGF0ZSIsIl9mbGF0cGlja3IiLCJmYWN0b3J5IiwiZnVuYyIsIndhaXQiLCJjb21wYXJlRGF0ZXMiLCJkYXRlMSIsImRhdGUyIiwidGltZWxlc3MiLCJEYXRlIiwiZ2V0VGltZSIsInNldEhvdXJzIiwidG9nZ2xlQ2xhc3MiLCJlbGVtIiwiYm9vbCIsInRhZyIsImNvbnRlbnQiLCJ0ZXh0Q29udGVudCIsImNsZWFyTm9kZSIsIm5vZGUiLCJmaXJzdENoaWxkIiwiZmluZFBhcmVudCIsImNvbmRpdGlvbiIsImNyZWF0ZU51bWJlcklucHV0IiwiaW5wdXRDbGFzc05hbWUiLCJudW1JbnB1dCIsImFycm93VXAiLCJhcnJvd0Rvd24iLCJwYXR0ZXJuIiwiRmxhdHBpY2tySW5zdGFuY2UiLCJpbnN0YW5jZUNvbmZpZyIsInNldHVwSGVscGVyRnVuY3Rpb25zIiwidXRpbHMiLCJnZXREYXlzSW5Nb250aCIsIm1vbnRoIiwieXIiLCJjdXJyZW50TW9udGgiLCJjdXJyZW50WWVhciIsImwxMG4iLCJkYXlzSW5Nb250aCIsImJpbmRUb0luc3RhbmNlIiwiYmluZCIsInVwZGF0ZVRpbWUiLCJzZWxlY3RlZERhdGVzIiwidGltZVdyYXBwZXIiLCJzZXRIb3Vyc0Zyb21JbnB1dHMiLCJ1cGRhdGVWYWx1ZSIsIkRFQk9VTkNFRF9DSEFOR0VfTVMiLCJhbXBtMm1pbGl0YXJ5IiwiaG91ciIsImFtUE0iLCJpbnQiLCJtaWxpdGFyeTJhbXBtIiwiaG91ckVsZW1lbnQiLCJtaW51dGVFbGVtZW50IiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInNlY29uZEVsZW1lbnQiLCJsaW1pdE1pbkhvdXJzIiwiY29uZmlnIiwibWluVGltZSIsIm1pbkRhdGUiLCJtaW5EYXRlSGFzVGltZSIsImxhdGVzdFNlbGVjdGVkRGF0ZU9iaiIsIm1heFRpbWUiLCJtYXhEYXRlIiwibWF4RGF0ZUhhc1RpbWUiLCJtaW4iLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIiwibWF4Iiwic2V0SG91cnNGcm9tRGF0ZSIsImRhdGVPYmoiLCJpc01vYmlsZSIsInBhZCIsInRpbWVfMjRociIsIm9uWWVhcklucHV0IiwieWVhciIsImRlbHRhIiwiYmx1ciIsImNoYW5nZVllYXIiLCJoYW5kbGVyIiwiZXYiLCJfaGFuZGxlcnMiLCJvbkNsaWNrIiwidHJpZ2dlckNoYW5nZSIsInRyaWdnZXJFdmVudCIsImJpbmRFdmVudHMiLCJzZXR1cE1vYmlsZSIsImRlYm91bmNlZFJlc2l6ZSIsIm9uUmVzaXplIiwiX2RlYm91bmNlZENoYW5nZSIsImRheXNDb250YWluZXIiLCJ1c2VyQWdlbnQiLCJtb2RlIiwib25Nb3VzZU92ZXIiLCJvbktleURvd24iLCJzdGF0aWMiLCJfaW5wdXQiLCJpbmxpbmUiLCJvbnRvdWNoc3RhcnQiLCJkb2N1bWVudENsaWNrIiwiY2FwdHVyZSIsImNsaWNrT3BlbnMiLCJtb250aE5hdiIsIm9uTW9udGhOYXZDbGljayIsInNlbGVjdERhdGUiLCJ0aW1lQ29udGFpbmVyIiwic2VsVGV4dCIsInNlbGVjdCIsInRpbWVJbmNyZW1lbnQiLCJwYXNzaXZlIiwianVtcFRvRGF0ZSIsImp1bXBEYXRlIiwianVtcFRvIiwicGFyc2VEYXRlIiwibm93IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImVycm9ySGFuZGxlciIsInJlZHJhdyIsImluY3JlbWVudE51bUlucHV0IiwiY29udGFpbnMiLCJpbnB1dEVsZW0iLCJidWlsZCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNhbGVuZGFyQ29udGFpbmVyIiwidGFiSW5kZXgiLCJub0NhbGVuZGFyIiwiYnVpbGRNb250aE5hdiIsImlubmVyQ29udGFpbmVyIiwid2Vla051bWJlcnMiLCJfYnVpbGRXZWVrcyIsImJ1aWxkV2Vla3MiLCJ3ZWVrV3JhcHBlciIsInJDb250YWluZXIiLCJidWlsZFdlZWtkYXlzIiwiYnVpbGREYXlzIiwiZW5hYmxlVGltZSIsImJ1aWxkVGltZSIsImFuaW1hdGUiLCJzaG93TW9udGhzIiwiY3VzdG9tQXBwZW5kIiwiYXBwZW5kVG8iLCJjcmVhdGVEYXkiLCJkYXlOdW1iZXIiLCJkYXRlSXNFbmFibGVkIiwiaXNFbmFibGVkIiwiZGF5RWxlbWVudCIsImdldERhdGUiLCIkaSIsImZvcm1hdERhdGUiLCJhcmlhRGF0ZUZvcm1hdCIsInRvZGF5RGF0ZUVsZW0iLCJpc0RhdGVTZWxlY3RlZCIsInNlbGVjdGVkRGF0ZUVsZW0iLCJpc0RhdGVJblJhbmdlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZ2V0V2VlayIsImZvY3VzT25EYXkiLCJjdXJyZW50SW5kIiwiY3VycmVudEluZGV4IiwiYWN0aXZlRWxlbWVudCIsIm5ld0luZGV4IiwidGFyZ2V0Tm9kZSIsImRheXMiLCJidWlsZE1vbnRoRGF5cyIsImZpcnN0T2ZNb250aCIsImdldERheSIsImZpcnN0RGF5T2ZXZWVrIiwicHJldk1vbnRoRGF5cyIsImRheUluZGV4IiwiZGF5TnVtIiwiZGF5Q29udGFpbmVyIiwiZnJhZyIsInNldE1vbnRoIiwiYnVpbGRNb250aCIsIm1vbnRoTmF2RnJhZ21lbnQiLCJtb250aEVsZW1lbnQiLCJzY3JvbGxUaXRsZSIsInllYXJJbnB1dCIsInRhYmluZGV4IiwieWVhckVsZW1lbnQiLCJ5ZWFyQXJpYUxhYmVsIiwiZGlzYWJsZWQiLCJ5ZWFyRWxlbWVudHMiLCJtb250aEVsZW1lbnRzIiwicHJldk1vbnRoTmF2IiwicHJldkFycm93IiwibmV4dE1vbnRoTmF2IiwibmV4dEFycm93IiwiX19oaWRlUHJldk1vbnRoQXJyb3ciLCJzZXQiLCJfX2hpZGVOZXh0TW9udGhBcnJvdyIsImN1cnJlbnRZZWFyRWxlbWVudCIsInVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgiLCJzZXBhcmF0b3IiLCJob3VySW5wdXQiLCJtaW51dGVJbnB1dCIsImRlZmF1bHRIb3VyIiwiZGVmYXVsdE1pbnV0ZSIsImhvdXJJbmNyZW1lbnQiLCJtaW51dGVJbmNyZW1lbnQiLCJlbmFibGVTZWNvbmRzIiwic2Vjb25kSW5wdXQiLCJkZWZhdWx0U2Vjb25kcyIsInRvZ2dsZVRpdGxlIiwid2Vla2RheUNvbnRhaW5lciIsInVwZGF0ZVdlZWtkYXlzIiwid2Vla2RheXMiLCJzaG9ydGhhbmQiLCJqb2luIiwid2Vla0FiYnJldmlhdGlvbiIsImNoYW5nZU1vbnRoIiwiaXNfb2Zmc2V0IiwiZnJvbV9rZXlib2FyZCIsIl9oaWRlUHJldk1vbnRoQXJyb3ciLCJfaGlkZU5leHRNb250aEFycm93IiwiY2xlYXIiLCJ0cmlnZ2VyQ2hhbmdlRXZlbnQiLCJtb2JpbGVJbnB1dCIsInNob3dUaW1lSW5wdXQiLCJpc09wZW4iLCJoIiwiX3R5cGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJrIiwiXyIsImlzQ2FsZW5kYXJFbGVtIiwiaXNDYWxlbmRhckVsZW1lbnQiLCJwYXRoIiwibG9zdEZvY3VzIiwicmVsYXRlZFRhcmdldCIsImlzSWdub3JlZCIsImlnbm9yZWRGb2N1c0VsZW1lbnRzIiwic29tZSIsIm5ld1llYXIiLCJuZXdZZWFyTnVtIiwiaXNOZXdZZWFyIiwiZGF0ZVRvQ2hlY2siLCJlbmFibGUiLCJkaXNhYmxlIiwicGFyc2VkIiwiZnJvbSIsInRvIiwiY2FsZW5kYXJFbGVtIiwiYWxsb3dJbnB1dCIsImFsbG93S2V5ZG93biIsImFsbG93SW5saW5lS2V5ZG93biIsInNldERhdGUiLCJpc1RpbWVPYmoiLCJmb2N1c0FuZENsb3NlIiwiX2RlbHRhIiwiY2hhckF0IiwiaG92ZXJEYXRlIiwiaW5pdGlhbERhdGUiLCJyYW5nZVN0YXJ0RGF0ZSIsInJhbmdlRW5kRGF0ZSIsIm1vbnRocyIsImZpcnN0RGF5IiwibGFzdERheSIsImxhc3RDaGlsZCIsImNvbnRhaW5zRGlzYWJsZWQiLCJtaW5SYW5nZSIsIm1heFJhbmdlIiwidCIsImR1cmF0aW9uIiwiREFZIiwicHJldk1vbnRoIiwiZGF5RWxlbSIsInRpbWVzdGFtcCIsIm91dE9mUmFuZ2UiLCJpc0JldHdlZW4iLCJwb3NpdGlvbkNhbGVuZGFyIiwicG9zaXRpb25FbGVtZW50IiwiY2xpY2siLCJ3YXNPcGVuIiwibWluTWF4RGF0ZVNldHRlciIsImludmVyc2VEYXRlT2JqIiwicGFyc2VDb25maWciLCJib29sT3B0cyIsImhvb2tzIiwidXNlckNvbmZpZyIsImZvcm1hdHMkJDEiLCJfZW5hYmxlIiwiZGF0ZXMiLCJwYXJzZURhdGVSdWxlcyIsIl9kaXNhYmxlIiwiZmxhdHBpY2tyIiwiZGVmYXVsdENvbmZpZyIsIl9taW5EYXRlIiwiX21heERhdGUiLCJtaW5NYXhUaW1lU2V0dGVyIiwidmFsIiwiX21pblRpbWUiLCJfbWF4VGltZSIsIl9pIiwiYXJyYXlpZnkiLCJfaTIiLCJwbHVnaW5zIiwicGx1Z2luQ29uZiIsImRpc2FibGVNb2JpbGUiLCJzZXR1cExvY2FsZSIsImxvY2FsZSIsImwxMG5zIiwidG9rZW5SZWdleCIsIksiLCJjcmVhdGVEYXRlRm9ybWF0dGVyIiwiY3VzdG9tUG9zaXRpb25FbGVtZW50IiwiX3Bvc2l0aW9uRWxlbWVudCIsImNhbGVuZGFySGVpZ2h0IiwiY2hpbGQiLCJvZmZzZXRIZWlnaHQiLCJjYWxlbmRhcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJjb25maWdQb3MiLCJwb3NpdGlvbiIsImlucHV0Qm91bmRzIiwiZGlzdGFuY2VGcm9tQm90dG9tIiwiaW5uZXJIZWlnaHQiLCJzaG93T25Ub3AiLCJwYWdlWU9mZnNldCIsInBhZ2VYT2Zmc2V0IiwicmlnaHRNb3N0IiwibXNNYXhUb3VjaFBvaW50cyIsImlzU2VsZWN0YWJsZSIsImRheSIsInNlbGVjdGVkRGF0ZSIsInNob3VsZENoYW5nZU1vbnRoIiwic2VsZWN0ZWRJbmRleCIsInNvcnQiLCJiIiwiY2xvc2VPblNlbGVjdCIsInNpbmdsZSIsInJhbmdlIiwiQ0FMTEJBQ0tTIiwic2V0U2VsZWN0ZWREYXRlIiwiaW5wdXREYXRlIiwiZm9ybWF0Iiwic3BsaXQiLCJjb25qdW5jdGlvbiIsInJhbmdlU2VwYXJhdG9yIiwiYXJyIiwicnVsZSIsInNldHVwRGF0ZXMiLCJwcmVsb2FkZWREYXRlIiwiX3Nob3dUaW1lSW5wdXQiLCJzZXR1cElucHV0cyIsIm5vZGVOYW1lIiwiYWx0SW5wdXRDbGFzcyIsInBsYWNlaG9sZGVyIiwicmVxdWlyZWQiLCJpbnB1dFR5cGUiLCJzdGVwIiwibW9iaWxlRm9ybWF0U3RyIiwiZGVmYXVsdFZhbHVlIiwiX2EiLCJtb250aFRvU3RyIiwic2hvcnRoYW5kQ3VycmVudE1vbnRoIiwiam9pbkNoYXIiLCJkT2JqIiwiaXNQcmV2TW9udGgiLCJpc05leHRNb250aCIsImlzS2V5RG93biIsInBhcnNlRmxvYXQiLCJjdXJWYWx1ZSIsImlzSG91ckVsZW0iLCJpc01pbnV0ZUVsZW0iLCJhYnMiLCJlbmdsaXNoIiwiY3JlYXRlRGF0ZVBhcnNlciIsIl9iaW5kIiwiX3NldEhvdXJzRnJvbURhdGUiLCJfY3JlYXRlRWxlbWVudCIsInZpc2liaWxpdHkiLCJkaXNwbGF5IiwiZGF5c1dpZHRoIiwiaXNTYWZhcmkiLCJub2RlTGlzdCIsIm5vZGVzIiwiaW5zdGFuY2VzIiwibnVtYmVyIiwiZG9fbm90aGluZyIsIm1vbnRoTnVtYmVyIiwicmV2Rm9ybWF0IiwiRCIsIkYiLCJtb250aE5hbWUiLCJsb25naGFuZCIsIkciLCJIIiwiSiIsIk0iLCJzaG9ydE1vbnRoIiwiUyIsInNldFNlY29uZHMiLCJVIiwidW5peFNlY29uZHMiLCJXIiwid2Vla051bSIsIndlZWtOdW1iZXIiLCJZIiwic2V0RnVsbFllYXIiLCJaIiwiSVNPRGF0ZSIsInNldE1pbnV0ZXMiLCJqIiwidyIsImZvcm1hdHMiLCJ0b0lTT1N0cmluZyIsIm9yZGluYWwiLCJTdHJpbmciLCJzdWJzdHJpbmciLCJudGgiLCJfcmVmIiwiX3JlZiRjb25maWciLCJkZWZhdWx0cyIsIl9yZWYkbDEwbiIsImZybXQiLCJvdmVycmlkZUxvY2FsZSIsIl9yZWYyIiwiX3JlZjIkY29uZmlnIiwiX3JlZjIkbDEwbiIsImdpdmVuRm9ybWF0IiwicGFyc2VkRGF0ZSIsImRhdGVfb3JpZyIsInRvRml4ZWQiLCJkYXRlc3RyIiwibWF0Y2hlZCIsIm9wcyIsIm1hdGNoSW5kZXgiLCJyZWdleFN0ciIsInRva2VuIiwiaXNCYWNrU2xhc2giLCJlc2NhcGVkIiwiZXhlYyIsIl9yZWYzIiwiZ2l2ZW5EYXRlIiwid2VlazEiLCJyb3VuZCIsInRzIiwidHMxIiwidHMyIiwib25DaGFuZ2UiLCJvbkNsb3NlIiwib25EYXlDcmVhdGUiLCJvbkRlc3Ryb3kiLCJvbk1vbnRoQ2hhbmdlIiwib25PcGVuIiwib25QYXJzZUNvbmZpZyIsIm9uUmVhZHkiLCJvblZhbHVlVXBkYXRlIiwib25ZZWFyQ2hhbmdlIiwib25QcmVDYWxlbmRhclBvc2l0aW9uIiwiVHlwZUVycm9yIiwiX2xlbiIsIl9rZXkiLCJrZXlzIiwiSFRNTEVsZW1lbnQiLCJIVE1MQ29sbGVjdGlvbiIsIk5vZGVMaXN0Iiwic2VsZWN0b3IiLCJlbiIsImxvY2FsaXplIiwic2V0RGVmYXVsdHMiLCJqUXVlcnkiLCJmcF9pbmNyIiwiZ2FsbGVyeVNlY3Rpb25zIiwiZ2FsbGVyeSIsImFkZEltYWdlIiwiaW1hZ2VJdGVtIiwiaW1hZ2UiLCJ0YWJsZUxpc3RzIiwidGFibGVMaXN0IiwiYWRkUm93IiwidGFibGVJdGVtIiwicm93RGF0YSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0E0QkFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsU0FBQVAsRUFBQVEsRUFBQUMsR0FD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bnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG52YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmVudCwgYXJncykge1xuICAgIHZhciBsaXN0ID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoYXJncy5saXN0KTtcblxuICAgIHJlZ2lzdGVyRHJhZ0V2ZW50cyhsaXN0LCBhcmdzLm9uRHJhZyk7XG4gICAgcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgYXJncy5vblJlbW92ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGh0bWwgPSBhcmdzLmxpc3RUZW1wbGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTtcblxuICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XG4gICAgICAgIH1cbiAgICB9O1xufTtcblxudmFyIF9kcmFndWxhID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9kcmFndWxhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RyYWd1bGEpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgcmVnaXN0ZXJSZW1vdmVFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlclJlbW92ZUV2ZW50cyhsaXN0LCBvblJlbW92ZSkge1xuICAgIHZhciBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG5cbiAgICBsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9ICdzdmcnID09PSBlLnRhcmdldC50YWdOYW1lID8gZS50YXJnZXQgOiBlLnRhcmdldC5jbG9zZXN0KCdzdmcnKTtcblxuICAgICAgICBpZiAoJ3N2ZycgPT09IHRhcmdldC50YWdOYW1lKSB7XG4gICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcbiAgICAgICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQobGlzdEl0ZW0pO1xuICAgICAgICAgICAgb25SZW1vdmUodmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbGlzdEl0ZW1zO1xufTtcblxudmFyIHJlZ2lzdGVyRHJhZ0V2ZW50cyA9IGZ1bmN0aW9uIHJlZ2lzdGVyRHJhZ0V2ZW50cyhsaXN0LCBjYWxsYmFjaykge1xuICAgIHZhciBkcmFrZSA9ICgwLCBfZHJhZ3VsYTIuZGVmYXVsdCkoW2xpc3RdKTtcblxuICAgIGRyYWtlLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHZhciBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG4gICAgICAgIGNhbGxiYWNrKGxpc3QsIGxpc3RJdGVtcyk7XG4gICAgfSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmVudCwgaGlkZGVuSW5wdXQpIHtcbiAgdmFyIGhpZGRlbkVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoaGlkZGVuSW5wdXQpO1xuXG4gIHZhciBnZXRDdXJyZW50VmFsdWUgPSBmdW5jdGlvbiBnZXRDdXJyZW50VmFsdWUoKSB7XG4gICAgcmV0dXJuIGhpZGRlbkVsLnZhbHVlID8gSlNPTi5wYXJzZShoaWRkZW5FbC52YWx1ZSkgOiBbXTtcbiAgfTtcblxuICB2YXIgYWRkVmFsdWUgPSBmdW5jdGlvbiBhZGRWYWx1ZSh2YWx1ZSkge1xuICAgIHZhciBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICByZXR1cm4gY3VycmVudFZhbHVlLmNvbmNhdCh2YWx1ZSk7XG4gIH07XG5cbiAgdmFyIHJlbW92ZVZhbHVlID0gZnVuY3Rpb24gcmVtb3ZlVmFsdWUodmFsdWUsIG9uUmVtb3ZlKSB7XG4gICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgIHJldHVybiBvblJlbW92ZShjdXJyZW50VmFsdWUsIHZhbHVlKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGFkZDogZnVuY3Rpb24gYWRkKHZhbHVlKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGFkZFZhbHVlKHZhbHVlKSk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSh2YWx1ZSwgb25SZW1vdmUpIHtcbiAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkocmVtb3ZlVmFsdWUodmFsdWUsIG9uUmVtb3ZlKSk7XG4gICAgfSxcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZXMpIHtcbiAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWVzKTtcbiAgICB9XG4gIH07XG59O1xuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciByZW1vdmVJdGVtcyA9IGV4cG9ydHMucmVtb3ZlSXRlbXMgPSBmdW5jdGlvbiByZW1vdmVJdGVtcyhIaWRkZW4sIG9uUmVtb3ZlKSB7XG4gIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBIaWRkZW4ucmVtb3ZlKHZhbHVlLCBvblJlbW92ZSk7XG4gIH07XG59O1xuXG52YXIgZHJhZ0l0ZW1zID0gZXhwb3J0cy5kcmFnSXRlbXMgPSBmdW5jdGlvbiBkcmFnSXRlbXMoSGlkZGVuLCBvbkRyYWcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChsaXN0LCBsaXN0SXRlbXMpIHtcbiAgICB2YXIgdmFsdWVzID0gb25EcmFnKGxpc3QsIGxpc3RJdGVtcyk7XG4gICAgSGlkZGVuLnVwZGF0ZSh2YWx1ZXMpO1xuICB9O1xufTtcblxudmFyIG9uRHJhZ09iamVjdCA9IGV4cG9ydHMub25EcmFnT2JqZWN0ID0gZnVuY3Rpb24gb25EcmFnT2JqZWN0KGxpc3QsIGxpc3RJdGVtcykge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwobGlzdEl0ZW1zLCBmdW5jdGlvbiAoYWNjLCBsaXN0SXRlbSkge1xuICAgIHZhciB2YWx1ZSA9IHtcbiAgICAgIGlkOiBsaXN0SXRlbS5kYXRhc2V0LmlkLFxuICAgICAgdGl0bGU6IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUxcbiAgICB9O1xuICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICB9LCBbXSk7XG59O1xuXG52YXIgb25EcmFnVGV4dCA9IGV4cG9ydHMub25EcmFnVGV4dCA9IGZ1bmN0aW9uIG9uRHJhZ1RleHQobGlzdCwgbGlzdEl0ZW1zKSB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChsaXN0SXRlbXMsIGZ1bmN0aW9uIChhY2MsIGxpc3RJdGVtKSB7XG4gICAgdmFyIHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgfSwgW10pO1xufTtcblxudmFyIG9uRHJhZ0ltYWdlID0gZXhwb3J0cy5vbkRyYWdJbWFnZSA9IGZ1bmN0aW9uIG9uRHJhZ0ltYWdlKGxpc3QsIGxpc3RJdGVtcykge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwobGlzdEl0ZW1zLCBmdW5jdGlvbiAoYWNjLCBsaXN0SXRlbSkge1xuICAgIHZhciB2YWx1ZSA9IHBhcnNlSW50KGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUwpO1xuICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICB9LCBbXSk7XG59O1xuXG52YXIgb25SZW1vdmVPYmplY3QgPSBleHBvcnRzLm9uUmVtb3ZlT2JqZWN0ID0gZnVuY3Rpb24gb25SZW1vdmVPYmplY3QoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuICAgIHJldHVybiBjdXJyZW50LnRpdGxlICE9PSBuZXdWYWx1ZTtcbiAgfSk7XG59O1xuXG52YXIgb25SZW1vdmVUZXh0ID0gZXhwb3J0cy5vblJlbW92ZVRleHQgPSBmdW5jdGlvbiBvblJlbW92ZVRleHQoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuICAgIHJldHVybiBjdXJyZW50ICE9PSBuZXdWYWx1ZTtcbiAgfSk7XG59O1xuXG52YXIgb25SZW1vdmVJbWFnZSA9IGV4cG9ydHMub25SZW1vdmVJbWFnZSA9IGZ1bmN0aW9uIG9uUmVtb3ZlSW1hZ2UoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuICAgIHJldHVybiBjdXJyZW50ICE9PSBwYXJzZUludChuZXdWYWx1ZSk7XG4gIH0pO1xufTtcblxudmFyIG9uRHJhZ1RhYmxlID0gZXhwb3J0cy5vbkRyYWdUYWJsZSA9IGZ1bmN0aW9uIG9uRHJhZ1RhYmxlKGxpc3QsIGxpc3RJdGVtcykge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwobGlzdEl0ZW1zLCBmdW5jdGlvbiAoYWNjLCBsaXN0SXRlbSkge1xuICAgIHZhciBrZXkgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1rZXknKS5pbm5lckhUTUw7XG4gICAgdmFyIHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3QtdmFsdWUnKS5pbm5lckhUTUw7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoW3sga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9XSk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBvblJlbW92ZVRhYmxlID0gZXhwb3J0cy5vblJlbW92ZVRhYmxlID0gZnVuY3Rpb24gb25SZW1vdmVUYWJsZShjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChjdXJyZW50KSB7XG4gICAgcmV0dXJuIGN1cnJlbnQua2V5ICE9PSBuZXdWYWx1ZTtcbiAgfSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGF1dG9zdWdnZXN0LCBlbmRwb2ludCwgb25TZWxlY3QsIG9uRW1wdHkpIHtcbiAgaWYgKCFhdXRvc3VnZ2VzdCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciB4aHIgPSBmYWxzZTtcblxuICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKDAgPT09IGUudGFyZ2V0LnZhbHVlLmxlbmd0aCAmJiBvbkVtcHR5KSB7XG4gICAgICBvbkVtcHR5KCk7XG4gICAgfVxuXG4gICAgaWYgKDMgPiBlLnRhcmdldC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBhdXRvc3VnZ2VzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgeGhyID0gZ2V0T3B0aW9ucyh4aHIsIHVwZGF0ZU9wdGlvbnMsIGF1dG9zdWdnZXN0LCBlbmRwb2ludCk7XG4gIH0pO1xuICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgdmFyIHZhbHVlID0gb25BdXRvU3VnZ2VzdElucHV0KGUpO1xuXG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICBvblNlbGVjdCh2YWx1ZSwgYXV0b3N1Z2dlc3QpO1xuICAgIH1cbiAgfSk7XG59O1xuXG52YXIgb25BdXRvU3VnZ2VzdElucHV0ID0gZnVuY3Rpb24gb25BdXRvU3VnZ2VzdElucHV0KGUpIHtcbiAgdmFyIGlucHV0ID0gZS50YXJnZXQ7XG4gIHZhciBpbnB1dFZhbHVlID0gaW5wdXQudmFsdWU7XG4gIHZhciBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICB2YXIgbGlzdE9wdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0TmFtZSkuY2hpbGROb2RlcztcblxuICB2YXIgbWF0Y2ggPSBbXS5yZWR1Y2UuY2FsbChsaXN0T3B0aW9ucywgZnVuY3Rpb24gKGFjYywgb3B0aW9uKSB7XG4gICAgaWYgKG9wdGlvbi52YWx1ZSA9PT0gaW5wdXRWYWx1ZSkge1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoe1xuICAgICAgICBpZDogb3B0aW9uLmRhdGFzZXQuaWQsXG4gICAgICAgIHRpdGxlOiBvcHRpb24udmFsdWVcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIDAgPT09IG1hdGNoLmxlbmd0aCA/IGZhbHNlIDogbWF0Y2hbMF07XG59O1xuXG52YXIgZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoeGhyLCBjYWxsYmFjaywgaW5wdXQsIGVuZHBvaW50KSB7XG4gIHZhciBxdWVyeSA9IGJ1aWxkUXVlcnkoaW5wdXQudmFsdWUpO1xuICB2YXIgdXJsID0gZW5kcG9pbnQgKyBxdWVyeTtcblxuICBpZiAoeGhyKSB7XG4gICAgeGhyLmFib3J0KCk7XG4gIH1cblxuICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAgICBjYWxsYmFjayhmYWxzZSwgZXZ0KTtcbiAgfSwgZmFsc2UpO1xuXG4gIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgY2FsbGJhY2soZmFsc2UsIHsgcmVzdWx0czogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgaW5wdXQ6IGlucHV0IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dCAmJiBpc0pTT04oeGhyLnJlc3BvbnNlVGV4dCkpIHtcbiAgICAgICAgY2FsbGJhY2soeyBtZXNzYWdlOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgY2FsbGJhY2soZXZ0LCBmYWxzZSk7XG4gIH0sIGZhbHNlKTtcblxuICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgY2FsbGJhY2sodHJ1ZSwgZmFsc2UpO1xuICB9LCBmYWxzZSk7XG5cbiAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG5cbiAgeGhyLnNlbmQoKTtcblxuICByZXR1cm4geGhyO1xufTtcblxudmFyIHVwZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKGVycm9yLCByZXNwb25zZSkge1xuICBpZiAoZXJyb3IpIHtcbiAgICBpZiAodHJ1ZSA9PT0gZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBlcnJvci5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgfVxuXG4gIGlmIChyZXNwb25zZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShyZXNwb25zZS5yZXN1bHRzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNyZWF0ZU9wdGlvbnMocmVzcG9uc2UucmVzdWx0cywgcmVzcG9uc2UuaW5wdXQpO1xuICB9XG59O1xuXG52YXIgY3JlYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMocmVzdWx0cywgaW5wdXQpIHtcbiAgdmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gIHZhciBkYXRhbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKTtcblxuICB2YXIgbmV3T3B0aW9ucyA9IHJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHJlc3VsdCkge1xuICAgIHZhciBvcHRpb24gPSBjcmVhdGVPcHRpb24ocmVzdWx0KTtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChvcHRpb24pO1xuICB9LCAnJyk7XG5cbiAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICBkYXRhbGlzdC5pbm5lckhUTUwgPSBuZXdPcHRpb25zO1xufTtcblxudmFyIGNyZWF0ZU9wdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbih2YWx1ZSkge1xuICBpZiAodmFsdWUudGl0bGUpIHtcbiAgICByZXR1cm4gJzxvcHRpb24gZGF0YS1pZD0nICsgdmFsdWUuaWQgKyAnIHZhbHVlPVwiJyArIHZhbHVlLnRpdGxlLnJlbmRlcmVkICsgJ1wiPic7XG4gIH1cblxuICBpZiAodmFsdWUubmFtZSkge1xuICAgIHJldHVybiAnPG9wdGlvbiBkYXRhLWlkPScgKyB2YWx1ZS5pZCArICcgdmFsdWU9XCInICsgdmFsdWUubmFtZSArICdcIj4nO1xuICB9XG59O1xuXG52YXIgaXNKU09OID0gZnVuY3Rpb24gaXNKU09OKHN0cikge1xuICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdHJ5IHtcbiAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbnZhciBidWlsZFF1ZXJ5ID0gZnVuY3Rpb24gYnVpbGRRdWVyeSh2YWx1ZSkge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xufTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXG52YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblxudmFyIF90ZXh0TGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfdGV4dExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGV4dExpc3QpO1xuXG52YXIgX2F1dG9zdWdnZXN0TGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG52YXIgX2F1dG9zdWdnZXN0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdExpc3QpO1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfYXV0b0l0ZW0gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblxudmFyIF9hdXRvSXRlbTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvSXRlbSk7XG5cbnZhciBfaW1hZ2VVcGxvYWRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cbnZhciBfaW1hZ2VVcGxvYWRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ltYWdlVXBsb2Fkcyk7XG5cbnZhciBfZGF0ZXBpY2tlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXG52YXIgX2RhdGVwaWNrZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZGF0ZXBpY2tlcik7XG5cbnZhciBfZ2FsbGVyeSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXG52YXIgX2dhbGxlcnkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2FsbGVyeSk7XG5cbnZhciBfdGFibGVMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cbnZhciBfdGFibGVMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYmxlTGlzdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBjcmVhdGVUZXh0SXRlbSA9IGZ1bmN0aW9uIGNyZWF0ZVRleHRJdGVtKHZhbHVlKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIj5cXG4gICAgICAgIDxzcGFuPicgKyB2YWx1ZSArICc8L3NwYW4+XFxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XFxuICAgICAgICA8L3N2Zz5cXG4gICAgPC9saT4nO1xufTtcblxudmFyIGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSA9IGZ1bmN0aW9uIGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSh2YWx1ZSkge1xuICByZXR1cm4gJzxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCIgZGF0YS1pZD1cIicgKyB2YWx1ZS5pZCArICdcIj5cXG4gICAgICAgIDxzcGFuPicgKyB2YWx1ZS50aXRsZSArICc8L3NwYW4+XFxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XFxuICAgICAgICA8L3N2Zz5cXG4gICAgPC9saT4nO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgKDAsIF9pbWFnZVVwbG9hZHMyLmRlZmF1bHQpKCk7XG4gICgwLCBfdGV4dExpc3QyLmRlZmF1bHQpKHtcbiAgICBwYXJlbnQ6ICcudGV4dC1saXN0JyxcbiAgICBidXR0b246ICcudGV4dC1saXN0LWFkZCcsXG4gICAgbGlzdDogJy50ZXh0LWxpc3QtbGlzdCcsXG4gICAgaGlkZGVuOiAnLnRleHQtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlVGV4dEl0ZW1cbiAgfSk7XG5cbiAgKDAsIF9hdXRvc3VnZ2VzdExpc3QyLmRlZmF1bHQpKHtcbiAgICBwYXJlbnQ6ICcuYXV0b3N1Z2dlc3QtbGlzdCcsXG4gICAgaW5wdXQ6ICdhdXRvc3VnZ2VzdC1saXN0LWlucHV0JyxcbiAgICBsaXN0OiAnLmF1dG9zdWdnZXN0LWxpc3QtbGlzdCcsXG4gICAgaGlkZGVuOiAnLmF1dG9zdWdnZXN0LWxpc3QtaGlkZGVuJyxcbiAgICBsaXN0VGVtcGxhdGU6IGNyZWF0ZUF1dG9TdWdnZXN0SXRlbVxuICB9KTtcblxuICAoMCwgX2F1dG9JdGVtMi5kZWZhdWx0KSh7XG4gICAgcGFyZW50OiAnLmF1dG9zdWdnZXN0LXdyYXBwZXInLFxuICAgIGlucHV0OiAnLmF1dG9zdWdnZXN0LWlucHV0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtaGlkZGVuJ1xuICB9KTtcblxuICAoMCwgX2RhdGVwaWNrZXIyLmRlZmF1bHQpKCk7XG4gICgwLCBfZ2FsbGVyeTIuZGVmYXVsdCkoKTtcbiAgKDAsIF90YWJsZUxpc3QyLmRlZmF1bHQpKCk7XG59KTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIGxpc3RGaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICAgIGlmICghbGlzdEZpZWxkcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgW10uZm9yRWFjaC5jYWxsKGxpc3RGaWVsZHMsIGZ1bmN0aW9uIChsaXN0RmllbGQpIHtcbiAgICAgICAgdmFyIHRleHRJbnB1dCA9IGxpc3RGaWVsZC5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPXRleHRdJyk7XG4gICAgICAgIHZhciBhZGRCdXR0b24gPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvcihhcmdzLmJ1dHRvbik7XG4gICAgICAgIHZhciBIaWRkZW4gPSAoMCwgX3NlcmlhbGl6ZWRJbnB1dDIuZGVmYXVsdCkobGlzdEZpZWxkLCBhcmdzLmhpZGRlbik7XG4gICAgICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlVGV4dCk7XG4gICAgICAgIHZhciBkcmFnID0gKDAsIF91dGlsaXRpZXMuZHJhZ0l0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25EcmFnVGV4dCk7XG4gICAgICAgIHZhciBMaXN0ID0gKDAsIF9saXN0Mi5kZWZhdWx0KShsaXN0RmllbGQsIE9iamVjdC5hc3NpZ24oYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmUgfSkpO1xuXG4gICAgICAgIGxpc3RGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoMTMgPT09IGUua2V5Q29kZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBMaXN0LmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIEhpZGRlbi5hZGQodGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIExpc3QuYWRkKHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICBIaWRkZW4uYWRkKHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfc2VyaWFsaXplZElucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VyaWFsaXplZElucHV0KTtcblxudmFyIF91dGlsaXRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBlbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcbnZhciBjcm9zc3ZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbnZhciBjbGFzc2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG52YXIgZG9jID0gZG9jdW1lbnQ7XG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuZnVuY3Rpb24gZHJhZ3VsYSAoaW5pdGlhbENvbnRhaW5lcnMsIG9wdGlvbnMpIHtcbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPT09IDEgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsQ29udGFpbmVycykgPT09IGZhbHNlKSB7XG4gICAgb3B0aW9ucyA9IGluaXRpYWxDb250YWluZXJzO1xuICAgIGluaXRpYWxDb250YWluZXJzID0gW107XG4gIH1cbiAgdmFyIF9taXJyb3I7IC8vIG1pcnJvciBpbWFnZVxuICB2YXIgX3NvdXJjZTsgLy8gc291cmNlIGNvbnRhaW5lclxuICB2YXIgX2l0ZW07IC8vIGl0ZW0gYmVpbmcgZHJhZ2dlZFxuICB2YXIgX29mZnNldFg7IC8vIHJlZmVyZW5jZSB4XG4gIHZhciBfb2Zmc2V0WTsgLy8gcmVmZXJlbmNlIHlcbiAgdmFyIF9tb3ZlWDsgLy8gcmVmZXJlbmNlIG1vdmUgeFxuICB2YXIgX21vdmVZOyAvLyByZWZlcmVuY2UgbW92ZSB5XG4gIHZhciBfaW5pdGlhbFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIHdoZW4gZ3JhYmJlZFxuICB2YXIgX2N1cnJlbnRTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyBub3dcbiAgdmFyIF9jb3B5OyAvLyBpdGVtIHVzZWQgZm9yIGNvcHlpbmdcbiAgdmFyIF9yZW5kZXJUaW1lcjsgLy8gdGltZXIgZm9yIHNldFRpbWVvdXQgcmVuZGVyTWlycm9ySW1hZ2VcbiAgdmFyIF9sYXN0RHJvcFRhcmdldCA9IG51bGw7IC8vIGxhc3QgY29udGFpbmVyIGl0ZW0gd2FzIG92ZXJcbiAgdmFyIF9ncmFiYmVkOyAvLyBob2xkcyBtb3VzZWRvd24gY29udGV4dCB1bnRpbCBmaXJzdCBtb3VzZW1vdmVcblxuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvLm1vdmVzID09PSB2b2lkIDApIHsgby5tb3ZlcyA9IGFsd2F5czsgfVxuICBpZiAoby5hY2NlcHRzID09PSB2b2lkIDApIHsgby5hY2NlcHRzID0gYWx3YXlzOyB9XG4gIGlmIChvLmludmFsaWQgPT09IHZvaWQgMCkgeyBvLmludmFsaWQgPSBpbnZhbGlkVGFyZ2V0OyB9XG4gIGlmIChvLmNvbnRhaW5lcnMgPT09IHZvaWQgMCkgeyBvLmNvbnRhaW5lcnMgPSBpbml0aWFsQ29udGFpbmVycyB8fCBbXTsgfVxuICBpZiAoby5pc0NvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8uaXNDb250YWluZXIgPSBuZXZlcjsgfVxuICBpZiAoby5jb3B5ID09PSB2b2lkIDApIHsgby5jb3B5ID0gZmFsc2U7IH1cbiAgaWYgKG8uY29weVNvcnRTb3VyY2UgPT09IHZvaWQgMCkgeyBvLmNvcHlTb3J0U291cmNlID0gZmFsc2U7IH1cbiAgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmV2ZXJ0T25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJlbW92ZU9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5kaXJlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCc7IH1cbiAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID09PSB2b2lkIDApIHsgby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPSB0cnVlOyB9XG4gIGlmIChvLm1pcnJvckNvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8ubWlycm9yQ29udGFpbmVyID0gZG9jLmJvZHk7IH1cblxuICB2YXIgZHJha2UgPSBlbWl0dGVyKHtcbiAgICBjb250YWluZXJzOiBvLmNvbnRhaW5lcnMsXG4gICAgc3RhcnQ6IG1hbnVhbFN0YXJ0LFxuICAgIGVuZDogZW5kLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgY2FuTW92ZTogY2FuTW92ZSxcbiAgICBkcmFnZ2luZzogZmFsc2VcbiAgfSk7XG5cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdHJ1ZSkge1xuICAgIGRyYWtlLm9uKCdvdmVyJywgc3BpbGxPdmVyKS5vbignb3V0Jywgc3BpbGxPdXQpO1xuICB9XG5cbiAgZXZlbnRzKCk7XG5cbiAgcmV0dXJuIGRyYWtlO1xuXG4gIGZ1bmN0aW9uIGlzQ29udGFpbmVyIChlbCkge1xuICAgIHJldHVybiBkcmFrZS5jb250YWluZXJzLmluZGV4T2YoZWwpICE9PSAtMSB8fCBvLmlzQ29udGFpbmVyKGVsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlZG93bicsIGdyYWIpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2V1cCcsIHJlbGVhc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnR1YWxNb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZW1vdmUnLCBzdGFydEJlY2F1c2VNb3VzZU1vdmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ3NlbGVjdHN0YXJ0JywgcHJldmVudEdyYWJiZWQpOyAvLyBJRThcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ2NsaWNrJywgcHJldmVudEdyYWJiZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSAoKSB7XG4gICAgZXZlbnRzKHRydWUpO1xuICAgIHJlbGVhc2Uoe30pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJldmVudEdyYWJiZWQgKGUpIHtcbiAgICBpZiAoX2dyYWJiZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBncmFiIChlKSB7XG4gICAgX21vdmVYID0gZS5jbGllbnRYO1xuICAgIF9tb3ZlWSA9IGUuY2xpZW50WTtcblxuICAgIHZhciBpZ25vcmUgPSB3aGljaE1vdXNlQnV0dG9uKGUpICE9PSAxIHx8IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XG4gICAgaWYgKGlnbm9yZSkge1xuICAgICAgcmV0dXJuOyAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgaG9uZXN0LXRvLWdvZCBsZWZ0IGNsaWNrcyBhbmQgdG91Y2ggZXZlbnRzXG4gICAgfVxuICAgIHZhciBpdGVtID0gZS50YXJnZXQ7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX2dyYWJiZWQgPSBjb250ZXh0O1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKCk7XG4gICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicpIHtcbiAgICAgIGlmIChpc0lucHV0KGl0ZW0pKSB7IC8vIHNlZSBhbHNvOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjA4XG4gICAgICAgIGl0ZW0uZm9jdXMoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE3NlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTU1XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCAoZSkge1xuICAgIGlmICghX2dyYWJiZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdoaWNoTW91c2VCdXR0b24oZSkgPT09IDApIHtcbiAgICAgIHJlbGVhc2Uoe30pO1xuICAgICAgcmV0dXJuOyAvLyB3aGVuIHRleHQgaXMgc2VsZWN0ZWQgb24gYW4gaW5wdXQgYW5kIHRoZW4gZHJhZ2dlZCwgbW91c2V1cCBkb2Vzbid0IGZpcmUuIHRoaXMgaXMgb3VyIG9ubHkgaG9wZVxuICAgIH1cbiAgICAvLyB0cnV0aHkgY2hlY2sgZml4ZXMgIzIzOSwgZXF1YWxpdHkgZml4ZXMgIzIwN1xuICAgIGlmIChlLmNsaWVudFggIT09IHZvaWQgMCAmJiBlLmNsaWVudFggPT09IF9tb3ZlWCAmJiBlLmNsaWVudFkgIT09IHZvaWQgMCAmJiBlLmNsaWVudFkgPT09IF9tb3ZlWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24pIHtcbiAgICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICBpZiAoaXNJbnB1dChlbGVtZW50QmVoaW5kQ3Vyc29yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyYWJiZWQgPSBfZ3JhYmJlZDsgLy8gY2FsbCB0byBlbmQoKSB1bnNldHMgX2dyYWJiZWRcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHMoKTtcbiAgICBlbmQoKTtcbiAgICBzdGFydChncmFiYmVkKTtcblxuICAgIHZhciBvZmZzZXQgPSBnZXRPZmZzZXQoX2l0ZW0pO1xuICAgIF9vZmZzZXRYID0gZ2V0Q29vcmQoJ3BhZ2VYJywgZSkgLSBvZmZzZXQubGVmdDtcbiAgICBfb2Zmc2V0WSA9IGdldENvb3JkKCdwYWdlWScsIGUpIC0gb2Zmc2V0LnRvcDtcblxuICAgIGNsYXNzZXMuYWRkKF9jb3B5IHx8IF9pdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIHJlbmRlck1pcnJvckltYWdlKCk7XG4gICAgZHJhZyhlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblN0YXJ0IChpdGVtKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nICYmIF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQ29udGFpbmVyKGl0ZW0pKSB7XG4gICAgICByZXR1cm47IC8vIGRvbid0IGRyYWcgY29udGFpbmVyIGl0c2VsZlxuICAgIH1cbiAgICB2YXIgaGFuZGxlID0gaXRlbTtcbiAgICB3aGlsZSAoZ2V0UGFyZW50KGl0ZW0pICYmIGlzQ29udGFpbmVyKGdldFBhcmVudChpdGVtKSkgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaXRlbSA9IGdldFBhcmVudChpdGVtKTsgLy8gZHJhZyB0YXJnZXQgc2hvdWxkIGJlIGEgdG9wIGVsZW1lbnRcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1vdmFibGUgPSBvLm1vdmVzKGl0ZW0sIHNvdXJjZSwgaGFuZGxlLCBuZXh0RWwoaXRlbSkpO1xuICAgIGlmICghbW92YWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpdGVtOiBpdGVtLFxuICAgICAgc291cmNlOiBzb3VyY2VcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuTW92ZSAoaXRlbSkge1xuICAgIHJldHVybiAhIWNhblN0YXJ0KGl0ZW0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFudWFsU3RhcnQgKGl0ZW0pIHtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBzdGFydChjb250ZXh0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydCAoY29udGV4dCkge1xuICAgIGlmIChpc0NvcHkoY29udGV4dC5pdGVtLCBjb250ZXh0LnNvdXJjZSkpIHtcbiAgICAgIF9jb3B5ID0gY29udGV4dC5pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9jb3B5LCBjb250ZXh0Lml0ZW0sICdjb3B5Jyk7XG4gICAgfVxuXG4gICAgX3NvdXJjZSA9IGNvbnRleHQuc291cmNlO1xuICAgIF9pdGVtID0gY29udGV4dC5pdGVtO1xuICAgIF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IG5leHRFbChjb250ZXh0Lml0ZW0pO1xuXG4gICAgZHJha2UuZHJhZ2dpbmcgPSB0cnVlO1xuICAgIGRyYWtlLmVtaXQoJ2RyYWcnLCBfaXRlbSwgX3NvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZhbGlkVGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBlbmQgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICBkcm9wKGl0ZW0sIGdldFBhcmVudChpdGVtKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1bmdyYWIgKCkge1xuICAgIF9ncmFiYmVkID0gZmFsc2U7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVsZWFzZSAoZSkge1xuICAgIHVuZ3JhYigpO1xuXG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICBpZiAoZHJvcFRhcmdldCAmJiAoKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UpIHx8ICghX2NvcHkgfHwgZHJvcFRhcmdldCAhPT0gX3NvdXJjZSkpKSB7XG4gICAgICBkcm9wKGl0ZW0sIGRyb3BUYXJnZXQpO1xuICAgIH0gZWxzZSBpZiAoby5yZW1vdmVPblNwaWxsKSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJvcCAoaXRlbSwgdGFyZ2V0KSB7XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSAmJiB0YXJnZXQgPT09IF9zb3VyY2UpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfaXRlbSk7XG4gICAgfVxuICAgIGlmIChpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0KSkge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCB0YXJnZXQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KF9jb3B5ID8gJ2NhbmNlbCcgOiAncmVtb3ZlJywgaXRlbSwgcGFyZW50LCBfc291cmNlKTtcbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwgKHJldmVydCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldmVydHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHJldmVydCA6IG8ucmV2ZXJ0T25TcGlsbDtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQocGFyZW50KTtcbiAgICBpZiAoaW5pdGlhbCA9PT0gZmFsc2UgJiYgcmV2ZXJ0cykge1xuICAgICAgaWYgKF9jb3B5KSB7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2NvcHkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfc291cmNlLmluc2VydEJlZm9yZShpdGVtLCBfaW5pdGlhbFNpYmxpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5pdGlhbCB8fCByZXZlcnRzKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW51cCAoKSB7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB1bmdyYWIoKTtcbiAgICByZW1vdmVNaXJyb3JJbWFnZSgpO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBjbGFzc2VzLnJtKGl0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgfVxuICAgIGlmIChfcmVuZGVyVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChfcmVuZGVyVGltZXIpO1xuICAgIH1cbiAgICBkcmFrZS5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIGlmIChfbGFzdERyb3BUYXJnZXQpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ291dCcsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoJ2RyYWdlbmQnLCBpdGVtKTtcbiAgICBfc291cmNlID0gX2l0ZW0gPSBfY29weSA9IF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IF9yZW5kZXJUaW1lciA9IF9sYXN0RHJvcFRhcmdldCA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBpc0luaXRpYWxQbGFjZW1lbnQgKHRhcmdldCwgcykge1xuICAgIHZhciBzaWJsaW5nO1xuICAgIGlmIChzICE9PSB2b2lkIDApIHtcbiAgICAgIHNpYmxpbmcgPSBzO1xuICAgIH0gZWxzZSBpZiAoX21pcnJvcikge1xuICAgICAgc2libGluZyA9IF9jdXJyZW50U2libGluZztcbiAgICB9IGVsc2Uge1xuICAgICAgc2libGluZyA9IG5leHRFbChfY29weSB8fCBfaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQgPT09IF9zb3VyY2UgJiYgc2libGluZyA9PT0gX2luaXRpYWxTaWJsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZERyb3BUYXJnZXQgKGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZWxlbWVudEJlaGluZEN1cnNvcjtcbiAgICB3aGlsZSAodGFyZ2V0ICYmICFhY2NlcHRlZCgpKSB7XG4gICAgICB0YXJnZXQgPSBnZXRQYXJlbnQodGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcblxuICAgIGZ1bmN0aW9uIGFjY2VwdGVkICgpIHtcbiAgICAgIHZhciBkcm9wcGFibGUgPSBpc0NvbnRhaW5lcih0YXJnZXQpO1xuICAgICAgaWYgKGRyb3BwYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQodGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICAgIHZhciByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UodGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0LCByZWZlcmVuY2UpO1xuICAgICAgaWYgKGluaXRpYWwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBkcm9wIGl0IHJpZ2h0IGJhY2sgd2hlcmUgaXQgd2FzXG4gICAgICB9XG4gICAgICByZXR1cm4gby5hY2NlcHRzKF9pdGVtLCB0YXJnZXQsIF9zb3VyY2UsIHJlZmVyZW5jZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhZyAoZSkge1xuICAgIGlmICghX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciB4ID0gY2xpZW50WCAtIF9vZmZzZXRYO1xuICAgIHZhciB5ID0gY2xpZW50WSAtIF9vZmZzZXRZO1xuXG4gICAgX21pcnJvci5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS50b3AgPSB5ICsgJ3B4JztcblxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgY2hhbmdlZCA9IGRyb3BUYXJnZXQgIT09IG51bGwgJiYgZHJvcFRhcmdldCAhPT0gX2xhc3REcm9wVGFyZ2V0O1xuICAgIGlmIChjaGFuZ2VkIHx8IGRyb3BUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgIG91dCgpO1xuICAgICAgX2xhc3REcm9wVGFyZ2V0ID0gZHJvcFRhcmdldDtcbiAgICAgIG92ZXIoKTtcbiAgICB9XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoZHJvcFRhcmdldCA9PT0gX3NvdXJjZSAmJiBfY29weSAmJiAhby5jb3B5U29ydFNvdXJjZSkge1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWZlcmVuY2U7XG4gICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKGRyb3BUYXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgIGlmIChpbW1lZGlhdGUgIT09IG51bGwpIHtcbiAgICAgIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZShkcm9wVGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIH0gZWxzZSBpZiAoby5yZXZlcnRPblNwaWxsID09PSB0cnVlICYmICFfY29weSkge1xuICAgICAgcmVmZXJlbmNlID0gX2luaXRpYWxTaWJsaW5nO1xuICAgICAgZHJvcFRhcmdldCA9IF9zb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChfY29weSAmJiBwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAocmVmZXJlbmNlID09PSBudWxsICYmIGNoYW5nZWQpIHx8XG4gICAgICByZWZlcmVuY2UgIT09IGl0ZW0gJiZcbiAgICAgIHJlZmVyZW5jZSAhPT0gbmV4dEVsKGl0ZW0pXG4gICAgKSB7XG4gICAgICBfY3VycmVudFNpYmxpbmcgPSByZWZlcmVuY2U7XG4gICAgICBkcm9wVGFyZ2V0Lmluc2VydEJlZm9yZShpdGVtLCByZWZlcmVuY2UpO1xuICAgICAgZHJha2UuZW1pdCgnc2hhZG93JywgaXRlbSwgZHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVkICh0eXBlKSB7IGRyYWtlLmVtaXQodHlwZSwgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTsgfVxuICAgIGZ1bmN0aW9uIG92ZXIgKCkgeyBpZiAoY2hhbmdlZCkgeyBtb3ZlZCgnb3ZlcicpOyB9IH1cbiAgICBmdW5jdGlvbiBvdXQgKCkgeyBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7IG1vdmVkKCdvdXQnKTsgfSB9XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE92ZXIgKGVsKSB7XG4gICAgY2xhc3Nlcy5ybShlbCwgJ2d1LWhpZGUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3V0IChlbCkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZykgeyBjbGFzc2VzLmFkZChlbCwgJ2d1LWhpZGUnKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWN0ID0gX2l0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgX21pcnJvciA9IF9pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICBfbWlycm9yLnN0eWxlLndpZHRoID0gZ2V0UmVjdFdpZHRoKHJlY3QpICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLmhlaWdodCA9IGdldFJlY3RIZWlnaHQocmVjdCkgKyAncHgnO1xuICAgIGNsYXNzZXMucm0oX21pcnJvciwgJ2d1LXRyYW5zaXQnKTtcbiAgICBjbGFzc2VzLmFkZChfbWlycm9yLCAnZ3UtbWlycm9yJyk7XG4gICAgby5taXJyb3JDb250YWluZXIuYXBwZW5kQ2hpbGQoX21pcnJvcik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ2FkZCcsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICBjbGFzc2VzLmFkZChvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9taXJyb3IsIF9pdGVtLCAnbWlycm9yJyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIGNsYXNzZXMucm0oby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdyZW1vdmUnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgICBnZXRQYXJlbnQoX21pcnJvcikucmVtb3ZlQ2hpbGQoX21pcnJvcik7XG4gICAgICBfbWlycm9yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbW1lZGlhdGVDaGlsZCAoZHJvcFRhcmdldCwgdGFyZ2V0KSB7XG4gICAgdmFyIGltbWVkaWF0ZSA9IHRhcmdldDtcbiAgICB3aGlsZSAoaW1tZWRpYXRlICE9PSBkcm9wVGFyZ2V0ICYmIGdldFBhcmVudChpbW1lZGlhdGUpICE9PSBkcm9wVGFyZ2V0KSB7XG4gICAgICBpbW1lZGlhdGUgPSBnZXRQYXJlbnQoaW1tZWRpYXRlKTtcbiAgICB9XG4gICAgaWYgKGltbWVkaWF0ZSA9PT0gZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGltbWVkaWF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJlZmVyZW5jZSAoZHJvcFRhcmdldCwgdGFyZ2V0LCB4LCB5KSB7XG4gICAgdmFyIGhvcml6b250YWwgPSBvLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciByZWZlcmVuY2UgPSB0YXJnZXQgIT09IGRyb3BUYXJnZXQgPyBpbnNpZGUoKSA6IG91dHNpZGUoKTtcbiAgICByZXR1cm4gcmVmZXJlbmNlO1xuXG4gICAgZnVuY3Rpb24gb3V0c2lkZSAoKSB7IC8vIHNsb3dlciwgYnV0IGFibGUgdG8gZmlndXJlIG91dCBhbnkgcG9zaXRpb25cbiAgICAgIHZhciBsZW4gPSBkcm9wVGFyZ2V0LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGVsO1xuICAgICAgdmFyIHJlY3Q7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZWwgPSBkcm9wVGFyZ2V0LmNoaWxkcmVuW2ldO1xuICAgICAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChob3Jpem9udGFsICYmIChyZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMikgPiB4KSB7IHJldHVybiBlbDsgfVxuICAgICAgICBpZiAoIWhvcml6b250YWwgJiYgKHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyKSA+IHkpIHsgcmV0dXJuIGVsOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnNpZGUgKCkgeyAvLyBmYXN0ZXIsIGJ1dCBvbmx5IGF2YWlsYWJsZSBpZiBkcm9wcGVkIGluc2lkZSBhIGNoaWxkIGVsZW1lbnRcbiAgICAgIHZhciByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgaWYgKGhvcml6b250YWwpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoeCA+IHJlY3QubGVmdCArIGdldFJlY3RXaWR0aChyZWN0KSAvIDIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmUoeSA+IHJlY3QudG9wICsgZ2V0UmVjdEhlaWdodChyZWN0KSAvIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUgKGFmdGVyKSB7XG4gICAgICByZXR1cm4gYWZ0ZXIgPyBuZXh0RWwodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0NvcHkgKGl0ZW0sIGNvbnRhaW5lcikge1xuICAgIHJldHVybiB0eXBlb2Ygby5jb3B5ID09PSAnYm9vbGVhbicgPyBvLmNvcHkgOiBvLmNvcHkoaXRlbSwgY29udGFpbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b3VjaHkgKGVsLCBvcCwgdHlwZSwgZm4pIHtcbiAgdmFyIHRvdWNoID0ge1xuICAgIG1vdXNldXA6ICd0b3VjaGVuZCcsXG4gICAgbW91c2Vkb3duOiAndG91Y2hzdGFydCcsXG4gICAgbW91c2Vtb3ZlOiAndG91Y2htb3ZlJ1xuICB9O1xuICB2YXIgcG9pbnRlcnMgPSB7XG4gICAgbW91c2V1cDogJ3BvaW50ZXJ1cCcsXG4gICAgbW91c2Vkb3duOiAncG9pbnRlcmRvd24nLFxuICAgIG1vdXNlbW92ZTogJ3BvaW50ZXJtb3ZlJ1xuICB9O1xuICB2YXIgbWljcm9zb2Z0ID0ge1xuICAgIG1vdXNldXA6ICdNU1BvaW50ZXJVcCcsXG4gICAgbW91c2Vkb3duOiAnTVNQb2ludGVyRG93bicsXG4gICAgbW91c2Vtb3ZlOiAnTVNQb2ludGVyTW92ZSdcbiAgfTtcbiAgaWYgKGdsb2JhbC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBwb2ludGVyc1t0eXBlXSwgZm4pO1xuICB9IGVsc2UgaWYgKGdsb2JhbC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIG1pY3Jvc29mdFt0eXBlXSwgZm4pO1xuICB9IGVsc2Uge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHRvdWNoW3R5cGVdLCBmbik7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdHlwZSwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdoaWNoTW91c2VCdXR0b24gKGUpIHtcbiAgaWYgKGUudG91Y2hlcyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLnRvdWNoZXMubGVuZ3RoOyB9XG4gIGlmIChlLndoaWNoICE9PSB2b2lkIDAgJiYgZS53aGljaCAhPT0gMCkgeyByZXR1cm4gZS53aGljaDsgfSAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzI2MVxuICBpZiAoZS5idXR0b25zICE9PSB2b2lkIDApIHsgcmV0dXJuIGUuYnV0dG9uczsgfVxuICB2YXIgYnV0dG9uID0gZS5idXR0b247XG4gIGlmIChidXR0b24gIT09IHZvaWQgMCkgeyAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi85OWU4ZmYxYmFhN2FlMzQxZTk0YmI4OWMzZTg0NTcwYzdjM2FkOWVhL3NyYy9ldmVudC5qcyNMNTczLUw1NzVcbiAgICByZXR1cm4gYnV0dG9uICYgMSA/IDEgOiBidXR0b24gJiAyID8gMyA6IChidXR0b24gJiA0ID8gMiA6IDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcbiAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiByZWN0LmxlZnQgKyBnZXRTY3JvbGwoJ3Njcm9sbExlZnQnLCAncGFnZVhPZmZzZXQnKSxcbiAgICB0b3A6IHJlY3QudG9wICsgZ2V0U2Nyb2xsKCdzY3JvbGxUb3AnLCAncGFnZVlPZmZzZXQnKVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGwgKHNjcm9sbFByb3AsIG9mZnNldFByb3ApIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxbb2Zmc2V0UHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbFtvZmZzZXRQcm9wXTtcbiAgfVxuICBpZiAoZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgIHJldHVybiBkb2N1bWVudEVsZW1lbnRbc2Nyb2xsUHJvcF07XG4gIH1cbiAgcmV0dXJuIGRvYy5ib2R5W3Njcm9sbFByb3BdO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50QmVoaW5kUG9pbnQgKHBvaW50LCB4LCB5KSB7XG4gIHZhciBwID0gcG9pbnQgfHwge307XG4gIHZhciBzdGF0ZSA9IHAuY2xhc3NOYW1lO1xuICB2YXIgZWw7XG4gIHAuY2xhc3NOYW1lICs9ICcgZ3UtaGlkZSc7XG4gIGVsID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7XG4gIHAuY2xhc3NOYW1lID0gc3RhdGU7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gbmV2ZXIgKCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGFsd2F5cyAoKSB7IHJldHVybiB0cnVlOyB9XG5mdW5jdGlvbiBnZXRSZWN0V2lkdGggKHJlY3QpIHsgcmV0dXJuIHJlY3Qud2lkdGggfHwgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpOyB9XG5mdW5jdGlvbiBnZXRSZWN0SGVpZ2h0IChyZWN0KSB7IHJldHVybiByZWN0LmhlaWdodCB8fCAocmVjdC5ib3R0b20gLSByZWN0LnRvcCk7IH1cbmZ1bmN0aW9uIGdldFBhcmVudCAoZWwpIHsgcmV0dXJuIGVsLnBhcmVudE5vZGUgPT09IGRvYyA/IG51bGwgOiBlbC5wYXJlbnROb2RlOyB9XG5mdW5jdGlvbiBpc0lucHV0IChlbCkgeyByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnIHx8IGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnIHx8IGlzRWRpdGFibGUoZWwpOyB9XG5mdW5jdGlvbiBpc0VkaXRhYmxlIChlbCkge1xuICBpZiAoIWVsKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBwYXJlbnRzIHdlcmUgZWRpdGFibGVcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ2ZhbHNlJykgeyByZXR1cm4gZmFsc2U7IH0gLy8gc3RvcCB0aGUgbG9va3VwXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykgeyByZXR1cm4gdHJ1ZTsgfSAvLyBmb3VuZCBhIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50IGluIHRoZSBjaGFpblxuICByZXR1cm4gaXNFZGl0YWJsZShnZXRQYXJlbnQoZWwpKTsgLy8gY29udGVudEVkaXRhYmxlIGlzIHNldCB0byAnaW5oZXJpdCdcbn1cblxuZnVuY3Rpb24gbmV4dEVsIChlbCkge1xuICByZXR1cm4gZWwubmV4dEVsZW1lbnRTaWJsaW5nIHx8IG1hbnVhbGx5KCk7XG4gIGZ1bmN0aW9uIG1hbnVhbGx5ICgpIHtcbiAgICB2YXIgc2libGluZyA9IGVsO1xuICAgIGRvIHtcbiAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgIH0gd2hpbGUgKHNpYmxpbmcgJiYgc2libGluZy5ub2RlVHlwZSAhPT0gMSk7XG4gICAgcmV0dXJuIHNpYmxpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRIb3N0IChlKSB7XG4gIC8vIG9uIHRvdWNoZW5kIGV2ZW50LCB3ZSBoYXZlIHRvIHVzZSBgZS5jaGFuZ2VkVG91Y2hlc2BcbiAgLy8gc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzE5MjU2My90b3VjaGVuZC1ldmVudC1wcm9wZXJ0aWVzXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMzRcbiAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlc1swXTtcbiAgfVxuICBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBnZXRDb29yZCAoY29vcmQsIGUpIHtcbiAgdmFyIGhvc3QgPSBnZXRFdmVudEhvc3QoZSk7XG4gIHZhciBtaXNzTWFwID0ge1xuICAgIHBhZ2VYOiAnY2xpZW50WCcsIC8vIElFOFxuICAgIHBhZ2VZOiAnY2xpZW50WScgLy8gSUU4XG4gIH07XG4gIGlmIChjb29yZCBpbiBtaXNzTWFwICYmICEoY29vcmQgaW4gaG9zdCkgJiYgbWlzc01hcFtjb29yZF0gaW4gaG9zdCkge1xuICAgIGNvb3JkID0gbWlzc01hcFtjb29yZF07XG4gIH1cbiAgcmV0dXJuIGhvc3RbY29vcmRdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYWd1bGE7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBhdG9hID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG52YXIgZGVib3VuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbWl0dGVyICh0aGluZywgb3B0aW9ucykge1xuICB2YXIgb3B0cyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBldnQgPSB7fTtcbiAgaWYgKHRoaW5nID09PSB1bmRlZmluZWQpIHsgdGhpbmcgPSB7fTsgfVxuICB0aGluZy5vbiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIGlmICghZXZ0W3R5cGVdKSB7XG4gICAgICBldnRbdHlwZV0gPSBbZm5dO1xuICAgIH0gZWxzZSB7XG4gICAgICBldnRbdHlwZV0ucHVzaChmbik7XG4gICAgfVxuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub25jZSA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIGZuLl9vbmNlID0gdHJ1ZTsgLy8gdGhpbmcub2ZmKGZuKSBzdGlsbCB3b3JrcyFcbiAgICB0aGluZy5vbih0eXBlLCBmbik7XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vZmYgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgaWYgKGMgPT09IDEpIHtcbiAgICAgIGRlbGV0ZSBldnRbdHlwZV07XG4gICAgfSBlbHNlIGlmIChjID09PSAwKSB7XG4gICAgICBldnQgPSB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGV0ID0gZXZ0W3R5cGVdO1xuICAgICAgaWYgKCFldCkgeyByZXR1cm4gdGhpbmc7IH1cbiAgICAgIGV0LnNwbGljZShldC5pbmRleE9mKGZuKSwgMSk7XG4gICAgfVxuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcuZW1pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdGhpbmcuZW1pdHRlclNuYXBzaG90KGFyZ3Muc2hpZnQoKSkuYXBwbHkodGhpcywgYXJncyk7XG4gIH07XG4gIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgdmFyIGV0ID0gKGV2dFt0eXBlXSB8fCBbXSkuc2xpY2UoMCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgICAgdmFyIGN0eCA9IHRoaXMgfHwgdGhpbmc7XG4gICAgICBpZiAodHlwZSA9PT0gJ2Vycm9yJyAmJiBvcHRzLnRocm93cyAhPT0gZmFsc2UgJiYgIWV0Lmxlbmd0aCkgeyB0aHJvdyBhcmdzLmxlbmd0aCA9PT0gMSA/IGFyZ3NbMF0gOiBhcmdzOyB9XG4gICAgICBldC5mb3JFYWNoKGZ1bmN0aW9uIGVtaXR0ZXIgKGxpc3Rlbikge1xuICAgICAgICBpZiAob3B0cy5hc3luYykgeyBkZWJvdW5jZShsaXN0ZW4sIGFyZ3MsIGN0eCk7IH0gZWxzZSB7IGxpc3Rlbi5hcHBseShjdHgsIGFyZ3MpOyB9XG4gICAgICAgIGlmIChsaXN0ZW4uX29uY2UpIHsgdGhpbmcub2ZmKHR5cGUsIGxpc3Rlbik7IH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHRoaW5nO1xuICAgIH07XG4gIH07XG4gIHJldHVybiB0aGluZztcbn07XG5cblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGF0b2EgKGEsIG4pIHsgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsIG4pOyB9XG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgdGlja3kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZSAoZm4sIGFyZ3MsIGN0eCkge1xuICBpZiAoIWZuKSB7IHJldHVybjsgfVxuICB0aWNreShmdW5jdGlvbiBydW4gKCkge1xuICAgIGZuLmFwcGx5KGN0eCB8fCBudWxsLCBhcmdzIHx8IFtdKTtcbiAgfSk7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHNldEltbWVkaWF0ZSkge3ZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XG5pZiAoc2kpIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9O1xufSBlbHNlIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRUaW1lb3V0KGZuLCAwKTsgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aWNrO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTMpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge3ZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxuX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWlkYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7KGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxNSkpKVxuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIGN1c3RvbUV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG52YXIgZXZlbnRtYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xudmFyIE5hdGl2ZUN1c3RvbUV2ZW50ID0gZ2xvYmFsLkN1c3RvbUV2ZW50O1xuXG5mdW5jdGlvbiB1c2VOYXRpdmUgKCkge1xuICB0cnkge1xuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XG4gICAgcmV0dXJuICAnY2F0JyA9PT0gcC50eXBlICYmICdiYXInID09PSBwLmRldGFpbC5mb287XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ3Jvc3MtYnJvd3NlciBgQ3VzdG9tRXZlbnRgIGNvbnN0cnVjdG9yLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC5DdXN0b21FdmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxuXG4vLyBJRSA+PSA5XG4nZnVuY3Rpb24nID09PSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICB9IGVsc2Uge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcbiAgfVxuICByZXR1cm4gZTtcbn0gOlxuXG4vLyBJRSA8PSA4XG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgZS50eXBlID0gdHlwZTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuYnViYmxlcyA9IEJvb2xlYW4ocGFyYW1zLmJ1YmJsZXMpO1xuICAgIGUuY2FuY2VsYWJsZSA9IEJvb2xlYW4ocGFyYW1zLmNhbmNlbGFibGUpO1xuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgfSBlbHNlIHtcbiAgICBlLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICBlLmRldGFpbCA9IHZvaWQgMDtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgZXZlbnRtYXAgPSBbXTtcbnZhciBldmVudG5hbWUgPSAnJztcbnZhciByb24gPSAvXm9uLztcblxuZm9yIChldmVudG5hbWUgaW4gZ2xvYmFsKSB7XG4gIGlmIChyb24udGVzdChldmVudG5hbWUpKSB7XG4gICAgZXZlbnRtYXAucHVzaChldmVudG5hbWUuc2xpY2UoMikpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXZlbnRtYXA7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgY2FjaGUgPSB7fTtcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG52YXIgZW5kID0gJyg/OlxcXFxzfCQpJztcblxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xuICB2YXIgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBjYWNoZWQgPSBuZXcgUmVnRXhwKHN0YXJ0ICsgY2xhc3NOYW1lICsgZW5kLCAnZycpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIHZhciBjdXJyZW50ID0gZWwuY2xhc3NOYW1lO1xuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9IGVsc2UgaWYgKCFsb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJtQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobG9va3VwQ2xhc3MoY2xhc3NOYW1lKSwgJyAnKS50cmltKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZENsYXNzLFxuICBybTogcm1DbGFzc1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcblxuICAgIHZhciBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICAgIGlmICghZmllbGRzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBmdW5jdGlvbiAoYXV0b0xpc3QpIHtcbiAgICAgICAgdmFyIEhpZGRlbiA9ICgwLCBfc2VyaWFsaXplZElucHV0Mi5kZWZhdWx0KShhdXRvTGlzdCwgYXJncy5oaWRkZW4pO1xuICAgICAgICB2YXIgcmVtb3ZlID0gKDAsIF91dGlsaXRpZXMucmVtb3ZlSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vblJlbW92ZU9iamVjdCk7XG4gICAgICAgIHZhciBkcmFnID0gKDAsIF91dGlsaXRpZXMuZHJhZ0l0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25EcmFnT2JqZWN0KTtcbiAgICAgICAgdmFyIExpc3QgPSAoMCwgX2xpc3QyLmRlZmF1bHQpKGF1dG9MaXN0LCBPYmplY3QuYXNzaWduKGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlIH0pKTtcbiAgICAgICAgdmFyIGlucHV0ID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvcignLmF1dG9zdWdnZXN0LWxpc3QtaW5wdXQnKTtcbiAgICAgICAgdmFyIGVsTmFtZSA9ICdhdXRvTGlzdF8nICsgaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgICAgIHZhciBlbmRwb2ludCA9IE9NR0ZpZWxkcy5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyB3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG5cbiAgICAgICAgKDAsIF9hdXRvc3VnZ2VzdDIuZGVmYXVsdCkoaW5wdXQsIGVuZHBvaW50LCBmdW5jdGlvbiAodmFsdWUsIGlucHV0KSB7XG4gICAgICAgICAgICBMaXN0LmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX2F1dG9zdWdnZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9hdXRvc3VnZ2VzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdCk7XG5cbnZhciBfc2VyaWFsaXplZElucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VyaWFsaXplZElucHV0KTtcblxudmFyIF91dGlsaXRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gIHZhciBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICBpZiAoIWZpZWxkcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGZ1bmN0aW9uIChhdXRvSXRlbSkge1xuICAgIHZhciBoaWRkZW4gPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKGFyZ3MuaGlkZGVuKTtcbiAgICB2YXIgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtaW5wdXQnKTtcbiAgICB2YXIgZWxOYW1lID0gJ2F1dG9MaXN0XycgKyBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICB2YXIgZW5kcG9pbnQgPSB2b2lkIDA7XG5cbiAgICBpZiAod2luZG93W2VsTmFtZV0ubmFtZXNwYWNlKSB7XG4gICAgICBlbmRwb2ludCA9IE9NR0ZpZWxkcy5iYXNlVVJMICsgJy93cC1qc29uLycgKyB3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2UgKyAnLycgKyB3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVuZHBvaW50ID0gT01HRmllbGRzLmJhc2VVUkwgKyAnL3dwLWpzb24vd3AvdjIvJyArIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlICsgJz9zZWFyY2g9JztcbiAgICB9XG5cbiAgICAoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShpbnB1dCwgZW5kcG9pbnQsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXQpIHtcbiAgICAgIGhpZGRlbi52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICBoaWRkZW4udmFsdWUgPSAnJztcbiAgICB9KTtcbiAgfSk7XG59O1xuXG52YXIgX2F1dG9zdWdnZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9hdXRvc3VnZ2VzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMjIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGltYWdlVXBsb2FkcztcbmZ1bmN0aW9uIGltYWdlVXBsb2FkcygpIHtcblx0dmFyIGZlYXR1cmVkSW1hZ2VXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1c3RvbS1tZWRpYS11cGxvYWQnKTtcblxuXHRpZiAoZmVhdHVyZWRJbWFnZVdyYXAubGVuZ3RoID09PSAwKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0W10ubWFwLmNhbGwoZmVhdHVyZWRJbWFnZVdyYXAsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0Ly8gdmFyIEltYWdlV3JhcElkID0gaXRlbS5hdHRyaWJ1dGUuaWQ7XG5cdFx0dmFyIHJlbW92ZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVtb3ZlLWltYWdlJyk7XG5cdFx0dmFyIHJlcGxhY2VJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnJlcGxhY2UtaW1hZ2UnKTtcblx0XHR2YXIgc2V0SW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5zZXQtaW1hZ2UnKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRhZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignYS5yZXBsYWNlLWltYWdlIGltZycpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlSUQgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZVRpdGxlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcudGh1bWJuYWlsLXRpdGxlJyk7XG5cdFx0dmFyIG1lZGlhRnJhbWUgPSB3cC5tZWRpYSh7XG5cdFx0XHR0aXRsZTogJ0Nob29zZSBNZWRpYScsXG5cdFx0XHRidXR0b246IHtcblx0XHRcdFx0dGV4dDogJ1VzZSBTZWxlY3RlZCBNZWRpYSdcblx0XHRcdH0sXG5cdFx0XHRtdWx0aXBsZTogZmFsc2Vcblx0XHR9KTtcblxuXHRcdG1lZGlhRnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBhdHRhY2htZW50ID0gbWVkaWFGcmFtZS5zdGF0ZSgpLmdldCgnc2VsZWN0aW9uJykuZmlyc3QoKS50b0pTT04oKTtcblxuXHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtaW1hZ2UnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VJRC52YWx1ZSA9IGF0dGFjaG1lbnQuaWQ7XG5cdFx0XHRpZiAoYXR0YWNobWVudC5oYXNPd25Qcm9wZXJ0eSgnc2l6ZXMnKSkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYXR0YWNobWVudC5zaXplcy50aHVtYm5haWwudXJsKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50Lmljb24pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZmVhdHVyZWRJbWFnZVRpdGxlKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSBhdHRhY2htZW50LmZpbGVuYW1lO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmVtb3ZlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICcnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VJRC52YWx1ZSA9ICcnO1xuXG5cdFx0XHRpZiAoZmVhdHVyZWRJbWFnZVRpdGxlKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUaXRsZS5pbm5lckhUTUwgPSAnJztcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJlcGxhY2VJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXG5cdFx0c2V0SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtZWRpYUZyYW1lLm9wZW4oKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRhdGVwaWNrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGVwaWNrZXItaW5wdXQnKTtcblxuICBpZiAoIWRhdGVwaWNrZXJzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGRhdGVwaWNrZXJzLCBmdW5jdGlvbiAoZGF0ZUZpZWxkKSB7XG4gICAgdmFyIGN1cnJlbnREYXRlID0gZGF0ZUZpZWxkLmRhdGFzZXQuZGF0ZTtcblxuICAgICgwLCBfZmxhdHBpY2tyMi5kZWZhdWx0KShkYXRlRmllbGQsIHtcbiAgICAgIGFsdElucHV0OiB0cnVlLFxuICAgICAgYWx0Rm9ybWF0OiAnRiBqLCBZJyxcbiAgICAgIGRhdGVGb3JtYXQ6ICdVJyxcbiAgICAgIGRlZmF1bHREYXRlOiAhY3VycmVudERhdGUgPyAnJyA6IGN1cnJlbnREYXRlXG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIF9mbGF0cGlja3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblxudmFyIF9mbGF0cGlja3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZmxhdHBpY2tyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBmbGF0cGlja3IgdjQuNC4zLCBAbGljZW5zZSBNSVQgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgIHRydWUgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLmZsYXRwaWNrciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYWQgPSBmdW5jdGlvbiBwYWQobnVtYmVyKSB7XG4gICAgICByZXR1cm4gKFwiMFwiICsgbnVtYmVyKS5zbGljZSgtMik7XG4gICAgfTtcbiAgICB2YXIgaW50ID0gZnVuY3Rpb24gaW50KGJvb2wpIHtcbiAgICAgIHJldHVybiBib29sID09PSB0cnVlID8gMSA6IDA7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICAgIGlmIChpbW1lZGlhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBpbW1lZGlhdGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB0aW1lb3V0ICE9PSBudWxsICYmIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiBhcnJheWlmeShvYmopIHtcbiAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xuICAgIH07XG5cbiAgICB2YXIgZG9fbm90aGluZyA9IGZ1bmN0aW9uIGRvX25vdGhpbmcoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB2YXIgbW9udGhUb1N0ciA9IGZ1bmN0aW9uIG1vbnRoVG9TdHIobW9udGhOdW1iZXIsIHNob3J0aGFuZCwgbG9jYWxlKSB7XG4gICAgICByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07XG4gICAgfTtcbiAgICB2YXIgcmV2Rm9ybWF0ID0ge1xuICAgICAgRDogZG9fbm90aGluZyxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZU9iaiwgbW9udGhOYW1lLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLmxvbmdoYW5kLmluZGV4T2YobW9udGhOYW1lKSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSjogZnVuY3Rpb24gSihkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlT2JqLCBhbVBNLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhkYXRlT2JqLmdldEhvdXJzKCkgJSAxMiArIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sIFwiaVwiKS50ZXN0KGFtUE0pKSk7XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTShkYXRlT2JqLCBzaG9ydE1vbnRoLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLnNob3J0aGFuZC5pbmRleE9mKHNob3J0TW9udGgpKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIFU6IGZ1bmN0aW9uIFUoXywgdW5peFNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlRmxvYXQodW5peFNlY29uZHMpICogMTAwMCk7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlT2JqLCB3ZWVrTnVtKSB7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9LFxuICAgICAgWjogZnVuY3Rpb24gWihfLCBJU09EYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShJU09EYXRlKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbiBkKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICAgIH0sXG4gICAgICBoOiBmdW5jdGlvbiBoKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBpOiBmdW5jdGlvbiBpKGRhdGVPYmosIG1pbnV0ZXMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNaW51dGVzKHBhcnNlRmxvYXQobWludXRlcykpO1xuICAgICAgfSxcbiAgICAgIGo6IGZ1bmN0aW9uIGooZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgICAgfSxcbiAgICAgIGw6IGRvX25vdGhpbmcsXG4gICAgICBtOiBmdW5jdGlvbiBtKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBzOiBmdW5jdGlvbiBzKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIHc6IGRvX25vdGhpbmcsXG4gICAgICB5OiBmdW5jdGlvbiB5KGRhdGVPYmosIHllYXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRGdWxsWWVhcigyMDAwICsgcGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9rZW5SZWdleCA9IHtcbiAgICAgIEQ6IFwiKFxcXFx3KylcIixcbiAgICAgIEY6IFwiKFxcXFx3KylcIixcbiAgICAgIEc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBIOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICAgIEs6IFwiXCIsXG4gICAgICBNOiBcIihcXFxcdyspXCIsXG4gICAgICBTOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgVTogXCIoLispXCIsXG4gICAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgWTogXCIoXFxcXGR7NH0pXCIsXG4gICAgICBaOiBcIiguKylcIixcbiAgICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBoOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgaTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBsOiBcIihcXFxcdyspXCIsXG4gICAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgbjogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIHM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgeTogXCIoXFxcXGR7Mn0pXCJcbiAgICB9O1xuICAgIHZhciBmb3JtYXRzID0ge1xuICAgICAgWjogZnVuY3Rpb24gWihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9LFxuICAgICAgRDogZnVuY3Rpb24gRChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgICAgfSxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGZvcm1hdHMubihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIC0gMSwgZmFsc2UsIGxvY2FsZSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhZChmb3JtYXRzLmgoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTtcbiAgICAgIH0sXG4gICAgICBKOiBmdW5jdGlvbiBKKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm9yZGluYWwgIT09IHVuZGVmaW5lZCA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpIDogZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldO1xuICAgICAgfSxcbiAgICAgIE06IGZ1bmN0aW9uIE0oZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGRhdGUuZ2V0TW9udGgoKSwgdHJ1ZSwgbG9jYWxlKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24gVShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9LFxuICAgICAgZDogZnVuY3Rpb24gZChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uIGgoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpICUgMTIgPyBkYXRlLmdldEhvdXJzKCkgJSAxMiA6IDEyO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgIH0sXG4gICAgICBqOiBmdW5jdGlvbiBqKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIGw6IGZ1bmN0aW9uIGwoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgICB9LFxuICAgICAgbTogZnVuY3Rpb24gbShkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRNb250aCgpICsgMSk7XG4gICAgICB9LFxuICAgICAgbjogZnVuY3Rpb24gbihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICB9LFxuICAgICAgdzogZnVuY3Rpb24gdyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldERheSgpO1xuICAgICAgfSxcbiAgICAgIHk6IGZ1bmN0aW9uIHkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZW5nbGlzaCA9IHtcbiAgICAgIHdlZWtkYXlzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICAgICAgICBsb25naGFuZDogW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl1cbiAgICAgIH0sXG4gICAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgICAgfSxcbiAgICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgICBmaXJzdERheU9mV2VlazogMCxcbiAgICAgIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnRoKSB7XG4gICAgICAgIHZhciBzID0gbnRoICUgMTAwO1xuICAgICAgICBpZiAocyA+IDMgJiYgcyA8IDIxKSByZXR1cm4gXCJ0aFwiO1xuXG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIm5kXCI7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCJyZFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXG4gICAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgICBzY3JvbGxUaXRsZTogXCJTY3JvbGwgdG8gaW5jcmVtZW50XCIsXG4gICAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcbiAgICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgICB5ZWFyQXJpYUxhYmVsOiBcIlllYXJcIlxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlRGF0ZUZvcm1hdHRlciA9IGZ1bmN0aW9uIGNyZWF0ZURhdGVGb3JtYXR0ZXIoX3JlZikge1xuICAgICAgdmFyIF9yZWYkY29uZmlnID0gX3JlZi5jb25maWcsXG4gICAgICAgICAgY29uZmlnID0gX3JlZiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZiRjb25maWcsXG4gICAgICAgICAgX3JlZiRsMTBuID0gX3JlZi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmJGwxMG4gPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfcmVmJGwxMG47XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGVPYmosIGZybXQsIG92ZXJyaWRlTG9jYWxlKSB7XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gY29uZmlnLmZvcm1hdERhdGUoZGF0ZU9iaiwgZnJtdCk7XG4gICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuO1xuICAgICAgICByZXR1cm4gZnJtdC5zcGxpdChcIlwiKS5tYXAoZnVuY3Rpb24gKGMsIGksIGFycikge1xuICAgICAgICAgIHJldHVybiBmb3JtYXRzW2NdICYmIGFycltpIC0gMV0gIT09IFwiXFxcXFwiID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZykgOiBjICE9PSBcIlxcXFxcIiA/IGMgOiBcIlwiO1xuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBjcmVhdGVEYXRlUGFyc2VyID0gZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihfcmVmMikge1xuICAgICAgdmFyIF9yZWYyJGNvbmZpZyA9IF9yZWYyLmNvbmZpZyxcbiAgICAgICAgICBjb25maWcgPSBfcmVmMiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZjIkY29uZmlnLFxuICAgICAgICAgIF9yZWYyJGwxMG4gPSBfcmVmMi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmMiRsMTBuID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX3JlZjIkbDEwbjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyc2VkRGF0ZTtcbiAgICAgICAgdmFyIGRhdGVfb3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJiBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZCkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO2Vsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdmFyIGZvcm1hdCA9IGdpdmVuRm9ybWF0IHx8IChjb25maWcgfHwgZGVmYXVsdHMpLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuXG4gICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHwgL0dNVCQvLnRlc3QoZGF0ZXN0cikpIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhciA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMCkgOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkLFxuICAgICAgICAgICAgICAgIG9wcyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gXCJcIjsgaSA8IGZvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBmb3JtYXRbaV07XG4gICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSBcIlxcXFxcIiB8fCBpc0JhY2tTbGFzaDtcblxuICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuZXcgUmVnRXhwKHJlZ2V4U3RyKS5leGVjKGRhdGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaGVkID0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XG4gICAgICAgICAgICAgICAgICAgIGZuOiByZXZGb3JtYXRbdG9rZW5dLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCYWNrU2xhc2gpIHJlZ2V4U3RyICs9IFwiLlwiO1xuXG4gICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IF9yZWYzLmZuLFxuICAgICAgICAgICAgICAgICAgICB2YWwgPSBfcmVmMy52YWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZERhdGUgPSBmbihwYXJzZWREYXRlLCB2YWwsIGwxMG4pIHx8IHBhcnNlZERhdGU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6IFwiICsgZGF0ZV9vcmlnKSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSkgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XG4gICAgICB9O1xuICAgIH07XG4gICAgZnVuY3Rpb24gY29tcGFyZURhdGVzKGRhdGUxLCBkYXRlMiwgdGltZWxlc3MpIHtcbiAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZTEuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtIG5ldyBEYXRlKGRhdGUyLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG4gICAgfVxuICAgIHZhciBnZXRXZWVrID0gZnVuY3Rpb24gZ2V0V2VlayhnaXZlbkRhdGUpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZ2l2ZW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtIChkYXRlLmdldERheSgpICsgNikgJSA3KTtcbiAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XG4gICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XG4gICAgfTtcbiAgICB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gaXNCZXR3ZWVuKHRzLCB0czEsIHRzMikge1xuICAgICAgcmV0dXJuIHRzID4gTWF0aC5taW4odHMxLCB0czIpICYmIHRzIDwgTWF0aC5tYXgodHMxLCB0czIpO1xuICAgIH07XG4gICAgdmFyIGR1cmF0aW9uID0ge1xuICAgICAgREFZOiA4NjQwMDAwMFxuICAgIH07XG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBfZGlzYWJsZTogW10sXG4gICAgICBfZW5hYmxlOiBbXSxcbiAgICAgIGFsbG93SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0Rm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0SW5wdXRDbGFzczogXCJmb3JtLWNvbnRyb2wgaW5wdXRcIixcbiAgICAgIGFuaW1hdGU6IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xLFxuICAgICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgICAgY2xvc2VPblNlbGVjdDogdHJ1ZSxcbiAgICAgIGNvbmp1bmN0aW9uOiBcIiwgXCIsXG4gICAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgICBkZWZhdWx0SG91cjogMTIsXG4gICAgICBkZWZhdWx0TWludXRlOiAwLFxuICAgICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgICBkaXNhYmxlOiBbXSxcbiAgICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLFxuICAgICAgZW5hYmxlOiBbXSxcbiAgICAgIGVuYWJsZVNlY29uZHM6IGZhbHNlLFxuICAgICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgICBlcnJvckhhbmRsZXI6IGNvbnNvbGUud2FybixcbiAgICAgIGdldFdlZWs6IGdldFdlZWssXG4gICAgICBob3VySW5jcmVtZW50OiAxLFxuICAgICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgIGxvY2FsZTogXCJkZWZhdWx0XCIsXG4gICAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgICBtb2RlOiBcInNpbmdsZVwiLFxuICAgICAgbmV4dEFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNMTMuMjA3IDguNDcybC03Ljg1NCA3Ljg1NC0wLjcwNy0wLjcwNyA3LjE0Ni03LjE0Ni03LjE0Ni03LjE0OCAwLjcwNy0wLjcwNyA3Ljg1NCA3Ljg1NHonIC8+PC9zdmc+XCIsXG4gICAgICBub0NhbGVuZGFyOiBmYWxzZSxcbiAgICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICAgIG9uQ2hhbmdlOiBbXSxcbiAgICAgIG9uQ2xvc2U6IFtdLFxuICAgICAgb25EYXlDcmVhdGU6IFtdLFxuICAgICAgb25EZXN0cm95OiBbXSxcbiAgICAgIG9uS2V5RG93bjogW10sXG4gICAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICAgIG9uT3BlbjogW10sXG4gICAgICBvblBhcnNlQ29uZmlnOiBbXSxcbiAgICAgIG9uUmVhZHk6IFtdLFxuICAgICAgb25WYWx1ZVVwZGF0ZTogW10sXG4gICAgICBvblllYXJDaGFuZ2U6IFtdLFxuICAgICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICAgIHBsdWdpbnM6IFtdLFxuICAgICAgcG9zaXRpb246IFwiYXV0b1wiLFxuICAgICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgICBwcmV2QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J001LjIwNyA4LjQ3MWw3LjE0NiA3LjE0Ny0wLjcwNyAwLjcwNy03Ljg1My03Ljg1NCA3Ljg1NC03Ljg1MyAwLjcwNyAwLjcwNy03LjE0NyA3LjE0NnonIC8+PC9zdmc+XCIsXG4gICAgICBzaG9ydGhhbmRDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgc2hvd01vbnRoczogMSxcbiAgICAgIHN0YXRpYzogZmFsc2UsXG4gICAgICB0aW1lXzI0aHI6IGZhbHNlLFxuICAgICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgICAgd3JhcDogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7XG4gICAgICBpZiAoYm9vbCA9PT0gdHJ1ZSkgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICAgIHZhciBlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICAgIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgaWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZCkgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgICAgaWYgKGNvbmRpdGlvbihub2RlKSkgcmV0dXJuIG5vZGU7ZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSByZXR1cm4gZmluZFBhcmVudChub2RlLnBhcmVudE5vZGUsIGNvbmRpdGlvbik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVOdW1iZXJJbnB1dChpbnB1dENsYXNzTmFtZSwgb3B0cykge1xuICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwibnVtSW5wdXRXcmFwcGVyXCIpLFxuICAgICAgICAgIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksXG4gICAgICAgICAgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dVcFwiKSxcbiAgICAgICAgICBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93RG93blwiKTtcbiAgICAgIG51bUlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZCkgZm9yICh2YXIga2V5IGluIG9wdHMpIHtcbiAgICAgICAgbnVtSW5wdXQuc2V0QXR0cmlidXRlKGtleSwgb3B0c1trZXldKTtcbiAgICAgIH1cbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dEb3duKTtcbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHNvdXJjZSkge1xuICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmdzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmdzW19pXTtcblxuICAgICAgICAgIF9sb29wKHNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDtcblxuICAgIGZ1bmN0aW9uIEZsYXRwaWNrckluc3RhbmNlKGVsZW1lbnQsIGluc3RhbmNlQ29uZmlnKSB7XG4gICAgICB2YXIgc2VsZiA9IHtcbiAgICAgICAgY29uZmlnOiBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyksXG4gICAgICAgIGwxMG46IGVuZ2xpc2hcbiAgICAgIH07XG4gICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoe1xuICAgICAgICBjb25maWc6IHNlbGYuY29uZmlnLFxuICAgICAgICBsMTBuOiBzZWxmLmwxMG5cbiAgICAgIH0pO1xuICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgIHNlbGYuX2JpbmQgPSBiaW5kO1xuICAgICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7XG4gICAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgICBzZWxmLmNoYW5nZVllYXIgPSBjaGFuZ2VZZWFyO1xuICAgICAgc2VsZi5jbGVhciA9IGNsZWFyO1xuICAgICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgICAgc2VsZi5fY3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQ7XG4gICAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgICAgc2VsZi5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XG4gICAgICBzZWxmLmp1bXBUb0RhdGUgPSBqdW1wVG9EYXRlO1xuICAgICAgc2VsZi5vcGVuID0gb3BlbjtcbiAgICAgIHNlbGYucmVkcmF3ID0gcmVkcmF3O1xuICAgICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgICBzZWxmLnNldERhdGUgPSBzZXREYXRlO1xuICAgICAgc2VsZi50b2dnbGUgPSB0b2dnbGU7XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwSGVscGVyRnVuY3Rpb25zKCkge1xuICAgICAgICBzZWxmLnV0aWxzID0ge1xuICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiBnZXREYXlzSW5Nb250aChtb250aCwgeXIpIHtcbiAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHlyID0gc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1vbnRoID09PSAxICYmICh5ciAlIDQgPT09IDAgJiYgeXIgJSAxMDAgIT09IDAgfHwgeXIgJSA0MDAgPT09IDApKSByZXR1cm4gMjk7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5sMTBuLmRheXNJbk1vbnRoW21vbnRoXTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHNlbGYuZWxlbWVudCA9IHNlbGYuaW5wdXQgPSBlbGVtZW50O1xuICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICBwYXJzZUNvbmZpZygpO1xuICAgICAgICBzZXR1cExvY2FsZSgpO1xuICAgICAgICBzZXR1cElucHV0cygpO1xuICAgICAgICBzZXR1cERhdGVzKCk7XG4gICAgICAgIHNldHVwSGVscGVyRnVuY3Rpb25zKCk7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkgYnVpbGQoKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogfHwgc2VsZi5jb25maWcubWluRGF0ZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDAgfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcjtcblxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5c0NvbnRhaW5lci5vZmZzZXRXaWR0aCArIDEpICogc2VsZi5jb25maWcuc2hvd01vbnRocztcbiAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcblxuICAgICAgICAgIGlmIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRUb0luc3RhbmNlKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgdGltZVdyYXBwZXIoZSk7XG5cbiAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICB9LCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhbXBtMm1pbGl0YXJ5KGhvdXIsIGFtUE0pIHtcbiAgICAgICAgcmV0dXJuIGhvdXIgJSAxMiArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICByZXR1cm4gMTI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdXJzID0gKHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUuc2xpY2UoLTIpLCAxMCkgfHwgMCkgJSAyNCxcbiAgICAgICAgICAgIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCxcbiAgICAgICAgICAgIHNlY29uZHMgPSBzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwIDogMDtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBob3VycyA9IGFtcG0ybWlsaXRhcnkoaG91cnMsIHNlbGYuYW1QTS50ZXh0Q29udGVudCk7XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJiBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PSAwO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYubWF4RGF0ZUhhc1RpbWUgJiYgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiYgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT0gMDtcblxuICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xuICAgICAgICAgIHZhciBtYXhUaW1lID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWF4VGltZSA6IHNlbGYuY29uZmlnLm1heERhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4VGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWF4VGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGltaXRNaW5Ib3Vycykge1xuICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWluVGltZSA6IHNlbGYuY29uZmlnLm1pbkRhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWF4KG1pbnV0ZXMsIG1pblRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1heChzZWNvbmRzLCBtaW5UaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlKSBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgICAgIGlmIChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouc2V0SG91cnMoaG91cnMgJSAyNCwgbWludXRlcywgc2Vjb25kcyB8fCAwLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5ob3VyRWxlbWVudCB8fCAhc2VsZi5taW51dGVFbGVtZW50IHx8IHNlbGYuaXNNb2JpbGUpIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyID8gKDEyICsgaG91cnMpICUgMTIgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKSA6IGhvdXJzKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKG1pbnV0ZXMpO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChob3VycyA+PSAxMildO1xuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpICsgKGV2ZW50LmRlbHRhIHx8IDApO1xuXG4gICAgICAgIGlmICh5ZWFyLnRvU3RyaW5nKCkubGVuZ3RoID09PSA0IHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICBpZiAoIS9bXlxcZF0vLnRlc3QoeWVhci50b1N0cmluZygpKSkgY2hhbmdlWWVhcih5ZWFyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICByZXR1cm4gYmluZChlbGVtZW50LCBldiwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzLnB1c2goe1xuICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uQ2xpY2soaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIGV2dC53aGljaCA9PT0gMSAmJiBoYW5kbGVyKGV2dCk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgIFtcIm9wZW5cIiwgXCJjbG9zZVwiLCBcInRvZ2dsZVwiLCBcImNsZWFyXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUpIHtcbiAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3ZlcihlLnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMpIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmlubGluZSAmJiAhc2VsZi5jb25maWcuc3RhdGljKSBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZCkgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwidG91Y2hzdGFydFwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soZG9jdW1lbnRDbGljaykpO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJmb2N1c1wiLCBkb2N1bWVudENsaWNrLCB7XG4gICAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGYub3BlbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKG9uTW9udGhOYXZDbGljaykpO1xuICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgW1wia2V5dXBcIiwgXCJpbmNyZW1lbnRcIl0sIG9uWWVhcklucHV0KTtcbiAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayhzZWxlY3REYXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiYgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNlbFRleHQgPSBmdW5jdGlvbiBzZWxUZXh0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5zZWxlY3QoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCB1cGRhdGVUaW1lKTtcbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayh0aW1lSW5jcmVtZW50KSk7XG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UsIHtcbiAgICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBiaW5kKFtzZWxmLmhvdXJFbGVtZW50LCBzZWxmLm1pbnV0ZUVsZW1lbnRdLCBbXCJmb2N1c1wiLCBcImNsaWNrXCJdLCBzZWxUZXh0KTtcbiAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5zZWNvbmRFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJtb3VzZWRvd25cIiwgb25DbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUpIHtcbiAgICAgICAgdmFyIGp1bXBUbyA9IGp1bXBEYXRlICE9PSB1bmRlZmluZWQgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSkgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fCAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5taW5EYXRlIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmNvbmZpZy5tYXhEYXRlIDwgc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5tYXhEYXRlIDogc2VsZi5ub3cpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGp1bXBUbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0ganVtcFRvLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGUubWVzc2FnZSA9IFwiSW52YWxpZCBkYXRlIHN1cHBsaWVkOiBcIiArIGp1bXBUbztcbiAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcbiAgICAgICAgaWYgKH5lLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKSBpbmNyZW1lbnROdW1JbnB1dChlLCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd1VwXCIpID8gMSA6IC0xKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW5jcmVtZW50TnVtSW5wdXQoZSwgZGVsdGEsIGlucHV0RWxlbSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZSAmJiBlLnRhcmdldDtcbiAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRFbGVtIHx8IHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICAgICAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudChcImluY3JlbWVudFwiKTtcbiAgICAgICAgZXZlbnQuZGVsdGEgPSBkZWx0YTtcbiAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTW9udGhOYXYoKSk7XG4gICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgIHZhciBfYnVpbGRXZWVrcyA9IGJ1aWxkV2Vla3MoKSxcbiAgICAgICAgICAgICAgICB3ZWVrV3JhcHBlciA9IF9idWlsZFdlZWtzLndlZWtXcmFwcGVyLFxuICAgICAgICAgICAgICAgIHdlZWtOdW1iZXJzID0gX2J1aWxkV2Vla3Mud2Vla051bWJlcnM7XG5cbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1dyYXBwZXIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgc2VsZi53ZWVrV3JhcHBlciA9IHdlZWtXcmFwcGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcblxuICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuckNvbnRhaW5lcik7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmFuZ2VNb2RlXCIsIHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIik7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYW5pbWF0ZVwiLCBzZWxmLmNvbmZpZy5hbmltYXRlID09PSB0cnVlKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJtdWx0aU1vbnRoXCIsIHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIHZhciBjdXN0b21BcHBlbmQgPSBzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkICYmIHNlbGYuY29uZmlnLmFwcGVuZFRvLm5vZGVUeXBlICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7ZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCkgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcuYXBwZW5kVG8gOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIGRheU51bWJlciwgaSkge1xuICAgICAgICB2YXIgZGF0ZUlzRW5hYmxlZCA9IGlzRW5hYmxlZChkYXRlLCB0cnVlKSxcbiAgICAgICAgICAgIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1kYXkgXCIgKyBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuXG4gICAgICAgIGlmIChjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgc2VsZi50b2RheURhdGVFbGVtID0gZGF5RWxlbWVudDtcbiAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlSXNFbmFibGVkKSB7XG4gICAgICAgICAgZGF5RWxlbWVudC50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgICAgaWYgKGlzRGF0ZVNlbGVjdGVkKGRhdGUpKSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJzdGFydFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0sIHRydWUpID09PSAwKTtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gXCJuZXh0TW9udGhEYXlcIikgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKSBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJiBjbGFzc05hbWUgIT09IFwicHJldk1vbnRoRGF5XCIgJiYgZGF5TnVtYmVyICUgNyA9PT0gMSkge1xuICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheShjdXJyZW50SW5kLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGN1cnJlbnRJbmQgIT09IHVuZGVmaW5lZCA/IGN1cnJlbnRJbmQgOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LiRpO1xuICAgICAgICB2YXIgbmV3SW5kZXggPSAoY3VycmVudEluZGV4IHx8IDApICsgb2Zmc2V0IHx8IDAsXG4gICAgICAgICAgICB0YXJnZXROb2RlID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChzZWxmLmRheXMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICAgICAgcmV0dXJuIGkgPj0gbmV3SW5kZXggJiYgYy5jbGFzc05hbWUuaW5kZXhPZihcIk1vbnRoRGF5XCIpID09PSAtMSAmJiBpc0VuYWJsZWQoYy5kYXRlT2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRhcmdldE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRhcmdldE5vZGUuZm9jdXMoKTtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgpLFxuICAgICAgICAgICAgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCxcbiAgICAgICAgICAgIGRheUluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJwcmV2TW9udGhEYXlcIiwgbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIlwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGggJiYgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgfHwgZGF5SW5kZXggJSA3ICE9PSAwKTsgZGF5TnVtKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIm5leHRNb250aERheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheU51bSAlIGRheXNJbk1vbnRoKSwgZGF5TnVtLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpIGNsZWFyTm9kZShzZWxmLndlZWtOdW1iZXJzKTtcbiAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpKyspIHtcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKTtcbiAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChidWlsZE1vbnRoRGF5cyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aCgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhcIik7XG4gICAgICAgIHZhciBtb250aE5hdkZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICBtb250aEVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHZhciB5ZWFySW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImN1ci15ZWFyXCIsIHtcbiAgICAgICAgICB0YWJpbmRleDogXCItMVwiXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgeWVhckVsZW1lbnQgPSB5ZWFySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgeWVhckVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLnllYXJBcmlhTGFiZWwpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSkgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG4gICAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIHllYXJFbGVtZW50LmRpc2FibGVkID0gISFzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY3VycmVudC1tb250aFwiKTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKG1vbnRoRWxlbWVudCk7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZCh5ZWFySW5wdXQpO1xuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKGN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aE5hdkZyYWdtZW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICB5ZWFyRWxlbWVudDogeWVhckVsZW1lbnQsXG4gICAgICAgICAgbW9udGhFbGVtZW50OiBtb250aEVsZW1lbnRcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhzXCIpO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7XG4gICAgICAgIHNlbGYubmV4dE1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItbmV4dC1tb250aFwiKTtcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcblxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgIHZhciBtb250aCA9IGJ1aWxkTW9udGgoKTtcbiAgICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5wdXNoKG1vbnRoLnllYXJFbGVtZW50KTtcbiAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQobW9udGguY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgIT09IGJvb2wpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5wcmV2TW9udGhOYXYsIFwiZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3c7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLm5leHRNb250aE5hdiwgXCJkaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQgPSBzZWxmLnllYXJFbGVtZW50c1swXTtcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICByZXR1cm4gc2VsZi5tb250aE5hdjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRUaW1lKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNUaW1lXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhcikgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm9DYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKTtcbiAgICAgICAgdmFyIGhvdXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLWhvdXJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgdmFyIG1pbnV0ZUlucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItbWludXRlXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgPSBtaW51dGVJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpIDogc2VsZi5jb25maWcudGltZV8yNGhyID8gc2VsZi5jb25maWcuZGVmYXVsdEhvdXIgOiBtaWxpdGFyeTJhbXBtKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiLCBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjBcIiA6IFwiMVwiKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjIzXCIgOiBcIjEyXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgXCIwXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJJbnB1dCk7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQobWludXRlSW5wdXQpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcudGltZV8yNGhyKSBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUyNGhyXCIpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNTZWNvbmRzXCIpO1xuICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmhvdXJFbGVtZW50LnZhbHVlIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuICAgICAgICAgIHNlbGYuYW1QTS50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGYudGltZUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRXZWVrZGF5cygpIHtcbiAgICAgICAgaWYgKCFzZWxmLndlZWtkYXlDb250YWluZXIpIHNlbGYud2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcbiAgICAgICAgdmFyIHdlZWtkYXlzID0gc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5jb25jYXQoKTtcblxuICAgICAgICBpZiAoZmlyc3REYXlPZldlZWsgPiAwICYmIGZpcnN0RGF5T2ZXZWVrIDwgd2Vla2RheXMubGVuZ3RoKSB7XG4gICAgICAgICAgd2Vla2RheXMgPSB3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCkuY29uY2F0KHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cXG4gICAgICAgIFwiICsgd2Vla2RheXMuam9pbihcIjwvc3Bhbj48c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cIikgKyBcIlxcbiAgICAgIDwvc3Bhbj5cXG4gICAgICBcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFdlZWtzKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNXZWVrc1wiKTtcbiAgICAgICAgdmFyIHdlZWtXcmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrd3JhcHBlclwiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3Itd2Vla2RheVwiLCBzZWxmLmwxMG4ud2Vla0FiYnJldmlhdGlvbikpO1xuICAgICAgICB2YXIgd2Vla051bWJlcnMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtzXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZCh3ZWVrTnVtYmVycyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVyc1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNfb2Zmc2V0LCBmcm9tX2tleWJvYXJkKSB7XG4gICAgICAgIGlmIChpc19vZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGlzX29mZnNldCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZnJvbV9rZXlib2FyZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlbHRhID0gaXNfb2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoZGVsdGEgPCAwICYmIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdyA9PT0gdHJ1ZSB8fCBkZWx0YSA+IDAgJiYgc2VsZi5faGlkZU5leHRNb250aEFycm93ID09PSB0cnVlKSByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuXG4gICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG5cbiAgICAgICAgaWYgKGZyb21fa2V5Ym9hcmQgPT09IHRydWUpIHtcbiAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCkgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlKTtlbHNlIHNldEhvdXJzKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyLCBzZWxmLmNvbmZpZy5kZWZhdWx0TWludXRlLCBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcblxuICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZCkgdHJpZ2dlckV2ZW50KFwib25EZXN0cm95XCIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLl9oYW5kbGVycy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICB2YXIgaCA9IHNlbGYuX2hhbmRsZXJzW2ldO1xuICAgICAgICAgIGguZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGguZXZlbnQsIGguaGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuXG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0KSB7XG4gICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZSkgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcblxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICBkZWxldGUgc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gc2VsZi5pbnB1dC5fdHlwZTtcbiAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFtcIl9zaG93VGltZUlucHV0XCIsIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9faGlkZVByZXZNb250aEFycm93XCIsIFwiaXNNb2JpbGVcIiwgXCJpc09wZW5cIiwgXCJzZWxlY3RlZERhdGVFbGVtXCIsIFwibWluRGF0ZUhhc1RpbWVcIiwgXCJtYXhEYXRlSGFzVGltZVwiLCBcImRheXNcIiwgXCJkYXlzQ29udGFpbmVyXCIsIFwiX2lucHV0XCIsIFwiX3Bvc2l0aW9uRWxlbWVudFwiLCBcImlubmVyQ29udGFpbmVyXCIsIFwickNvbnRhaW5lclwiLCBcIm1vbnRoTmF2XCIsIFwidG9kYXlEYXRlRWxlbVwiLCBcImNhbGVuZGFyQ29udGFpbmVyXCIsIFwid2Vla2RheUNvbnRhaW5lclwiLCBcInByZXZNb250aE5hdlwiLCBcIm5leHRNb250aE5hdlwiLCBcImN1cnJlbnRNb250aEVsZW1lbnRcIiwgXCJjdXJyZW50WWVhckVsZW1lbnRcIiwgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsIFwic2VsZWN0ZWREYXRlRWxlbVwiLCBcImNvbmZpZ1wiXS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmW2tdO1xuICAgICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0NhbGVuZGFyRWxlbShlbGVtKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAmJiBzZWxmLmNvbmZpZy5hcHBlbmRUby5jb250YWlucyhlbGVtKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICB2YXIgaXNDYWxlbmRhckVsZW1lbnQgPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5pbnB1dCB8fCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCB8fCBzZWxmLmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpIHx8IGUucGF0aCAmJiBlLnBhdGguaW5kZXhPZiAmJiAofmUucGF0aC5pbmRleE9mKHNlbGYuaW5wdXQpIHx8IH5lLnBhdGguaW5kZXhPZihzZWxmLmFsdElucHV0KSk7XG4gICAgICAgICAgdmFyIGxvc3RGb2N1cyA9IGUudHlwZSA9PT0gXCJibHVyXCIgPyBpc0lucHV0ICYmIGUucmVsYXRlZFRhcmdldCAmJiAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KSA6ICFpc0lucHV0ICYmICFpc0NhbGVuZGFyRWxlbWVudDtcbiAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChsb3N0Rm9jdXMgJiYgaXNJZ25vcmVkKSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hhbmdlWWVhcihuZXdZZWFyKSB7XG4gICAgICAgIGlmICghbmV3WWVhciB8fCBzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgfHwgc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSByZXR1cm47XG4gICAgICAgIHZhciBuZXdZZWFyTnVtID0gbmV3WWVhcixcbiAgICAgICAgICAgIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IG5ld1llYXJOdW07XG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBuZXdZZWFyTnVtIHx8IHNlbGYuY3VycmVudFllYXI7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1pbihzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNFbmFibGVkKGRhdGUsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA9PT0gMCAmJiBzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBib29sID0gc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICBhcnJheSA9IGJvb2wgPyBzZWxmLmNvbmZpZy5lbmFibGUgOiBzZWxmLmNvbmZpZy5kaXNhYmxlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBkID0gYXJyYXlbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiYgZChkYXRlVG9DaGVjaykpIHJldHVybiBib29sO2Vsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSkgcmV0dXJuIGJvb2w7ZWxzZSBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHNlbGYucGFyc2VEYXRlKGQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSA/IGJvb2wgOiAhYm9vbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5mcm9tICYmIGQudG8gJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpID49IGQuZnJvbS5nZXRUaW1lKCkgJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKSByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5faW5wdXQ7XG4gICAgICAgIHZhciBjYWxlbmRhckVsZW0gPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgIHZhciBhbGxvd0lucHV0ID0gc2VsZi5jb25maWcuYWxsb3dJbnB1dDtcbiAgICAgICAgdmFyIGFsbG93S2V5ZG93biA9IHNlbGYuaXNPcGVuICYmICghYWxsb3dJbnB1dCB8fCAhaXNJbnB1dCk7XG4gICAgICAgIHZhciBhbGxvd0lubGluZUtleWRvd24gPSBzZWxmLmNvbmZpZy5pbmxpbmUgJiYgaXNJbnB1dCAmJiAhYWxsb3dJbnB1dDtcblxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7XG4gICAgICAgICAgaWYgKGFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgdHJ1ZSwgZS50YXJnZXQgPT09IHNlbGYuYWx0SW5wdXQgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5ibHVyKCk7XG4gICAgICAgICAgfSBlbHNlIHNlbGYub3BlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyRWxlbSB8fCBhbGxvd0tleWRvd24gfHwgYWxsb3dJbmxpbmVLZXlkb3duKSB7XG4gICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmIHNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCk7XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikgdXBkYXRlVmFsdWUoKTtlbHNlIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX2RlbHRhID0gaXNJbnB1dCA/IDAgOiBlLmtleUNvZGUgPT09IDM5ID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkgZm9jdXNPbkRheSh1bmRlZmluZWQsIF9kZWx0YSk7ZWxzZSBjaGFuZ2VNb250aChfZGVsdGEsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUua2V5Q29kZSA9PT0gNDAgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiBlLnRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShlLnRhcmdldC4kaSwgMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNUaW1lT2JqKSBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCBkZWx0YSAqIDcpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBzZWxmLmhvdXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5taW51dGVFbGVtZW50ICYmIChzZWxmLnNlY29uZEVsZW1lbnQgfHwgc2VsZi5hbVBNKSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC5mb2N1cygpO2Vsc2UgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMF07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzFdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbktleURvd25cIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25Nb3VzZU92ZXIoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fCAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpIHx8IGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBpbml0aWFsRGF0ZSA9IHNlbGYucGFyc2VEYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdW5kZWZpbmVkLCB0cnVlKS5nZXRUaW1lKCksXG4gICAgICAgICAgICByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksXG4gICAgICAgICAgICByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgbW9udGhzID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuLFxuICAgICAgICAgICAgZmlyc3REYXkgPSBtb250aHNbMF0uY2hpbGRyZW5bMF0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBsYXN0RGF5ID0gbW9udGhzW21vbnRocy5sZW5ndGggLSAxXS5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsXG4gICAgICAgICAgICBtYXhSYW5nZSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgdCA9IGZpcnN0RGF5OyB0IDwgbGFzdERheTsgdCArPSBkdXJhdGlvbi5EQVkpIHtcbiAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPSBjb250YWluc0Rpc2FibGVkIHx8IHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlO1xuICAgICAgICAgICAgaWYgKHQgPCBpbml0aWFsRGF0ZSAmJiAoIW1pblJhbmdlIHx8IHQgPiBtaW5SYW5nZSkpIG1pblJhbmdlID0gdDtlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKSBtYXhSYW5nZSA9IHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtKyspIHtcbiAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgdmFyIHByZXZNb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttIC0gMV07XG5cbiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpLCBsKSB7XG4gICAgICAgICAgICB2YXIgZGF5RWxlbSA9IG1vbnRoLmNoaWxkcmVuW2ldLFxuICAgICAgICAgICAgICAgIGRhdGUgPSBkYXlFbGVtLmRhdGVPYmo7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgb3V0T2ZSYW5nZSA9IG1pblJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPCBtaW5SYW5nZSB8fCBtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2U7XG5cbiAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7XG4gICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zRGlzYWJsZWQgJiYgIW91dE9mUmFuZ2UpIHJldHVybiBcImNvbnRpbnVlXCI7XG5cbiAgICAgICAgICAgIFtcInN0YXJ0UmFuZ2VcIiwgXCJpblJhbmdlXCIsIFwiZW5kUmFuZ2VcIiwgXCJub3RBbGxvd2VkXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoaG92ZXJEYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSA/IFwic3RhcnRSYW5nZVwiIDogXCJlbmRSYW5nZVwiKTtcblxuICAgICAgICAgICAgaWYgKG1vbnRoLmNvbnRhaW5zKGVsZW0pIHx8ICEobSA+IDAgJiYgcHJldk1vbnRoICYmIHByZXZNb250aC5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCkgPj0gdGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwic3RhcnRSYW5nZVwiKTtlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA+PSBtaW5SYW5nZSAmJiAobWF4UmFuZ2UgPT09IDAgfHwgdGltZXN0YW1wIDw9IG1heFJhbmdlKSAmJiBpc0JldHdlZW4odGltZXN0YW1wLCBpbml0aWFsRGF0ZSwgaG92ZXJEYXRlKSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBfcmV0ID0gX2xvb3AoaSwgbCk7XG5cbiAgICAgICAgICAgIGlmIChfcmV0ID09PSBcImNvbnRpbnVlXCIpIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvcGVuKGUsIHBvc2l0aW9uRWxlbWVudCkge1xuICAgICAgICBpZiAocG9zaXRpb25FbGVtZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9pbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUudGFyZ2V0ICYmIGUudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHJldHVybjtcbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcbiAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlO1xuXG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG5cbiAgICAgICAgICBzZWxmLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIocG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlICYmIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKSA6IG5ldyBEYXRlKCkuc2V0SG91cnMoc2VsZi5jb25maWcuZGVmYXVsdEhvdXIsIHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUsIHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzLCAwKSwgZmFsc2UpO1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgICAgfSwgNTApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICB2YXIgZGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgdHlwZSArIFwiRGF0ZVwiXSA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XG5cbiAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID0gZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fCBkYXRlT2JqLmdldE1pbnV0ZXMoKSA+IDAgfHwgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlzRW5hYmxlZChkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgaWYgKGRhdGVPYmogIT09IHVuZGVmaW5lZCkgc2VsZi5jdXJyZW50WWVhckVsZW1lbnRbdHlwZV0gPSBkYXRlT2JqLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtlbHNlIHNlbGYuY3VycmVudFllYXJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0eXBlKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID0gISFpbnZlcnNlRGF0ZU9iaiAmJiBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiYgaW52ZXJzZURhdGVPYmouZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZU9iai5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcIndyYXBcIiwgXCJ3ZWVrTnVtYmVyc1wiLCBcImFsbG93SW5wdXRcIiwgXCJjbGlja09wZW5zXCIsIFwidGltZV8yNGhyXCIsIFwiZW5hYmxlVGltZVwiLCBcIm5vQ2FsZW5kYXJcIiwgXCJhbHRJbnB1dFwiLCBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLCBcImlubGluZVwiLCBcInN0YXRpY1wiLCBcImVuYWJsZVNlY29uZHNcIiwgXCJkaXNhYmxlTW9iaWxlXCJdO1xuICAgICAgICB2YXIgaG9va3MgPSBbXCJvbkNoYW5nZVwiLCBcIm9uQ2xvc2VcIiwgXCJvbkRheUNyZWF0ZVwiLCBcIm9uRGVzdHJveVwiLCBcIm9uS2V5RG93blwiLCBcIm9uTW9udGhDaGFuZ2VcIiwgXCJvbk9wZW5cIiwgXCJvblBhcnNlQ29uZmlnXCIsIFwib25SZWFkeVwiLCBcIm9uVmFsdWVVcGRhdGVcIiwgXCJvblllYXJDaGFuZ2VcIiwgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIl07XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFuY2VDb25maWcsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpO1xuICAgICAgICB2YXIgZm9ybWF0cyQkMSA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX2VuYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZGlzYWJsZSA9IHBhcnNlRGF0ZVJ1bGVzKGRhdGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZvcm1hdHMkJDEuZGF0ZUZvcm1hdCA9IHVzZXJDb25maWcubm9DYWxlbmRhciA/IFwiSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgOiBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlckNvbmZpZy5hbHRJbnB1dCAmJiB1c2VyQ29uZmlnLmVuYWJsZVRpbWUgJiYgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XG4gICAgICAgICAgZm9ybWF0cyQkMS5hbHRGb3JtYXQgPSB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKSA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCArIChcIiBoOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKSArIFwiIEtcIik7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluRGF0ZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhEYXRlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4RGF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWluTWF4VGltZVNldHRlciA9IGZ1bmN0aW9uIG1pbk1heFRpbWVTZXR0ZXIodHlwZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSBcIm1pblwiID8gXCJfbWluVGltZVwiIDogXCJfbWF4VGltZVwiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgXCJIOmlcIik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhUaW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cyQkMSwgdXNlckNvbmZpZyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29sT3B0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9IHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fCBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSBob29rcy5sZW5ndGg7IF9pLS07KSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnW2hvb2tzW19pXV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va3NbX2ldXSA9IGFycmF5aWZ5KHNlbGYuY29uZmlnW2hvb2tzW19pXV0gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgc2VsZi5jb25maWcubm9DYWxlbmRhciA9IHRydWU7XG4gICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbX2kyXShzZWxmKSB8fCB7fTtcblxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICBpZiAofmhvb2tzLmluZGV4T2Yoa2V5KSkge1xuICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gYXJyYXlpZnkocGx1Z2luQ29uZltrZXldKS5tYXAoYmluZFRvSW5zdGFuY2UpLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIikgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlzTW9iaWxlID0gIXNlbGYuY29uZmlnLmRpc2FibGVNb2JpbGUgJiYgIXNlbGYuY29uZmlnLmlubGluZSAmJiBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmICFzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiYgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKSBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSBcIiArIHNlbGYuY29uZmlnLmxvY2FsZSkpO1xuICAgICAgICBzZWxmLmwxMG4gPSBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgdHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gXCJvYmplY3RcIiA/IHNlbGYuY29uZmlnLmxvY2FsZSA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCIgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHNlbGYuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIpO1xuICAgICAgICB2YXIgcG9zaXRpb25FbGVtZW50ID0gY3VzdG9tUG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDtcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7XG4gICAgICAgICAgcmV0dXJuIGFjYyArIGNoaWxkLm9mZnNldEhlaWdodDtcbiAgICAgICAgfSwgMCksXG4gICAgICAgICAgICBjYWxlbmRhcldpZHRoID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLFxuICAgICAgICAgICAgaW5wdXRCb3VuZHMgPSBwb3NpdGlvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sXG4gICAgICAgICAgICBzaG93T25Ub3AgPSBjb25maWdQb3MgPT09IFwiYWJvdmVcIiB8fCBjb25maWdQb3MgIT09IFwiYmVsb3dcIiAmJiBkaXN0YW5jZUZyb21Cb3R0b20gPCBjYWxlbmRhckhlaWdodCAmJiBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodDtcbiAgICAgICAgdmFyIHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIGlucHV0Qm91bmRzLnRvcCArICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSByZXR1cm47XG4gICAgICAgIHZhciBsZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMubGVmdDtcbiAgICAgICAgdmFyIHJpZ2h0ID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBpbnB1dEJvdW5kcy5yaWdodDtcbiAgICAgICAgdmFyIHJpZ2h0TW9zdCA9IGxlZnQgKyBjYWxlbmRhcldpZHRoID4gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmlnaHRNb3N0XCIsIHJpZ2h0TW9zdCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpIHJldHVybjtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG5cbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gcmlnaHQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKSByZXR1cm47XG4gICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpICE9PSAtMSB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2V0VGltZW91dChzZWxmLmNsb3NlLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gZnVuY3Rpb24gaXNTZWxlY3RhYmxlKGRheSkge1xuICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikgJiYgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0ID0gZmluZFBhcmVudChlLnRhcmdldCwgaXNTZWxlY3RhYmxlKTtcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUodGFyZ2V0LmRhdGVPYmouZ2V0VGltZSgpKTtcbiAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHwgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPiBzZWxmLmN1cnJlbnRNb250aCArIHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxKSAmJiBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtzZWxlY3RlZERhdGVdO2Vsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwibXVsdGlwbGVcIikge1xuICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gaXNEYXRlU2VsZWN0ZWQoc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCkgc2VsZi5zZWxlY3RlZERhdGVzLnNwbGljZShwYXJzZUludChzZWxlY3RlZEluZGV4KSwgMSk7ZWxzZSBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHRydWUpICE9PSAwKSBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG5cbiAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7XG4gICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgIGlmIChpc05ld1llYXIpIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmNvbmZpZy5lbmFibGVUaW1lICYmIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuY29uZmlnLm1pbkRhdGUpID09PSAwKSBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHRydWU7XG4gICAgICAgIH0sIDUwKTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyKHRhcmdldCk7XG4gICAgICAgICAgfSBlbHNlIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2hvdWxkQ2hhbmdlTW9udGggJiYgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiICYmIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpIGZvY3VzT25EYXkodGFyZ2V0LiRpLCAwKTtlbHNlIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSAmJiBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0uZm9jdXMoKTtcbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICB9LCA0NTEpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgdmFyIHNpbmdsZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgdmFyIHJhbmdlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG5cbiAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XG4gICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZV1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNldChvcHRpb24sIHZhbHVlKSB7XG4gICAgICAgIGlmIChvcHRpb24gIT09IG51bGwgJiYgdHlwZW9mIG9wdGlvbiA9PT0gXCJvYmplY3RcIikgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgb3B0aW9uKTtlbHNlIHtcbiAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpIENBTExCQUNLU1tvcHRpb25dLmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZERhdGUoaW5wdXREYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIGRhdGVzID0gW107XG4gICAgICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBBcnJheSkgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7XG4gICAgICAgIH0pO2Vsc2UgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJudW1iZXJcIikgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc3dpdGNoIChzZWxmLmNvbmZpZy5tb2RlKSB7XG4gICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibXVsdGlwbGVcIjpcbiAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxuICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5zcGxpdChzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZCBpbnN0YW5jZW9mIERhdGUgJiYgaXNFbmFibGVkKGQsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXREYXRlKGRhdGUsIHRyaWdnZXJDaGFuZ2UsIGZvcm1hdCkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZm9ybWF0ID0gc2VsZi5jb25maWcuZGF0ZUZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWREYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwO1xuICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSkgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikge1xuICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fCBydWxlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChydWxlICYmIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmIHJ1bGUuZnJvbSAmJiBydWxlLnRvKSByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogc2VsZi5wYXJzZURhdGUocnVsZS5mcm9tLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZClcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0dXBEYXRlcygpIHtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107XG4gICAgICAgIHNlbGYubm93ID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubm93KSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICB2YXIgcHJlbG9hZGVkRGF0ZSA9IHNlbGYuY29uZmlnLmRlZmF1bHREYXRlIHx8IHNlbGYuaW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChwcmVsb2FkZWREYXRlKSBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHZhciBpbml0aWFsRGF0ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwID8gc2VsZi5zZWxlY3RlZERhdGVzWzBdIDogc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKSA/IHNlbGYuY29uZmlnLm1pbkRhdGUgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0VGltZSgpIDwgc2VsZi5ub3cuZ2V0VGltZSgpID8gc2VsZi5jb25maWcubWF4RGF0ZSA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gaW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBpbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkKSBzZWxmLmNvbmZpZy5taW5UaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWluVGltZSwgXCJIOmlcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQpIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWluRGF0ZSAmJiAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWF4RGF0ZSAmJiAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwic2hvd1RpbWVJbnB1dFwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fc2hvd1RpbWVJbnB1dDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2wpIHtcbiAgICAgICAgICAgIHNlbGYuX3Nob3dUaW1lSW5wdXQgPSBib29sO1xuICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIpIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwic2hvd1RpbWVJbnB1dFwiLCBib29sKTtcbiAgICAgICAgICAgIHNlbGYuaXNPcGVuICYmIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cElucHV0cygpIHtcbiAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuY29uZmlnLndyYXAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbnB1dF1cIikgOiBlbGVtZW50O1xuXG4gICAgICAgIGlmICghc2VsZi5pbnB1dCkge1xuICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IGVsZW1lbnQgc3BlY2lmaWVkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0Ll90eXBlID0gc2VsZi5pbnB1dC50eXBlO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xuICAgICAgICBzZWxmLl9pbnB1dCA9IHNlbGYuaW5wdXQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsdElucHV0KSB7XG4gICAgICAgICAgc2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBcIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnRhYkluZGV4ID0gc2VsZi5pbnB1dC50YWJJbmRleDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmFsdElucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dCkgc2VsZi5faW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZi5fcG9zaXRpb25FbGVtZW50ID0gc2VsZi5jb25maWcucG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX2lucHV0O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cE1vYmlsZSgpIHtcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gXCJ0aW1lXCIgOiBcImRhdGV0aW1lLWxvY2FsXCIgOiBcImRhdGVcIjtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBzZWxmLmlucHV0LmNsYXNzTmFtZSArIFwiIGZsYXRwaWNrci1tb2JpbGVcIik7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQuc3RlcCA9IHNlbGYuaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSB8fCBcImFueVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9IGlucHV0VHlwZSA9PT0gXCJkYXRldGltZS1sb2NhbFwiID8gXCJZLW0tZFxcXFxUSDppOlNcIiA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCIgPyBcIlktbS1kXCIgOiBcIkg6aTpTXCI7XG5cbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHNlbGYubW9iaWxlSW5wdXQubWluID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSBzZWxmLm1vYmlsZUlucHV0Lm1heCA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5tYXhEYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSBzZWxmLmFsdElucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLm1vYmlsZUlucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfSBjYXRjaCAoX2EpIHt9XG5cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHNlbGYuc2V0RGF0ZShlLnRhcmdldC52YWx1ZSwgZmFsc2UsIHNlbGYubW9iaWxlRm9ybWF0U3RyKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4pIHJldHVybiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdmFyIGhvb2tzID0gc2VsZi5jb25maWdbZXZlbnRdO1xuXG4gICAgICAgIGlmIChob29rcyAhPT0gdW5kZWZpbmVkICYmIGhvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaG9va3NbaV0gJiYgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiY2hhbmdlXCIpKTtcbiAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJpbnB1dFwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgICAgIGUuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNEYXRlU2VsZWN0ZWQoZGF0ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZi5zZWxlY3RlZERhdGVzW2ldLCBkYXRlKSA9PT0gMCkgcmV0dXJuIFwiXCIgKyBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSkgPj0gMCAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA8PSAwO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KSByZXR1cm47XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHllYXJFbGVtZW50LCBpKSB7XG4gICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICB5ZWFyRWxlbWVudC52YWx1ZSA9IGQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID0gc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCA8PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID0gc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHNlbGYuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG5cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikge1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cikgOiBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGpvaW5DaGFyID0gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiID8gc2VsZi5jb25maWcuY29uanVuY3Rpb24gOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3I7XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG5cbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIHNlbGYuY29uZmlnLmFsdEZvcm1hdCk7XG4gICAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBpc1ByZXZNb250aCA9IHNlbGYucHJldk1vbnRoTmF2LmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIGlzTmV4dE1vbnRoID0gc2VsZi5uZXh0TW9udGhOYXYuY29udGFpbnMoZS50YXJnZXQpO1xuXG4gICAgICAgIGlmIChpc1ByZXZNb250aCB8fCBpc05leHRNb250aCkge1xuICAgICAgICAgIGNoYW5nZU1vbnRoKGlzUHJldk1vbnRoID8gLTEgOiAxKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLnllYXJFbGVtZW50cy5pbmRleE9mKGUudGFyZ2V0KSA+PSAwKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikpIHtcbiAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93RG93blwiKSkge1xuICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLFxuICAgICAgICAgICAgaW5wdXQgPSBlLnRhcmdldDtcblxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiKSksXG4gICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKSxcbiAgICAgICAgICAgIHN0ZXAgPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSksXG4gICAgICAgICAgICBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksXG4gICAgICAgICAgICBkZWx0YSA9IGUuZGVsdGEgfHwgKGlzS2V5RG93biA/IGUud2hpY2ggPT09IDM4ID8gMSA6IC0xIDogMCk7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1clZhbHVlICsgc3RlcCAqIGRlbHRhO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgdmFyIGlzSG91ckVsZW0gPSBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCxcbiAgICAgICAgICAgICAgaXNNaW51dGVFbGVtID0gaW5wdXQgPT09IHNlbGYubWludXRlRWxlbWVudDtcblxuICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IG1pbikge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBtYXggKyBuZXdWYWx1ZSArIGludCghaXNIb3VyRWxlbSkgKyAoaW50KGlzSG91ckVsZW0pICYmIGludCghc2VsZi5hbVBNKSk7XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50ID8gbmV3VmFsdWUgLSBtYXggLSBpbnQoIXNlbGYuYW1QTSkgOiBtaW47XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmFtUE0gJiYgaXNIb3VyRWxlbSAmJiAoc3RlcCA9PT0gMSA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5pdCgpO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2ZsYXRwaWNrcihub2RlTGlzdCwgY29uZmlnKSB7XG4gICAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2RlTGlzdCk7XG4gICAgICB2YXIgaW5zdGFuY2VzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbCkgY29udGludWU7XG5cbiAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG5cbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlLl9mbGF0cGlja3IgPSBGbGF0cGlja3JJbnN0YW5jZShub2RlLCBjb25maWcgfHwge30pO1xuICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0cGlja3IgPSBOb2RlTGlzdC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgICAgfTtcblxuICAgICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpIHtcbiAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGVMaXN0KSByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTtlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTtcbiAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gZGVmYXVsdHM7XG4gICAgZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgICAgZW46IE9iamVjdC5hc3NpZ24oe30sIGVuZ2xpc2gpLFxuICAgICAgZGVmYXVsdDogT2JqZWN0LmFzc2lnbih7fSwgZW5nbGlzaClcbiAgICB9O1xuXG4gICAgZmxhdHBpY2tyLmxvY2FsaXplID0gZnVuY3Rpb24gKGwxMG4pIHtcbiAgICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQsIGwxMG4pO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLCBjb25maWcpO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3IucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7fSk7XG4gICAgZmxhdHBpY2tyLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHt9KTtcbiAgICBmbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuXG4gICAgaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIERhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSArICh0eXBlb2YgZGF5cyA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlSW50KGRheXMsIDEwKSA6IGRheXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZsYXRwaWNrcjtcblxufSkpKTtcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGdhbGxlcnlTZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5nYWxsZXJ5LXdyYXBwZXInKTtcblxuICBpZiAoIWdhbGxlcnlTZWN0aW9ucykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChnYWxsZXJ5U2VjdGlvbnMsIGZ1bmN0aW9uIChnYWxsZXJ5KSB7XG4gICAgdmFyIGFkZEltYWdlID0gZ2FsbGVyeS5xdWVyeVNlbGVjdG9yKCcuYWRkLWdhbGxlcnktaW1hZ2VzJyk7XG4gICAgdmFyIEhpZGRlbiA9ICgwLCBfc2VyaWFsaXplZElucHV0Mi5kZWZhdWx0KShnYWxsZXJ5LCAnLmltYWdlLWdhbGxlcnktaGlkZGVuJyk7XG5cbiAgICB2YXIgcmVtb3ZlID0gKDAsIF91dGlsaXRpZXMucmVtb3ZlSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vblJlbW92ZUltYWdlKTtcbiAgICB2YXIgZHJhZyA9ICgwLCBfdXRpbGl0aWVzLmRyYWdJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uRHJhZ0ltYWdlKTtcbiAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkoZ2FsbGVyeSwge1xuICAgICAgbGlzdDogJy5nYWxsZXJ5LWltYWdlcycsXG4gICAgICBvbkRyYWc6IGRyYWcsXG4gICAgICBvblJlbW92ZTogcmVtb3ZlLFxuICAgICAgbGlzdFRlbXBsYXRlOiBpbWFnZUl0ZW1cbiAgICB9KTtcblxuICAgIHZhciBtZWRpYUZyYW1lID0gd3AubWVkaWEoe1xuICAgICAgdGl0bGU6ICdDaG9vc2UgTWVkaWEnLFxuICAgICAgYnV0dG9uOiB7XG4gICAgICAgIHRleHQ6ICdVc2UgU2VsZWN0ZWQgTWVkaWEnXG4gICAgICB9LFxuICAgICAgbXVsdGlwbGU6IHRydWVcbiAgICB9KTtcblxuICAgIGFkZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgbWVkaWFGcmFtZS5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBtZWRpYUZyYW1lLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXR0YWNobWVudHMgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS50b0pTT04oKTtcblxuICAgICAgYXR0YWNobWVudHMuZm9yRWFjaChmdW5jdGlvbiAoYXR0YWNobWVudCkge1xuICAgICAgICBMaXN0LmFkZChhdHRhY2htZW50KTtcbiAgICAgICAgSGlkZGVuLmFkZChhdHRhY2htZW50LmlkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBpbWFnZUl0ZW0gPSBmdW5jdGlvbiBpbWFnZUl0ZW0oaW1hZ2UpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJnYWxsZXJ5LWltYWdlLWl0ZW1cIj48c3BhbiBjbGFzcz1cImdhbGxlcnktaWFtZ2UtaWRcIj4nICsgaW1hZ2UuaWQgKyAnPC9zcGFuPjxpbWcgc3JjPVwiJyArIGltYWdlLnVybCArICdcIiBjbGFzcz1cImdhbGxlcnktaW1hZ2VcIi8+PHNwYW4+PHN2ZyBjbGFzcz1cInJlbW92ZS1nYWxsZXJ5LWltYWdlXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbjwvc3ZnPjwvc3Bhbj48L2xpPic7XG59O1xuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHRhYmxlTGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtbGlzdCcpO1xuXG4gIGlmICghdGFibGVMaXN0cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbCh0YWJsZUxpc3RzLCBmdW5jdGlvbiAodGFibGVMaXN0KSB7XG4gICAgdmFyIGFkZFJvdyA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1hZGQnKTtcbiAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKHRhYmxlTGlzdCwgJy50YWJsZS1saXN0LWhpZGRlbicpO1xuICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlVGFibGUpO1xuICAgIHZhciBkcmFnID0gKDAsIF91dGlsaXRpZXMuZHJhZ0l0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25EcmFnVGFibGUpO1xuICAgIHZhciBMaXN0ID0gKDAsIF9saXN0Mi5kZWZhdWx0KSh0YWJsZUxpc3QsIHtcbiAgICAgIGxpc3Q6ICcudGFibGUtbGlzdC1saXN0JyxcbiAgICAgIG9uRHJhZzogZHJhZyxcbiAgICAgIG9uUmVtb3ZlOiByZW1vdmUsXG4gICAgICBsaXN0VGVtcGxhdGU6IHRhYmxlSXRlbVxuICAgIH0pO1xuXG4gICAgdmFyIHdyYXBwZXIgPSB0YWJsZUxpc3QucXVlcnlTZWxlY3RvcignLnRleHQtbGlzdC13cmFwcGVyJyk7XG4gICAgdmFyIGtleSA9IHdyYXBwZXIucXVlcnlTZWxlY3RvcignLnRhYmxlLWxpc3Qta2V5Jyk7XG4gICAgdmFyIHZhbHVlID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC12YWx1ZScpO1xuXG4gICAgYWRkUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB2YXIgcm93RGF0YSA9IHtcbiAgICAgICAga2V5OiBrZXkudmFsdWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgfTtcblxuICAgICAgTGlzdC5hZGQocm93RGF0YSk7XG4gICAgICBIaWRkZW4uYWRkKHJvd0RhdGEpO1xuXG4gICAgICBrZXkudmFsdWUgPSAnJztcbiAgICAgIHZhbHVlLnZhbHVlID0gJyc7XG4gICAgfSk7XG4gIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc2VyaWFsaXplZElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcmlhbGl6ZWRJbnB1dCk7XG5cbnZhciBfdXRpbGl0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHRhYmxlSXRlbSA9IGZ1bmN0aW9uIHRhYmxlSXRlbShyb3dEYXRhKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW0gdGFibGUtbGlzdC1pdGVtXCI+XFxuICAgIDxzcGFuIGNsYXNzPVwidGFibGUtbGlzdC1rZXlcIj4nICsgcm93RGF0YS5rZXkgKyAnPC9zcGFuPlxcbiAgICA8c3BhbiBjbGFzcz1cInRhYmxlLWxpc3QtdmFsdWVcIj4nICsgcm93RGF0YS52YWx1ZSArICc8L3NwYW4+XFxuICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04IDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbiAgICA8L3N2Zz5cXG48L2xpPic7XG59O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LmJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDBlZWJiNThmMTIyMzFlYmM0MzBmIiwidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBkcmFndWxhIGZyb20gJ2RyYWd1bGEnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiggcGFyZW50LCBhcmdzICkge1xuICAgIGNvbnN0IGxpc3QgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihhcmdzLmxpc3QpO1xuXG4gICAgcmVnaXN0ZXJEcmFnRXZlbnRzKGxpc3QsIGFyZ3Mub25EcmFnKTtcbiAgICByZWdpc3RlclJlbW92ZUV2ZW50cyhsaXN0LCBhcmdzLm9uUmVtb3ZlKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFkZDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBhcmdzLmxpc3RUZW1wbGF0ZSggdmFsdWUgKTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG5cbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoIGxpc3RJdGVtICk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gKGxpc3QsIG9uUmVtb3ZlKSA9PiB7XG4gICAgY29uc3QgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9ICgnc3ZnJyA9PT0gZS50YXJnZXQudGFnTmFtZSkgPyBlLnRhcmdldCA6IGUudGFyZ2V0LmNsb3Nlc3QoJ3N2ZycpO1xuXG4gICAgICAgIGlmICggJ3N2ZycgPT09IHRhcmdldC50YWdOYW1lICkge1xuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgICAgICAgICAgbGlzdC5yZW1vdmVDaGlsZCggbGlzdEl0ZW0gKTtcbiAgICAgICAgICAgIG9uUmVtb3ZlKCB2YWx1ZSApO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbGlzdEl0ZW1zO1xufVxuXG5jb25zdCByZWdpc3RlckRyYWdFdmVudHMgPSAobGlzdCwgY2FsbGJhY2spID0+IHtcbiAgICBjb25zdCBkcmFrZSA9IGRyYWd1bGEoW2xpc3RdKTtcblxuICAgIGRyYWtlLm9uKCdkcmFnZW5kJywgKGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcbiAgICAgICAgY2FsbGJhY2sobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICB9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpc3QuanMiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbihwYXJlbnQsIGhpZGRlbklucHV0KSB7XG4gIGNvbnN0IGhpZGRlbkVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoaGlkZGVuSW5wdXQpO1xuXG4gIGNvbnN0IGdldEN1cnJlbnRWYWx1ZSA9ICgpID0+XG4gICAgaGlkZGVuRWwudmFsdWUgPyBKU09OLnBhcnNlKGhpZGRlbkVsLnZhbHVlKSA6IFtdO1xuXG4gIGNvbnN0IGFkZFZhbHVlID0gdmFsdWUgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuICAgIHJldHVybiBjdXJyZW50VmFsdWUuY29uY2F0KHZhbHVlKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVWYWx1ZSA9ICh2YWx1ZSwgb25SZW1vdmUpID0+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICByZXR1cm4gb25SZW1vdmUoY3VycmVudFZhbHVlLCB2YWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KGFkZFZhbHVlKHZhbHVlKSk7XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uKHZhbHVlLCBvblJlbW92ZSkge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShyZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpKTtcbiAgICB9LFxuICAgIHVwZGF0ZTogZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlcyk7XG4gICAgfSxcbiAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NlcmlhbGl6ZWQtaW5wdXQuanMiLCJleHBvcnQgY29uc3QgcmVtb3ZlSXRlbXMgPSAoSGlkZGVuLCBvblJlbW92ZSkgPT4ge1xuICByZXR1cm4gdmFsdWUgPT4ge1xuICAgIEhpZGRlbi5yZW1vdmUodmFsdWUsIG9uUmVtb3ZlKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBkcmFnSXRlbXMgPSAoSGlkZGVuLCBvbkRyYWcpID0+IHtcbiAgcmV0dXJuIChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgICBjb25zdCB2YWx1ZXMgPSBvbkRyYWcobGlzdCwgbGlzdEl0ZW1zKTtcbiAgICBIaWRkZW4udXBkYXRlKHZhbHVlcyk7XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnT2JqZWN0ID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdEl0ZW1zLFxuICAgIChhY2MsIGxpc3RJdGVtKSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHtcbiAgICAgICAgaWQ6IGxpc3RJdGVtLmRhdGFzZXQuaWQsXG4gICAgICAgIHRpdGxlOiBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnVGV4dCA9IChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKFxuICAgIGxpc3RJdGVtcyxcbiAgICAoYWNjLCBsaXN0SXRlbSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRyYWdJbWFnZSA9IChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKFxuICAgIGxpc3RJdGVtcyxcbiAgICAoYWNjLCBsaXN0SXRlbSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MKTtcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25SZW1vdmVPYmplY3QgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihjdXJyZW50ID0+IGN1cnJlbnQudGl0bGUgIT09IG5ld1ZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZVRleHQgPSAoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xuICByZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihjdXJyZW50ID0+IGN1cnJlbnQgIT09IG5ld1ZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZUltYWdlID0gKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoY3VycmVudCA9PiBjdXJyZW50ICE9PSBwYXJzZUludChuZXdWYWx1ZSkpO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uRHJhZ1RhYmxlID0gKGxpc3QsIGxpc3RJdGVtcykgPT4ge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdEl0ZW1zLFxuICAgIChhY2MsIGxpc3RJdGVtKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1rZXknKS5pbm5lckhUTUw7XG4gICAgICBjb25zdCB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LXZhbHVlJykuaW5uZXJIVE1MO1xuICAgICAgcmV0dXJuIGFjYy5jb25jYXQoW3sga2V5OiBrZXksIHZhbHVlOiB2YWx1ZSB9XSk7XG4gICAgfSxcbiAgICBbXSxcbiAgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZVRhYmxlID0gKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoY3VycmVudCA9PiBjdXJyZW50LmtleSAhPT0gbmV3VmFsdWUpO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3V0aWxpdGllcy5qcyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGF1dG9zdWdnZXN0LCBlbmRwb2ludCwgb25TZWxlY3QsIG9uRW1wdHkpIHtcbiAgaWYgKCFhdXRvc3VnZ2VzdCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCB4aHIgPSBmYWxzZTtcblxuICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGUgPT4ge1xuICAgIGlmICgwID09PSBlLnRhcmdldC52YWx1ZS5sZW5ndGggJiYgb25FbXB0eSkge1xuICAgICAgb25FbXB0eSgpO1xuICAgIH1cblxuICAgIGlmICgzID4gZS50YXJnZXQudmFsdWUubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgYXV0b3N1Z2dlc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAgIHhociA9IGdldE9wdGlvbnMoeGhyLCB1cGRhdGVPcHRpb25zLCBhdXRvc3VnZ2VzdCwgZW5kcG9pbnQpO1xuICB9KTtcbiAgYXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBlID0+IHtcbiAgICBjb25zdCB2YWx1ZSA9IG9uQXV0b1N1Z2dlc3RJbnB1dChlKTtcblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgb25TZWxlY3QodmFsdWUsIGF1dG9zdWdnZXN0KTtcbiAgICB9XG4gIH0pO1xufVxuXG5jb25zdCBvbkF1dG9TdWdnZXN0SW5wdXQgPSBlID0+IHtcbiAgY29uc3QgaW5wdXQgPSBlLnRhcmdldDtcbiAgY29uc3QgaW5wdXRWYWx1ZSA9IGlucHV0LnZhbHVlO1xuICBjb25zdCBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICBjb25zdCBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG4gIGNvbnN0IG1hdGNoID0gW10ucmVkdWNlLmNhbGwoXG4gICAgbGlzdE9wdGlvbnMsXG4gICAgKGFjYywgb3B0aW9uKSA9PiB7XG4gICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBhY2MuY29uY2F0KHtcbiAgICAgICAgICBpZDogb3B0aW9uLmRhdGFzZXQuaWQsXG4gICAgICAgICAgdGl0bGU6IG9wdGlvbi52YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG5cbiAgcmV0dXJuIDAgPT09IG1hdGNoLmxlbmd0aCA/IGZhbHNlIDogbWF0Y2hbMF07XG59O1xuXG5jb25zdCBnZXRPcHRpb25zID0gKHhociwgY2FsbGJhY2ssIGlucHV0LCBlbmRwb2ludCkgPT4ge1xuICBjb25zdCBxdWVyeSA9IGJ1aWxkUXVlcnkoaW5wdXQudmFsdWUpO1xuICBjb25zdCB1cmwgPSBlbmRwb2ludCArIHF1ZXJ5O1xuXG4gIGlmICh4aHIpIHtcbiAgICB4aHIuYWJvcnQoKTtcbiAgfVxuXG4gIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gIHhoci5hZGRFdmVudExpc3RlbmVyKFxuICAgICdsb2FkJyxcbiAgICBldnQgPT4ge1xuICAgICAgY2FsbGJhY2soZmFsc2UsIGV2dCk7XG4gICAgfSxcbiAgICBmYWxzZSxcbiAgKTtcblxuICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgY2FsbGJhY2soZmFsc2UsIHsgcmVzdWx0czogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgaW5wdXQ6IGlucHV0IH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoeGhyLnJlc3BvbnNlVGV4dCAmJiBpc0pTT04oeGhyLnJlc3BvbnNlVGV4dCkpIHtcbiAgICAgICAgY2FsbGJhY2soXG4gICAgICAgICAgeyBtZXNzYWdlOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSxcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgJ2Vycm9yJyxcbiAgICBldnQgPT4ge1xuICAgICAgY2FsbGJhY2soZXZ0LCBmYWxzZSk7XG4gICAgfSxcbiAgICBmYWxzZSxcbiAgKTtcblxuICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAnYWJvcnQnLFxuICAgIGV2dCA9PiB7XG4gICAgICBjYWxsYmFjayh0cnVlLCBmYWxzZSk7XG4gICAgfSxcbiAgICBmYWxzZSxcbiAgKTtcblxuICB4aHIub3BlbignR0VUJywgdXJsLCB0cnVlKTtcblxuICB4aHIuc2VuZCgpO1xuXG4gIHJldHVybiB4aHI7XG59O1xuXG5jb25zdCB1cGRhdGVPcHRpb25zID0gKGVycm9yLCByZXNwb25zZSkgPT4ge1xuICBpZiAoZXJyb3IpIHtcbiAgICBpZiAodHJ1ZSA9PT0gZXJyb3IpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBlcnJvci5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgfVxuXG4gIGlmIChyZXNwb25zZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShyZXNwb25zZS5yZXN1bHRzKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNyZWF0ZU9wdGlvbnMocmVzcG9uc2UucmVzdWx0cywgcmVzcG9uc2UuaW5wdXQpO1xuICB9XG59O1xuXG5jb25zdCBjcmVhdGVPcHRpb25zID0gKHJlc3VsdHMsIGlucHV0KSA9PiB7XG4gIGNvbnN0IGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gIGNvbnN0IGRhdGFsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpO1xuXG4gIGNvbnN0IG5ld09wdGlvbnMgPSByZXN1bHRzLnJlZHVjZSgoYWNjLCByZXN1bHQpID0+IHtcbiAgICBjb25zdCBvcHRpb24gPSBjcmVhdGVPcHRpb24ocmVzdWx0KTtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChvcHRpb24pO1xuICB9LCAnJyk7XG5cbiAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICBkYXRhbGlzdC5pbm5lckhUTUwgPSBuZXdPcHRpb25zO1xufTtcblxuY29uc3QgY3JlYXRlT3B0aW9uID0gdmFsdWUgPT4ge1xuICBpZiAodmFsdWUudGl0bGUpIHtcbiAgICByZXR1cm4gYDxvcHRpb24gZGF0YS1pZD0ke3ZhbHVlLmlkfSB2YWx1ZT1cIiR7dmFsdWUudGl0bGUucmVuZGVyZWR9XCI+YDtcbiAgfVxuXG4gIGlmICh2YWx1ZS5uYW1lKSB7XG4gICAgcmV0dXJuIGA8b3B0aW9uIGRhdGEtaWQ9JHt2YWx1ZS5pZH0gdmFsdWU9XCIke3ZhbHVlLm5hbWV9XCI+YDtcbiAgfVxufTtcblxuY29uc3QgaXNKU09OID0gc3RyID0+IHtcbiAgaWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgSlNPTi5wYXJzZShzdHIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5jb25zdCBidWlsZFF1ZXJ5ID0gdmFsdWUgPT4ge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG9zdWdnZXN0LmpzIiwiaW1wb3J0IGJhc2VDc3MgZnJvbSAnLi4vY3NzL2luZGV4LmNzcyc7XG5pbXBvcnQgdGV4dExpc3QgZnJvbSAnLi90ZXh0LWxpc3QnO1xuaW1wb3J0IGF1dG9MaXN0IGZyb20gJy4vYXV0b3N1Z2dlc3QtbGlzdCc7XG5pbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGF1dG9JdGVtIGZyb20gJy4vYXV0by1pdGVtJztcbmltcG9ydCBpbWFnZVVwbG9hZHMgZnJvbSAnLi9pbWFnZS11cGxvYWRzJztcbmltcG9ydCBkYXRlcGlja2VyIGZyb20gJy4vZGF0ZXBpY2tlcic7XG5pbXBvcnQgZ2FsbGVyeSBmcm9tICcuL2dhbGxlcnknO1xuaW1wb3J0IHRhYmxlTGlzdCBmcm9tICcuL3RhYmxlLWxpc3QnO1xuXG5jb25zdCBjcmVhdGVUZXh0SXRlbSA9IHZhbHVlID0+IHtcbiAgcmV0dXJuIGA8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiPlxuICAgICAgICA8c3Bhbj4ke3ZhbHVlfTwvc3Bhbj5cbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG4gICAgICAgIDwvc3ZnPlxuICAgIDwvbGk+YDtcbn07XG5cbmNvbnN0IGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSA9IHZhbHVlID0+IHtcbiAgcmV0dXJuIGA8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiIGRhdGEtaWQ9XCIke3ZhbHVlLmlkfVwiPlxuICAgICAgICA8c3Bhbj4ke3ZhbHVlLnRpdGxlfTwvc3Bhbj5cbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG4gICAgICAgIDwvc3ZnPlxuICAgIDwvbGk+YDtcbn07XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgaW1hZ2VVcGxvYWRzKCk7XG4gIHRleHRMaXN0KHtcbiAgICBwYXJlbnQ6ICcudGV4dC1saXN0JyxcbiAgICBidXR0b246ICcudGV4dC1saXN0LWFkZCcsXG4gICAgbGlzdDogJy50ZXh0LWxpc3QtbGlzdCcsXG4gICAgaGlkZGVuOiAnLnRleHQtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlVGV4dEl0ZW0sXG4gIH0pO1xuXG4gIGF1dG9MaXN0KHtcbiAgICBwYXJlbnQ6ICcuYXV0b3N1Z2dlc3QtbGlzdCcsXG4gICAgaW5wdXQ6ICdhdXRvc3VnZ2VzdC1saXN0LWlucHV0JyxcbiAgICBsaXN0OiAnLmF1dG9zdWdnZXN0LWxpc3QtbGlzdCcsXG4gICAgaGlkZGVuOiAnLmF1dG9zdWdnZXN0LWxpc3QtaGlkZGVuJyxcbiAgICBsaXN0VGVtcGxhdGU6IGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSxcbiAgfSk7XG5cbiAgYXV0b0l0ZW0oe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC13cmFwcGVyJyxcbiAgICBpbnB1dDogJy5hdXRvc3VnZ2VzdC1pbnB1dCcsXG4gICAgaGlkZGVuOiAnLmF1dG9zdWdnZXN0LWhpZGRlbicsXG4gIH0pO1xuXG4gIGRhdGVwaWNrZXIoKTtcbiAgZ2FsbGVyeSgpO1xuICB0YWJsZUxpc3QoKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaW5kZXguanMiLCJpbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGhpZGRlbiBmcm9tICcuL3NlcmlhbGl6ZWQtaW5wdXQnO1xuaW1wb3J0IHsgcmVtb3ZlSXRlbXMsIGRyYWdJdGVtcywgb25EcmFnVGV4dCwgb25SZW1vdmVUZXh0IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiggYXJncyApIHtcbiAgICBjb25zdCBsaXN0RmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoICEgbGlzdEZpZWxkcyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbCggbGlzdEZpZWxkcywgKCBsaXN0RmllbGQgKSA9PiB7XG4gICAgICAgIGNvbnN0IHRleHRJbnB1dCA9IGxpc3RGaWVsZC5xdWVyeVNlbGVjdG9yKCAnaW5wdXRbdHlwZT10ZXh0XScgKTtcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoIGFyZ3MuYnV0dG9uICk7XG4gICAgICAgIGNvbnN0IEhpZGRlbiA9IGhpZGRlbiggbGlzdEZpZWxkLCBhcmdzLmhpZGRlbiApO1xuICAgICAgICBjb25zdCByZW1vdmUgPSByZW1vdmVJdGVtcyggSGlkZGVuLCBvblJlbW92ZVRleHQgKTtcbiAgICAgICAgY29uc3QgZHJhZyA9IGRyYWdJdGVtcyggSGlkZGVuLCBvbkRyYWdUZXh0ICk7XG4gICAgICAgIGNvbnN0IExpc3QgPSBsaXN0KCBsaXN0RmllbGQsIE9iamVjdC5hc3NpZ24oIGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlfSApICk7XG5cbiAgICAgICAgbGlzdEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoICdrZXlwcmVzcycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIDEzID09PSBlLmtleUNvZGUgKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIExpc3QuYWRkKCB0ZXh0SW5wdXQudmFsdWUgKTtcbiAgICAgICAgICAgICAgICBIaWRkZW4uYWRkKCB0ZXh0SW5wdXQudmFsdWUgKTtcbiAgICAgICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgTGlzdC5hZGQoIHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICBIaWRkZW4uYWRkKCB0ZXh0SW5wdXQudmFsdWUgKTtcbiAgICAgICAgICAgIHRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICB9ICk7XG5cbiAgICB9ICk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi90ZXh0LWxpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbWl0dGVyID0gcmVxdWlyZSgnY29udHJhL2VtaXR0ZXInKTtcbnZhciBjcm9zc3ZlbnQgPSByZXF1aXJlKCdjcm9zc3ZlbnQnKTtcbnZhciBjbGFzc2VzID0gcmVxdWlyZSgnLi9jbGFzc2VzJyk7XG52YXIgZG9jID0gZG9jdW1lbnQ7XG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuZnVuY3Rpb24gZHJhZ3VsYSAoaW5pdGlhbENvbnRhaW5lcnMsIG9wdGlvbnMpIHtcbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPT09IDEgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsQ29udGFpbmVycykgPT09IGZhbHNlKSB7XG4gICAgb3B0aW9ucyA9IGluaXRpYWxDb250YWluZXJzO1xuICAgIGluaXRpYWxDb250YWluZXJzID0gW107XG4gIH1cbiAgdmFyIF9taXJyb3I7IC8vIG1pcnJvciBpbWFnZVxuICB2YXIgX3NvdXJjZTsgLy8gc291cmNlIGNvbnRhaW5lclxuICB2YXIgX2l0ZW07IC8vIGl0ZW0gYmVpbmcgZHJhZ2dlZFxuICB2YXIgX29mZnNldFg7IC8vIHJlZmVyZW5jZSB4XG4gIHZhciBfb2Zmc2V0WTsgLy8gcmVmZXJlbmNlIHlcbiAgdmFyIF9tb3ZlWDsgLy8gcmVmZXJlbmNlIG1vdmUgeFxuICB2YXIgX21vdmVZOyAvLyByZWZlcmVuY2UgbW92ZSB5XG4gIHZhciBfaW5pdGlhbFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIHdoZW4gZ3JhYmJlZFxuICB2YXIgX2N1cnJlbnRTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyBub3dcbiAgdmFyIF9jb3B5OyAvLyBpdGVtIHVzZWQgZm9yIGNvcHlpbmdcbiAgdmFyIF9yZW5kZXJUaW1lcjsgLy8gdGltZXIgZm9yIHNldFRpbWVvdXQgcmVuZGVyTWlycm9ySW1hZ2VcbiAgdmFyIF9sYXN0RHJvcFRhcmdldCA9IG51bGw7IC8vIGxhc3QgY29udGFpbmVyIGl0ZW0gd2FzIG92ZXJcbiAgdmFyIF9ncmFiYmVkOyAvLyBob2xkcyBtb3VzZWRvd24gY29udGV4dCB1bnRpbCBmaXJzdCBtb3VzZW1vdmVcblxuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvLm1vdmVzID09PSB2b2lkIDApIHsgby5tb3ZlcyA9IGFsd2F5czsgfVxuICBpZiAoby5hY2NlcHRzID09PSB2b2lkIDApIHsgby5hY2NlcHRzID0gYWx3YXlzOyB9XG4gIGlmIChvLmludmFsaWQgPT09IHZvaWQgMCkgeyBvLmludmFsaWQgPSBpbnZhbGlkVGFyZ2V0OyB9XG4gIGlmIChvLmNvbnRhaW5lcnMgPT09IHZvaWQgMCkgeyBvLmNvbnRhaW5lcnMgPSBpbml0aWFsQ29udGFpbmVycyB8fCBbXTsgfVxuICBpZiAoby5pc0NvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8uaXNDb250YWluZXIgPSBuZXZlcjsgfVxuICBpZiAoby5jb3B5ID09PSB2b2lkIDApIHsgby5jb3B5ID0gZmFsc2U7IH1cbiAgaWYgKG8uY29weVNvcnRTb3VyY2UgPT09IHZvaWQgMCkgeyBvLmNvcHlTb3J0U291cmNlID0gZmFsc2U7IH1cbiAgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmV2ZXJ0T25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJlbW92ZU9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5kaXJlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCc7IH1cbiAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID09PSB2b2lkIDApIHsgby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPSB0cnVlOyB9XG4gIGlmIChvLm1pcnJvckNvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8ubWlycm9yQ29udGFpbmVyID0gZG9jLmJvZHk7IH1cblxuICB2YXIgZHJha2UgPSBlbWl0dGVyKHtcbiAgICBjb250YWluZXJzOiBvLmNvbnRhaW5lcnMsXG4gICAgc3RhcnQ6IG1hbnVhbFN0YXJ0LFxuICAgIGVuZDogZW5kLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgY2FuTW92ZTogY2FuTW92ZSxcbiAgICBkcmFnZ2luZzogZmFsc2VcbiAgfSk7XG5cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdHJ1ZSkge1xuICAgIGRyYWtlLm9uKCdvdmVyJywgc3BpbGxPdmVyKS5vbignb3V0Jywgc3BpbGxPdXQpO1xuICB9XG5cbiAgZXZlbnRzKCk7XG5cbiAgcmV0dXJuIGRyYWtlO1xuXG4gIGZ1bmN0aW9uIGlzQ29udGFpbmVyIChlbCkge1xuICAgIHJldHVybiBkcmFrZS5jb250YWluZXJzLmluZGV4T2YoZWwpICE9PSAtMSB8fCBvLmlzQ29udGFpbmVyKGVsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlZG93bicsIGdyYWIpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2V1cCcsIHJlbGVhc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnR1YWxNb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZW1vdmUnLCBzdGFydEJlY2F1c2VNb3VzZU1vdmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ3NlbGVjdHN0YXJ0JywgcHJldmVudEdyYWJiZWQpOyAvLyBJRThcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ2NsaWNrJywgcHJldmVudEdyYWJiZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSAoKSB7XG4gICAgZXZlbnRzKHRydWUpO1xuICAgIHJlbGVhc2Uoe30pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJldmVudEdyYWJiZWQgKGUpIHtcbiAgICBpZiAoX2dyYWJiZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBncmFiIChlKSB7XG4gICAgX21vdmVYID0gZS5jbGllbnRYO1xuICAgIF9tb3ZlWSA9IGUuY2xpZW50WTtcblxuICAgIHZhciBpZ25vcmUgPSB3aGljaE1vdXNlQnV0dG9uKGUpICE9PSAxIHx8IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XG4gICAgaWYgKGlnbm9yZSkge1xuICAgICAgcmV0dXJuOyAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgaG9uZXN0LXRvLWdvZCBsZWZ0IGNsaWNrcyBhbmQgdG91Y2ggZXZlbnRzXG4gICAgfVxuICAgIHZhciBpdGVtID0gZS50YXJnZXQ7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX2dyYWJiZWQgPSBjb250ZXh0O1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKCk7XG4gICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicpIHtcbiAgICAgIGlmIChpc0lucHV0KGl0ZW0pKSB7IC8vIHNlZSBhbHNvOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjA4XG4gICAgICAgIGl0ZW0uZm9jdXMoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE3NlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTU1XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCAoZSkge1xuICAgIGlmICghX2dyYWJiZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdoaWNoTW91c2VCdXR0b24oZSkgPT09IDApIHtcbiAgICAgIHJlbGVhc2Uoe30pO1xuICAgICAgcmV0dXJuOyAvLyB3aGVuIHRleHQgaXMgc2VsZWN0ZWQgb24gYW4gaW5wdXQgYW5kIHRoZW4gZHJhZ2dlZCwgbW91c2V1cCBkb2Vzbid0IGZpcmUuIHRoaXMgaXMgb3VyIG9ubHkgaG9wZVxuICAgIH1cbiAgICAvLyB0cnV0aHkgY2hlY2sgZml4ZXMgIzIzOSwgZXF1YWxpdHkgZml4ZXMgIzIwN1xuICAgIGlmIChlLmNsaWVudFggIT09IHZvaWQgMCAmJiBlLmNsaWVudFggPT09IF9tb3ZlWCAmJiBlLmNsaWVudFkgIT09IHZvaWQgMCAmJiBlLmNsaWVudFkgPT09IF9tb3ZlWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24pIHtcbiAgICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICBpZiAoaXNJbnB1dChlbGVtZW50QmVoaW5kQ3Vyc29yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyYWJiZWQgPSBfZ3JhYmJlZDsgLy8gY2FsbCB0byBlbmQoKSB1bnNldHMgX2dyYWJiZWRcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHMoKTtcbiAgICBlbmQoKTtcbiAgICBzdGFydChncmFiYmVkKTtcblxuICAgIHZhciBvZmZzZXQgPSBnZXRPZmZzZXQoX2l0ZW0pO1xuICAgIF9vZmZzZXRYID0gZ2V0Q29vcmQoJ3BhZ2VYJywgZSkgLSBvZmZzZXQubGVmdDtcbiAgICBfb2Zmc2V0WSA9IGdldENvb3JkKCdwYWdlWScsIGUpIC0gb2Zmc2V0LnRvcDtcblxuICAgIGNsYXNzZXMuYWRkKF9jb3B5IHx8IF9pdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIHJlbmRlck1pcnJvckltYWdlKCk7XG4gICAgZHJhZyhlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblN0YXJ0IChpdGVtKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nICYmIF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQ29udGFpbmVyKGl0ZW0pKSB7XG4gICAgICByZXR1cm47IC8vIGRvbid0IGRyYWcgY29udGFpbmVyIGl0c2VsZlxuICAgIH1cbiAgICB2YXIgaGFuZGxlID0gaXRlbTtcbiAgICB3aGlsZSAoZ2V0UGFyZW50KGl0ZW0pICYmIGlzQ29udGFpbmVyKGdldFBhcmVudChpdGVtKSkgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaXRlbSA9IGdldFBhcmVudChpdGVtKTsgLy8gZHJhZyB0YXJnZXQgc2hvdWxkIGJlIGEgdG9wIGVsZW1lbnRcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1vdmFibGUgPSBvLm1vdmVzKGl0ZW0sIHNvdXJjZSwgaGFuZGxlLCBuZXh0RWwoaXRlbSkpO1xuICAgIGlmICghbW92YWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpdGVtOiBpdGVtLFxuICAgICAgc291cmNlOiBzb3VyY2VcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuTW92ZSAoaXRlbSkge1xuICAgIHJldHVybiAhIWNhblN0YXJ0KGl0ZW0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFudWFsU3RhcnQgKGl0ZW0pIHtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBzdGFydChjb250ZXh0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydCAoY29udGV4dCkge1xuICAgIGlmIChpc0NvcHkoY29udGV4dC5pdGVtLCBjb250ZXh0LnNvdXJjZSkpIHtcbiAgICAgIF9jb3B5ID0gY29udGV4dC5pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9jb3B5LCBjb250ZXh0Lml0ZW0sICdjb3B5Jyk7XG4gICAgfVxuXG4gICAgX3NvdXJjZSA9IGNvbnRleHQuc291cmNlO1xuICAgIF9pdGVtID0gY29udGV4dC5pdGVtO1xuICAgIF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IG5leHRFbChjb250ZXh0Lml0ZW0pO1xuXG4gICAgZHJha2UuZHJhZ2dpbmcgPSB0cnVlO1xuICAgIGRyYWtlLmVtaXQoJ2RyYWcnLCBfaXRlbSwgX3NvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZhbGlkVGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBlbmQgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICBkcm9wKGl0ZW0sIGdldFBhcmVudChpdGVtKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1bmdyYWIgKCkge1xuICAgIF9ncmFiYmVkID0gZmFsc2U7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVsZWFzZSAoZSkge1xuICAgIHVuZ3JhYigpO1xuXG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICBpZiAoZHJvcFRhcmdldCAmJiAoKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UpIHx8ICghX2NvcHkgfHwgZHJvcFRhcmdldCAhPT0gX3NvdXJjZSkpKSB7XG4gICAgICBkcm9wKGl0ZW0sIGRyb3BUYXJnZXQpO1xuICAgIH0gZWxzZSBpZiAoby5yZW1vdmVPblNwaWxsKSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJvcCAoaXRlbSwgdGFyZ2V0KSB7XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSAmJiB0YXJnZXQgPT09IF9zb3VyY2UpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfaXRlbSk7XG4gICAgfVxuICAgIGlmIChpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0KSkge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCB0YXJnZXQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KF9jb3B5ID8gJ2NhbmNlbCcgOiAncmVtb3ZlJywgaXRlbSwgcGFyZW50LCBfc291cmNlKTtcbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwgKHJldmVydCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldmVydHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHJldmVydCA6IG8ucmV2ZXJ0T25TcGlsbDtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQocGFyZW50KTtcbiAgICBpZiAoaW5pdGlhbCA9PT0gZmFsc2UgJiYgcmV2ZXJ0cykge1xuICAgICAgaWYgKF9jb3B5KSB7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2NvcHkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfc291cmNlLmluc2VydEJlZm9yZShpdGVtLCBfaW5pdGlhbFNpYmxpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5pdGlhbCB8fCByZXZlcnRzKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW51cCAoKSB7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB1bmdyYWIoKTtcbiAgICByZW1vdmVNaXJyb3JJbWFnZSgpO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBjbGFzc2VzLnJtKGl0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgfVxuICAgIGlmIChfcmVuZGVyVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChfcmVuZGVyVGltZXIpO1xuICAgIH1cbiAgICBkcmFrZS5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIGlmIChfbGFzdERyb3BUYXJnZXQpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ291dCcsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoJ2RyYWdlbmQnLCBpdGVtKTtcbiAgICBfc291cmNlID0gX2l0ZW0gPSBfY29weSA9IF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IF9yZW5kZXJUaW1lciA9IF9sYXN0RHJvcFRhcmdldCA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBpc0luaXRpYWxQbGFjZW1lbnQgKHRhcmdldCwgcykge1xuICAgIHZhciBzaWJsaW5nO1xuICAgIGlmIChzICE9PSB2b2lkIDApIHtcbiAgICAgIHNpYmxpbmcgPSBzO1xuICAgIH0gZWxzZSBpZiAoX21pcnJvcikge1xuICAgICAgc2libGluZyA9IF9jdXJyZW50U2libGluZztcbiAgICB9IGVsc2Uge1xuICAgICAgc2libGluZyA9IG5leHRFbChfY29weSB8fCBfaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQgPT09IF9zb3VyY2UgJiYgc2libGluZyA9PT0gX2luaXRpYWxTaWJsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZERyb3BUYXJnZXQgKGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZWxlbWVudEJlaGluZEN1cnNvcjtcbiAgICB3aGlsZSAodGFyZ2V0ICYmICFhY2NlcHRlZCgpKSB7XG4gICAgICB0YXJnZXQgPSBnZXRQYXJlbnQodGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcblxuICAgIGZ1bmN0aW9uIGFjY2VwdGVkICgpIHtcbiAgICAgIHZhciBkcm9wcGFibGUgPSBpc0NvbnRhaW5lcih0YXJnZXQpO1xuICAgICAgaWYgKGRyb3BwYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQodGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICAgIHZhciByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UodGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0LCByZWZlcmVuY2UpO1xuICAgICAgaWYgKGluaXRpYWwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBkcm9wIGl0IHJpZ2h0IGJhY2sgd2hlcmUgaXQgd2FzXG4gICAgICB9XG4gICAgICByZXR1cm4gby5hY2NlcHRzKF9pdGVtLCB0YXJnZXQsIF9zb3VyY2UsIHJlZmVyZW5jZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhZyAoZSkge1xuICAgIGlmICghX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciB4ID0gY2xpZW50WCAtIF9vZmZzZXRYO1xuICAgIHZhciB5ID0gY2xpZW50WSAtIF9vZmZzZXRZO1xuXG4gICAgX21pcnJvci5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS50b3AgPSB5ICsgJ3B4JztcblxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgY2hhbmdlZCA9IGRyb3BUYXJnZXQgIT09IG51bGwgJiYgZHJvcFRhcmdldCAhPT0gX2xhc3REcm9wVGFyZ2V0O1xuICAgIGlmIChjaGFuZ2VkIHx8IGRyb3BUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgIG91dCgpO1xuICAgICAgX2xhc3REcm9wVGFyZ2V0ID0gZHJvcFRhcmdldDtcbiAgICAgIG92ZXIoKTtcbiAgICB9XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoZHJvcFRhcmdldCA9PT0gX3NvdXJjZSAmJiBfY29weSAmJiAhby5jb3B5U29ydFNvdXJjZSkge1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWZlcmVuY2U7XG4gICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKGRyb3BUYXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgIGlmIChpbW1lZGlhdGUgIT09IG51bGwpIHtcbiAgICAgIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZShkcm9wVGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIH0gZWxzZSBpZiAoby5yZXZlcnRPblNwaWxsID09PSB0cnVlICYmICFfY29weSkge1xuICAgICAgcmVmZXJlbmNlID0gX2luaXRpYWxTaWJsaW5nO1xuICAgICAgZHJvcFRhcmdldCA9IF9zb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChfY29weSAmJiBwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAocmVmZXJlbmNlID09PSBudWxsICYmIGNoYW5nZWQpIHx8XG4gICAgICByZWZlcmVuY2UgIT09IGl0ZW0gJiZcbiAgICAgIHJlZmVyZW5jZSAhPT0gbmV4dEVsKGl0ZW0pXG4gICAgKSB7XG4gICAgICBfY3VycmVudFNpYmxpbmcgPSByZWZlcmVuY2U7XG4gICAgICBkcm9wVGFyZ2V0Lmluc2VydEJlZm9yZShpdGVtLCByZWZlcmVuY2UpO1xuICAgICAgZHJha2UuZW1pdCgnc2hhZG93JywgaXRlbSwgZHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVkICh0eXBlKSB7IGRyYWtlLmVtaXQodHlwZSwgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTsgfVxuICAgIGZ1bmN0aW9uIG92ZXIgKCkgeyBpZiAoY2hhbmdlZCkgeyBtb3ZlZCgnb3ZlcicpOyB9IH1cbiAgICBmdW5jdGlvbiBvdXQgKCkgeyBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7IG1vdmVkKCdvdXQnKTsgfSB9XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE92ZXIgKGVsKSB7XG4gICAgY2xhc3Nlcy5ybShlbCwgJ2d1LWhpZGUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3V0IChlbCkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZykgeyBjbGFzc2VzLmFkZChlbCwgJ2d1LWhpZGUnKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWN0ID0gX2l0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgX21pcnJvciA9IF9pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICBfbWlycm9yLnN0eWxlLndpZHRoID0gZ2V0UmVjdFdpZHRoKHJlY3QpICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLmhlaWdodCA9IGdldFJlY3RIZWlnaHQocmVjdCkgKyAncHgnO1xuICAgIGNsYXNzZXMucm0oX21pcnJvciwgJ2d1LXRyYW5zaXQnKTtcbiAgICBjbGFzc2VzLmFkZChfbWlycm9yLCAnZ3UtbWlycm9yJyk7XG4gICAgby5taXJyb3JDb250YWluZXIuYXBwZW5kQ2hpbGQoX21pcnJvcik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ2FkZCcsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICBjbGFzc2VzLmFkZChvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9taXJyb3IsIF9pdGVtLCAnbWlycm9yJyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIGNsYXNzZXMucm0oby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdyZW1vdmUnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgICBnZXRQYXJlbnQoX21pcnJvcikucmVtb3ZlQ2hpbGQoX21pcnJvcik7XG4gICAgICBfbWlycm9yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbW1lZGlhdGVDaGlsZCAoZHJvcFRhcmdldCwgdGFyZ2V0KSB7XG4gICAgdmFyIGltbWVkaWF0ZSA9IHRhcmdldDtcbiAgICB3aGlsZSAoaW1tZWRpYXRlICE9PSBkcm9wVGFyZ2V0ICYmIGdldFBhcmVudChpbW1lZGlhdGUpICE9PSBkcm9wVGFyZ2V0KSB7XG4gICAgICBpbW1lZGlhdGUgPSBnZXRQYXJlbnQoaW1tZWRpYXRlKTtcbiAgICB9XG4gICAgaWYgKGltbWVkaWF0ZSA9PT0gZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGltbWVkaWF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJlZmVyZW5jZSAoZHJvcFRhcmdldCwgdGFyZ2V0LCB4LCB5KSB7XG4gICAgdmFyIGhvcml6b250YWwgPSBvLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciByZWZlcmVuY2UgPSB0YXJnZXQgIT09IGRyb3BUYXJnZXQgPyBpbnNpZGUoKSA6IG91dHNpZGUoKTtcbiAgICByZXR1cm4gcmVmZXJlbmNlO1xuXG4gICAgZnVuY3Rpb24gb3V0c2lkZSAoKSB7IC8vIHNsb3dlciwgYnV0IGFibGUgdG8gZmlndXJlIG91dCBhbnkgcG9zaXRpb25cbiAgICAgIHZhciBsZW4gPSBkcm9wVGFyZ2V0LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGVsO1xuICAgICAgdmFyIHJlY3Q7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZWwgPSBkcm9wVGFyZ2V0LmNoaWxkcmVuW2ldO1xuICAgICAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChob3Jpem9udGFsICYmIChyZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMikgPiB4KSB7IHJldHVybiBlbDsgfVxuICAgICAgICBpZiAoIWhvcml6b250YWwgJiYgKHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyKSA+IHkpIHsgcmV0dXJuIGVsOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnNpZGUgKCkgeyAvLyBmYXN0ZXIsIGJ1dCBvbmx5IGF2YWlsYWJsZSBpZiBkcm9wcGVkIGluc2lkZSBhIGNoaWxkIGVsZW1lbnRcbiAgICAgIHZhciByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgaWYgKGhvcml6b250YWwpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoeCA+IHJlY3QubGVmdCArIGdldFJlY3RXaWR0aChyZWN0KSAvIDIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmUoeSA+IHJlY3QudG9wICsgZ2V0UmVjdEhlaWdodChyZWN0KSAvIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUgKGFmdGVyKSB7XG4gICAgICByZXR1cm4gYWZ0ZXIgPyBuZXh0RWwodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0NvcHkgKGl0ZW0sIGNvbnRhaW5lcikge1xuICAgIHJldHVybiB0eXBlb2Ygby5jb3B5ID09PSAnYm9vbGVhbicgPyBvLmNvcHkgOiBvLmNvcHkoaXRlbSwgY29udGFpbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b3VjaHkgKGVsLCBvcCwgdHlwZSwgZm4pIHtcbiAgdmFyIHRvdWNoID0ge1xuICAgIG1vdXNldXA6ICd0b3VjaGVuZCcsXG4gICAgbW91c2Vkb3duOiAndG91Y2hzdGFydCcsXG4gICAgbW91c2Vtb3ZlOiAndG91Y2htb3ZlJ1xuICB9O1xuICB2YXIgcG9pbnRlcnMgPSB7XG4gICAgbW91c2V1cDogJ3BvaW50ZXJ1cCcsXG4gICAgbW91c2Vkb3duOiAncG9pbnRlcmRvd24nLFxuICAgIG1vdXNlbW92ZTogJ3BvaW50ZXJtb3ZlJ1xuICB9O1xuICB2YXIgbWljcm9zb2Z0ID0ge1xuICAgIG1vdXNldXA6ICdNU1BvaW50ZXJVcCcsXG4gICAgbW91c2Vkb3duOiAnTVNQb2ludGVyRG93bicsXG4gICAgbW91c2Vtb3ZlOiAnTVNQb2ludGVyTW92ZSdcbiAgfTtcbiAgaWYgKGdsb2JhbC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBwb2ludGVyc1t0eXBlXSwgZm4pO1xuICB9IGVsc2UgaWYgKGdsb2JhbC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIG1pY3Jvc29mdFt0eXBlXSwgZm4pO1xuICB9IGVsc2Uge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHRvdWNoW3R5cGVdLCBmbik7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdHlwZSwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdoaWNoTW91c2VCdXR0b24gKGUpIHtcbiAgaWYgKGUudG91Y2hlcyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLnRvdWNoZXMubGVuZ3RoOyB9XG4gIGlmIChlLndoaWNoICE9PSB2b2lkIDAgJiYgZS53aGljaCAhPT0gMCkgeyByZXR1cm4gZS53aGljaDsgfSAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzI2MVxuICBpZiAoZS5idXR0b25zICE9PSB2b2lkIDApIHsgcmV0dXJuIGUuYnV0dG9uczsgfVxuICB2YXIgYnV0dG9uID0gZS5idXR0b247XG4gIGlmIChidXR0b24gIT09IHZvaWQgMCkgeyAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi85OWU4ZmYxYmFhN2FlMzQxZTk0YmI4OWMzZTg0NTcwYzdjM2FkOWVhL3NyYy9ldmVudC5qcyNMNTczLUw1NzVcbiAgICByZXR1cm4gYnV0dG9uICYgMSA/IDEgOiBidXR0b24gJiAyID8gMyA6IChidXR0b24gJiA0ID8gMiA6IDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcbiAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiByZWN0LmxlZnQgKyBnZXRTY3JvbGwoJ3Njcm9sbExlZnQnLCAncGFnZVhPZmZzZXQnKSxcbiAgICB0b3A6IHJlY3QudG9wICsgZ2V0U2Nyb2xsKCdzY3JvbGxUb3AnLCAncGFnZVlPZmZzZXQnKVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGwgKHNjcm9sbFByb3AsIG9mZnNldFByb3ApIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxbb2Zmc2V0UHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbFtvZmZzZXRQcm9wXTtcbiAgfVxuICBpZiAoZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgIHJldHVybiBkb2N1bWVudEVsZW1lbnRbc2Nyb2xsUHJvcF07XG4gIH1cbiAgcmV0dXJuIGRvYy5ib2R5W3Njcm9sbFByb3BdO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50QmVoaW5kUG9pbnQgKHBvaW50LCB4LCB5KSB7XG4gIHZhciBwID0gcG9pbnQgfHwge307XG4gIHZhciBzdGF0ZSA9IHAuY2xhc3NOYW1lO1xuICB2YXIgZWw7XG4gIHAuY2xhc3NOYW1lICs9ICcgZ3UtaGlkZSc7XG4gIGVsID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7XG4gIHAuY2xhc3NOYW1lID0gc3RhdGU7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gbmV2ZXIgKCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGFsd2F5cyAoKSB7IHJldHVybiB0cnVlOyB9XG5mdW5jdGlvbiBnZXRSZWN0V2lkdGggKHJlY3QpIHsgcmV0dXJuIHJlY3Qud2lkdGggfHwgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpOyB9XG5mdW5jdGlvbiBnZXRSZWN0SGVpZ2h0IChyZWN0KSB7IHJldHVybiByZWN0LmhlaWdodCB8fCAocmVjdC5ib3R0b20gLSByZWN0LnRvcCk7IH1cbmZ1bmN0aW9uIGdldFBhcmVudCAoZWwpIHsgcmV0dXJuIGVsLnBhcmVudE5vZGUgPT09IGRvYyA/IG51bGwgOiBlbC5wYXJlbnROb2RlOyB9XG5mdW5jdGlvbiBpc0lucHV0IChlbCkgeyByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnIHx8IGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnIHx8IGlzRWRpdGFibGUoZWwpOyB9XG5mdW5jdGlvbiBpc0VkaXRhYmxlIChlbCkge1xuICBpZiAoIWVsKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBwYXJlbnRzIHdlcmUgZWRpdGFibGVcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ2ZhbHNlJykgeyByZXR1cm4gZmFsc2U7IH0gLy8gc3RvcCB0aGUgbG9va3VwXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykgeyByZXR1cm4gdHJ1ZTsgfSAvLyBmb3VuZCBhIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50IGluIHRoZSBjaGFpblxuICByZXR1cm4gaXNFZGl0YWJsZShnZXRQYXJlbnQoZWwpKTsgLy8gY29udGVudEVkaXRhYmxlIGlzIHNldCB0byAnaW5oZXJpdCdcbn1cblxuZnVuY3Rpb24gbmV4dEVsIChlbCkge1xuICByZXR1cm4gZWwubmV4dEVsZW1lbnRTaWJsaW5nIHx8IG1hbnVhbGx5KCk7XG4gIGZ1bmN0aW9uIG1hbnVhbGx5ICgpIHtcbiAgICB2YXIgc2libGluZyA9IGVsO1xuICAgIGRvIHtcbiAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgIH0gd2hpbGUgKHNpYmxpbmcgJiYgc2libGluZy5ub2RlVHlwZSAhPT0gMSk7XG4gICAgcmV0dXJuIHNpYmxpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRIb3N0IChlKSB7XG4gIC8vIG9uIHRvdWNoZW5kIGV2ZW50LCB3ZSBoYXZlIHRvIHVzZSBgZS5jaGFuZ2VkVG91Y2hlc2BcbiAgLy8gc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzE5MjU2My90b3VjaGVuZC1ldmVudC1wcm9wZXJ0aWVzXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMzRcbiAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlc1swXTtcbiAgfVxuICBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBnZXRDb29yZCAoY29vcmQsIGUpIHtcbiAgdmFyIGhvc3QgPSBnZXRFdmVudEhvc3QoZSk7XG4gIHZhciBtaXNzTWFwID0ge1xuICAgIHBhZ2VYOiAnY2xpZW50WCcsIC8vIElFOFxuICAgIHBhZ2VZOiAnY2xpZW50WScgLy8gSUU4XG4gIH07XG4gIGlmIChjb29yZCBpbiBtaXNzTWFwICYmICEoY29vcmQgaW4gaG9zdCkgJiYgbWlzc01hcFtjb29yZF0gaW4gaG9zdCkge1xuICAgIGNvb3JkID0gbWlzc01hcFtjb29yZF07XG4gIH1cbiAgcmV0dXJuIGhvc3RbY29vcmRdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYWd1bGE7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZHJhZ3VsYS9kcmFndWxhLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGF0b2EgPSByZXF1aXJlKCdhdG9hJyk7XG52YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYXRvYSAoYSwgbikgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwgbik7IH1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRpY2t5ID0gcmVxdWlyZSgndGlja3knKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZSAoZm4sIGFyZ3MsIGN0eCkge1xuICBpZiAoIWZuKSB7IHJldHVybjsgfVxuICB0aWNreShmdW5jdGlvbiBydW4gKCkge1xuICAgIGZuLmFwcGx5KGN0eCB8fCBudWxsLCBhcmdzIHx8IFtdKTtcbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHNpID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJywgdGljaztcbmlmIChzaSkge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldEltbWVkaWF0ZShmbik7IH07XG59IGVsc2Uge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldFRpbWVvdXQoZm4sIDApOyB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRpY2s7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbi8vIE9uIHNvbWUgZXhvdGljIGVudmlyb25tZW50cywgaXQncyBub3QgY2xlYXIgd2hpY2ggb2JqZWN0IGBzZXRpbW1laWRhdGVgIHdhc1xuLy8gYWJsZSB0byBpbnN0YWxsIG9udG8uICBTZWFyY2ggZWFjaCBwb3NzaWJpbGl0eSBpbiB0aGUgc2FtZSBvcmRlciBhcyB0aGVcbi8vIGBzZXRpbW1lZGlhdGVgIGxpYnJhcnkuXG5leHBvcnRzLnNldEltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5zZXRJbW1lZGlhdGUpO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9ICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiAmJiBzZWxmLmNsZWFySW1tZWRpYXRlKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcyAmJiB0aGlzLmNsZWFySW1tZWRpYXRlKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnY3VzdG9tLWV2ZW50Jyk7XG52YXIgZXZlbnRtYXAgPSByZXF1aXJlKCcuL2V2ZW50bWFwJyk7XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGxpc3RlbmVyID0gdW53cmFwKGVsLCB0eXBlLCBmbik7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1dvcmsvYXJjaHN5c3RlbXMvd2ViL2FwcC9wbHVnaW5zL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRtYXAgPSBbXTtcbnZhciBldmVudG5hbWUgPSAnJztcbnZhciByb24gPSAvXm9uLztcblxuZm9yIChldmVudG5hbWUgaW4gZ2xvYmFsKSB7XG4gIGlmIChyb24udGVzdChldmVudG5hbWUpKSB7XG4gICAgZXZlbnRtYXAucHVzaChldmVudG5hbWUuc2xpY2UoMikpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXZlbnRtYXA7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvV29yay9hcmNoc3lzdGVtcy93ZWIvYXBwL3BsdWdpbnMvb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9ldmVudG1hcC5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGUgPSB7fTtcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG52YXIgZW5kID0gJyg/OlxcXFxzfCQpJztcblxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xuICB2YXIgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBjYWNoZWQgPSBuZXcgUmVnRXhwKHN0YXJ0ICsgY2xhc3NOYW1lICsgZW5kLCAnZycpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIHZhciBjdXJyZW50ID0gZWwuY2xhc3NOYW1lO1xuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9IGVsc2UgaWYgKCFsb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJtQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobG9va3VwQ2xhc3MoY2xhc3NOYW1lKSwgJyAnKS50cmltKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZENsYXNzLFxuICBybTogcm1DbGFzc1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgYXV0b1N1Z2dlc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQgeyByZW1vdmVJdGVtcywgZHJhZ0l0ZW1zLCBvbkRyYWdPYmplY3QsIG9uUmVtb3ZlT2JqZWN0IH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiggYXJncyApIHtcblxuICAgIGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCAhIGZpZWxkcyApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbCggZmllbGRzLCAoIGF1dG9MaXN0ICkgPT4ge1xuICAgICAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oIGF1dG9MaXN0LCBhcmdzLmhpZGRlbiApO1xuICAgICAgICBjb25zdCByZW1vdmUgPSByZW1vdmVJdGVtcyggSGlkZGVuLCBvblJlbW92ZU9iamVjdCApO1xuICAgICAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKCBIaWRkZW4sIG9uRHJhZ09iamVjdCApO1xuICAgICAgICBjb25zdCBMaXN0ID0gbGlzdCggYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oIGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlfSApICk7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvciggJy5hdXRvc3VnZ2VzdC1saXN0LWlucHV0JyApO1xuICAgICAgICBjb25zdCBlbE5hbWUgPSBgYXV0b0xpc3RfJHtpbnB1dC5nZXRBdHRyaWJ1dGUoICdsaXN0JyApfWA7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vd3AvdjIvJHt3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZX0/c2VhcmNoPWA7XG5cbiAgICAgICAgYXV0b1N1Z2dlc3QoIGlucHV0LCBlbmRwb2ludCwgKHZhbHVlLCBpbnB1dCkgPT4ge1xuICAgICAgICAgICAgTGlzdC5hZGQodmFsdWUpO1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIEhpZGRlbi5hZGQoIHZhbHVlICk7XG4gICAgICAgIH0pO1xuICAgIH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG9zdWdnZXN0LWxpc3QuanMiLCJpbXBvcnQgYXV0b1N1Z2dlc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgY29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgaWYgKCFmaWVsZHMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBhdXRvSXRlbSA9PiB7XG4gICAgY29uc3QgaGlkZGVuID0gYXV0b0l0ZW0ucXVlcnlTZWxlY3RvcihhcmdzLmhpZGRlbik7XG4gICAgY29uc3QgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtaW5wdXQnKTtcbiAgICBjb25zdCBlbE5hbWUgPSBgYXV0b0xpc3RfJHtpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKX1gO1xuICAgIGxldCBlbmRwb2ludDtcblxuICAgIGlmICh3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2UpIHtcbiAgICAgIGVuZHBvaW50ID0gYCR7T01HRmllbGRzLmJhc2VVUkx9L3dwLWpzb24vJHt3aW5kb3dbZWxOYW1lXS5uYW1lc3BhY2V9LyR7XG4gICAgICAgIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlXG4gICAgICB9P3NlYXJjaD1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmRwb2ludCA9IGAke09NR0ZpZWxkcy5iYXNlVVJMfS93cC1qc29uL3dwL3YyLyR7XG4gICAgICAgIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlXG4gICAgICB9P3NlYXJjaD1gO1xuICAgIH1cblxuICAgIGF1dG9TdWdnZXN0KFxuICAgICAgaW5wdXQsXG4gICAgICBlbmRwb2ludCxcbiAgICAgICh2YWx1ZSwgaW5wdXQpID0+IHtcbiAgICAgICAgaGlkZGVuLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgaGlkZGVuLnZhbHVlID0gJyc7XG4gICAgICB9LFxuICAgICk7XG4gIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0by1pdGVtLmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW1hZ2VVcGxvYWRzKCkge1xuXHR2YXIgZmVhdHVyZWRJbWFnZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLW1lZGlhLXVwbG9hZCcpO1xuXG5cdGlmICggZmVhdHVyZWRJbWFnZVdyYXAubGVuZ3RoID09PSAwICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdFtdLm1hcC5jYWxsKCBmZWF0dXJlZEltYWdlV3JhcCwgZnVuY3Rpb24oaXRlbSkge1xuXHRcdC8vIHZhciBJbWFnZVdyYXBJZCA9IGl0ZW0uYXR0cmlidXRlLmlkO1xuXHRcdHZhciByZW1vdmVJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnJlbW92ZS1pbWFnZScpO1xuXHRcdHZhciByZXBsYWNlSW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5yZXBsYWNlLWltYWdlJyk7XG5cdFx0dmFyIHNldEltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuc2V0LWltYWdlJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VUYWcgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJ2EucmVwbGFjZS1pbWFnZSBpbWcnKTtcblx0XHR2YXIgZmVhdHVyZWRJbWFnZUlEID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdpbnB1dFt0eXBlPVwiaGlkZGVuXCJdJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VUaXRsZSA9IGl0ZW0ucXVlcnlTZWxlY3RvciggJy50aHVtYm5haWwtdGl0bGUnICk7XG5cdFx0dmFyIG1lZGlhRnJhbWUgPSB3cC5tZWRpYSh7XG5cdFx0XHR0aXRsZTogJ0Nob29zZSBNZWRpYScsXG5cdFx0XHRidXR0b246IHtcblx0XHRcdFx0dGV4dDogJ1VzZSBTZWxlY3RlZCBNZWRpYSdcblx0XHRcdH0sXG5cdFx0XHRtdWx0aXBsZTogZmFsc2Vcblx0XHR9KTtcblxuXHRcdG1lZGlhRnJhbWUub24oJ3NlbGVjdCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS5maXJzdCgpLnRvSlNPTigpO1xuXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gYXR0YWNobWVudC5pZDtcblx0XHRcdGlmIChhdHRhY2htZW50Lmhhc093blByb3BlcnR5KCdzaXplcycpKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50LnNpemVzLnRodW1ibmFpbC51cmwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuaWNvbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZmVhdHVyZWRJbWFnZVRpdGxlICkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGl0bGUuaW5uZXJIVE1MID0gYXR0YWNobWVudC5maWxlbmFtZTtcblx0XHRcdH1cblxuXHRcdH0pO1xuXG5cdFx0cmVtb3ZlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gJyc7XG5cblx0XHRcdGlmICggZmVhdHVyZWRJbWFnZVRpdGxlICkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGl0bGUuaW5uZXJIVE1MID0gJyc7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXBsYWNlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXG5cdFx0c2V0SW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1lZGlhRnJhbWUub3BlbigpO1xuXHRcdH0pO1xuXHR9KTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbWFnZS11cGxvYWRzLmpzIiwiaW1wb3J0IGZsYXRwaWNrciBmcm9tICdmbGF0cGlja3InO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgY29uc3QgZGF0ZXBpY2tlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0ZXBpY2tlci1pbnB1dCcpO1xuXG4gIGlmICghZGF0ZXBpY2tlcnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZGF0ZXBpY2tlcnMsIGRhdGVGaWVsZCA9PiB7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlRmllbGQuZGF0YXNldC5kYXRlO1xuXG4gICAgZmxhdHBpY2tyKGRhdGVGaWVsZCwge1xuICAgICAgYWx0SW5wdXQ6IHRydWUsXG4gICAgICBhbHRGb3JtYXQ6ICdGIGosIFknLFxuICAgICAgZGF0ZUZvcm1hdDogJ1UnLFxuICAgICAgZGVmYXVsdERhdGU6ICFjdXJyZW50RGF0ZSA/ICcnIDogY3VycmVudERhdGUsXG4gICAgfSk7XG4gIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vZGF0ZXBpY2tlci5qcyIsIi8qIGZsYXRwaWNrciB2NC40LjMsIEBsaWNlbnNlIE1JVCAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLmZsYXRwaWNrciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBwYWQgPSBmdW5jdGlvbiBwYWQobnVtYmVyKSB7XG4gICAgICByZXR1cm4gKFwiMFwiICsgbnVtYmVyKS5zbGljZSgtMik7XG4gICAgfTtcbiAgICB2YXIgaW50ID0gZnVuY3Rpb24gaW50KGJvb2wpIHtcbiAgICAgIHJldHVybiBib29sID09PSB0cnVlID8gMSA6IDA7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICAgIGlmIChpbW1lZGlhdGUgPT09IHZvaWQgMCkge1xuICAgICAgICBpbW1lZGlhdGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICB0aW1lb3V0ICE9PSBudWxsICYmIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgfSwgd2FpdCk7XG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9O1xuICAgIH1cbiAgICB2YXIgYXJyYXlpZnkgPSBmdW5jdGlvbiBhcnJheWlmeShvYmopIHtcbiAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xuICAgIH07XG5cbiAgICB2YXIgZG9fbm90aGluZyA9IGZ1bmN0aW9uIGRvX25vdGhpbmcoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG5cbiAgICB2YXIgbW9udGhUb1N0ciA9IGZ1bmN0aW9uIG1vbnRoVG9TdHIobW9udGhOdW1iZXIsIHNob3J0aGFuZCwgbG9jYWxlKSB7XG4gICAgICByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07XG4gICAgfTtcbiAgICB2YXIgcmV2Rm9ybWF0ID0ge1xuICAgICAgRDogZG9fbm90aGluZyxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZU9iaiwgbW9udGhOYW1lLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLmxvbmdoYW5kLmluZGV4T2YobW9udGhOYW1lKSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlT2JqLCBob3VyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XG4gICAgICB9LFxuICAgICAgSjogZnVuY3Rpb24gSihkYXRlT2JqLCBkYXkpIHtcbiAgICAgICAgZGF0ZU9iai5zZXREYXRlKHBhcnNlRmxvYXQoZGF5KSk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlT2JqLCBhbVBNLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhkYXRlT2JqLmdldEhvdXJzKCkgJSAxMiArIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sIFwiaVwiKS50ZXN0KGFtUE0pKSk7XG4gICAgICB9LFxuICAgICAgTTogZnVuY3Rpb24gTShkYXRlT2JqLCBzaG9ydE1vbnRoLCBsb2NhbGUpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChsb2NhbGUubW9udGhzLnNob3J0aGFuZC5pbmRleE9mKHNob3J0TW9udGgpKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIFU6IGZ1bmN0aW9uIFUoXywgdW5peFNlY29uZHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlRmxvYXQodW5peFNlY29uZHMpICogMTAwMCk7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlT2JqLCB3ZWVrTnVtKSB7XG4gICAgICAgIHZhciB3ZWVrTnVtYmVyID0gcGFyc2VJbnQod2Vla051bSk7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlT2JqLCB5ZWFyKSB7XG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIocGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9LFxuICAgICAgWjogZnVuY3Rpb24gWihfLCBJU09EYXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShJU09EYXRlKTtcbiAgICAgIH0sXG4gICAgICBkOiBmdW5jdGlvbiBkKGRhdGVPYmosIGRheSkge1xuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcbiAgICAgIH0sXG4gICAgICBoOiBmdW5jdGlvbiBoKGRhdGVPYmosIGhvdXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhwYXJzZUZsb2F0KGhvdXIpKTtcbiAgICAgIH0sXG4gICAgICBpOiBmdW5jdGlvbiBpKGRhdGVPYmosIG1pbnV0ZXMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRNaW51dGVzKHBhcnNlRmxvYXQobWludXRlcykpO1xuICAgICAgfSxcbiAgICAgIGo6IGZ1bmN0aW9uIGooZGF0ZU9iaiwgZGF5KSB7XG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xuICAgICAgfSxcbiAgICAgIGw6IGRvX25vdGhpbmcsXG4gICAgICBtOiBmdW5jdGlvbiBtKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBuOiBmdW5jdGlvbiBuKGRhdGVPYmosIG1vbnRoKSB7XG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgocGFyc2VGbG9hdChtb250aCkgLSAxKTtcbiAgICAgIH0sXG4gICAgICBzOiBmdW5jdGlvbiBzKGRhdGVPYmosIHNlY29uZHMpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xuICAgICAgfSxcbiAgICAgIHc6IGRvX25vdGhpbmcsXG4gICAgICB5OiBmdW5jdGlvbiB5KGRhdGVPYmosIHllYXIpIHtcbiAgICAgICAgZGF0ZU9iai5zZXRGdWxsWWVhcigyMDAwICsgcGFyc2VGbG9hdCh5ZWFyKSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgdG9rZW5SZWdleCA9IHtcbiAgICAgIEQ6IFwiKFxcXFx3KylcIixcbiAgICAgIEY6IFwiKFxcXFx3KylcIixcbiAgICAgIEc6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBIOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgSjogXCIoXFxcXGRcXFxcZHxcXFxcZClcXFxcdytcIixcbiAgICAgIEs6IFwiXCIsXG4gICAgICBNOiBcIihcXFxcdyspXCIsXG4gICAgICBTOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgVTogXCIoLispXCIsXG4gICAgICBXOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgWTogXCIoXFxcXGR7NH0pXCIsXG4gICAgICBaOiBcIiguKylcIixcbiAgICAgIGQ6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBoOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgaTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIGo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICBsOiBcIihcXFxcdyspXCIsXG4gICAgICBtOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgbjogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcbiAgICAgIHM6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXG4gICAgICB3OiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxuICAgICAgeTogXCIoXFxcXGR7Mn0pXCJcbiAgICB9O1xuICAgIHZhciBmb3JtYXRzID0ge1xuICAgICAgWjogZnVuY3Rpb24gWihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XG4gICAgICB9LFxuICAgICAgRDogZnVuY3Rpb24gRChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xuICAgICAgfSxcbiAgICAgIEY6IGZ1bmN0aW9uIEYoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGZvcm1hdHMubihkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIC0gMSwgZmFsc2UsIGxvY2FsZSk7XG4gICAgICB9LFxuICAgICAgRzogZnVuY3Rpb24gRyhkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhZChmb3JtYXRzLmgoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSk7XG4gICAgICB9LFxuICAgICAgSDogZnVuY3Rpb24gSChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKTtcbiAgICAgIH0sXG4gICAgICBKOiBmdW5jdGlvbiBKKGRhdGUsIGxvY2FsZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxlLm9yZGluYWwgIT09IHVuZGVmaW5lZCA/IGRhdGUuZ2V0RGF0ZSgpICsgbG9jYWxlLm9yZGluYWwoZGF0ZS5nZXREYXRlKCkpIDogZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuICAgICAgSzogZnVuY3Rpb24gSyhkYXRlLCBsb2NhbGUpIHtcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldO1xuICAgICAgfSxcbiAgICAgIE06IGZ1bmN0aW9uIE0oZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGRhdGUuZ2V0TW9udGgoKSwgdHJ1ZSwgbG9jYWxlKTtcbiAgICAgIH0sXG4gICAgICBTOiBmdW5jdGlvbiBTKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHBhZChkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9LFxuICAgICAgVTogZnVuY3Rpb24gVShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFRpbWUoKSAvIDEwMDA7XG4gICAgICB9LFxuICAgICAgVzogZnVuY3Rpb24gVyhkYXRlLCBfLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XG4gICAgICB9LFxuICAgICAgWTogZnVuY3Rpb24gWShkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICB9LFxuICAgICAgZDogZnVuY3Rpb24gZChkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgfSxcbiAgICAgIGg6IGZ1bmN0aW9uIGgoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRIb3VycygpICUgMTIgPyBkYXRlLmdldEhvdXJzKCkgJSAxMiA6IDEyO1xuICAgICAgfSxcbiAgICAgIGk6IGZ1bmN0aW9uIGkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFkKGRhdGUuZ2V0TWludXRlcygpKTtcbiAgICAgIH0sXG4gICAgICBqOiBmdW5jdGlvbiBqKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgfSxcbiAgICAgIGw6IGZ1bmN0aW9uIGwoZGF0ZSwgbG9jYWxlKSB7XG4gICAgICAgIHJldHVybiBsb2NhbGUud2Vla2RheXMubG9uZ2hhbmRbZGF0ZS5nZXREYXkoKV07XG4gICAgICB9LFxuICAgICAgbTogZnVuY3Rpb24gbShkYXRlKSB7XG4gICAgICAgIHJldHVybiBwYWQoZGF0ZS5nZXRNb250aCgpICsgMSk7XG4gICAgICB9LFxuICAgICAgbjogZnVuY3Rpb24gbihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgfSxcbiAgICAgIHM6IGZ1bmN0aW9uIHMoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgICB9LFxuICAgICAgdzogZnVuY3Rpb24gdyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldERheSgpO1xuICAgICAgfSxcbiAgICAgIHk6IGZ1bmN0aW9uIHkoZGF0ZSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgZW5nbGlzaCA9IHtcbiAgICAgIHdlZWtkYXlzOiB7XG4gICAgICAgIHNob3J0aGFuZDogW1wiU3VuXCIsIFwiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCJdLFxuICAgICAgICBsb25naGFuZDogW1wiU3VuZGF5XCIsIFwiTW9uZGF5XCIsIFwiVHVlc2RheVwiLCBcIldlZG5lc2RheVwiLCBcIlRodXJzZGF5XCIsIFwiRnJpZGF5XCIsIFwiU2F0dXJkYXlcIl1cbiAgICAgIH0sXG4gICAgICBtb250aHM6IHtcbiAgICAgICAgc2hvcnRoYW5kOiBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG4gICAgICAgIGxvbmdoYW5kOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXVxuICAgICAgfSxcbiAgICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXG4gICAgICBmaXJzdERheU9mV2VlazogMCxcbiAgICAgIG9yZGluYWw6IGZ1bmN0aW9uIG9yZGluYWwobnRoKSB7XG4gICAgICAgIHZhciBzID0gbnRoICUgMTAwO1xuICAgICAgICBpZiAocyA+IDMgJiYgcyA8IDIxKSByZXR1cm4gXCJ0aFwiO1xuXG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RcIjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIm5kXCI7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCJyZFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcInRoXCI7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXG4gICAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXG4gICAgICBzY3JvbGxUaXRsZTogXCJTY3JvbGwgdG8gaW5jcmVtZW50XCIsXG4gICAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcbiAgICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXG4gICAgICB5ZWFyQXJpYUxhYmVsOiBcIlllYXJcIlxuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlRGF0ZUZvcm1hdHRlciA9IGZ1bmN0aW9uIGNyZWF0ZURhdGVGb3JtYXR0ZXIoX3JlZikge1xuICAgICAgdmFyIF9yZWYkY29uZmlnID0gX3JlZi5jb25maWcsXG4gICAgICAgICAgY29uZmlnID0gX3JlZiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZiRjb25maWcsXG4gICAgICAgICAgX3JlZiRsMTBuID0gX3JlZi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmJGwxMG4gPT09IHZvaWQgMCA/IGVuZ2xpc2ggOiBfcmVmJGwxMG47XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGVPYmosIGZybXQsIG92ZXJyaWRlTG9jYWxlKSB7XG4gICAgICAgIGlmIChjb25maWcuZm9ybWF0RGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gY29uZmlnLmZvcm1hdERhdGUoZGF0ZU9iaiwgZnJtdCk7XG4gICAgICAgIHZhciBsb2NhbGUgPSBvdmVycmlkZUxvY2FsZSB8fCBsMTBuO1xuICAgICAgICByZXR1cm4gZnJtdC5zcGxpdChcIlwiKS5tYXAoZnVuY3Rpb24gKGMsIGksIGFycikge1xuICAgICAgICAgIHJldHVybiBmb3JtYXRzW2NdICYmIGFycltpIC0gMV0gIT09IFwiXFxcXFwiID8gZm9ybWF0c1tjXShkYXRlT2JqLCBsb2NhbGUsIGNvbmZpZykgOiBjICE9PSBcIlxcXFxcIiA/IGMgOiBcIlwiO1xuICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgfTtcbiAgICB9O1xuICAgIHZhciBjcmVhdGVEYXRlUGFyc2VyID0gZnVuY3Rpb24gY3JlYXRlRGF0ZVBhcnNlcihfcmVmMikge1xuICAgICAgdmFyIF9yZWYyJGNvbmZpZyA9IF9yZWYyLmNvbmZpZyxcbiAgICAgICAgICBjb25maWcgPSBfcmVmMiRjb25maWcgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX3JlZjIkY29uZmlnLFxuICAgICAgICAgIF9yZWYyJGwxMG4gPSBfcmVmMi5sMTBuLFxuICAgICAgICAgIGwxMG4gPSBfcmVmMiRsMTBuID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX3JlZjIkbDEwbjtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgZ2l2ZW5Gb3JtYXQsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyc2VkRGF0ZTtcbiAgICAgICAgdmFyIGRhdGVfb3JpZyA9IGRhdGU7XG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJiBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZCkgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO2Vsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgdmFyIGZvcm1hdCA9IGdpdmVuRm9ybWF0IHx8IChjb25maWcgfHwgZGVmYXVsdHMpLmRhdGVGb3JtYXQ7XG4gICAgICAgICAgdmFyIGRhdGVzdHIgPSBTdHJpbmcoZGF0ZSkudHJpbSgpO1xuXG4gICAgICAgICAgaWYgKGRhdGVzdHIgPT09IFwidG9kYXlcIikge1xuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0aW1lbGVzcyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICgvWiQvLnRlc3QoZGF0ZXN0cikgfHwgL0dNVCQvLnRlc3QoZGF0ZXN0cikpIHBhcnNlZERhdGUgPSBuZXcgRGF0ZShkYXRlKTtlbHNlIGlmIChjb25maWcgJiYgY29uZmlnLnBhcnNlRGF0ZSkgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZERhdGUgPSAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhciA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMCkgOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkLFxuICAgICAgICAgICAgICAgIG9wcyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbWF0Y2hJbmRleCA9IDAsIHJlZ2V4U3RyID0gXCJcIjsgaSA8IGZvcm1hdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBmb3JtYXRbaV07XG4gICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcbiAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSBmb3JtYXRbaSAtIDFdID09PSBcIlxcXFxcIiB8fCBpc0JhY2tTbGFzaDtcblxuICAgICAgICAgICAgICBpZiAodG9rZW5SZWdleFt0b2tlbl0gJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuZXcgUmVnRXhwKHJlZ2V4U3RyKS5leGVjKGRhdGUpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaGVkID0gdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XG4gICAgICAgICAgICAgICAgICAgIGZuOiByZXZGb3JtYXRbdG9rZW5dLFxuICAgICAgICAgICAgICAgICAgICB2YWw6IG1hdGNoWysrbWF0Y2hJbmRleF1cbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNCYWNrU2xhc2gpIHJlZ2V4U3RyICs9IFwiLlwiO1xuXG4gICAgICAgICAgICAgIG9wcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgICAgICAgICAgIHZhciBmbiA9IF9yZWYzLmZuLFxuICAgICAgICAgICAgICAgICAgICB2YWwgPSBfcmVmMy52YWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZERhdGUgPSBmbihwYXJzZWREYXRlLCB2YWwsIGwxMG4pIHx8IHBhcnNlZERhdGU7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJzZWREYXRlID0gbWF0Y2hlZCA/IHBhcnNlZERhdGUgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEocGFyc2VkRGF0ZSBpbnN0YW5jZW9mIERhdGUpKSB7XG4gICAgICAgICAgY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6IFwiICsgZGF0ZV9vcmlnKSk7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSkgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgcmV0dXJuIHBhcnNlZERhdGU7XG4gICAgICB9O1xuICAgIH07XG4gICAgZnVuY3Rpb24gY29tcGFyZURhdGVzKGRhdGUxLCBkYXRlMiwgdGltZWxlc3MpIHtcbiAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRpbWVsZXNzID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRpbWVsZXNzICE9PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZTEuZ2V0VGltZSgpKS5zZXRIb3VycygwLCAwLCAwLCAwKSAtIG5ldyBEYXRlKGRhdGUyLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG4gICAgfVxuICAgIHZhciBnZXRXZWVrID0gZnVuY3Rpb24gZ2V0V2VlayhnaXZlbkRhdGUpIHtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoZ2l2ZW5EYXRlLmdldFRpbWUoKSk7XG4gICAgICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMyAtIChkYXRlLmdldERheSgpICsgNikgJSA3KTtcbiAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgNCk7XG4gICAgICByZXR1cm4gMSArIE1hdGgucm91bmQoKChkYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7XG4gICAgfTtcbiAgICB2YXIgaXNCZXR3ZWVuID0gZnVuY3Rpb24gaXNCZXR3ZWVuKHRzLCB0czEsIHRzMikge1xuICAgICAgcmV0dXJuIHRzID4gTWF0aC5taW4odHMxLCB0czIpICYmIHRzIDwgTWF0aC5tYXgodHMxLCB0czIpO1xuICAgIH07XG4gICAgdmFyIGR1cmF0aW9uID0ge1xuICAgICAgREFZOiA4NjQwMDAwMFxuICAgIH07XG5cbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBfZGlzYWJsZTogW10sXG4gICAgICBfZW5hYmxlOiBbXSxcbiAgICAgIGFsbG93SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0Rm9ybWF0OiBcIkYgaiwgWVwiLFxuICAgICAgYWx0SW5wdXQ6IGZhbHNlLFxuICAgICAgYWx0SW5wdXRDbGFzczogXCJmb3JtLWNvbnRyb2wgaW5wdXRcIixcbiAgICAgIGFuaW1hdGU6IHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xLFxuICAgICAgYXJpYURhdGVGb3JtYXQ6IFwiRiBqLCBZXCIsXG4gICAgICBjbGlja09wZW5zOiB0cnVlLFxuICAgICAgY2xvc2VPblNlbGVjdDogdHJ1ZSxcbiAgICAgIGNvbmp1bmN0aW9uOiBcIiwgXCIsXG4gICAgICBkYXRlRm9ybWF0OiBcIlktbS1kXCIsXG4gICAgICBkZWZhdWx0SG91cjogMTIsXG4gICAgICBkZWZhdWx0TWludXRlOiAwLFxuICAgICAgZGVmYXVsdFNlY29uZHM6IDAsXG4gICAgICBkaXNhYmxlOiBbXSxcbiAgICAgIGRpc2FibGVNb2JpbGU6IGZhbHNlLFxuICAgICAgZW5hYmxlOiBbXSxcbiAgICAgIGVuYWJsZVNlY29uZHM6IGZhbHNlLFxuICAgICAgZW5hYmxlVGltZTogZmFsc2UsXG4gICAgICBlcnJvckhhbmRsZXI6IGNvbnNvbGUud2FybixcbiAgICAgIGdldFdlZWs6IGdldFdlZWssXG4gICAgICBob3VySW5jcmVtZW50OiAxLFxuICAgICAgaWdub3JlZEZvY3VzRWxlbWVudHM6IFtdLFxuICAgICAgaW5saW5lOiBmYWxzZSxcbiAgICAgIGxvY2FsZTogXCJkZWZhdWx0XCIsXG4gICAgICBtaW51dGVJbmNyZW1lbnQ6IDUsXG4gICAgICBtb2RlOiBcInNpbmdsZVwiLFxuICAgICAgbmV4dEFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNMTMuMjA3IDguNDcybC03Ljg1NCA3Ljg1NC0wLjcwNy0wLjcwNyA3LjE0Ni03LjE0Ni03LjE0Ni03LjE0OCAwLjcwNy0wLjcwNyA3Ljg1NCA3Ljg1NHonIC8+PC9zdmc+XCIsXG4gICAgICBub0NhbGVuZGFyOiBmYWxzZSxcbiAgICAgIG5vdzogbmV3IERhdGUoKSxcbiAgICAgIG9uQ2hhbmdlOiBbXSxcbiAgICAgIG9uQ2xvc2U6IFtdLFxuICAgICAgb25EYXlDcmVhdGU6IFtdLFxuICAgICAgb25EZXN0cm95OiBbXSxcbiAgICAgIG9uS2V5RG93bjogW10sXG4gICAgICBvbk1vbnRoQ2hhbmdlOiBbXSxcbiAgICAgIG9uT3BlbjogW10sXG4gICAgICBvblBhcnNlQ29uZmlnOiBbXSxcbiAgICAgIG9uUmVhZHk6IFtdLFxuICAgICAgb25WYWx1ZVVwZGF0ZTogW10sXG4gICAgICBvblllYXJDaGFuZ2U6IFtdLFxuICAgICAgb25QcmVDYWxlbmRhclBvc2l0aW9uOiBbXSxcbiAgICAgIHBsdWdpbnM6IFtdLFxuICAgICAgcG9zaXRpb246IFwiYXV0b1wiLFxuICAgICAgcG9zaXRpb25FbGVtZW50OiB1bmRlZmluZWQsXG4gICAgICBwcmV2QXJyb3c6IFwiPHN2ZyB2ZXJzaW9uPScxLjEnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCAxNyAxNyc+PGc+PC9nPjxwYXRoIGQ9J001LjIwNyA4LjQ3MWw3LjE0NiA3LjE0Ny0wLjcwNyAwLjcwNy03Ljg1My03Ljg1NCA3Ljg1NC03Ljg1MyAwLjcwNyAwLjcwNy03LjE0NyA3LjE0NnonIC8+PC9zdmc+XCIsXG4gICAgICBzaG9ydGhhbmRDdXJyZW50TW9udGg6IGZhbHNlLFxuICAgICAgc2hvd01vbnRoczogMSxcbiAgICAgIHN0YXRpYzogZmFsc2UsXG4gICAgICB0aW1lXzI0aHI6IGZhbHNlLFxuICAgICAgd2Vla051bWJlcnM6IGZhbHNlLFxuICAgICAgd3JhcDogZmFsc2VcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lLCBib29sKSB7XG4gICAgICBpZiAoYm9vbCA9PT0gdHJ1ZSkgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICAgIHZhciBlID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuICAgICAgY29udGVudCA9IGNvbnRlbnQgfHwgXCJcIjtcbiAgICAgIGUuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICAgICAgaWYgKGNvbnRlbnQgIT09IHVuZGVmaW5lZCkgZS50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcbiAgICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kUGFyZW50KG5vZGUsIGNvbmRpdGlvbikge1xuICAgICAgaWYgKGNvbmRpdGlvbihub2RlKSkgcmV0dXJuIG5vZGU7ZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKSByZXR1cm4gZmluZFBhcmVudChub2RlLnBhcmVudE5vZGUsIGNvbmRpdGlvbik7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVOdW1iZXJJbnB1dChpbnB1dENsYXNzTmFtZSwgb3B0cykge1xuICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwibnVtSW5wdXRXcmFwcGVyXCIpLFxuICAgICAgICAgIG51bUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIFwibnVtSW5wdXQgXCIgKyBpbnB1dENsYXNzTmFtZSksXG4gICAgICAgICAgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dVcFwiKSxcbiAgICAgICAgICBhcnJvd0Rvd24gPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImFycm93RG93blwiKTtcbiAgICAgIG51bUlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgIG51bUlucHV0LnBhdHRlcm4gPSBcIlxcXFxkKlwiO1xuICAgICAgaWYgKG9wdHMgIT09IHVuZGVmaW5lZCkgZm9yICh2YXIga2V5IGluIG9wdHMpIHtcbiAgICAgICAgbnVtSW5wdXQuc2V0QXR0cmlidXRlKGtleSwgb3B0c1trZXldKTtcbiAgICAgIH1cbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobnVtSW5wdXQpO1xuICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChhcnJvd1VwKTtcbiAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dEb3duKTtcbiAgICAgIHJldHVybiB3cmFwcGVyO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgT2JqZWN0LmFzc2lnbiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBPYmplY3QuYXNzaWduID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICBpZiAoIXRhcmdldCkge1xuICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKHNvdXJjZSkge1xuICAgICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmdzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgIHZhciBzb3VyY2UgPSBhcmdzW19pXTtcblxuICAgICAgICAgIF9sb29wKHNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDtcblxuICAgIGZ1bmN0aW9uIEZsYXRwaWNrckluc3RhbmNlKGVsZW1lbnQsIGluc3RhbmNlQ29uZmlnKSB7XG4gICAgICB2YXIgc2VsZiA9IHtcbiAgICAgICAgY29uZmlnOiBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyksXG4gICAgICAgIGwxMG46IGVuZ2xpc2hcbiAgICAgIH07XG4gICAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoe1xuICAgICAgICBjb25maWc6IHNlbGYuY29uZmlnLFxuICAgICAgICBsMTBuOiBzZWxmLmwxMG5cbiAgICAgIH0pO1xuICAgICAgc2VsZi5faGFuZGxlcnMgPSBbXTtcbiAgICAgIHNlbGYuX2JpbmQgPSBiaW5kO1xuICAgICAgc2VsZi5fc2V0SG91cnNGcm9tRGF0ZSA9IHNldEhvdXJzRnJvbURhdGU7XG4gICAgICBzZWxmLmNoYW5nZU1vbnRoID0gY2hhbmdlTW9udGg7XG4gICAgICBzZWxmLmNoYW5nZVllYXIgPSBjaGFuZ2VZZWFyO1xuICAgICAgc2VsZi5jbGVhciA9IGNsZWFyO1xuICAgICAgc2VsZi5jbG9zZSA9IGNsb3NlO1xuICAgICAgc2VsZi5fY3JlYXRlRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQ7XG4gICAgICBzZWxmLmRlc3Ryb3kgPSBkZXN0cm95O1xuICAgICAgc2VsZi5pc0VuYWJsZWQgPSBpc0VuYWJsZWQ7XG4gICAgICBzZWxmLmp1bXBUb0RhdGUgPSBqdW1wVG9EYXRlO1xuICAgICAgc2VsZi5vcGVuID0gb3BlbjtcbiAgICAgIHNlbGYucmVkcmF3ID0gcmVkcmF3O1xuICAgICAgc2VsZi5zZXQgPSBzZXQ7XG4gICAgICBzZWxmLnNldERhdGUgPSBzZXREYXRlO1xuICAgICAgc2VsZi50b2dnbGUgPSB0b2dnbGU7XG5cbiAgICAgIGZ1bmN0aW9uIHNldHVwSGVscGVyRnVuY3Rpb25zKCkge1xuICAgICAgICBzZWxmLnV0aWxzID0ge1xuICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiBnZXREYXlzSW5Nb250aChtb250aCwgeXIpIHtcbiAgICAgICAgICAgIGlmIChtb250aCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIG1vbnRoID0gc2VsZi5jdXJyZW50TW9udGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh5ciA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgIHlyID0gc2VsZi5jdXJyZW50WWVhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1vbnRoID09PSAxICYmICh5ciAlIDQgPT09IDAgJiYgeXIgJSAxMDAgIT09IDAgfHwgeXIgJSA0MDAgPT09IDApKSByZXR1cm4gMjk7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5sMTBuLmRheXNJbk1vbnRoW21vbnRoXTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIHNlbGYuZWxlbWVudCA9IHNlbGYuaW5wdXQgPSBlbGVtZW50O1xuICAgICAgICBzZWxmLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICBwYXJzZUNvbmZpZygpO1xuICAgICAgICBzZXR1cExvY2FsZSgpO1xuICAgICAgICBzZXR1cElucHV0cygpO1xuICAgICAgICBzZXR1cERhdGVzKCk7XG4gICAgICAgIHNldHVwSGVscGVyRnVuY3Rpb25zKCk7XG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSkgYnVpbGQoKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIHx8IHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogfHwgc2VsZi5jb25maWcubWluRGF0ZSA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5zaG93VGltZUlucHV0ID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDAgfHwgc2VsZi5jb25maWcubm9DYWxlbmRhcjtcblxuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICB2YXIgZGF5c1dpZHRoID0gKHNlbGYuZGF5c0NvbnRhaW5lci5vZmZzZXRXaWR0aCArIDEpICogc2VsZi5jb25maWcuc2hvd01vbnRocztcbiAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBcInB4XCI7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9IGRheXNXaWR0aCArIFwicHhcIjtcblxuICAgICAgICAgIGlmIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUud2lkdGggPSBkYXlzV2lkdGggKyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoICsgXCJweFwiO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuXG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJpbmRUb0luc3RhbmNlKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVUaW1lKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgdGltZVdyYXBwZXIoZSk7XG5cbiAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJpbnB1dFwiKSB7XG4gICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xuICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICB9LCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBhbXBtMm1pbGl0YXJ5KGhvdXIsIGFtUE0pIHtcbiAgICAgICAgcmV0dXJuIGhvdXIgJSAxMiArIDEyICogaW50KGFtUE0gPT09IHNlbGYubDEwbi5hbVBNWzFdKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWlsaXRhcnkyYW1wbShob3VyKSB7XG4gICAgICAgIHN3aXRjaCAoaG91ciAlIDI0KSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICByZXR1cm4gMTI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGhvdXIgJSAxMjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRIb3Vyc0Zyb21JbnB1dHMoKSB7XG4gICAgICAgIGlmIChzZWxmLmhvdXJFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgc2VsZi5taW51dGVFbGVtZW50ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdXJzID0gKHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUuc2xpY2UoLTIpLCAxMCkgfHwgMCkgJSAyNCxcbiAgICAgICAgICAgIG1pbnV0ZXMgPSAocGFyc2VJbnQoc2VsZi5taW51dGVFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MCxcbiAgICAgICAgICAgIHNlY29uZHMgPSBzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IChwYXJzZUludChzZWxmLnNlY29uZEVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwIDogMDtcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBob3VycyA9IGFtcG0ybWlsaXRhcnkoaG91cnMsIHNlbGYuYW1QTS50ZXh0Q29udGVudCk7XG4gICAgICAgIHZhciBsaW1pdE1pbkhvdXJzID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkIHx8IHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJiBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PSAwO1xuICAgICAgICB2YXIgbGltaXRNYXhIb3VycyA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYubWF4RGF0ZUhhc1RpbWUgJiYgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogJiYgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT0gMDtcblxuICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xuICAgICAgICAgIHZhciBtYXhUaW1lID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWF4VGltZSA6IHNlbGYuY29uZmlnLm1heERhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1pbihob3VycywgbWF4VGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1heFRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWF4VGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1pbihzZWNvbmRzLCBtYXhUaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGltaXRNaW5Ib3Vycykge1xuICAgICAgICAgIHZhciBtaW5UaW1lID0gc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcubWluVGltZSA6IHNlbGYuY29uZmlnLm1pbkRhdGU7XG4gICAgICAgICAgaG91cnMgPSBNYXRoLm1heChob3VycywgbWluVGltZS5nZXRIb3VycygpKTtcbiAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSkgbWludXRlcyA9IE1hdGgubWF4KG1pbnV0ZXMsIG1pblRpbWUuZ2V0TWludXRlcygpKTtcbiAgICAgICAgICBpZiAobWludXRlcyA9PT0gbWluVGltZS5nZXRNaW51dGVzKCkpIHNlY29uZHMgPSBNYXRoLm1heChzZWNvbmRzLCBtaW5UaW1lLmdldFNlY29uZHMoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRIb3Vycyhob3VycywgbWludXRlcywgc2Vjb25kcyk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xuICAgICAgICB2YXIgZGF0ZSA9IGRhdGVPYmogfHwgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmo7XG4gICAgICAgIGlmIChkYXRlKSBzZXRIb3VycyhkYXRlLmdldEhvdXJzKCksIGRhdGUuZ2V0TWludXRlcygpLCBkYXRlLmdldFNlY29uZHMoKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gICAgICAgIGlmIChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmouc2V0SG91cnMoaG91cnMgJSAyNCwgbWludXRlcywgc2Vjb25kcyB8fCAwLCAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5ob3VyRWxlbWVudCB8fCAhc2VsZi5taW51dGVFbGVtZW50IHx8IHNlbGYuaXNNb2JpbGUpIHJldHVybjtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyID8gKDEyICsgaG91cnMpICUgMTIgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKSA6IGhvdXJzKTtcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnZhbHVlID0gcGFkKG1pbnV0ZXMpO1xuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChob3VycyA+PSAxMildO1xuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25ZZWFySW5wdXQoZXZlbnQpIHtcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpICsgKGV2ZW50LmRlbHRhIHx8IDApO1xuXG4gICAgICAgIGlmICh5ZWFyLnRvU3RyaW5nKCkubGVuZ3RoID09PSA0IHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICBpZiAoIS9bXlxcZF0vLnRlc3QoeWVhci50b1N0cmluZygpKSkgY2hhbmdlWWVhcih5ZWFyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgICAgIGlmIChldmVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZXZlbnQuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICByZXR1cm4gYmluZChlbGVtZW50LCBldiwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gZWxlbWVudC5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpO1xuXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzLnB1c2goe1xuICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgZXZlbnQ6IGV2ZW50LFxuICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uQ2xpY2soaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgIGV2dC53aGljaCA9PT0gMSAmJiBoYW5kbGVyKGV2dCk7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHRyaWdnZXJDaGFuZ2UoKSB7XG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcud3JhcCkge1xuICAgICAgICAgIFtcIm9wZW5cIiwgXCJjbG9zZVwiLCBcInRvZ2dsZVwiLCBcImNsZWFyXCJdLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZWxmLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLVwiICsgZXZ0ICsgXCJdXCIpLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGJpbmQoZWwsIFwiY2xpY2tcIiwgc2VsZltldnRdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuaXNNb2JpbGUpIHtcbiAgICAgICAgICBzZXR1cE1vYmlsZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWJvdW5jZWRSZXNpemUgPSBkZWJvdW5jZShvblJlc2l6ZSwgNTApO1xuICAgICAgICBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UgPSBkZWJvdW5jZSh0cmlnZ2VyQ2hhbmdlLCBERUJPVU5DRURfQ0hBTkdFX01TKTtcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiAhL2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3ZlcihlLnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5zdGF0aWMpIGJpbmQoc2VsZi5faW5wdXQsIFwia2V5ZG93blwiLCBvbktleURvd24pO1xuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmlubGluZSAmJiAhc2VsZi5jb25maWcuc3RhdGljKSBiaW5kKHdpbmRvdywgXCJyZXNpemVcIiwgZGVib3VuY2VkUmVzaXplKTtcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZCkgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwidG91Y2hzdGFydFwiLCBkb2N1bWVudENsaWNrKTtcbiAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQsIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soZG9jdW1lbnRDbGljaykpO1xuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudCwgXCJmb2N1c1wiLCBkb2N1bWVudENsaWNrLCB7XG4gICAgICAgICAgY2FwdHVyZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuY2xpY2tPcGVucyA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcbiAgICAgICAgICBiaW5kKHNlbGYuX2lucHV0LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGYub3BlbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKG9uTW9udGhOYXZDbGljaykpO1xuICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgW1wia2V5dXBcIiwgXCJpbmNyZW1lbnRcIl0sIG9uWWVhcklucHV0KTtcbiAgICAgICAgICBiaW5kKHNlbGYuZGF5c0NvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayhzZWxlY3REYXRlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiYgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdmFyIHNlbFRleHQgPSBmdW5jdGlvbiBzZWxUZXh0KGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5zZWxlY3QoKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCB1cGRhdGVUaW1lKTtcbiAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayh0aW1lSW5jcmVtZW50KSk7XG4gICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UsIHtcbiAgICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBiaW5kKFtzZWxmLmhvdXJFbGVtZW50LCBzZWxmLm1pbnV0ZUVsZW1lbnRdLCBbXCJmb2N1c1wiLCBcImNsaWNrXCJdLCBzZWxUZXh0KTtcbiAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5zZWNvbmRFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBiaW5kKHNlbGYuYW1QTSwgXCJtb3VzZWRvd25cIiwgb25DbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICB1cGRhdGVUaW1lKGUpO1xuICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUpIHtcbiAgICAgICAgdmFyIGp1bXBUbyA9IGp1bXBEYXRlICE9PSB1bmRlZmluZWQgPyBzZWxmLnBhcnNlRGF0ZShqdW1wRGF0ZSkgOiBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiB8fCAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5taW5EYXRlIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJiBzZWxmLmNvbmZpZy5tYXhEYXRlIDwgc2VsZi5ub3cgPyBzZWxmLmNvbmZpZy5tYXhEYXRlIDogc2VsZi5ub3cpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKGp1bXBUbyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0ganVtcFRvLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGp1bXBUby5nZXRNb250aCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGUubWVzc2FnZSA9IFwiSW52YWxpZCBkYXRlIHN1cHBsaWVkOiBcIiArIGp1bXBUbztcbiAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcbiAgICAgICAgaWYgKH5lLnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihcImFycm93XCIpKSBpbmNyZW1lbnROdW1JbnB1dChlLCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcnJvd1VwXCIpID8gMSA6IC0xKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaW5jcmVtZW50TnVtSW5wdXQoZSwgZGVsdGEsIGlucHV0RWxlbSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gZSAmJiBlLnRhcmdldDtcbiAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRFbGVtIHx8IHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5maXJzdENoaWxkO1xuICAgICAgICB2YXIgZXZlbnQgPSBjcmVhdGVFdmVudChcImluY3JlbWVudFwiKTtcbiAgICAgICAgZXZlbnQuZGVsdGEgPSBkZWx0YTtcbiAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGJ1aWxkKCkge1xuICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1jYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcubm9DYWxlbmRhcikge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkTW9udGhOYXYoKSk7XG4gICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XG5cbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcud2Vla051bWJlcnMpIHtcbiAgICAgICAgICAgIHZhciBfYnVpbGRXZWVrcyA9IGJ1aWxkV2Vla3MoKSxcbiAgICAgICAgICAgICAgICB3ZWVrV3JhcHBlciA9IF9idWlsZFdlZWtzLndlZWtXcmFwcGVyLFxuICAgICAgICAgICAgICAgIHdlZWtOdW1iZXJzID0gX2J1aWxkV2Vla3Mud2Vla051bWJlcnM7XG5cbiAgICAgICAgICAgIHNlbGYuaW5uZXJDb250YWluZXIuYXBwZW5kQ2hpbGQod2Vla1dyYXBwZXIpO1xuICAgICAgICAgICAgc2VsZi53ZWVrTnVtYmVycyA9IHdlZWtOdW1iZXJzO1xuICAgICAgICAgICAgc2VsZi53ZWVrV3JhcHBlciA9IHdlZWtXcmFwcGVyO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNlbGYuckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItckNvbnRhaW5lclwiKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcblxuICAgICAgICAgIGlmICghc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWRheXNcIik7XG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgICBzZWxmLmlubmVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuckNvbnRhaW5lcik7XG4gICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoc2VsZi5pbm5lckNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGJ1aWxkVGltZSgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmFuZ2VNb2RlXCIsIHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIik7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYW5pbWF0ZVwiLCBzZWxmLmNvbmZpZy5hbmltYXRlID09PSB0cnVlKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJtdWx0aU1vbnRoXCIsIHNlbGYuY29uZmlnLnNob3dNb250aHMgPiAxKTtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgICAgIHZhciBjdXN0b21BcHBlbmQgPSBzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkICYmIHNlbGYuY29uZmlnLmFwcGVuZFRvLm5vZGVUeXBlICE9PSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSB8fCBzZWxmLmNvbmZpZy5zdGF0aWMpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmlubGluZSkge1xuICAgICAgICAgICAgaWYgKCFjdXN0b21BcHBlbmQgJiYgc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBzZWxmLl9pbnB1dC5uZXh0U2libGluZyk7ZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCkgc2VsZi5jb25maWcuYXBwZW5kVG8uYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLnN0YXRpYykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdyYXBwZXJcIik7XG4gICAgICAgICAgICBpZiAoc2VsZi5lbGVtZW50LnBhcmVudE5vZGUpIHNlbGYuZWxlbWVudC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh3cmFwcGVyLCBzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChzZWxmLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQpIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkID8gc2VsZi5jb25maWcuYXBwZW5kVG8gOiB3aW5kb3cuZG9jdW1lbnQuYm9keSkuYXBwZW5kQ2hpbGQoc2VsZi5jYWxlbmRhckNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIGRheU51bWJlciwgaSkge1xuICAgICAgICB2YXIgZGF0ZUlzRW5hYmxlZCA9IGlzRW5hYmxlZChkYXRlLCB0cnVlKSxcbiAgICAgICAgICAgIGRheUVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1kYXkgXCIgKyBjbGFzc05hbWUsIGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xuICAgICAgICBkYXlFbGVtZW50LiRpID0gaTtcbiAgICAgICAgZGF5RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIHNlbGYuZm9ybWF0RGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5hcmlhRGF0ZUZvcm1hdCkpO1xuXG4gICAgICAgIGlmIChjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5ub3cpID09PSAwKSB7XG4gICAgICAgICAgc2VsZi50b2RheURhdGVFbGVtID0gZGF5RWxlbWVudDtcbiAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlSXNFbmFibGVkKSB7XG4gICAgICAgICAgZGF5RWxlbWVudC50YWJJbmRleCA9IC0xO1xuXG4gICAgICAgICAgaWYgKGlzRGF0ZVNlbGVjdGVkKGRhdGUpKSB7XG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IGRheUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoZGF5RWxlbWVudCwgXCJzdGFydFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSA9PT0gMCk7XG4gICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGRheUVsZW1lbnQsIFwiZW5kUmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzFdICYmIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMV0sIHRydWUpID09PSAwKTtcbiAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gXCJuZXh0TW9udGhEYXlcIikgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKSBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpblJhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYgc2VsZi5jb25maWcuc2hvd01vbnRocyA9PT0gMSAmJiBjbGFzc05hbWUgIT09IFwicHJldk1vbnRoRGF5XCIgJiYgZGF5TnVtYmVyICUgNyA9PT0gMSkge1xuICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGF5Q3JlYXRlXCIsIGRheUVsZW1lbnQpO1xuICAgICAgICByZXR1cm4gZGF5RWxlbWVudDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZm9jdXNPbkRheShjdXJyZW50SW5kLCBvZmZzZXQpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IGN1cnJlbnRJbmQgIT09IHVuZGVmaW5lZCA/IGN1cnJlbnRJbmQgOiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LiRpO1xuICAgICAgICB2YXIgbmV3SW5kZXggPSAoY3VycmVudEluZGV4IHx8IDApICsgb2Zmc2V0IHx8IDAsXG4gICAgICAgICAgICB0YXJnZXROb2RlID0gQXJyYXkucHJvdG90eXBlLmZpbmQuY2FsbChzZWxmLmRheXMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjLCBpKSB7XG4gICAgICAgICAgcmV0dXJuIGkgPj0gbmV3SW5kZXggJiYgYy5jbGFzc05hbWUuaW5kZXhPZihcIk1vbnRoRGF5XCIpID09PSAtMSAmJiBpc0VuYWJsZWQoYy5kYXRlT2JqKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRhcmdldE5vZGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRhcmdldE5vZGUuZm9jdXMoKTtcbiAgICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZE1vbnRoRGF5cyh5ZWFyLCBtb250aCkge1xuICAgICAgICB2YXIgZmlyc3RPZk1vbnRoID0gKG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSAtIHNlbGYubDEwbi5maXJzdERheU9mV2VlayArIDcpICUgNztcbiAgICAgICAgdmFyIHByZXZNb250aERheXMgPSBzZWxmLnV0aWxzLmdldERheXNJbk1vbnRoKChtb250aCAtIDEgKyAxMikgJSAxMik7XG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgobW9udGgpLFxuICAgICAgICAgICAgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgICAgIHZhciBkYXlOdW1iZXIgPSBwcmV2TW9udGhEYXlzICsgMSAtIGZpcnN0T2ZNb250aCxcbiAgICAgICAgICAgIGRheUluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XG4gICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJwcmV2TW9udGhEYXlcIiwgbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlOdW1iZXIpLCBkYXlOdW1iZXIsIGRheUluZGV4KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIlwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGggJiYgKHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEgfHwgZGF5SW5kZXggJSA3ICE9PSAwKTsgZGF5TnVtKyssIGRheUluZGV4KyspIHtcbiAgICAgICAgICBkYXlzLmFwcGVuZENoaWxkKGNyZWF0ZURheShcIm5leHRNb250aERheVwiLCBuZXcgRGF0ZSh5ZWFyLCBtb250aCArIDEsIGRheU51bSAlIGRheXNJbk1vbnRoKSwgZGF5TnVtLCBkYXlJbmRleCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XG4gICAgICAgIGRheUNvbnRhaW5lci5hcHBlbmRDaGlsZChkYXlzKTtcbiAgICAgICAgcmV0dXJuIGRheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGREYXlzKCkge1xuICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMpIGNsZWFyTm9kZShzZWxmLndlZWtOdW1iZXJzKTtcbiAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBpKyspIHtcbiAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoLCAxKTtcbiAgICAgICAgICBkLnNldE1vbnRoKHNlbGYuY3VycmVudE1vbnRoICsgaSk7XG4gICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChidWlsZE1vbnRoRGF5cyhkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgICBzZWxmLmRheXMgPSBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aCgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhcIik7XG4gICAgICAgIHZhciBtb250aE5hdkZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgdmFyIG1vbnRoRWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiY3VyLW1vbnRoXCIpO1xuICAgICAgICBtb250aEVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHZhciB5ZWFySW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImN1ci15ZWFyXCIsIHtcbiAgICAgICAgICB0YWJpbmRleDogXCItMVwiXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgeWVhckVsZW1lbnQgPSB5ZWFySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgeWVhckVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XG4gICAgICAgIHllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgc2VsZi5sMTBuLnllYXJBcmlhTGFiZWwpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSkgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSB7XG4gICAgICAgICAgeWVhckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIHllYXJFbGVtZW50LmRpc2FibGVkID0gISFzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY3VycmVudC1tb250aFwiKTtcbiAgICAgICAgY3VycmVudE1vbnRoLmFwcGVuZENoaWxkKG1vbnRoRWxlbWVudCk7XG4gICAgICAgIGN1cnJlbnRNb250aC5hcHBlbmRDaGlsZCh5ZWFySW5wdXQpO1xuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKGN1cnJlbnRNb250aCk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtb250aE5hdkZyYWdtZW50KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjb250YWluZXI6IGNvbnRhaW5lcixcbiAgICAgICAgICB5ZWFyRWxlbWVudDogeWVhckVsZW1lbnQsXG4gICAgICAgICAgbW9udGhFbGVtZW50OiBtb250aEVsZW1lbnRcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhzXCIpO1xuICAgICAgICBzZWxmLnllYXJFbGVtZW50cyA9IFtdO1xuICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xuICAgICAgICBzZWxmLnByZXZNb250aE5hdi5pbm5lckhUTUwgPSBzZWxmLmNvbmZpZy5wcmV2QXJyb3c7XG4gICAgICAgIHNlbGYubmV4dE1vbnRoTmF2ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItbmV4dC1tb250aFwiKTtcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xuICAgICAgICBzZWxmLm1vbnRoTmF2LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcblxuICAgICAgICBmb3IgKHZhciBtID0gc2VsZi5jb25maWcuc2hvd01vbnRoczsgbS0tOykge1xuICAgICAgICAgIHZhciBtb250aCA9IGJ1aWxkTW9udGgoKTtcbiAgICAgICAgICBzZWxmLnllYXJFbGVtZW50cy5wdXNoKG1vbnRoLnllYXJFbGVtZW50KTtcbiAgICAgICAgICBzZWxmLm1vbnRoRWxlbWVudHMucHVzaChtb250aC5tb250aEVsZW1lbnQpO1xuICAgICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQobW9udGguY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYubW9udGhOYXYuYXBwZW5kQ2hpbGQoc2VsZi5uZXh0TW9udGhOYXYpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoYm9vbCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgIT09IGJvb2wpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5wcmV2TW9udGhOYXYsIFwiZGlzYWJsZWRcIiwgYm9vbCk7XG4gICAgICAgICAgICAgIHNlbGYuX19oaWRlUHJldk1vbnRoQXJyb3cgPSBib29sO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIiwge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3c7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChib29sKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyAhPT0gYm9vbCkge1xuICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLm5leHRNb250aE5hdiwgXCJkaXNhYmxlZFwiLCBib29sKTtcbiAgICAgICAgICAgICAgc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdyA9IGJvb2w7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQgPSBzZWxmLnllYXJFbGVtZW50c1swXTtcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICByZXR1cm4gc2VsZi5tb250aE5hdjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRUaW1lKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNUaW1lXCIpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhcikgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwibm9DYWxlbmRhclwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci10aW1lXCIpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKTtcbiAgICAgICAgdmFyIGhvdXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLWhvdXJcIik7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuY2hpbGROb2Rlc1swXTtcbiAgICAgICAgdmFyIG1pbnV0ZUlucHV0ID0gY3JlYXRlTnVtYmVySW5wdXQoXCJmbGF0cGlja3ItbWludXRlXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQgPSBtaW51dGVJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQudmFsdWUgPSBwYWQoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5nZXRIb3VycygpIDogc2VsZi5jb25maWcudGltZV8yNGhyID8gc2VsZi5jb25maWcuZGVmYXVsdEhvdXIgOiBtaWxpdGFyeTJhbXBtKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyKSk7XG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUpO1xuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiLCBzZWxmLmNvbmZpZy5ob3VySW5jcmVtZW50LnRvU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLm1pbnV0ZUluY3JlbWVudC50b1N0cmluZygpKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjBcIiA6IFwiMVwiKTtcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjIzXCIgOiBcIjEyXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIiwgXCIwXCIpO1xuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgXCI1OVwiKTtcbiAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGhvdXJJbnB1dCk7XG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuYXBwZW5kQ2hpbGQobWludXRlSW5wdXQpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcudGltZV8yNGhyKSBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUyNGhyXCIpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVTZWNvbmRzKSB7XG4gICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNTZWNvbmRzXCIpO1xuICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQgPSBzZWNvbmRJbnB1dC5jaGlsZE5vZGVzWzBdO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKSA6IHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzKTtcbiAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYubWludXRlRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpO1xuICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci10aW1lLXNlcGFyYXRvclwiLCBcIjpcIikpO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnRpbWVfMjRocikge1xuICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPyBzZWxmLmhvdXJFbGVtZW50LnZhbHVlIDogc2VsZi5jb25maWcuZGVmYXVsdEhvdXIpID4gMTEpXSk7XG4gICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xuICAgICAgICAgIHNlbGYuYW1QTS50YWJJbmRleCA9IC0xO1xuICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLmFtUE0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNlbGYudGltZUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gYnVpbGRXZWVrZGF5cygpIHtcbiAgICAgICAgaWYgKCFzZWxmLndlZWtkYXlDb250YWluZXIpIHNlbGYud2Vla2RheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd2Vla2RheXNcIik7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrZGF5Y29udGFpbmVyXCIpO1xuICAgICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlV2Vla2RheXMoKTtcbiAgICAgICAgcmV0dXJuIHNlbGYud2Vla2RheUNvbnRhaW5lcjtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlV2Vla2RheXMoKSB7XG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcbiAgICAgICAgdmFyIHdlZWtkYXlzID0gc2VsZi5sMTBuLndlZWtkYXlzLnNob3J0aGFuZC5jb25jYXQoKTtcblxuICAgICAgICBpZiAoZmlyc3REYXlPZldlZWsgPiAwICYmIGZpcnN0RGF5T2ZXZWVrIDwgd2Vla2RheXMubGVuZ3RoKSB7XG4gICAgICAgICAgd2Vla2RheXMgPSB3ZWVrZGF5cy5zcGxpY2UoZmlyc3REYXlPZldlZWssIHdlZWtkYXlzLmxlbmd0aCkuY29uY2F0KHdlZWtkYXlzLnNwbGljZSgwLCBmaXJzdERheU9mV2VlaykpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IHNlbGYuY29uZmlnLnNob3dNb250aHM7IGktLTspIHtcbiAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIuY2hpbGRyZW5baV0uaW5uZXJIVE1MID0gXCJcXG4gICAgICA8c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cXG4gICAgICAgIFwiICsgd2Vla2RheXMuam9pbihcIjwvc3Bhbj48c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cIikgKyBcIlxcbiAgICAgIDwvc3Bhbj5cXG4gICAgICBcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBidWlsZFdlZWtzKCkge1xuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNXZWVrc1wiKTtcbiAgICAgICAgdmFyIHdlZWtXcmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci13ZWVrd3JhcHBlclwiKTtcbiAgICAgICAgd2Vla1dyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3Itd2Vla2RheVwiLCBzZWxmLmwxMG4ud2Vla0FiYnJldmlhdGlvbikpO1xuICAgICAgICB2YXIgd2Vla051bWJlcnMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtzXCIpO1xuICAgICAgICB3ZWVrV3JhcHBlci5hcHBlbmRDaGlsZCh3ZWVrTnVtYmVycyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgd2Vla1dyYXBwZXI6IHdlZWtXcmFwcGVyLFxuICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVyc1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VNb250aCh2YWx1ZSwgaXNfb2Zmc2V0LCBmcm9tX2tleWJvYXJkKSB7XG4gICAgICAgIGlmIChpc19vZmZzZXQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGlzX29mZnNldCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZnJvbV9rZXlib2FyZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlbHRhID0gaXNfb2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xuICAgICAgICBpZiAoZGVsdGEgPCAwICYmIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdyA9PT0gdHJ1ZSB8fCBkZWx0YSA+IDAgJiYgc2VsZi5faGlkZU5leHRNb250aEFycm93ID09PSB0cnVlKSByZXR1cm47XG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoICs9IGRlbHRhO1xuXG4gICAgICAgIGlmIChzZWxmLmN1cnJlbnRNb250aCA8IDAgfHwgc2VsZi5jdXJyZW50TW9udGggPiAxMSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IChzZWxmLmN1cnJlbnRNb250aCArIDEyKSAlIDEyO1xuICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1aWxkRGF5cygpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XG5cbiAgICAgICAgaWYgKGZyb21fa2V5Ym9hcmQgPT09IHRydWUpIHtcbiAgICAgICAgICBmb2N1c09uRGF5KHVuZGVmaW5lZCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50KSB7XG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQgPT09IHZvaWQgMCkge1xuICAgICAgICAgIHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQpIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcbiAgICAgICAgc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSB1bmRlZmluZWQ7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IGZhbHNlO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCkgc2V0SG91cnNGcm9tRGF0ZShzZWxmLmNvbmZpZy5taW5EYXRlKTtlbHNlIHNldEhvdXJzKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyLCBzZWxmLmNvbmZpZy5kZWZhdWx0TWludXRlLCBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLnJlZHJhdygpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZUV2ZW50KSB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKSB7XG4gICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcblxuICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcgIT09IHVuZGVmaW5lZCkgdHJpZ2dlckV2ZW50KFwib25EZXN0cm95XCIpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBzZWxmLl9oYW5kbGVycy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICB2YXIgaCA9IHNlbGYuX2hhbmRsZXJzW2ldO1xuICAgICAgICAgIGguZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGguZXZlbnQsIGguaGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xuXG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0KSB7XG4gICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZSkgc2VsZi5tb2JpbGVJbnB1dC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNlbGYubW9iaWxlSW5wdXQpO1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcblxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xuICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0LnBhcmVudE5vZGUpIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcbiAgICAgICAgICBkZWxldGUgc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gc2VsZi5pbnB1dC5fdHlwZTtcbiAgICAgICAgICBzZWxmLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0cGlja3ItaW5wdXRcIik7XG4gICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIFtcIl9zaG93VGltZUlucHV0XCIsIFwibGF0ZXN0U2VsZWN0ZWREYXRlT2JqXCIsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9oaWRlUHJldk1vbnRoQXJyb3dcIiwgXCJfX2hpZGVOZXh0TW9udGhBcnJvd1wiLCBcIl9faGlkZVByZXZNb250aEFycm93XCIsIFwiaXNNb2JpbGVcIiwgXCJpc09wZW5cIiwgXCJzZWxlY3RlZERhdGVFbGVtXCIsIFwibWluRGF0ZUhhc1RpbWVcIiwgXCJtYXhEYXRlSGFzVGltZVwiLCBcImRheXNcIiwgXCJkYXlzQ29udGFpbmVyXCIsIFwiX2lucHV0XCIsIFwiX3Bvc2l0aW9uRWxlbWVudFwiLCBcImlubmVyQ29udGFpbmVyXCIsIFwickNvbnRhaW5lclwiLCBcIm1vbnRoTmF2XCIsIFwidG9kYXlEYXRlRWxlbVwiLCBcImNhbGVuZGFyQ29udGFpbmVyXCIsIFwid2Vla2RheUNvbnRhaW5lclwiLCBcInByZXZNb250aE5hdlwiLCBcIm5leHRNb250aE5hdlwiLCBcImN1cnJlbnRNb250aEVsZW1lbnRcIiwgXCJjdXJyZW50WWVhckVsZW1lbnRcIiwgXCJuYXZpZ2F0aW9uQ3VycmVudE1vbnRoXCIsIFwic2VsZWN0ZWREYXRlRWxlbVwiLCBcImNvbmZpZ1wiXS5mb3JFYWNoKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZWxmW2tdO1xuICAgICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0NhbGVuZGFyRWxlbShlbGVtKSB7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAmJiBzZWxmLmNvbmZpZy5hcHBlbmRUby5jb250YWlucyhlbGVtKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBkb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcbiAgICAgICAgICB2YXIgaXNDYWxlbmRhckVsZW1lbnQgPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5pbnB1dCB8fCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCB8fCBzZWxmLmVsZW1lbnQuY29udGFpbnMoZS50YXJnZXQpIHx8IGUucGF0aCAmJiBlLnBhdGguaW5kZXhPZiAmJiAofmUucGF0aC5pbmRleE9mKHNlbGYuaW5wdXQpIHx8IH5lLnBhdGguaW5kZXhPZihzZWxmLmFsdElucHV0KSk7XG4gICAgICAgICAgdmFyIGxvc3RGb2N1cyA9IGUudHlwZSA9PT0gXCJibHVyXCIgPyBpc0lucHV0ICYmIGUucmVsYXRlZFRhcmdldCAmJiAhaXNDYWxlbmRhckVsZW0oZS5yZWxhdGVkVGFyZ2V0KSA6ICFpc0lucHV0ICYmICFpc0NhbGVuZGFyRWxlbWVudDtcbiAgICAgICAgICB2YXIgaXNJZ25vcmVkID0gIXNlbGYuY29uZmlnLmlnbm9yZWRGb2N1c0VsZW1lbnRzLnNvbWUoZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtLmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGlmIChsb3N0Rm9jdXMgJiYgaXNJZ25vcmVkKSB7XG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hhbmdlWWVhcihuZXdZZWFyKSB7XG4gICAgICAgIGlmICghbmV3WWVhciB8fCBzZWxmLmNvbmZpZy5taW5EYXRlICYmIG5ld1llYXIgPCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgfHwgc2VsZi5jb25maWcubWF4RGF0ZSAmJiBuZXdZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSByZXR1cm47XG4gICAgICAgIHZhciBuZXdZZWFyTnVtID0gbmV3WWVhcixcbiAgICAgICAgICAgIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IG5ld1llYXJOdW07XG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBuZXdZZWFyTnVtIHx8IHNlbGYuY3VycmVudFllYXI7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XG4gICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBNYXRoLm1pbihzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCksIHNlbGYuY3VycmVudE1vbnRoKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIHNlbGYuY3VycmVudFllYXIgPT09IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNOZXdZZWFyKSB7XG4gICAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblllYXJDaGFuZ2VcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNFbmFibGVkKGRhdGUsIHRpbWVsZXNzKSB7XG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGVUb0NoZWNrID0gc2VsZi5wYXJzZURhdGUoZGF0ZSwgdW5kZWZpbmVkLCB0aW1lbGVzcyk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWluRGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWluRGF0ZUhhc1RpbWUpIDwgMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIGRhdGVUb0NoZWNrICYmIGNvbXBhcmVEYXRlcyhkYXRlVG9DaGVjaywgc2VsZi5jb25maWcubWF4RGF0ZSwgdGltZWxlc3MgIT09IHVuZGVmaW5lZCA/IHRpbWVsZXNzIDogIXNlbGYubWF4RGF0ZUhhc1RpbWUpID4gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA9PT0gMCAmJiBzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBib29sID0gc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCA+IDAsXG4gICAgICAgICAgICBhcnJheSA9IGJvb2wgPyBzZWxmLmNvbmZpZy5lbmFibGUgOiBzZWxmLmNvbmZpZy5kaXNhYmxlO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBkID0gYXJyYXlbaV07XG4gICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiYgZChkYXRlVG9DaGVjaykpIHJldHVybiBib29sO2Vsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSkgcmV0dXJuIGJvb2w7ZWxzZSBpZiAodHlwZW9mIGQgPT09IFwic3RyaW5nXCIgJiYgZGF0ZVRvQ2hlY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHNlbGYucGFyc2VEYXRlKGQsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VkICYmIHBhcnNlZC5nZXRUaW1lKCkgPT09IGRhdGVUb0NoZWNrLmdldFRpbWUoKSA/IGJvb2wgOiAhYm9vbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQgJiYgZC5mcm9tICYmIGQudG8gJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpID49IGQuZnJvbS5nZXRUaW1lKCkgJiYgZGF0ZVRvQ2hlY2suZ2V0VGltZSgpIDw9IGQudG8uZ2V0VGltZSgpKSByZXR1cm4gYm9vbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhYm9vbDtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcbiAgICAgICAgdmFyIGlzSW5wdXQgPSBlLnRhcmdldCA9PT0gc2VsZi5faW5wdXQ7XG4gICAgICAgIHZhciBjYWxlbmRhckVsZW0gPSBpc0NhbGVuZGFyRWxlbShlLnRhcmdldCk7XG4gICAgICAgIHZhciBhbGxvd0lucHV0ID0gc2VsZi5jb25maWcuYWxsb3dJbnB1dDtcbiAgICAgICAgdmFyIGFsbG93S2V5ZG93biA9IHNlbGYuaXNPcGVuICYmICghYWxsb3dJbnB1dCB8fCAhaXNJbnB1dCk7XG4gICAgICAgIHZhciBhbGxvd0lubGluZUtleWRvd24gPSBzZWxmLmNvbmZpZy5pbmxpbmUgJiYgaXNJbnB1dCAmJiAhYWxsb3dJbnB1dDtcblxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyAmJiBpc0lucHV0KSB7XG4gICAgICAgICAgaWYgKGFsbG93SW5wdXQpIHtcbiAgICAgICAgICAgIHNlbGYuc2V0RGF0ZShzZWxmLl9pbnB1dC52YWx1ZSwgdHJ1ZSwgZS50YXJnZXQgPT09IHNlbGYuYWx0SW5wdXQgPyBzZWxmLmNvbmZpZy5hbHRGb3JtYXQgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5ibHVyKCk7XG4gICAgICAgICAgfSBlbHNlIHNlbGYub3BlbigpO1xuICAgICAgICB9IGVsc2UgaWYgKGNhbGVuZGFyRWxlbSB8fCBhbGxvd0tleWRvd24gfHwgYWxsb3dJbmxpbmVLZXlkb3duKSB7XG4gICAgICAgICAgdmFyIGlzVGltZU9iaiA9ICEhc2VsZi50aW1lQ29udGFpbmVyICYmIHNlbGYudGltZUNvbnRhaW5lci5jb250YWlucyhlLnRhcmdldCk7XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgaWYgKGlzVGltZU9iaikgdXBkYXRlVmFsdWUoKTtlbHNlIHNlbGVjdERhdGUoZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGZvY3VzQW5kQ2xvc2UoKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuY2xlYXIoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgaWYgKCFpc1RpbWVPYmopIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYXlzQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgX2RlbHRhID0gaXNJbnB1dCA/IDAgOiBlLmtleUNvZGUgPT09IDM5ID8gMSA6IC0xO1xuXG4gICAgICAgICAgICAgICAgICBpZiAoIWUuY3RybEtleSkgZm9jdXNPbkRheSh1bmRlZmluZWQsIF9kZWx0YSk7ZWxzZSBjaGFuZ2VNb250aChfZGVsdGEsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUua2V5Q29kZSA9PT0gNDAgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiBlLnRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgZm9jdXNPbkRheShlLnRhcmdldC4kaSwgMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghaXNUaW1lT2JqKSBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCBkZWx0YSAqIDcpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaiAmJiBzZWxmLmhvdXJFbGVtZW50KSBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBzZWxmLmhvdXJFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYubWludXRlRWxlbWVudC5zZWxlY3QoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5taW51dGVFbGVtZW50ICYmIChzZWxmLnNlY29uZEVsZW1lbnQgfHwgc2VsZi5hbVBNKSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpIHNlbGYuc2Vjb25kRWxlbWVudC5mb2N1cygpO2Vsc2UgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKSBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldCA9PT0gc2VsZi5zZWNvbmRFbGVtZW50ICYmIHNlbGYuYW1QTSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmFtUE0uZm9jdXMoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMF0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMF07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzFdLmNoYXJBdCgwKTpcbiAgICAgICAgICAgIGNhc2Ugc2VsZi5sMTBuLmFtUE1bMV0uY2hhckF0KDApLnRvTG93ZXJDYXNlKCk6XG4gICAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gIT09IHVuZGVmaW5lZCAmJiBlLnRhcmdldCA9PT0gc2VsZi5hbVBNKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XG4gICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbktleURvd25cIiwgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25Nb3VzZU92ZXIoZWxlbSkge1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fCAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpIHx8IGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikpIHJldHVybjtcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBpbml0aWFsRGF0ZSA9IHNlbGYucGFyc2VEYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgdW5kZWZpbmVkLCB0cnVlKS5nZXRUaW1lKCksXG4gICAgICAgICAgICByYW5nZVN0YXJ0RGF0ZSA9IE1hdGgubWluKGhvdmVyRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksXG4gICAgICAgICAgICByYW5nZUVuZERhdGUgPSBNYXRoLm1heChob3ZlckRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpO1xuICAgICAgICB2YXIgbW9udGhzID0gc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkcmVuLFxuICAgICAgICAgICAgZmlyc3REYXkgPSBtb250aHNbMF0uY2hpbGRyZW5bMF0uZGF0ZU9iai5nZXRUaW1lKCksXG4gICAgICAgICAgICBsYXN0RGF5ID0gbW9udGhzW21vbnRocy5sZW5ndGggLSAxXS5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCk7XG4gICAgICAgIHZhciBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBtaW5SYW5nZSA9IDAsXG4gICAgICAgICAgICBtYXhSYW5nZSA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgdCA9IGZpcnN0RGF5OyB0IDwgbGFzdERheTsgdCArPSBkdXJhdGlvbi5EQVkpIHtcbiAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPSBjb250YWluc0Rpc2FibGVkIHx8IHQgPiByYW5nZVN0YXJ0RGF0ZSAmJiB0IDwgcmFuZ2VFbmREYXRlO1xuICAgICAgICAgICAgaWYgKHQgPCBpbml0aWFsRGF0ZSAmJiAoIW1pblJhbmdlIHx8IHQgPiBtaW5SYW5nZSkpIG1pblJhbmdlID0gdDtlbHNlIGlmICh0ID4gaW5pdGlhbERhdGUgJiYgKCFtYXhSYW5nZSB8fCB0IDwgbWF4UmFuZ2UpKSBtYXhSYW5nZSA9IHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzZWxmLmNvbmZpZy5zaG93TW9udGhzOyBtKyspIHtcbiAgICAgICAgICB2YXIgbW9udGggPSBzZWxmLmRheXNDb250YWluZXIuY2hpbGRyZW5bbV07XG4gICAgICAgICAgdmFyIHByZXZNb250aCA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZHJlblttIC0gMV07XG5cbiAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpLCBsKSB7XG4gICAgICAgICAgICB2YXIgZGF5RWxlbSA9IG1vbnRoLmNoaWxkcmVuW2ldLFxuICAgICAgICAgICAgICAgIGRhdGUgPSBkYXlFbGVtLmRhdGVPYmo7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgb3V0T2ZSYW5nZSA9IG1pblJhbmdlID4gMCAmJiB0aW1lc3RhbXAgPCBtaW5SYW5nZSB8fCBtYXhSYW5nZSA+IDAgJiYgdGltZXN0YW1wID4gbWF4UmFuZ2U7XG5cbiAgICAgICAgICAgIGlmIChvdXRPZlJhbmdlKSB7XG4gICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XG4gICAgICAgICAgICAgIFtcImluUmFuZ2VcIiwgXCJzdGFydFJhbmdlXCIsIFwiZW5kUmFuZ2VcIl0uZm9yRWFjaChmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zRGlzYWJsZWQgJiYgIW91dE9mUmFuZ2UpIHJldHVybiBcImNvbnRpbnVlXCI7XG5cbiAgICAgICAgICAgIFtcInN0YXJ0UmFuZ2VcIiwgXCJpblJhbmdlXCIsIFwiZW5kUmFuZ2VcIiwgXCJub3RBbGxvd2VkXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QucmVtb3ZlKGMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoaG92ZXJEYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSA/IFwic3RhcnRSYW5nZVwiIDogXCJlbmRSYW5nZVwiKTtcblxuICAgICAgICAgICAgaWYgKG1vbnRoLmNvbnRhaW5zKGVsZW0pIHx8ICEobSA+IDAgJiYgcHJldk1vbnRoICYmIHByZXZNb250aC5sYXN0Q2hpbGQuZGF0ZU9iai5nZXRUaW1lKCkgPj0gdGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwic3RhcnRSYW5nZVwiKTtlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlKSBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJlbmRSYW5nZVwiKTtcbiAgICAgICAgICAgICAgaWYgKHRpbWVzdGFtcCA+PSBtaW5SYW5nZSAmJiAobWF4UmFuZ2UgPT09IDAgfHwgdGltZXN0YW1wIDw9IG1heFJhbmdlKSAmJiBpc0JldHdlZW4odGltZXN0YW1wLCBpbml0aWFsRGF0ZSwgaG92ZXJEYXRlKSkgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBtb250aC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBfcmV0ID0gX2xvb3AoaSwgbCk7XG5cbiAgICAgICAgICAgIGlmIChfcmV0ID09PSBcImNvbnRpbnVlXCIpIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvblJlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSkgcG9zaXRpb25DYWxlbmRhcigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBvcGVuKGUsIHBvc2l0aW9uRWxlbWVudCkge1xuICAgICAgICBpZiAocG9zaXRpb25FbGVtZW50ID09PSB2b2lkIDApIHtcbiAgICAgICAgICBwb3NpdGlvbkVsZW1lbnQgPSBzZWxmLl9pbnB1dDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUudGFyZ2V0ICYmIGUudGFyZ2V0LmJsdXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLl9pbnB1dC5kaXNhYmxlZCB8fCBzZWxmLmNvbmZpZy5pbmxpbmUpIHJldHVybjtcbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcbiAgICAgICAgc2VsZi5pc09wZW4gPSB0cnVlO1xuXG4gICAgICAgIGlmICghd2FzT3Blbikge1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XG5cbiAgICAgICAgICBzZWxmLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25PcGVuXCIpO1xuICAgICAgICAgIHBvc2l0aW9uQ2FsZW5kYXIocG9zaXRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lID09PSB0cnVlICYmIHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgPT09IHRydWUpIHtcbiAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUgIT09IHVuZGVmaW5lZCA/IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKSA6IG5ldyBEYXRlKCkuc2V0SG91cnMoc2VsZi5jb25maWcuZGVmYXVsdEhvdXIsIHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUsIHNlbGYuY29uZmlnLmRlZmF1bHRTZWNvbmRzLCAwKSwgZmFsc2UpO1xuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQuc2VsZWN0KCk7XG4gICAgICAgICAgfSwgNTApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICB2YXIgZGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgdHlwZSArIFwiRGF0ZVwiXSA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHNlbGYuY29uZmlnLmRhdGVGb3JtYXQpO1xuICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XG5cbiAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzZWxmW3R5cGUgPT09IFwibWluXCIgPyBcIm1pbkRhdGVIYXNUaW1lXCIgOiBcIm1heERhdGVIYXNUaW1lXCJdID0gZGF0ZU9iai5nZXRIb3VycygpID4gMCB8fCBkYXRlT2JqLmdldE1pbnV0ZXMoKSA+IDAgfHwgZGF0ZU9iai5nZXRTZWNvbmRzKCkgPiAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IHNlbGYuc2VsZWN0ZWREYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGlzRW5hYmxlZChkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaik7XG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcbiAgICAgICAgICAgIHJlZHJhdygpO1xuICAgICAgICAgICAgaWYgKGRhdGVPYmogIT09IHVuZGVmaW5lZCkgc2VsZi5jdXJyZW50WWVhckVsZW1lbnRbdHlwZV0gPSBkYXRlT2JqLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTtlbHNlIHNlbGYuY3VycmVudFllYXJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh0eXBlKTtcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID0gISFpbnZlcnNlRGF0ZU9iaiAmJiBkYXRlT2JqICE9PSB1bmRlZmluZWQgJiYgaW52ZXJzZURhdGVPYmouZ2V0RnVsbFllYXIoKSA9PT0gZGF0ZU9iai5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcGFyc2VDb25maWcoKSB7XG4gICAgICAgIHZhciBib29sT3B0cyA9IFtcIndyYXBcIiwgXCJ3ZWVrTnVtYmVyc1wiLCBcImFsbG93SW5wdXRcIiwgXCJjbGlja09wZW5zXCIsIFwidGltZV8yNGhyXCIsIFwiZW5hYmxlVGltZVwiLCBcIm5vQ2FsZW5kYXJcIiwgXCJhbHRJbnB1dFwiLCBcInNob3J0aGFuZEN1cnJlbnRNb250aFwiLCBcImlubGluZVwiLCBcInN0YXRpY1wiLCBcImVuYWJsZVNlY29uZHNcIiwgXCJkaXNhYmxlTW9iaWxlXCJdO1xuICAgICAgICB2YXIgaG9va3MgPSBbXCJvbkNoYW5nZVwiLCBcIm9uQ2xvc2VcIiwgXCJvbkRheUNyZWF0ZVwiLCBcIm9uRGVzdHJveVwiLCBcIm9uS2V5RG93blwiLCBcIm9uTW9udGhDaGFuZ2VcIiwgXCJvbk9wZW5cIiwgXCJvblBhcnNlQ29uZmlnXCIsIFwib25SZWFkeVwiLCBcIm9uVmFsdWVVcGRhdGVcIiwgXCJvblllYXJDaGFuZ2VcIiwgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIl07XG4gICAgICAgIHZhciB1c2VyQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgaW5zdGFuY2VDb25maWcsIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZWxlbWVudC5kYXRhc2V0IHx8IHt9KSkpO1xuICAgICAgICB2YXIgZm9ybWF0cyQkMSA9IHt9O1xuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcbiAgICAgICAgc2VsZi5jb25maWcuZm9ybWF0RGF0ZSA9IHVzZXJDb25maWcuZm9ybWF0RGF0ZTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcImVuYWJsZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX2VuYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVzKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5fZGlzYWJsZSA9IHBhcnNlRGF0ZVJ1bGVzKGRhdGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSkge1xuICAgICAgICAgIGZvcm1hdHMkJDEuZGF0ZUZvcm1hdCA9IHVzZXJDb25maWcubm9DYWxlbmRhciA/IFwiSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIikgOiBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ICsgXCIgSDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6U1wiIDogXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlckNvbmZpZy5hbHRJbnB1dCAmJiB1c2VyQ29uZmlnLmVuYWJsZVRpbWUgJiYgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XG4gICAgICAgICAgZm9ybWF0cyQkMS5hbHRGb3JtYXQgPSB1c2VyQ29uZmlnLm5vQ2FsZW5kYXIgPyBcImg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlMgS1wiIDogXCIgS1wiKSA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCArIChcIiBoOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKSArIFwiIEtcIik7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluRGF0ZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pbkRhdGU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhEYXRlXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4RGF0ZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4RGF0ZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgbWluTWF4VGltZVNldHRlciA9IGZ1bmN0aW9uIG1pbk1heFRpbWVTZXR0ZXIodHlwZSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSBcIm1pblwiID8gXCJfbWluVGltZVwiIDogXCJfbWF4VGltZVwiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgXCJIOmlcIik7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IG1pbk1heFRpbWVTZXR0ZXIoXCJtaW5cIilcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJtYXhUaW1lXCIsIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNvbmZpZy5fbWF4VGltZTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgZm9ybWF0cyQkMSwgdXNlckNvbmZpZyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBib29sT3B0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9IHNlbGYuY29uZmlnW2Jvb2xPcHRzW2ldXSA9PT0gdHJ1ZSB8fCBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPT09IFwidHJ1ZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSBob29rcy5sZW5ndGg7IF9pLS07KSB7XG4gICAgICAgICAgaWYgKHNlbGYuY29uZmlnW2hvb2tzW19pXV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va3NbX2ldXSA9IGFycmF5aWZ5KHNlbGYuY29uZmlnW2hvb2tzW19pXV0gfHwgW10pLm1hcChiaW5kVG9JbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwidGltZVwiKSB7XG4gICAgICAgICAgc2VsZi5jb25maWcubm9DYWxlbmRhciA9IHRydWU7XG4gICAgICAgICAgc2VsZi5jb25maWcuZW5hYmxlVGltZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBzZWxmLmNvbmZpZy5wbHVnaW5zLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbX2kyXShzZWxmKSB8fCB7fTtcblxuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XG4gICAgICAgICAgICBpZiAofmhvb2tzLmluZGV4T2Yoa2V5KSkge1xuICAgICAgICAgICAgICBzZWxmLmNvbmZpZ1trZXldID0gYXJyYXlpZnkocGx1Z2luQ29uZltrZXldKS5tYXAoYmluZFRvSW5zdGFuY2UpLmNvbmNhdChzZWxmLmNvbmZpZ1trZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVzZXJDb25maWdba2V5XSA9PT0gXCJ1bmRlZmluZWRcIikgc2VsZi5jb25maWdba2V5XSA9IHBsdWdpbkNvbmZba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlzTW9iaWxlID0gIXNlbGYuY29uZmlnLmRpc2FibGVNb2JpbGUgJiYgIXNlbGYuY29uZmlnLmlubGluZSAmJiBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmICFzZWxmLmNvbmZpZy5kaXNhYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiYgL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cExvY2FsZSgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKSBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSBcIiArIHNlbGYuY29uZmlnLmxvY2FsZSkpO1xuICAgICAgICBzZWxmLmwxMG4gPSBPYmplY3QuYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgdHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gXCJvYmplY3RcIiA/IHNlbGYuY29uZmlnLmxvY2FsZSA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCIgPyBmbGF0cGlja3IubDEwbnNbc2VsZi5jb25maWcubG9jYWxlXSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHRva2VuUmVnZXguSyA9IFwiKFwiICsgc2VsZi5sMTBuLmFtUE1bMF0gKyBcInxcIiArIHNlbGYubDEwbi5hbVBNWzFdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVswXS50b0xvd2VyQ2FzZSgpICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXS50b0xvd2VyQ2FzZSgpICsgXCIpXCI7XG4gICAgICAgIHNlbGYuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoc2VsZik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uQ2FsZW5kYXIoY3VzdG9tUG9zaXRpb25FbGVtZW50KSB7XG4gICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25QcmVDYWxlbmRhclBvc2l0aW9uXCIpO1xuICAgICAgICB2YXIgcG9zaXRpb25FbGVtZW50ID0gY3VzdG9tUG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX3Bvc2l0aW9uRWxlbWVudDtcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7XG4gICAgICAgICAgcmV0dXJuIGFjYyArIGNoaWxkLm9mZnNldEhlaWdodDtcbiAgICAgICAgfSwgMCksXG4gICAgICAgICAgICBjYWxlbmRhcldpZHRoID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIGNvbmZpZ1BvcyA9IHNlbGYuY29uZmlnLnBvc2l0aW9uLFxuICAgICAgICAgICAgaW5wdXRCb3VuZHMgPSBwb3NpdGlvbkVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXG4gICAgICAgICAgICBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sXG4gICAgICAgICAgICBzaG93T25Ub3AgPSBjb25maWdQb3MgPT09IFwiYWJvdmVcIiB8fCBjb25maWdQb3MgIT09IFwiYmVsb3dcIiAmJiBkaXN0YW5jZUZyb21Cb3R0b20gPCBjYWxlbmRhckhlaWdodCAmJiBpbnB1dEJvdW5kcy50b3AgPiBjYWxlbmRhckhlaWdodDtcbiAgICAgICAgdmFyIHRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIGlucHV0Qm91bmRzLnRvcCArICghc2hvd09uVG9wID8gcG9zaXRpb25FbGVtZW50Lm9mZnNldEhlaWdodCArIDIgOiAtY2FsZW5kYXJIZWlnaHQgLSAyKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd1RvcFwiLCAhc2hvd09uVG9wKTtcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSByZXR1cm47XG4gICAgICAgIHZhciBsZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0ICsgaW5wdXRCb3VuZHMubGVmdDtcbiAgICAgICAgdmFyIHJpZ2h0ID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBpbnB1dEJvdW5kcy5yaWdodDtcbiAgICAgICAgdmFyIHJpZ2h0TW9zdCA9IGxlZnQgKyBjYWxlbmRhcldpZHRoID4gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGg7XG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwicmlnaHRNb3N0XCIsIHJpZ2h0TW9zdCk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpIHJldHVybjtcbiAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS50b3AgPSB0b3AgKyBcInB4XCI7XG5cbiAgICAgICAgaWYgKCFyaWdodE1vc3QpIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xuICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuc3R5bGUucmlnaHQgPSBcImF1dG9cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcbiAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gcmlnaHQgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gcmVkcmF3KCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKSByZXR1cm47XG4gICAgICAgIHVwZGF0ZVdlZWtkYXlzKCk7XG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgYnVpbGREYXlzKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XG4gICAgICAgIHNlbGYuX2lucHV0LmZvY3VzKCk7XG5cbiAgICAgICAgaWYgKHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpICE9PSAtMSB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgc2V0VGltZW91dChzZWxmLmNsb3NlLCAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWxmLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB2YXIgaXNTZWxlY3RhYmxlID0gZnVuY3Rpb24gaXNTZWxlY3RhYmxlKGRheSkge1xuICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0ICYmIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmICFkYXkuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikgJiYgIWRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJub3RBbGxvd2VkXCIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0ID0gZmluZFBhcmVudChlLnRhcmdldCwgaXNTZWxlY3RhYmxlKTtcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdDtcbiAgICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gbmV3IERhdGUodGFyZ2V0LmRhdGVPYmouZ2V0VGltZSgpKTtcbiAgICAgICAgdmFyIHNob3VsZENoYW5nZU1vbnRoID0gKHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpIDwgc2VsZi5jdXJyZW50TW9udGggfHwgc2VsZWN0ZWREYXRlLmdldE1vbnRoKCkgPiBzZWxmLmN1cnJlbnRNb250aCArIHNlbGYuY29uZmlnLnNob3dNb250aHMgLSAxKSAmJiBzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCI7XG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtzZWxlY3RlZERhdGVdO2Vsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwibXVsdGlwbGVcIikge1xuICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gaXNEYXRlU2VsZWN0ZWQoc2VsZWN0ZWREYXRlKTtcbiAgICAgICAgICBpZiAoc2VsZWN0ZWRJbmRleCkgc2VsZi5zZWxlY3RlZERhdGVzLnNwbGljZShwYXJzZUludChzZWxlY3RlZEluZGV4KSwgMSk7ZWxzZSBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIikge1xuICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKSBzZWxmLmNsZWFyKGZhbHNlKTtcbiAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZWN0ZWREYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHRydWUpICE9PSAwKSBzZWxmLnNlbGVjdGVkRGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XG5cbiAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7XG4gICAgICAgICAgdmFyIGlzTmV3WWVhciA9IHNlbGYuY3VycmVudFllYXIgIT09IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICAgIGlmIChpc05ld1llYXIpIHRyaWdnZXJFdmVudChcIm9uWWVhckNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xuICAgICAgICBidWlsZERheXMoKTtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiYgc2VsZi5taW5EYXRlSGFzVGltZSAmJiBzZWxmLmNvbmZpZy5lbmFibGVUaW1lICYmIGNvbXBhcmVEYXRlcyhzZWxlY3RlZERhdGUsIHNlbGYuY29uZmlnLm1pbkRhdGUpID09PSAwKSBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO1xuICAgICAgICB1cGRhdGVWYWx1ZSgpO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHRydWU7XG4gICAgICAgIH0sIDUwKTtcblxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIG9uTW91c2VPdmVyKHRhcmdldCk7XG4gICAgICAgICAgfSBlbHNlIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2hvdWxkQ2hhbmdlTW9udGggJiYgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiICYmIHNlbGYuY29uZmlnLnNob3dNb250aHMgPT09IDEpIGZvY3VzT25EYXkodGFyZ2V0LiRpLCAwKTtlbHNlIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSAmJiBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0uZm9jdXMoKTtcbiAgICAgICAgaWYgKHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCkgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpO1xuICAgICAgICB9LCA0NTEpO1xuXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XG4gICAgICAgICAgdmFyIHNpbmdsZSA9IHNlbGYuY29uZmlnLm1vZGUgPT09IFwic2luZ2xlXCIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG4gICAgICAgICAgdmFyIHJhbmdlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiICYmIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiYgIXNlbGYuY29uZmlnLmVuYWJsZVRpbWU7XG5cbiAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XG4gICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgQ0FMTEJBQ0tTID0ge1xuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZV1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIHNldChvcHRpb24sIHZhbHVlKSB7XG4gICAgICAgIGlmIChvcHRpb24gIT09IG51bGwgJiYgdHlwZW9mIG9wdGlvbiA9PT0gXCJvYmplY3RcIikgT2JqZWN0LmFzc2lnbihzZWxmLmNvbmZpZywgb3B0aW9uKTtlbHNlIHtcbiAgICAgICAgICBzZWxmLmNvbmZpZ1tvcHRpb25dID0gdmFsdWU7XG4gICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpIENBTExCQUNLU1tvcHRpb25dLmZvckVhY2goZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB4KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXRTZWxlY3RlZERhdGUoaW5wdXREYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgdmFyIGRhdGVzID0gW107XG4gICAgICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBBcnJheSkgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGQsIGZvcm1hdCk7XG4gICAgICAgIH0pO2Vsc2UgaWYgKGlucHV0RGF0ZSBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJudW1iZXJcIikgZGF0ZXMgPSBbc2VsZi5wYXJzZURhdGUoaW5wdXREYXRlLCBmb3JtYXQpXTtlbHNlIGlmICh0eXBlb2YgaW5wdXREYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc3dpdGNoIChzZWxmLmNvbmZpZy5tb2RlKSB7XG4gICAgICAgICAgICBjYXNlIFwic2luZ2xlXCI6XG4gICAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIFwibXVsdGlwbGVcIjpcbiAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUuc3BsaXQoc2VsZi5jb25maWcuY29uanVuY3Rpb24pLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxuICAgICAgICAgICAgICBkYXRlcyA9IGlucHV0RGF0ZS5zcGxpdChzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpLm1hcChmdW5jdGlvbiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICByZXR1cm4gZCBpbnN0YW5jZW9mIERhdGUgJiYgaXNFbmFibGVkKGQsIGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXREYXRlKGRhdGUsIHRyaWdnZXJDaGFuZ2UsIGZvcm1hdCkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcm1hdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgZm9ybWF0ID0gc2VsZi5jb25maWcuZGF0ZUZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKSByZXR1cm4gc2VsZi5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgc2V0U2VsZWN0ZWREYXRlKGRhdGUsIGZvcm1hdCk7XG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwO1xuICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiA9IHNlbGYuc2VsZWN0ZWREYXRlc1swXTtcbiAgICAgICAgc2VsZi5yZWRyYXcoKTtcbiAgICAgICAganVtcFRvRGF0ZSgpO1xuICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKCk7XG4gICAgICAgIHVwZGF0ZVZhbHVlKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSkgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZVJ1bGVzKGFycikge1xuICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAocnVsZSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcnVsZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fCBydWxlIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYucGFyc2VEYXRlKHJ1bGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChydWxlICYmIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmIHJ1bGUuZnJvbSAmJiBydWxlLnRvKSByZXR1cm4ge1xuICAgICAgICAgICAgZnJvbTogc2VsZi5wYXJzZURhdGUocnVsZS5mcm9tLCB1bmRlZmluZWQpLFxuICAgICAgICAgICAgdG86IHNlbGYucGFyc2VEYXRlKHJ1bGUudG8sIHVuZGVmaW5lZClcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIHJ1bGU7XG4gICAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gc2V0dXBEYXRlcygpIHtcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW107XG4gICAgICAgIHNlbGYubm93ID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubm93KSB8fCBuZXcgRGF0ZSgpO1xuICAgICAgICB2YXIgcHJlbG9hZGVkRGF0ZSA9IHNlbGYuY29uZmlnLmRlZmF1bHREYXRlIHx8IHNlbGYuaW5wdXQudmFsdWU7XG4gICAgICAgIGlmIChwcmVsb2FkZWREYXRlKSBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XG4gICAgICAgIHZhciBpbml0aWFsRGF0ZSA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwID8gc2VsZi5zZWxlY3RlZERhdGVzWzBdIDogc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFRpbWUoKSA+IHNlbGYubm93LmdldFRpbWUoKSA/IHNlbGYuY29uZmlnLm1pbkRhdGUgOiBzZWxmLmNvbmZpZy5tYXhEYXRlICYmIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0VGltZSgpIDwgc2VsZi5ub3cuZ2V0VGltZSgpID8gc2VsZi5jb25maWcubWF4RGF0ZSA6IHNlbGYubm93O1xuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gaW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSBpbml0aWFsRGF0ZS5nZXRNb250aCgpO1xuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA+IDApIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluVGltZSAhPT0gdW5kZWZpbmVkKSBzZWxmLmNvbmZpZy5taW5UaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWluVGltZSwgXCJIOmlcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhUaW1lICE9PSB1bmRlZmluZWQpIHNlbGYuY29uZmlnLm1heFRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5tYXhUaW1lLCBcIkg6aVwiKTtcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWluRGF0ZSAmJiAoc2VsZi5jb25maWcubWluRGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgc2VsZi5tYXhEYXRlSGFzVGltZSA9ICEhc2VsZi5jb25maWcubWF4RGF0ZSAmJiAoc2VsZi5jb25maWcubWF4RGF0ZS5nZXRIb3VycygpID4gMCB8fCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHwgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwic2hvd1RpbWVJbnB1dFwiLCB7XG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fc2hvd1RpbWVJbnB1dDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGJvb2wpIHtcbiAgICAgICAgICAgIHNlbGYuX3Nob3dUaW1lSW5wdXQgPSBib29sO1xuICAgICAgICAgICAgaWYgKHNlbGYuY2FsZW5kYXJDb250YWluZXIpIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwic2hvd1RpbWVJbnB1dFwiLCBib29sKTtcbiAgICAgICAgICAgIHNlbGYuaXNPcGVuICYmIHBvc2l0aW9uQ2FsZW5kYXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cElucHV0cygpIHtcbiAgICAgICAgc2VsZi5pbnB1dCA9IHNlbGYuY29uZmlnLndyYXAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbnB1dF1cIikgOiBlbGVtZW50O1xuXG4gICAgICAgIGlmICghc2VsZi5pbnB1dCkge1xuICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGlucHV0IGVsZW1lbnQgc3BlY2lmaWVkXCIpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmlucHV0Ll90eXBlID0gc2VsZi5pbnB1dC50eXBlO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xuICAgICAgICBzZWxmLl9pbnB1dCA9IHNlbGYuaW5wdXQ7XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFsdElucHV0KSB7XG4gICAgICAgICAgc2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBcIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xuICAgICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5hbHRJbnB1dDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnBsYWNlaG9sZGVyID0gc2VsZi5pbnB1dC5wbGFjZWhvbGRlcjtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnJlcXVpcmVkID0gc2VsZi5pbnB1dC5yZXF1aXJlZDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnRhYkluZGV4ID0gc2VsZi5pbnB1dC50YWJJbmRleDtcbiAgICAgICAgICBzZWxmLmFsdElucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmIHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLmFsdElucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYWxsb3dJbnB1dCkgc2VsZi5faW5wdXQuc2V0QXR0cmlidXRlKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgc2VsZi5fcG9zaXRpb25FbGVtZW50ID0gc2VsZi5jb25maWcucG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX2lucHV0O1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBzZXR1cE1vYmlsZSgpIHtcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gXCJ0aW1lXCIgOiBcImRhdGV0aW1lLWxvY2FsXCIgOiBcImRhdGVcIjtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCBzZWxmLmlucHV0LmNsYXNzTmFtZSArIFwiIGZsYXRwaWNrci1tb2JpbGVcIik7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQuc3RlcCA9IHNlbGYuaW5wdXQuZ2V0QXR0cmlidXRlKFwic3RlcFwiKSB8fCBcImFueVwiO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC50eXBlID0gaW5wdXRUeXBlO1xuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XG4gICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xuICAgICAgICBzZWxmLm1vYmlsZUZvcm1hdFN0ciA9IGlucHV0VHlwZSA9PT0gXCJkYXRldGltZS1sb2NhbFwiID8gXCJZLW0tZFxcXFxUSDppOlNcIiA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCIgPyBcIlktbS1kXCIgOiBcIkg6aTpTXCI7XG5cbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpIHNlbGYubW9iaWxlSW5wdXQubWluID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUsIFwiWS1tLWRcIik7XG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tYXhEYXRlKSBzZWxmLm1vYmlsZUlucHV0Lm1heCA9IHNlbGYuZm9ybWF0RGF0ZShzZWxmLmNvbmZpZy5tYXhEYXRlLCBcIlktbS1kXCIpO1xuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSBzZWxmLmFsdElucHV0LnR5cGUgPSBcImhpZGRlblwiO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSkgc2VsZi5pbnB1dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShzZWxmLm1vYmlsZUlucHV0LCBzZWxmLmlucHV0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgfSBjYXRjaCAoX2EpIHt9XG5cbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHNlbGYuc2V0RGF0ZShlLnRhcmdldC52YWx1ZSwgZmFsc2UsIHNlbGYubW9iaWxlRm9ybWF0U3RyKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcbiAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICBpZiAoc2VsZi5pc09wZW4pIHJldHVybiBzZWxmLmNsb3NlKCk7XG4gICAgICAgIHNlbGYub3BlbigpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB0cmlnZ2VyRXZlbnQoZXZlbnQsIGRhdGEpIHtcbiAgICAgICAgdmFyIGhvb2tzID0gc2VsZi5jb25maWdbZXZlbnRdO1xuXG4gICAgICAgIGlmIChob29rcyAhPT0gdW5kZWZpbmVkICYmIGhvb2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaG9va3NbaV0gJiYgaSA8IGhvb2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudCA9PT0gXCJvbkNoYW5nZVwiKSB7XG4gICAgICAgICAgc2VsZi5pbnB1dC5kaXNwYXRjaEV2ZW50KGNyZWF0ZUV2ZW50KFwiY2hhbmdlXCIpKTtcbiAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJpbnB1dFwiKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xuICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7XG4gICAgICAgIGUuaW5pdEV2ZW50KG5hbWUsIHRydWUsIHRydWUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNEYXRlU2VsZWN0ZWQoZGF0ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChjb21wYXJlRGF0ZXMoc2VsZi5zZWxlY3RlZERhdGVzW2ldLCBkYXRlKSA9PT0gMCkgcmV0dXJuIFwiXCIgKyBpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBpc0RhdGVJblJhbmdlKGRhdGUpIHtcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgIT09IFwicmFuZ2VcIiB8fCBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoIDwgMikgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1swXSkgPj0gMCAmJiBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA8PSAwO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlIHx8ICFzZWxmLm1vbnRoTmF2KSByZXR1cm47XG4gICAgICAgIHNlbGYueWVhckVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHllYXJFbGVtZW50LCBpKSB7XG4gICAgICAgICAgdmFyIGQgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSk7XG4gICAgICAgICAgZC5zZXRNb250aChzZWxmLmN1cnJlbnRNb250aCArIGkpO1xuICAgICAgICAgIHNlbGYubW9udGhFbGVtZW50c1tpXS50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoZC5nZXRNb250aCgpLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcbiAgICAgICAgICB5ZWFyRWxlbWVudC52YWx1ZSA9IGQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID0gc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCA8PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyIDwgc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID0gc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKCkgOiBzZWxmLmN1cnJlbnRZZWFyID4gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkge1xuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHNlbGYuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG5cbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLm1vYmlsZUZvcm1hdFN0cikge1xuICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkID8gc2VsZi5mb3JtYXREYXRlKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLm1vYmlsZUZvcm1hdFN0cikgOiBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGpvaW5DaGFyID0gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiID8gc2VsZi5jb25maWcuY29uanVuY3Rpb24gOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3I7XG4gICAgICAgIHNlbGYuaW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcbiAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG5cbiAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXMubWFwKGZ1bmN0aW9uIChkT2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mb3JtYXREYXRlKGRPYmosIHNlbGYuY29uZmlnLmFsdEZvcm1hdCk7XG4gICAgICAgICAgfSkuam9pbihqb2luQ2hhcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG9uTW9udGhOYXZDbGljayhlKSB7XG4gICAgICAgIHZhciBpc1ByZXZNb250aCA9IHNlbGYucHJldk1vbnRoTmF2LmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgdmFyIGlzTmV4dE1vbnRoID0gc2VsZi5uZXh0TW9udGhOYXYuY29udGFpbnMoZS50YXJnZXQpO1xuXG4gICAgICAgIGlmIChpc1ByZXZNb250aCB8fCBpc05leHRNb250aCkge1xuICAgICAgICAgIGNoYW5nZU1vbnRoKGlzUHJldk1vbnRoID8gLTEgOiAxKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxmLnllYXJFbGVtZW50cy5pbmRleE9mKGUudGFyZ2V0KSA+PSAwKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUudGFyZ2V0LnNlbGVjdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikpIHtcbiAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciArIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93RG93blwiKSkge1xuICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyIC0gMSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBpc0tleURvd24gPSBlLnR5cGUgPT09IFwia2V5ZG93blwiLFxuICAgICAgICAgICAgaW5wdXQgPSBlLnRhcmdldDtcblxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xuICAgICAgICAgIHNlbGYuYW1QTS50ZXh0Q29udGVudCA9IHNlbGYubDEwbi5hbVBNW2ludChzZWxmLmFtUE0udGV4dENvbnRlbnQgPT09IHNlbGYubDEwbi5hbVBNWzBdKV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdChpbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiKSksXG4gICAgICAgICAgICBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKSxcbiAgICAgICAgICAgIHN0ZXAgPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSksXG4gICAgICAgICAgICBjdXJWYWx1ZSA9IHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCksXG4gICAgICAgICAgICBkZWx0YSA9IGUuZGVsdGEgfHwgKGlzS2V5RG93biA/IGUud2hpY2ggPT09IDM4ID8gMSA6IC0xIDogMCk7XG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1clZhbHVlICsgc3RlcCAqIGRlbHRhO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgdmFyIGlzSG91ckVsZW0gPSBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCxcbiAgICAgICAgICAgICAgaXNNaW51dGVFbGVtID0gaW5wdXQgPT09IHNlbGYubWludXRlRWxlbWVudDtcblxuICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IG1pbikge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBtYXggKyBuZXdWYWx1ZSArIGludCghaXNIb3VyRWxlbSkgKyAoaW50KGlzSG91ckVsZW0pICYmIGludCghc2VsZi5hbVBNKSk7XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIC0xLCBzZWxmLmhvdXJFbGVtZW50KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID4gbWF4KSB7XG4gICAgICAgICAgICBuZXdWYWx1ZSA9IGlucHV0ID09PSBzZWxmLmhvdXJFbGVtZW50ID8gbmV3VmFsdWUgLSBtYXggLSBpbnQoIXNlbGYuYW1QTSkgOiBtaW47XG4gICAgICAgICAgICBpZiAoaXNNaW51dGVFbGVtKSBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWxmLmFtUE0gJiYgaXNIb3VyRWxlbSAmJiAoc3RlcCA9PT0gMSA/IG5ld1ZhbHVlICsgY3VyVmFsdWUgPT09IDIzIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xuICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHBhZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaW5pdCgpO1xuICAgICAgcmV0dXJuIHNlbGY7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX2ZsYXRwaWNrcihub2RlTGlzdCwgY29uZmlnKSB7XG4gICAgICB2YXIgbm9kZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChub2RlTGlzdCk7XG4gICAgICB2YXIgaW5zdGFuY2VzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbCkgY29udGludWU7XG5cbiAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XG5cbiAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlLl9mbGF0cGlja3IgPSBGbGF0cGlja3JJbnN0YW5jZShub2RlLCBjb25maWcgfHwge30pO1xuICAgICAgICAgIGluc3RhbmNlcy5wdXNoKG5vZGUuX2ZsYXRwaWNrcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZXMubGVuZ3RoID09PSAxID8gaW5zdGFuY2VzWzBdIDogaW5zdGFuY2VzO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgSFRNTEVsZW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZS5mbGF0cGlja3IgPSBOb2RlTGlzdC5wcm90b3R5cGUuZmxhdHBpY2tyID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xuICAgICAgfTtcblxuICAgICAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgZmxhdHBpY2tyID0gZnVuY3Rpb24gZmxhdHBpY2tyKHNlbGVjdG9yLCBjb25maWcpIHtcbiAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGVMaXN0KSByZXR1cm4gX2ZsYXRwaWNrcihzZWxlY3RvciwgY29uZmlnKTtlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpIHJldHVybiBfZmxhdHBpY2tyKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSwgY29uZmlnKTtcbiAgICAgIHJldHVybiBfZmxhdHBpY2tyKFtzZWxlY3Rvcl0sIGNvbmZpZyk7XG4gICAgfTtcblxuICAgIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnID0gZGVmYXVsdHM7XG4gICAgZmxhdHBpY2tyLmwxMG5zID0ge1xuICAgICAgZW46IE9iamVjdC5hc3NpZ24oe30sIGVuZ2xpc2gpLFxuICAgICAgZGVmYXVsdDogT2JqZWN0LmFzc2lnbih7fSwgZW5nbGlzaClcbiAgICB9O1xuXG4gICAgZmxhdHBpY2tyLmxvY2FsaXplID0gZnVuY3Rpb24gKGwxMG4pIHtcbiAgICAgIGZsYXRwaWNrci5sMTBucy5kZWZhdWx0ID0gT2JqZWN0LmFzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQsIGwxMG4pO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLCBjb25maWcpO1xuICAgIH07XG5cbiAgICBmbGF0cGlja3IucGFyc2VEYXRlID0gY3JlYXRlRGF0ZVBhcnNlcih7fSk7XG4gICAgZmxhdHBpY2tyLmZvcm1hdERhdGUgPSBjcmVhdGVEYXRlRm9ybWF0dGVyKHt9KTtcbiAgICBmbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xuXG4gICAgaWYgKHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGpRdWVyeS5mbi5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIHJldHVybiBfZmxhdHBpY2tyKHRoaXMsIGNvbmZpZyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIERhdGUucHJvdG90eXBlLmZwX2luY3IgPSBmdW5jdGlvbiAoZGF5cykge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSwgdGhpcy5nZXRNb250aCgpLCB0aGlzLmdldERhdGUoKSArICh0eXBlb2YgZGF5cyA9PT0gXCJzdHJpbmdcIiA/IHBhcnNlSW50KGRheXMsIDEwKSA6IGRheXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZsYXRwaWNrcjtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9Xb3JrL2FyY2hzeXN0ZW1zL3dlYi9hcHAvcGx1Z2lucy9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQge1xuICByZW1vdmVJdGVtcyxcbiAgZHJhZ0l0ZW1zLFxuICBvbkRyYWdJbWFnZSxcbiAgb25SZW1vdmVJbWFnZSxcbn0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgY29uc3QgZ2FsbGVyeVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnktd3JhcHBlcicpO1xuXG4gIGlmICghZ2FsbGVyeVNlY3Rpb25zKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGdhbGxlcnlTZWN0aW9ucywgZ2FsbGVyeSA9PiB7XG4gICAgY29uc3QgYWRkSW1hZ2UgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZ2FsbGVyeS1pbWFnZXMnKTtcbiAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oZ2FsbGVyeSwgJy5pbWFnZS1nYWxsZXJ5LWhpZGRlbicpO1xuXG4gICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZUltYWdlKTtcbiAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnSW1hZ2UpO1xuICAgIGNvbnN0IExpc3QgPSBsaXN0KGdhbGxlcnksIHtcbiAgICAgIGxpc3Q6ICcuZ2FsbGVyeS1pbWFnZXMnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogaW1hZ2VJdGVtLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcbiAgICAgIHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcbiAgICAgIGJ1dHRvbjoge1xuICAgICAgICB0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJyxcbiAgICAgIH0sXG4gICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGFkZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG1lZGlhRnJhbWUub3BlbigpO1xuICAgIH0pO1xuXG4gICAgbWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBhdHRhY2htZW50cyA9IG1lZGlhRnJhbWVcbiAgICAgICAgLnN0YXRlKClcbiAgICAgICAgLmdldCgnc2VsZWN0aW9uJylcbiAgICAgICAgLnRvSlNPTigpO1xuXG4gICAgICBhdHRhY2htZW50cy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICBMaXN0LmFkZChhdHRhY2htZW50KTtcbiAgICAgICAgSGlkZGVuLmFkZChhdHRhY2htZW50LmlkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgaW1hZ2VJdGVtID0gaW1hZ2UgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cImdhbGxlcnktaW1hZ2UtaXRlbVwiPjxzcGFuIGNsYXNzPVwiZ2FsbGVyeS1pYW1nZS1pZFwiPiR7XG4gICAgaW1hZ2UuaWRcbiAgfTwvc3Bhbj48aW1nIHNyYz1cIiR7XG4gICAgaW1hZ2UudXJsXG4gIH1cIiBjbGFzcz1cImdhbGxlcnktaW1hZ2VcIi8+PHNwYW4+PHN2ZyBjbGFzcz1cInJlbW92ZS1nYWxsZXJ5LWltYWdlXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG48L3N2Zz48L3NwYW4+PC9saT5gO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2dhbGxlcnkuanMiLCJpbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGhpZGRlbiBmcm9tICcuL3NlcmlhbGl6ZWQtaW5wdXQnO1xuaW1wb3J0IHtcbiAgcmVtb3ZlSXRlbXMsXG4gIGRyYWdJdGVtcyxcbiAgb25EcmFnVGFibGUsXG4gIG9uUmVtb3ZlVGFibGUsXG59IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHRhYmxlTGlzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtbGlzdCcpO1xuXG4gIGlmICghdGFibGVMaXN0cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbCh0YWJsZUxpc3RzLCB0YWJsZUxpc3QgPT4ge1xuICAgIGNvbnN0IGFkZFJvdyA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC1hZGQnKTtcbiAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4odGFibGVMaXN0LCAnLnRhYmxlLWxpc3QtaGlkZGVuJyk7XG4gICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZVRhYmxlKTtcbiAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnVGFibGUpO1xuICAgIGNvbnN0IExpc3QgPSBsaXN0KHRhYmxlTGlzdCwge1xuICAgICAgbGlzdDogJy50YWJsZS1saXN0LWxpc3QnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogdGFibGVJdGVtLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgd3JhcHBlciA9IHRhYmxlTGlzdC5xdWVyeVNlbGVjdG9yKCcudGV4dC1saXN0LXdyYXBwZXInKTtcbiAgICBjb25zdCBrZXkgPSB3cmFwcGVyLnF1ZXJ5U2VsZWN0b3IoJy50YWJsZS1saXN0LWtleScpO1xuICAgIGNvbnN0IHZhbHVlID0gd3JhcHBlci5xdWVyeVNlbGVjdG9yKCcudGFibGUtbGlzdC12YWx1ZScpO1xuXG4gICAgYWRkUm93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgY29uc3Qgcm93RGF0YSA9IHtcbiAgICAgICAga2V5OiBrZXkudmFsdWUsXG4gICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZSxcbiAgICAgIH07XG5cbiAgICAgIExpc3QuYWRkKHJvd0RhdGEpO1xuICAgICAgSGlkZGVuLmFkZChyb3dEYXRhKTtcblxuICAgICAga2V5LnZhbHVlID0gJyc7XG4gICAgICB2YWx1ZS52YWx1ZSA9ICcnO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgdGFibGVJdGVtID0gcm93RGF0YSA9PiB7XG4gIHJldHVybiBgPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW0gdGFibGUtbGlzdC1pdGVtXCI+XG4gICAgPHNwYW4gY2xhc3M9XCJ0YWJsZS1saXN0LWtleVwiPiR7cm93RGF0YS5rZXl9PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPVwidGFibGUtbGlzdC12YWx1ZVwiPiR7cm93RGF0YS52YWx1ZX08L3NwYW4+XG4gICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICA8L3N2Zz5cbjwvbGk+YDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi90YWJsZS1saXN0LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==