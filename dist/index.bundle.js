!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return o(n,t.onDrag),r(n,t.onRemove),{add:function(e){var a=t.listTemplate(e),i=document.createRange().createContextualFragment(a);n.appendChild(i)}}};var a=n(8),i=function(e){return e&&e.__esModule?e:{default:e}}(a),r=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var a=n.target.closest("li"),i=a.querySelector("span").innerHTML;e.removeChild(a),t(i)}}),n},o=function(e,t){(0,i.default)([e]).on("dragend",function(n){var a=e.querySelectorAll("li");t(e,a)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),a=function(){return n.value?JSON.parse(n.value):[]},i=function(e){return a().concat(e)},r=function(e,t){return t(a(),e)};return{add:function(e){n.value=JSON.stringify(i(e))},remove:function(e,t){n.value=JSON.stringify(r(e,t))},update:function(e){n.value=JSON.stringify(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.removeItems=function(e,t){return function(n){e.remove(n,t)}},t.dragItems=function(e,t){return function(n,a){var i=t(n,a);e.update(i)}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onDragImage=function(e,t){return[].reduce.call(t,function(e,t){var n=parseInt(t.querySelector("span").innerHTML);return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})},t.onRemoveImage=function(e,t){return e.filter(function(e){return e!==parseInt(t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,o){if(!e)return!1;var c=!1;e.addEventListener("keyup",function(n){if(0===n.target.value.length&&o&&o(),3>n.target.value.length)return!1;e.classList.add("show"),c=i(c,r,e,t)}),e.addEventListener("input",function(t){var i=a(t);i&&n(i,e)})};var a=function(e){var t=e.target,n=t.value,a=t.getAttribute("list"),i=document.getElementById(a).childNodes,r=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==r.length&&r[0]},i=function(e,t,n,a){var i=u(n.value),r=a+i;return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){4===e.readyState&&l(e.responseText)?t(!1,{results:JSON.parse(e.responseText),input:n}):e.responseText&&l(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",r,!0),e.send(),e},r=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;o(t.results,t.input)}},o=function(e,t){var n=t.getAttribute("list"),a=document.getElementById(n),i=e.reduce(function(e,t){var n=c(t);return e.concat(n)},"");t.classList.remove("show"),a.innerHTML=i},c=function(e){return"<option data-id="+e.id+' value="'+e.title.rendered+'">'},l=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},u=function(e){return encodeURIComponent(e.toLowerCase())}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(6),r=(a(i),n(7)),o=a(r),c=n(20),l=a(c),u=n(1),s=(a(u),n(21)),d=a(s),f=n(22),m=a(f),g=n(23),p=a(g),v=n(25),h=a(v),y=function(e){return'<li class="text-list-item">\n        <span>'+e+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'},D=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,m.default)(),(0,o.default)({parent:".text-list",button:".text-list-add",list:".text-list-list",hidden:".text-list-hidden",listTemplate:y}),(0,l.default)({parent:".autosuggest-list",input:"autosuggest-list-input",list:".autosuggest-list-list",hidden:".autosuggest-list-hidden",listTemplate:D}),(0,d.default)({parent:".autosuggest-wrapper",input:".autosuggest-input",hidden:".autosuggest-hidden"}),(0,p.default)(),(0,h.default)()})},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector("input[type=text]"),a=t.querySelector(e.button),i=(0,c.default)(t,e.hidden),o=(0,l.removeItems)(i,l.onRemoveText),u=(0,l.dragItems)(i,l.onDragText),s=(0,r.default)(t,Object.assign(e,{onDrag:u,onRemove:o}));t.addEventListener("keypress",function(e){13===e.keyCode&&(e.preventDefault(),s.add(n.value),i.add(n.value),n.value="")}),a.addEventListener("click",function(e){e.preventDefault(),s.add(n.value),i.add(n.value),n.value=""})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3)},function(e,t,n){"use strict";(function(t){function a(e,t){function n(e){return-1!==ue.containers.indexOf(e)||le.isContainer(e)}function a(e){var t=e?"remove":"add";i(M,t,"mousedown",E),i(M,t,"mouseup",L)}function c(e){i(M,e?"remove":"add","mousemove",T)}function p(e){var t=e?"remove":"add";b[t](M,"selectstart",x),b[t](M,"click",x)}function h(){a(!0),L({})}function x(e){oe&&e.preventDefault()}function E(e){if(ee=e.clientX,te=e.clientY,!(1!==r(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=S(t);n&&(oe=n,c(),"mousedown"===e.type&&(g(t)?t.focus():e.preventDefault()))}}function T(e){if(oe){if(0===r(e))return void L({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(le.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(g(C.elementFromPoint(t,n)))return}var a=oe;c(!0),p(),k(),I(a);var i=o(V);Z=y("pageX",e)-i.left,Q=y("pageY",e)-i.top,w.add(ie||V,"gu-transit"),J(),q(e)}}}function S(e){if(!(ue.dragging&&$||n(e))){for(var t=e;m(e)&&!1===n(m(e));){if(le.invalid(e,t))return;if(!(e=m(e)))return}var a=m(e);if(a&&!le.invalid(e,t)){if(le.moves(e,a,t,v(e)))return{item:e,source:a}}}}function _(e){return!!S(e)}function N(e){var t=S(e);t&&I(t)}function I(e){X(e.item,e.source)&&(ie=e.item.cloneNode(!0),ue.emit("cloned",ie,e.item,"copy")),G=e.source,V=e.item,ne=ae=v(e.item),ue.dragging=!0,ue.emit("drag",V,G)}function O(){return!1}function k(){if(ue.dragging){var e=ie||V;P(e,m(e))}}function A(){oe=!1,c(!0),p(!0)}function L(e){if(A(),ue.dragging){var t=ie||V,n=y("clientX",e),a=y("clientY",e),i=l($,n,a),r=R(i,n,a);r&&(ie&&le.copySortSource||!ie||r!==G)?P(t,r):le.removeOnSpill?Y():j()}}function P(e,t){var n=m(e);ie&&le.copySortSource&&t===G&&n.removeChild(V),H(t)?ue.emit("cancel",e,G,G):ue.emit("drop",e,t,G,ae),F()}function Y(){if(ue.dragging){var e=ie||V,t=m(e);t&&t.removeChild(e),ue.emit(ie?"cancel":"remove",e,t,G),F()}}function j(e){if(ue.dragging){var t=arguments.length>0?e:le.revertOnSpill,n=ie||V,a=m(n),i=H(a);!1===i&&t&&(ie?a&&a.removeChild(ie):G.insertBefore(n,ne)),i||t?ue.emit("cancel",n,G,G):ue.emit("drop",n,a,G,ae),F()}}function F(){var e=ie||V;A(),U(),e&&w.rm(e,"gu-transit"),re&&clearTimeout(re),ue.dragging=!1,ce&&ue.emit("out",e,ce,G),ue.emit("dragend",e),G=V=ie=ne=ae=re=ce=null}function H(e,t){var n;return n=void 0!==t?t:$?ae:v(ie||V),e===G&&n===ne}function R(e,t,a){for(var i=e;i&&!function(){if(!1===n(i))return!1;var r=K(i,e),o=z(i,r,t,a);return!!H(i,o)||le.accepts(V,i,G,o)}();)i=m(i);return i}function q(e){function t(e){ue.emit(e,o,ce,G)}if($){e.preventDefault();var n=y("clientX",e),a=y("clientY",e),i=n-Z,r=a-Q;$.style.left=i+"px",$.style.top=r+"px";var o=ie||V,c=l($,n,a),u=R(c,n,a),s=null!==u&&u!==ce;(s||null===u)&&(function(){ce&&t("out")}(),ce=u,function(){s&&t("over")}());var d=m(o);if(u===G&&ie&&!le.copySortSource)return void(d&&d.removeChild(o));var f,g=K(u,c);if(null!==g)f=z(u,g,n,a);else{if(!0!==le.revertOnSpill||ie)return void(ie&&d&&d.removeChild(o));f=ne,u=G}(null===f&&s||f!==o&&f!==v(o))&&(ae=f,u.insertBefore(o,f),ue.emit("shadow",o,u,G))}}function B(e){w.rm(e,"gu-hide")}function W(e){ue.dragging&&w.add(e,"gu-hide")}function J(){if(!$){var e=V.getBoundingClientRect();$=V.cloneNode(!0),$.style.width=d(e)+"px",$.style.height=f(e)+"px",w.rm($,"gu-transit"),w.add($,"gu-mirror"),le.mirrorContainer.appendChild($),i(M,"add","mousemove",q),w.add(le.mirrorContainer,"gu-unselectable"),ue.emit("cloned",$,V,"mirror")}}function U(){$&&(w.rm(le.mirrorContainer,"gu-unselectable"),i(M,"remove","mousemove",q),m($).removeChild($),$=null)}function K(e,t){for(var n=t;n!==e&&m(n)!==e;)n=m(n);return n===M?null:n}function z(e,t,n,a){function i(e){return e?v(t):t}var r="horizontal"===le.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(r?n>e.left+d(e)/2:a>e.top+f(e)/2)}():function(){var t,i,o,c=e.children.length;for(t=0;t<c;t++){if(i=e.children[t],o=i.getBoundingClientRect(),r&&o.left+o.width/2>n)return i;if(!r&&o.top+o.height/2>a)return i}return null}()}function X(e,t){return"boolean"==typeof le.copy?le.copy:le.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var $,G,V,Z,Q,ee,te,ne,ae,ie,re,oe,ce=null,le=t||{};void 0===le.moves&&(le.moves=s),void 0===le.accepts&&(le.accepts=s),void 0===le.invalid&&(le.invalid=O),void 0===le.containers&&(le.containers=e||[]),void 0===le.isContainer&&(le.isContainer=u),void 0===le.copy&&(le.copy=!1),void 0===le.copySortSource&&(le.copySortSource=!1),void 0===le.revertOnSpill&&(le.revertOnSpill=!1),void 0===le.removeOnSpill&&(le.removeOnSpill=!1),void 0===le.direction&&(le.direction="vertical"),void 0===le.ignoreInputTextSelection&&(le.ignoreInputTextSelection=!0),void 0===le.mirrorContainer&&(le.mirrorContainer=C.body);var ue=D({containers:le.containers,start:N,end:k,cancel:j,remove:Y,destroy:h,canMove:_,dragging:!1});return!0===le.removeOnSpill&&ue.on("over",B).on("out",W),a(),ue}function i(e,n,a,i){var r={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},o={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?b[n](e,o[a],i):t.navigator.msPointerEnabled?b[n](e,c[a],i):(b[n](e,r[a],i),b[n](e,a,i))}function r(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function o(e){var t=e.getBoundingClientRect();return{left:t.left+c("scrollLeft","pageXOffset"),top:t.top+c("scrollTop","pageYOffset")}}function c(e,n){return void 0!==t[n]?t[n]:M.clientHeight?M[e]:C.body[e]}function l(e,t,n){var a,i=e||{},r=i.className;return i.className+=" gu-hide",a=C.elementFromPoint(t,n),i.className=r,a}function u(){return!1}function s(){return!0}function d(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function m(e){return e.parentNode===C?null:e.parentNode}function g(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(m(e))))}function v(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),a={pageX:"clientX",pageY:"clientY"};return e in a&&!(e in n)&&a[e]in n&&(e=a[e]),n[e]}var D=n(9),b=n(16),w=n(19),C=document,M=C.documentElement;e.exports=a}).call(t,n(0))},function(e,t,n){"use strict";var a=n(10),i=n(11);e.exports=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var a=arguments.length;if(1===a)delete r[t];else if(0===a)r={};else{var i=r[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=a(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var o=(r[t]||[]).slice(0);return function(){var r=a(arguments),c=this||e;if("error"===t&&!1!==n.throws&&!o.length)throw 1===r.length?r[0]:r;return o.forEach(function(a){n.async?i(a,r,c):a.apply(c,r),a._once&&e.off(t,a)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var a=n(12);e.exports=function(e,t,n){e&&a(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,a="function"==typeof t;n=a?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(13).setImmediate)},function(e,t,n){(function(e){function a(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(14),t.setImmediate=self&&self.setImmediate||e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate=self&&self.clearImmediate||e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";function a(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,c(l),l++}function i(e){delete u[e]}function r(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a)}}function o(e){if(s)setTimeout(o,0,e);else{var t=u[e];if(t){s=!0;try{r(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var c,l=1,u={},s=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},c=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;c=function(t){var n=d.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(o,0,e)}}(),f.setImmediate=a,f.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===a||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){p&&m&&(p=!1,m.length?g=m.concat(g):v=-1,g.length&&c())}function c(){if(!p){var e=i(o);p=!0;for(var t=g.length;t;){for(m=g,g=[];++v<t;)m&&m[v].run();v=-1,t=g.length}m=null,p=!1,r(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var s,d,f=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{d="function"==typeof clearTimeout?clearTimeout:a}catch(e){d=a}}();var m,g=[],p=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new l(e,t)),1!==g.length||p||i(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function a(e,t,n,a){return e.addEventListener(t,n,a)}function i(e,t,n){return e.attachEvent("on"+t,u(e,t,n))}function r(e,t,n,a){return e.removeEventListener(t,n,a)}function o(e,t,n){var a=s(e,t,n);if(a)return e.detachEvent("on"+t,a)}function c(e,t,n){var a=-1===m.indexOf(t)?function(){return new f(t,{detail:n})}():function(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,n,a){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,a.call(e,i)}}function u(e,t,n){var a=s(e,t,n)||l(e,t,n);return h.push({wrapper:a,element:e,type:t,fn:n}),a}function s(e,t,n){var a=d(e,t,n);if(a){var i=h[a].wrapper;return h.splice(a,1),i}}function d(e,t,n){var a,i;for(a=0;a<h.length;a++)if(i=h[a],i.element===e&&i.type===t&&i.fn===n)return a}var f=n(17),m=n(18),g=t.document,p=a,v=r,h=[];t.addEventListener||(p=i,v=o),e.exports={add:p,remove:v,fabricate:c}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],a="",i=/^on/;for(a in t)i.test(a)&&n.push(a.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function a(e){var t=o[e];return t?t.lastIndex=0:o[e]=t=new RegExp(c+e+l,"g"),t}function i(e,t){var n=e.className;n.length?a(t).test(n)||(e.className+=" "+t):e.className=t}function r(e,t){e.className=e.className.replace(a(t)," ").trim()}var o={},c="(?:^|\\s)",l="(?:\\s|$)";e.exports={add:i,rm:r}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,u.default)(t,e.hidden),a=(0,s.removeItems)(n,s.onRemoveObject),i=(0,s.dragItems)(n,s.onDragObject),o=(0,r.default)(t,Object.assign(e,{onDrag:i,onRemove:a})),l=t.querySelector(".autosuggest-list-input"),d="autoList_"+l.getAttribute("list"),f=OMGFields.baseURL+"/wp-json/wp/v2/"+window[d].resource+"?search=";(0,c.default)(l,f,function(e,t){o.add(e),t.value="",n.add(e)})})};var i=n(1),r=a(i),o=n(4),c=a(o),l=n(2),u=a(l),s=n(3)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden),a=t.querySelector(".autosuggest-input"),r="autoList_"+a.getAttribute("list"),o=OMGFields.baseURL+"/wp-json/wp/v2/"+window[r].resource+"?search=";(0,i.default)(a,o,function(e,t){n.value=JSON.stringify(e)},function(){n.value=""})})};var a=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function a(){var e=document.querySelectorAll(".custom-media-upload");0!==e.length&&[].map.call(e,function(e){var t=e.querySelector(".remove-image"),n=e.querySelector(".replace-image"),a=e.querySelector(".set-image"),i=e.querySelector("a.replace-image img"),r=e.querySelector('input[type="hidden"]'),o=e.querySelector(".thumbnail-title"),c=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!1});c.on("select",function(){var t=c.state().get("selection").first().toJSON();e.classList.toggle("has-image"),r.value=t.id,t.hasOwnProperty("sizes")?i.setAttribute("src",t.sizes.thumbnail.url):i.setAttribute("src",t.icon),o&&(o.innerHTML=t.filename)}),t.addEventListener("click",function(t){t.preventDefault(),e.classList.toggle("has-image"),i.setAttribute("src",""),r.value=""}),n.addEventListener("click",function(e){e.preventDefault(),c.open()}),a.addEventListener("click",function(e){e.preventDefault(),c.open()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".datepicker-input");if(!e)return!1;[].forEach.call(e,function(e){var t=e.dataset.date;(0,i.default)(e,{altInput:!0,altFormat:"F j, Y",dateFormat:"U",defaultDate:t||""})})};var a=n(24),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){/* flatpickr v4.2.3, @license MIT */
!function(e,n){n(t)}(0,function(e){"use strict";function t(e,t,n){void 0===n&&(n=!1);var a;return function(){var i=this,r=arguments;null!==a&&clearTimeout(a),a=window.setTimeout(function(){a=null,n||e.apply(i,r)},t),n&&!a&&e.apply(i,r)}}function n(e){return(e.wheelDelta||-e.deltaY)>=0?1:-1}function a(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function i(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function r(e,t,n){var a=window.document.createElement(e);return t=t||"",n=n||"",a.className=t,void 0!==n&&(a.textContent=n),a}function o(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function c(e,t){return t(e)?e:e.parentNode?c(e.parentNode,t):void 0}function l(e,t){var n=r("div","numInputWrapper"),a=r("input","numInput "+e),i=r("span","arrowUp"),o=r("span","arrowDown");if(a.type="text",a.pattern="\\d*",void 0!==t)for(var c in t)a.setAttribute(c,t[c]);return n.appendChild(a),n.appendChild(i),n.appendChild(o),n}function u(e,u){function s(){Oe.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=Oe.currentMonth),void 0===t&&(t=Oe.currentYear),1===e&&(t%4==0&&t%100!=0||t%400==0)?29:Oe.l10n.daysInMonth[e]}}}function p(e){return e.bind(Oe)}function v(e){Oe.config.noCalendar&&0===Oe.selectedDates.length&&(Oe.setDate(void 0!==Oe.config.minDate?new Date(Oe.config.minDate.getTime()):(new Date).setHours(Oe.config.defaultHour,Oe.config.defaultMinute,Oe.config.defaultSeconds,0),!1),M(),Se()),Ie(e),0!==Oe.selectedDates.length&&("input"!==e.type?(M(),Se()):setTimeout(function(){M(),Se()},T))}function y(e,t){return e%12+12*m(t===Oe.l10n.amPM[1])}function D(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function M(){if(void 0!==Oe.hourElement&&void 0!==Oe.minuteElement){var e=(parseInt(Oe.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(Oe.minuteElement.value,10)||0)%60,n=void 0!==Oe.secondElement?(parseInt(Oe.secondElement.value,10)||0)%60:0;void 0!==Oe.amPM&&(e=y(e,Oe.amPM.textContent));var i=void 0!==Oe.config.minTime||Oe.config.minDate&&Oe.minDateHasTime&&Oe.latestSelectedDateObj&&0===a(Oe.latestSelectedDateObj,Oe.config.minDate,!0);if(void 0!==Oe.config.maxTime||Oe.config.maxDate&&Oe.maxDateHasTime&&Oe.latestSelectedDateObj&&0===a(Oe.latestSelectedDateObj,Oe.config.maxDate,!0)){var r=void 0!==Oe.config.maxTime?Oe.config.maxTime:Oe.config.maxDate;e=Math.min(e,r.getHours()),e===r.getHours()&&(t=Math.min(t,r.getMinutes()))}if(i){var o=void 0!==Oe.config.minTime?Oe.config.minTime:Oe.config.minDate;e=Math.max(e,o.getHours()),e===o.getHours()&&(t=Math.max(t,o.getMinutes()))}_(e,t,n)}}function E(e){var t=e||Oe.latestSelectedDateObj;t&&_(t.getHours(),t.getMinutes(),t.getSeconds())}function _(e,t,n){void 0!==Oe.latestSelectedDateObj&&Oe.latestSelectedDateObj.setHours(e%24,t,n||0,0),Oe.hourElement&&Oe.minuteElement&&!Oe.isMobile&&(Oe.hourElement.value=f(Oe.config.time_24hr?e:(12+e)%12+12*m(e%12==0)),Oe.minuteElement.value=f(t),void 0!==Oe.amPM&&(Oe.amPM.textContent=Oe.l10n.amPM[m(e>=12)]),void 0!==Oe.secondElement&&(Oe.secondElement.value=f(n)))}function N(e){var t=parseInt(e.target.value)+(e.delta||0);4!==t.toString().length&&"Enter"!==e.key||(Oe.currentYearElement.blur(),/[^\d]/.test(t.toString())||te(t))}function I(e,t,n,a){return t instanceof Array?t.forEach(function(t){return I(e,t,n,a)}):e instanceof Array?e.forEach(function(e){return I(e,t,n,a)}):(e.addEventListener(t,n,a),void Oe._handlers.push({element:e,event:t,handler:n}))}function O(e){return function(t){1===t.which&&e(t)}}function k(){Ce("onChange")}function A(){if(Oe.config.wrap&&["open","close","toggle","clear"].forEach(function(e){Array.prototype.forEach.call(Oe.element.querySelectorAll("[data-"+e+"]"),function(t){return I(t,"click",Oe[e])})}),Oe.isMobile)return void be();var e=t(re,50);if(Oe._debouncedChange=t(k,T),"range"===Oe.config.mode&&Oe.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&I(Oe.daysContainer,"mouseover",function(e){return ie(e.target)}),I(window.document.body,"keydown",ae),Oe.config.static||I(Oe._input,"keydown",ae),Oe.config.inline||Oe.config.static||I(window,"resize",e),void 0!==window.ontouchstart&&I(window.document.body,"touchstart",ee),I(window.document.body,"mousedown",O(ee)),I(window.document.body,"focus",ee,{capture:!0}),!0===Oe.config.clickOpens&&(I(Oe._input,"focus",Oe.open),I(Oe._input,"mousedown",O(Oe.open))),void 0!==Oe.daysContainer&&(I(Oe.monthNav,"wheel",_e),I(Oe.monthNav,"mousedown",O(Ne)),I(Oe.monthNav,["keyup","increment"],N),I(Oe.daysContainer,"mousedown",O(me)),Oe.config.animate&&(I(Oe.daysContainer,["webkitAnimationEnd","animationend"],P),I(Oe.monthNav,["webkitAnimationEnd","animationend"],Y))),void 0!==Oe.timeContainer&&void 0!==Oe.minuteElement&&void 0!==Oe.hourElement){var n=function(e){return e.target.select()};I(Oe.timeContainer,["wheel","input","increment"],v),I(Oe.timeContainer,"mousedown",O(F)),I(Oe.timeContainer,["wheel","input","increment"],Oe._debouncedChange,{passive:!0}),I([Oe.hourElement,Oe.minuteElement],["focus","click"],n),void 0!==Oe.secondElement&&I(Oe.secondElement,"focus",function(){return Oe.secondElement&&Oe.secondElement.select()}),void 0!==Oe.amPM&&I(Oe.amPM,"mousedown",O(function(e){v(e),k()}))}}function L(){Oe._animationLoop.forEach(function(e){return e()}),Oe._animationLoop=[]}function P(e){if(Oe.daysContainer&&Oe.daysContainer.childNodes.length>1)switch(e.animationName){case"fpSlideLeft":Oe.daysContainer.lastChild&&Oe.daysContainer.lastChild.classList.remove("slideLeftNew"),Oe.daysContainer.removeChild(Oe.daysContainer.firstChild),Oe.days=Oe.daysContainer.firstChild,L();break;case"fpSlideRight":Oe.daysContainer.firstChild&&Oe.daysContainer.firstChild.classList.remove("slideRightNew"),Oe.daysContainer.removeChild(Oe.daysContainer.lastChild),Oe.days=Oe.daysContainer.firstChild,L()}}function Y(e){switch(e.animationName){case"fpSlideLeftNew":case"fpSlideRightNew":Oe.navigationCurrentMonth.classList.remove("slideLeftNew"),Oe.navigationCurrentMonth.classList.remove("slideRightNew");for(var t=Oe.navigationCurrentMonth;t.nextSibling&&/curr/.test(t.nextSibling.className);)Oe.monthNav.removeChild(t.nextSibling);for(;t.previousSibling&&/curr/.test(t.previousSibling.className);)Oe.monthNav.removeChild(t.previousSibling);Oe.oldCurMonth=void 0}}function j(e){var t=void 0!==e?Oe.parseDate(e):Oe.latestSelectedDateObj||(Oe.config.minDate&&Oe.config.minDate>Oe.now?Oe.config.minDate:Oe.config.maxDate&&Oe.config.maxDate<Oe.now?Oe.config.maxDate:Oe.now);try{void 0!==t&&(Oe.currentYear=t.getFullYear(),Oe.currentMonth=t.getMonth())}catch(e){e.message="Invalid date supplied: "+t,Oe.config.errorHandler(e)}Oe.redraw()}function F(e){~e.target.className.indexOf("arrow")&&H(e,e.target.classList.contains("arrowUp")?1:-1)}function H(e,t,n){var a=e&&e.target,i=n||a&&a.parentNode&&a.parentNode.firstChild,r=Me("increment");r.delta=t,i&&i.dispatchEvent(r)}function R(){var e=window.document.createDocumentFragment();if(Oe.calendarContainer=r("div","flatpickr-calendar"),Oe.calendarContainer.tabIndex=-1,!Oe.config.noCalendar){if(e.appendChild(U()),Oe.innerContainer=r("div","flatpickr-innerContainer"),Oe.config.weekNumbers){var t=X(),n=t.weekWrapper,a=t.weekNumbers;Oe.innerContainer.appendChild(n),Oe.weekNumbers=a,Oe.weekWrapper=n}Oe.rContainer=r("div","flatpickr-rContainer"),Oe.rContainer.appendChild(z()),Oe.daysContainer||(Oe.daysContainer=r("div","flatpickr-days"),Oe.daysContainer.tabIndex=-1),J(),Oe.rContainer.appendChild(Oe.daysContainer),Oe.innerContainer.appendChild(Oe.rContainer),e.appendChild(Oe.innerContainer)}Oe.config.enableTime&&e.appendChild(K()),i(Oe.calendarContainer,"rangeMode","range"===Oe.config.mode),i(Oe.calendarContainer,"animate",Oe.config.animate),Oe.calendarContainer.appendChild(e);var o=void 0!==Oe.config.appendTo&&Oe.config.appendTo.nodeType;if((Oe.config.inline||Oe.config.static)&&(Oe.calendarContainer.classList.add(Oe.config.inline?"inline":"static"),Oe.config.inline&&(!o&&Oe.element.parentNode?Oe.element.parentNode.insertBefore(Oe.calendarContainer,Oe._input.nextSibling):void 0!==Oe.config.appendTo&&Oe.config.appendTo.appendChild(Oe.calendarContainer)),Oe.config.static)){var c=r("div","flatpickr-wrapper");Oe.element.parentNode&&Oe.element.parentNode.insertBefore(c,Oe.element),c.appendChild(Oe.element),Oe.altInput&&c.appendChild(Oe.altInput),c.appendChild(Oe.calendarContainer)}Oe.config.static||Oe.config.inline||(void 0!==Oe.config.appendTo?Oe.config.appendTo:window.document.body).appendChild(Oe.calendarContainer)}function q(e,t,n,o){var c=ne(t,!0),l=r("span","flatpickr-day "+e,t.getDate().toString());return l.dateObj=t,l.$i=o,l.setAttribute("aria-label",Oe.formatDate(t,Oe.config.ariaDateFormat)),0===a(t,Oe.now)&&(Oe.todayDateElem=l,l.classList.add("today")),c?(l.tabIndex=-1,xe(t)&&(l.classList.add("selected"),Oe.selectedDateElem=l,"range"===Oe.config.mode&&(i(l,"startRange",Oe.selectedDates[0]&&0===a(t,Oe.selectedDates[0])),i(l,"endRange",Oe.selectedDates[1]&&0===a(t,Oe.selectedDates[1]))))):(l.classList.add("disabled"),Oe.selectedDates[0]&&Oe.minRangeDate&&t>Oe.minRangeDate&&t<Oe.selectedDates[0]?Oe.minRangeDate=t:Oe.selectedDates[0]&&Oe.maxRangeDate&&t<Oe.maxRangeDate&&t>Oe.selectedDates[0]&&(Oe.maxRangeDate=t)),"range"===Oe.config.mode&&(Ee(t)&&!xe(t)&&l.classList.add("inRange"),1===Oe.selectedDates.length&&void 0!==Oe.minRangeDate&&void 0!==Oe.maxRangeDate&&(t<Oe.minRangeDate||t>Oe.maxRangeDate)&&l.classList.add("notAllowed")),Oe.weekNumbers&&"prevMonthDay"!==e&&n%7==1&&Oe.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+Oe.config.getWeek(t)+"</span>"),Ce("onDayCreate",l),l}function B(e,t){var n=e+t||0,a=void 0!==e?Oe.days.childNodes[n]:Oe.selectedDateElem||Oe.todayDateElem||Oe.days.childNodes[0],i=function(){a=a||Oe.days.childNodes[n],a.focus(),"range"===Oe.config.mode&&ie(a)};if(void 0===a&&0!==t)return t>0?(Oe.changeMonth(1,!0,void 0,!0),n%=42):t<0&&(Oe.changeMonth(-1,!0,void 0,!0),n+=42),W(i);i()}function W(e){!0===Oe.config.animate?Oe._animationLoop.push(e):e()}function J(e){if(void 0!==Oe.daysContainer){var t=(new Date(Oe.currentYear,Oe.currentMonth,1).getDay()-Oe.l10n.firstDayOfWeek+7)%7,n="range"===Oe.config.mode,a=Oe.utils.getDaysInMonth((Oe.currentMonth-1+12)%12),i=Oe.utils.getDaysInMonth(),c=window.document.createDocumentFragment(),l=a+1-t,u=0;for(Oe.weekNumbers&&Oe.weekNumbers.firstChild&&(Oe.weekNumbers.textContent=""),n&&(Oe.minRangeDate=new Date(Oe.currentYear,Oe.currentMonth-1,l),Oe.maxRangeDate=new Date(Oe.currentYear,Oe.currentMonth+1,(42-t)%i));l<=a;l++,u++)c.appendChild(q("prevMonthDay",new Date(Oe.currentYear,Oe.currentMonth-1,l),l,u));for(l=1;l<=i;l++,u++)c.appendChild(q("",new Date(Oe.currentYear,Oe.currentMonth,l),l,u));for(var s=i+1;s<=42-t;s++,u++)c.appendChild(q("nextMonthDay",new Date(Oe.currentYear,Oe.currentMonth+1,s%i),s,u));n&&1===Oe.selectedDates.length&&c.childNodes[0]?(Oe._hidePrevMonthArrow=Oe._hidePrevMonthArrow||!!Oe.minRangeDate&&Oe.minRangeDate>c.childNodes[0].dateObj,Oe._hideNextMonthArrow=Oe._hideNextMonthArrow||!!Oe.maxRangeDate&&Oe.maxRangeDate<new Date(Oe.currentYear,Oe.currentMonth+1,1)):Te();var d=r("div","dayContainer");if(d.appendChild(c),Oe.config.animate&&void 0!==e)for(;Oe.daysContainer.childNodes.length>1;)Oe.daysContainer.removeChild(Oe.daysContainer.firstChild);else o(Oe.daysContainer);e&&e>=0?Oe.daysContainer.appendChild(d):Oe.daysContainer.insertBefore(d,Oe.daysContainer.firstChild),Oe.days=Oe.daysContainer.childNodes[0]}}function U(){var e=window.document.createDocumentFragment();Oe.monthNav=r("div","flatpickr-month"),Oe.prevMonthNav=r("span","flatpickr-prev-month"),Oe.prevMonthNav.innerHTML=Oe.config.prevArrow,Oe.currentMonthElement=r("span","cur-month"),Oe.currentMonthElement.title=Oe.l10n.scrollTitle;var t=l("cur-year",{tabindex:"-1"});return Oe.currentYearElement=t.childNodes[0],Oe.currentYearElement.title=Oe.l10n.scrollTitle,Oe.config.minDate&&Oe.currentYearElement.setAttribute("data-min",Oe.config.minDate.getFullYear().toString()),Oe.config.maxDate&&(Oe.currentYearElement.setAttribute("data-max",Oe.config.maxDate.getFullYear().toString()),Oe.currentYearElement.disabled=!!Oe.config.minDate&&Oe.config.minDate.getFullYear()===Oe.config.maxDate.getFullYear()),Oe.nextMonthNav=r("span","flatpickr-next-month"),Oe.nextMonthNav.innerHTML=Oe.config.nextArrow,Oe.navigationCurrentMonth=r("div","flatpickr-current-month"),Oe.navigationCurrentMonth.appendChild(Oe.currentMonthElement),Oe.navigationCurrentMonth.appendChild(t),e.appendChild(Oe.prevMonthNav),e.appendChild(Oe.navigationCurrentMonth),e.appendChild(Oe.nextMonthNav),Oe.monthNav.appendChild(e),Object.defineProperty(Oe,"_hidePrevMonthArrow",{get:function(){return Oe.__hidePrevMonthArrow},set:function(e){Oe.__hidePrevMonthArrow!==e&&(Oe.prevMonthNav.style.display=e?"none":"block"),Oe.__hidePrevMonthArrow=e}}),Object.defineProperty(Oe,"_hideNextMonthArrow",{get:function(){return Oe.__hideNextMonthArrow},set:function(e){Oe.__hideNextMonthArrow!==e&&(Oe.nextMonthNav.style.display=e?"none":"block"),Oe.__hideNextMonthArrow=e}}),Te(),Oe.monthNav}function K(){Oe.calendarContainer.classList.add("hasTime"),Oe.config.noCalendar&&Oe.calendarContainer.classList.add("noCalendar"),Oe.timeContainer=r("div","flatpickr-time"),Oe.timeContainer.tabIndex=-1;var e=r("span","flatpickr-time-separator",":"),t=l("flatpickr-hour");Oe.hourElement=t.childNodes[0];var n=l("flatpickr-minute");if(Oe.minuteElement=n.childNodes[0],Oe.hourElement.tabIndex=Oe.minuteElement.tabIndex=-1,Oe.hourElement.value=f(Oe.latestSelectedDateObj?Oe.latestSelectedDateObj.getHours():Oe.config.time_24hr?Oe.config.defaultHour:D(Oe.config.defaultHour)),Oe.minuteElement.value=f(Oe.latestSelectedDateObj?Oe.latestSelectedDateObj.getMinutes():Oe.config.defaultMinute),Oe.hourElement.setAttribute("data-step",Oe.config.hourIncrement.toString()),Oe.minuteElement.setAttribute("data-step",Oe.config.minuteIncrement.toString()),Oe.hourElement.setAttribute("data-min",Oe.config.time_24hr?"0":"1"),Oe.hourElement.setAttribute("data-max",Oe.config.time_24hr?"23":"12"),Oe.minuteElement.setAttribute("data-min","0"),Oe.minuteElement.setAttribute("data-max","59"),Oe.hourElement.title=Oe.minuteElement.title=Oe.l10n.scrollTitle,Oe.timeContainer.appendChild(t),Oe.timeContainer.appendChild(e),Oe.timeContainer.appendChild(n),Oe.config.time_24hr&&Oe.timeContainer.classList.add("time24hr"),Oe.config.enableSeconds){Oe.timeContainer.classList.add("hasSeconds");var a=l("flatpickr-second");Oe.secondElement=a.childNodes[0],Oe.secondElement.value=f(Oe.latestSelectedDateObj?Oe.latestSelectedDateObj.getSeconds():Oe.config.defaultSeconds),Oe.secondElement.setAttribute("data-step",Oe.minuteElement.getAttribute("data-step")),Oe.secondElement.setAttribute("data-min",Oe.minuteElement.getAttribute("data-min")),Oe.secondElement.setAttribute("data-max",Oe.minuteElement.getAttribute("data-max")),Oe.timeContainer.appendChild(r("span","flatpickr-time-separator",":")),Oe.timeContainer.appendChild(a)}return Oe.config.time_24hr||(Oe.amPM=r("span","flatpickr-am-pm",Oe.l10n.amPM[m((Oe.latestSelectedDateObj?Oe.hourElement.value:Oe.config.defaultHour)>11)]),Oe.amPM.title=Oe.l10n.toggleTitle,Oe.amPM.tabIndex=-1,Oe.timeContainer.appendChild(Oe.amPM)),Oe.timeContainer}function z(){Oe.weekdayContainer||(Oe.weekdayContainer=r("div","flatpickr-weekdays"));var e=Oe.l10n.firstDayOfWeek,t=Oe.l10n.weekdays.shorthand.slice();return e>0&&e<t.length&&(t=t.splice(e,t.length).concat(t.splice(0,e))),Oe.weekdayContainer.innerHTML="\n    <span class=flatpickr-weekday>\n      "+t.join("</span><span class=flatpickr-weekday>")+"\n    </span>\n    ",Oe.weekdayContainer}function X(){Oe.calendarContainer.classList.add("hasWeeks");var e=r("div","flatpickr-weekwrapper");e.appendChild(r("span","flatpickr-weekday",Oe.l10n.weekAbbreviation));var t=r("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function $(e,t,n,a){void 0===t&&(t=!0),void 0===n&&(n=Oe.config.animate),void 0===a&&(a=!1);var i=t?e:e-Oe.currentMonth;if(!(i<0&&Oe._hidePrevMonthArrow||i>0&&Oe._hideNextMonthArrow)){if(Oe.currentMonth+=i,(Oe.currentMonth<0||Oe.currentMonth>11)&&(Oe.currentYear+=Oe.currentMonth>11?1:-1,Oe.currentMonth=(Oe.currentMonth+12)%12,Ce("onYearChange")),J(n?i:void 0),!n)return Ce("onMonthChange"),Te();var r=Oe.navigationCurrentMonth;if(i<0)for(;r.nextSibling&&/curr/.test(r.nextSibling.className);)Oe.monthNav.removeChild(r.nextSibling);else if(i>0)for(;r.previousSibling&&/curr/.test(r.previousSibling.className);)Oe.monthNav.removeChild(r.previousSibling);Oe.oldCurMonth=Oe.navigationCurrentMonth,Oe.navigationCurrentMonth=Oe.monthNav.insertBefore(Oe.oldCurMonth.cloneNode(!0),i>0?Oe.oldCurMonth.nextSibling:Oe.oldCurMonth);var o=Oe.daysContainer;if(o.firstChild&&o.lastChild&&(i>0?(o.firstChild.classList.add("slideLeft"),o.lastChild.classList.add("slideLeftNew"),Oe.oldCurMonth.classList.add("slideLeft"),Oe.navigationCurrentMonth.classList.add("slideLeftNew")):i<0&&(o.firstChild.classList.add("slideRightNew"),o.lastChild.classList.add("slideRight"),Oe.oldCurMonth.classList.add("slideRight"),Oe.navigationCurrentMonth.classList.add("slideRightNew"))),Oe.currentMonthElement=Oe.navigationCurrentMonth.firstChild,Oe.currentYearElement=Oe.navigationCurrentMonth.lastChild.childNodes[0],Te(),Oe.oldCurMonth.firstChild&&(Oe.oldCurMonth.firstChild.textContent=C(Oe.currentMonth-i,Oe.config.shorthandCurrentMonth,Oe.l10n)),W(function(){return Ce("onMonthChange")}),a&&document.activeElement&&document.activeElement.$i){var c=document.activeElement.$i;W(function(){B(c,0)})}}}function G(e){void 0===e&&(e=!0),Oe.input.value="",Oe.altInput&&(Oe.altInput.value=""),Oe.mobileInput&&(Oe.mobileInput.value=""),Oe.selectedDates=[],Oe.latestSelectedDateObj=void 0,Oe.showTimeInput=!1,Oe.config.enableTime&&(void 0!==Oe.config.minDate?E(Oe.config.minDate):_(Oe.config.defaultHour,Oe.config.defaultMinute,Oe.config.defaultSeconds)),Oe.redraw(),e&&Ce("onChange")}function V(){Oe.isOpen=!1,Oe.isMobile||(Oe.calendarContainer.classList.remove("open"),Oe._input.classList.remove("active")),Ce("onClose")}function Z(){void 0!==Oe.config&&Ce("onDestroy");for(var e=Oe._handlers.length;e--;){var t=Oe._handlers[e];t.element.removeEventListener(t.event,t.handler)}Oe._handlers=[],Oe.mobileInput?(Oe.mobileInput.parentNode&&Oe.mobileInput.parentNode.removeChild(Oe.mobileInput),Oe.mobileInput=void 0):Oe.calendarContainer&&Oe.calendarContainer.parentNode&&Oe.calendarContainer.parentNode.removeChild(Oe.calendarContainer),Oe.altInput&&(Oe.input.type="text",Oe.altInput.parentNode&&Oe.altInput.parentNode.removeChild(Oe.altInput),delete Oe.altInput),Oe.input&&(Oe.input.type=Oe.input._type,Oe.input.classList.remove("flatpickr-input"),Oe.input.removeAttribute("readonly"),Oe.input.value=""),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(e){try{delete Oe[e]}catch(e){}})}function Q(e){return!(!Oe.config.appendTo||!Oe.config.appendTo.contains(e))||Oe.calendarContainer.contains(e)}function ee(e){if(Oe.isOpen&&!Oe.config.inline){var t=Q(e.target),n=e.target===Oe.input||e.target===Oe.altInput||Oe.element.contains(e.target)||e.path&&e.path.indexOf&&(~e.path.indexOf(Oe.input)||~e.path.indexOf(Oe.altInput)),a="blur"===e.type?n&&e.relatedTarget&&!Q(e.relatedTarget):!n&&!t,i=!Oe.config.ignoredFocusElements.some(function(t){return t.contains(e.target)});a&&i&&(Oe.close(),"range"===Oe.config.mode&&1===Oe.selectedDates.length&&(Oe.clear(!1),Oe.redraw()))}}function te(e){if(!(!e||Oe.currentYearElement.getAttribute("data-min")&&e<parseInt(Oe.currentYearElement.getAttribute("data-min"))||Oe.currentYearElement.getAttribute("data-max")&&e>parseInt(Oe.currentYearElement.getAttribute("data-max")))){var t=e,n=Oe.currentYear!==t;Oe.currentYear=t||Oe.currentYear,Oe.config.maxDate&&Oe.currentYear===Oe.config.maxDate.getFullYear()?Oe.currentMonth=Math.min(Oe.config.maxDate.getMonth(),Oe.currentMonth):Oe.config.minDate&&Oe.currentYear===Oe.config.minDate.getFullYear()&&(Oe.currentMonth=Math.max(Oe.config.minDate.getMonth(),Oe.currentMonth)),n&&(Oe.redraw(),Ce("onYearChange"))}}function ne(e,t){void 0===t&&(t=!0);var n=Oe.parseDate(e,void 0,t);if(Oe.config.minDate&&n&&a(n,Oe.config.minDate,void 0!==t?t:!Oe.minDateHasTime)<0||Oe.config.maxDate&&n&&a(n,Oe.config.maxDate,void 0!==t?t:!Oe.maxDateHasTime)>0)return!1;if(!Oe.config.enable.length&&!Oe.config.disable.length)return!0;if(void 0===n)return!1;for(var i=Oe.config.enable.length>0,r=i?Oe.config.enable:Oe.config.disable,o=0,c=void 0;o<r.length;o++){if("function"==typeof(c=r[o])&&c(n))return i;if(c instanceof Date&&void 0!==n&&c.getTime()===n.getTime())return i;if("string"==typeof c&&void 0!==n){var l=Oe.parseDate(c,void 0,!0);return l&&l.getTime()===n.getTime()?i:!i}if("object"==typeof c&&void 0!==n&&c.from&&c.to&&n.getTime()>=c.from.getTime()&&n.getTime()<=c.to.getTime())return i}return!i}function ae(e){var t=e.target===Oe._input,n=Q(e.target),a=Oe.config.allowInput,i=Oe.isOpen&&(!a||!t),r=Oe.config.inline&&t&&!a;if(13===e.keyCode&&t){if(a)return Oe.setDate(Oe._input.value,!0,e.target===Oe.altInput?Oe.config.altFormat:Oe.config.dateFormat),e.target.blur();Oe.open()}else if(n||i||r){var o=!!Oe.timeContainer&&Oe.timeContainer.contains(e.target);switch(e.keyCode){case 13:o?Se():me(e);break;case 27:e.preventDefault(),Oe.close();break;case 8:case 46:t&&!Oe.config.allowInput&&Oe.clear();break;case 37:case 39:if(o)Oe.hourElement&&Oe.hourElement.focus();else if(e.preventDefault(),Oe.daysContainer){var c=39===e.keyCode?1:-1;e.ctrlKey?$(c,!0,void 0,!0):B(e.target.$i,c)}break;case 38:case 40:e.preventDefault();var l=40===e.keyCode?1:-1;Oe.daysContainer&&void 0!==e.target.$i?e.ctrlKey?(te(Oe.currentYear-l),B(e.target.$i,0)):o||B(e.target.$i,7*l):Oe.config.enableTime&&(!o&&Oe.hourElement&&Oe.hourElement.focus(),v(e),Oe._debouncedChange());break;case 9:e.target===Oe.hourElement?(e.preventDefault(),Oe.minuteElement.select()):e.target===Oe.minuteElement&&(Oe.secondElement||Oe.amPM)?(e.preventDefault(),void 0!==Oe.secondElement?Oe.secondElement.focus():void 0!==Oe.amPM&&Oe.amPM.focus()):e.target===Oe.secondElement&&Oe.amPM&&(e.preventDefault(),Oe.amPM.focus())}switch(e.key){case Oe.l10n.amPM[0].charAt(0):void 0!==Oe.amPM&&e.target===Oe.amPM&&(Oe.amPM.textContent=Oe.l10n.amPM[0],M(),Se());break;case Oe.l10n.amPM[1].charAt(0):void 0!==Oe.amPM&&e.target===Oe.amPM&&(Oe.amPM.textContent=Oe.l10n.amPM[1],M(),Se())}Ce("onKeyDown",e)}}function ie(e){if(1===Oe.selectedDates.length&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&void 0!==Oe.minRangeDate&&void 0!==Oe.maxRangeDate){for(var t=e.dateObj,n=Oe.parseDate(Oe.selectedDates[0],void 0,!0),a=Math.min(t.getTime(),Oe.selectedDates[0].getTime()),i=Math.max(t.getTime(),Oe.selectedDates[0].getTime()),r=!1,o=a;o<i;o+=x.DAY)if(!ne(new Date(o))){r=!0;break}for(var c=0,l=Oe.days.childNodes[c].dateObj;c<42;c++,l=Oe.days.childNodes[c]&&Oe.days.childNodes[c].dateObj)!function(o,c){var l=c.getTime(),u=l<Oe.minRangeDate.getTime()||l>Oe.maxRangeDate.getTime(),s=Oe.days.childNodes[o];if(u)return s.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(e){s.classList.remove(e)}),"continue";if(r&&!u)return"continue";["startRange","inRange","endRange","notAllowed"].forEach(function(e){s.classList.remove(e)});var d=Math.max(Oe.minRangeDate.getTime(),a),f=Math.min(Oe.maxRangeDate.getTime(),i);e.classList.add(t<Oe.selectedDates[0]?"startRange":"endRange"),n<t&&l===n.getTime()?s.classList.add("startRange"):n>t&&l===n.getTime()&&s.classList.add("endRange"),l>=d&&l<=f&&s.classList.add("inRange")}(c,l)}}function re(){!Oe.isOpen||Oe.config.static||Oe.config.inline||se()}function oe(e,t){if(void 0===t&&(t=Oe._input),Oe.isMobile)return e&&(e.preventDefault(),e.target&&e.target.blur()),setTimeout(function(){void 0!==Oe.mobileInput&&Oe.mobileInput.click()},0),void Ce("onOpen");if(!Oe._input.disabled&&!Oe.config.inline){var n=Oe.isOpen;Oe.isOpen=!0,n||(Oe.calendarContainer.classList.add("open"),Oe._input.classList.add("active"),Ce("onOpen"),se(t))}}function ce(e){return function(t){var n=Oe.config["_"+e+"Date"]=Oe.parseDate(t,Oe.config.dateFormat),a=Oe.config["_"+("min"===e?"max":"min")+"Date"];void 0!==n&&(Oe["min"===e?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),Oe.selectedDates&&(Oe.selectedDates=Oe.selectedDates.filter(function(e){return ne(e)}),Oe.selectedDates.length||"min"!==e||E(n),Se()),Oe.daysContainer&&(de(),void 0!==n?Oe.currentYearElement[e]=n.getFullYear().toString():Oe.currentYearElement.removeAttribute(e),Oe.currentYearElement.disabled=!!a&&void 0!==n&&a.getFullYear()===n.getFullYear())}}function le(){var t=["wrap","weekNumbers","allowInput","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],n=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"];Oe.config=d({},S.defaultConfig);var a=d({},u,JSON.parse(JSON.stringify(e.dataset||{}))),i={};Oe.config.parseDate=a.parseDate,Oe.config.formatDate=a.formatDate,Object.defineProperty(Oe.config,"enable",{get:function(){return Oe.config._enable||[]},set:function(e){Oe.config._enable=he(e)}}),Object.defineProperty(Oe.config,"disable",{get:function(){return Oe.config._disable||[]},set:function(e){Oe.config._disable=he(e)}}),!a.dateFormat&&a.enableTime&&(i.dateFormat=a.noCalendar?"H:i"+(a.enableSeconds?":S":""):S.defaultConfig.dateFormat+" H:i"+(a.enableSeconds?":S":"")),a.altInput&&a.enableTime&&!a.altFormat&&(i.altFormat=a.noCalendar?"h:i"+(a.enableSeconds?":S K":" K"):S.defaultConfig.altFormat+" h:i"+(a.enableSeconds?":S":"")+" K"),Object.defineProperty(Oe.config,"minDate",{get:function(){return Oe.config._minDate},set:ce("min")}),Object.defineProperty(Oe.config,"maxDate",{get:function(){return Oe.config._maxDate},set:ce("max")});var r=function(e){return function(t){Oe.config["min"===e?"_minTime":"_maxTime"]=Oe.parseDate(t,"H:i")}};Object.defineProperty(Oe.config,"minTime",{get:function(){return Oe.config._minTime},set:r("min")}),Object.defineProperty(Oe.config,"maxTime",{get:function(){return Oe.config._maxTime},set:r("max")}),Object.assign(Oe.config,i,a);for(var o=0;o<t.length;o++)Oe.config[t[o]]=!0===Oe.config[t[o]]||"true"===Oe.config[t[o]];for(var o=n.length;o--;)void 0!==Oe.config[n[o]]&&(Oe.config[n[o]]=g(Oe.config[n[o]]||[]).map(p));for(var o=0;o<Oe.config.plugins.length;o++){var c=Oe.config.plugins[o](Oe)||{};for(var l in c)~n.indexOf(l)?Oe.config[l]=g(c[l]).map(p).concat(Oe.config[l]):void 0===a[l]&&(Oe.config[l]=c[l])}Oe.isMobile=!Oe.config.disableMobile&&!Oe.config.inline&&"single"===Oe.config.mode&&!Oe.config.disable.length&&!Oe.config.enable.length&&!Oe.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Ce("onParseConfig")}function ue(){"object"!=typeof Oe.config.locale&&void 0===S.l10ns[Oe.config.locale]&&Oe.config.errorHandler(new Error("flatpickr: invalid locale "+Oe.config.locale)),Oe.l10n=d({},S.l10ns.default,"object"==typeof Oe.config.locale?Oe.config.locale:"default"!==Oe.config.locale?S.l10ns[Oe.config.locale]:void 0),h.K="("+Oe.l10n.amPM[0]+"|"+Oe.l10n.amPM[1]+"|"+Oe.l10n.amPM[0].toLowerCase()+"|"+Oe.l10n.amPM[1].toLowerCase()+")",Oe.formatDate=b(Oe)}function se(e){if(void 0!==Oe.calendarContainer){Ce("onPreCalendarPosition");var t=e||Oe._positionElement,n=Array.prototype.reduce.call(Oe.calendarContainer.children,function(e,t){return e+t.offsetHeight},0),a=Oe.calendarContainer.offsetWidth,r=Oe.config.position,o=t.getBoundingClientRect(),c=window.innerHeight-o.bottom,l="above"===r||"below"!==r&&c<n&&o.top>n,u=window.pageYOffset+o.top+(l?-n-2:t.offsetHeight+2);if(i(Oe.calendarContainer,"arrowTop",!l),i(Oe.calendarContainer,"arrowBottom",l),!Oe.config.inline){var s=window.pageXOffset+o.left,d=window.document.body.offsetWidth-o.right,f=s+a>window.document.body.offsetWidth;i(Oe.calendarContainer,"rightMost",f),Oe.config.static||(Oe.calendarContainer.style.top=u+"px",f?(Oe.calendarContainer.style.left="auto",Oe.calendarContainer.style.right=d+"px"):(Oe.calendarContainer.style.left=s+"px",Oe.calendarContainer.style.right="auto"))}}}function de(){Oe.config.noCalendar||Oe.isMobile||(z(),Te(),J())}function fe(){Oe._input.focus(),-1===window.navigator.userAgent.indexOf("MSIE")?Oe.close():setTimeout(Oe.close,0)}function me(e){e.preventDefault(),e.stopPropagation();var t=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("disabled")&&!e.classList.contains("notAllowed")},n=c(e.target,t);if(void 0!==n){var i=n,r=Oe.latestSelectedDateObj=new Date(i.dateObj.getTime()),o=r.getMonth()!==Oe.currentMonth&&"range"!==Oe.config.mode;if(Oe.selectedDateElem=i,"single"===Oe.config.mode)Oe.selectedDates=[r];else if("multiple"===Oe.config.mode){var l=xe(r);l?Oe.selectedDates.splice(parseInt(l),1):Oe.selectedDates.push(r)}else"range"===Oe.config.mode&&(2===Oe.selectedDates.length&&Oe.clear(),Oe.selectedDates.push(r),0!==a(r,Oe.selectedDates[0],!0)&&Oe.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()}));if(M(),o){var u=Oe.currentYear!==r.getFullYear();Oe.currentYear=r.getFullYear(),Oe.currentMonth=r.getMonth(),u&&Ce("onYearChange"),Ce("onMonthChange")}if(J(),Oe.config.minDate&&Oe.minDateHasTime&&Oe.config.enableTime&&0===a(r,Oe.config.minDate)&&E(Oe.config.minDate),Se(),Oe.config.enableTime&&setTimeout(function(){return Oe.showTimeInput=!0},50),"range"===Oe.config.mode&&(1===Oe.selectedDates.length?(ie(i),Oe._hidePrevMonthArrow=Oe._hidePrevMonthArrow||void 0!==Oe.minRangeDate&&Oe.minRangeDate>Oe.days.childNodes[0].dateObj,Oe._hideNextMonthArrow=Oe._hideNextMonthArrow||void 0!==Oe.maxRangeDate&&Oe.maxRangeDate<new Date(Oe.currentYear,Oe.currentMonth+1,1)):Te()),o?W(function(){return Oe.selectedDateElem&&Oe.selectedDateElem.focus()}):B(i.$i,0),void 0!==Oe.hourElement&&setTimeout(function(){return void 0!==Oe.hourElement&&Oe.hourElement.select()},451),Oe.config.closeOnSelect){var s="single"===Oe.config.mode&&!Oe.config.enableTime,d="range"===Oe.config.mode&&2===Oe.selectedDates.length&&!Oe.config.enableTime;(s||d)&&fe()}k()}}function ge(e,t){null!==e&&"object"==typeof e?Object.assign(Oe.config,e):(Oe.config[e]=t,void 0!==ke[e]&&ke[e].forEach(function(e){return e()})),Oe.redraw(),j()}function pe(e,t){var n=[];if(e instanceof Array)n=e.map(function(e){return Oe.parseDate(e,t)});else if(e instanceof Date||"number"==typeof e)n=[Oe.parseDate(e,t)];else if("string"==typeof e)switch(Oe.config.mode){case"single":n=[Oe.parseDate(e,t)];break;case"multiple":n=e.split(Oe.config.conjunction).map(function(e){return Oe.parseDate(e,t)});break;case"range":n=e.split(Oe.l10n.rangeSeparator).map(function(e){return Oe.parseDate(e,t)})}else Oe.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));Oe.selectedDates=n.filter(function(e){return e instanceof Date&&ne(e,!1)}),Oe.selectedDates.sort(function(e,t){return e.getTime()-t.getTime()})}function ve(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=Oe.config.dateFormat),0!==e&&!e)return Oe.clear(t);pe(e,n),Oe.showTimeInput=Oe.selectedDates.length>0,Oe.latestSelectedDateObj=Oe.selectedDates[0],Oe.redraw(),j(),E(),Se(t),t&&Ce("onChange")}function he(e){return e.map(function(e){return"string"==typeof e||"number"==typeof e||e instanceof Date?Oe.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:Oe.parseDate(e.from,void 0),to:Oe.parseDate(e.to,void 0)}:e}).filter(function(e){return e})}function ye(){Oe.selectedDates=[],Oe.now=new Date;var e=Oe.config.defaultDate||Oe.input.value;e&&pe(e,Oe.config.dateFormat);var t=Oe.selectedDates.length?Oe.selectedDates[0]:Oe.config.minDate&&Oe.config.minDate.getTime()>Oe.now.getTime()?Oe.config.minDate:Oe.config.maxDate&&Oe.config.maxDate.getTime()<Oe.now.getTime()?Oe.config.maxDate:Oe.now;Oe.currentYear=t.getFullYear(),Oe.currentMonth=t.getMonth(),Oe.selectedDates.length&&(Oe.latestSelectedDateObj=Oe.selectedDates[0]),void 0!==Oe.config.minTime&&(Oe.config.minTime=Oe.parseDate(Oe.config.minTime,"H:i")),void 0!==Oe.config.maxTime&&(Oe.config.maxTime=Oe.parseDate(Oe.config.maxTime,"H:i")),Oe.minDateHasTime=!!Oe.config.minDate&&(Oe.config.minDate.getHours()>0||Oe.config.minDate.getMinutes()>0||Oe.config.minDate.getSeconds()>0),Oe.maxDateHasTime=!!Oe.config.maxDate&&(Oe.config.maxDate.getHours()>0||Oe.config.maxDate.getMinutes()>0||Oe.config.maxDate.getSeconds()>0),Object.defineProperty(Oe,"showTimeInput",{get:function(){return Oe._showTimeInput},set:function(e){Oe._showTimeInput=e,Oe.calendarContainer&&i(Oe.calendarContainer,"showTimeInput",e),Oe.isOpen&&se()}})}function De(){if(Oe.input=Oe.config.wrap?e.querySelector("[data-input]"):e,!Oe.input)return void Oe.config.errorHandler(new Error("Invalid input element specified"));Oe.input._type=Oe.input.type,Oe.input.type="text",Oe.input.classList.add("flatpickr-input"),Oe._input=Oe.input,Oe.config.altInput&&(Oe.altInput=r(Oe.input.nodeName,Oe.input.className+" "+Oe.config.altInputClass),Oe._input=Oe.altInput,Oe.altInput.placeholder=Oe.input.placeholder,Oe.altInput.disabled=Oe.input.disabled,Oe.altInput.required=Oe.input.required,Oe.altInput.type="text",Oe.input.type="hidden",!Oe.config.static&&Oe.input.parentNode&&Oe.input.parentNode.insertBefore(Oe.altInput,Oe.input.nextSibling)),Oe.config.allowInput||Oe._input.setAttribute("readonly","readonly"),Oe._positionElement=Oe.config.positionElement||Oe._input}function be(){var e=Oe.config.enableTime?Oe.config.noCalendar?"time":"datetime-local":"date";Oe.mobileInput=r("input",Oe.input.className+" flatpickr-mobile"),Oe.mobileInput.step=Oe.input.getAttribute("step")||"any",Oe.mobileInput.tabIndex=1,Oe.mobileInput.type=e,Oe.mobileInput.disabled=Oe.input.disabled,Oe.mobileInput.placeholder=Oe.input.placeholder,Oe.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",Oe.selectedDates.length&&(Oe.mobileInput.defaultValue=Oe.mobileInput.value=Oe.formatDate(Oe.selectedDates[0],Oe.mobileFormatStr)),Oe.config.minDate&&(Oe.mobileInput.min=Oe.formatDate(Oe.config.minDate,"Y-m-d")),Oe.config.maxDate&&(Oe.mobileInput.max=Oe.formatDate(Oe.config.maxDate,"Y-m-d")),Oe.input.type="hidden",void 0!==Oe.altInput&&(Oe.altInput.type="hidden");try{Oe.input.parentNode&&Oe.input.parentNode.insertBefore(Oe.mobileInput,Oe.input.nextSibling)}catch(e){}I(Oe.mobileInput,"change",function(e){Oe.setDate(e.target.value,!1,Oe.mobileFormatStr),Ce("onChange"),Ce("onClose")})}function we(){if(Oe.isOpen)return Oe.close();Oe.open()}function Ce(e,t){var n=Oe.config[e];if(void 0!==n&&n.length>0)for(var a=0;n[a]&&a<n.length;a++)n[a](Oe.selectedDates,Oe.input.value,Oe,t);"onChange"===e&&(Oe.input.dispatchEvent(Me("change")),Oe.input.dispatchEvent(Me("input")))}function Me(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function xe(e){for(var t=0;t<Oe.selectedDates.length;t++)if(0===a(Oe.selectedDates[t],e))return""+t;return!1}function Ee(e){return!("range"!==Oe.config.mode||Oe.selectedDates.length<2)&&(a(e,Oe.selectedDates[0])>=0&&a(e,Oe.selectedDates[1])<=0)}function Te(){Oe.config.noCalendar||Oe.isMobile||!Oe.monthNav||(Oe.currentMonthElement.textContent=C(Oe.currentMonth,Oe.config.shorthandCurrentMonth,Oe.l10n)+" ",Oe.currentYearElement.value=Oe.currentYear.toString(),Oe._hidePrevMonthArrow=void 0!==Oe.config.minDate&&(Oe.currentYear===Oe.config.minDate.getFullYear()?Oe.currentMonth<=Oe.config.minDate.getMonth():Oe.currentYear<Oe.config.minDate.getFullYear()),Oe._hideNextMonthArrow=void 0!==Oe.config.maxDate&&(Oe.currentYear===Oe.config.maxDate.getFullYear()?Oe.currentMonth+1>Oe.config.maxDate.getMonth():Oe.currentYear>Oe.config.maxDate.getFullYear()))}function Se(e){if(void 0===e&&(e=!0),!Oe.selectedDates.length)return Oe.clear(e);void 0!==Oe.mobileInput&&Oe.mobileFormatStr&&(Oe.mobileInput.value=void 0!==Oe.latestSelectedDateObj?Oe.formatDate(Oe.latestSelectedDateObj,Oe.mobileFormatStr):"");var t="range"!==Oe.config.mode?Oe.config.conjunction:Oe.l10n.rangeSeparator;Oe.input.value=Oe.selectedDates.map(function(e){return Oe.formatDate(e,Oe.config.dateFormat)}).join(t),void 0!==Oe.altInput&&(Oe.altInput.value=Oe.selectedDates.map(function(e){return Oe.formatDate(e,Oe.config.altFormat)}).join(t)),!1!==e&&Ce("onValueUpdate")}function _e(e){e.preventDefault();var t=Oe.currentYearElement.parentNode&&Oe.currentYearElement.parentNode.contains(e.target);if(e.target===Oe.currentMonthElement||t){var a=n(e);t?(te(Oe.currentYear+a),e.target.value=Oe.currentYear.toString()):Oe.changeMonth(a,!0,!1)}}function Ne(e){var t=Oe.prevMonthNav.contains(e.target),n=Oe.nextMonthNav.contains(e.target);t||n?$(t?-1:1):e.target===Oe.currentYearElement?(e.preventDefault(),Oe.currentYearElement.select()):"arrowUp"===e.target.className?Oe.changeYear(Oe.currentYear+1):"arrowDown"===e.target.className&&Oe.changeYear(Oe.currentYear-1)}function Ie(e){e.preventDefault();var t="keydown"===e.type,n=e.target;void 0!==Oe.amPM&&e.target===Oe.amPM&&(Oe.amPM.textContent=Oe.l10n.amPM[m(Oe.amPM.textContent===Oe.l10n.amPM[0])]);var a=parseFloat(n.getAttribute("data-min")),i=parseFloat(n.getAttribute("data-max")),r=parseFloat(n.getAttribute("data-step")),o=parseInt(n.value,10),c=e.delta||(t?38===e.which?1:-1:Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY))||0),l=o+r*c;if(void 0!==n.value&&2===n.value.length){var u=n===Oe.hourElement,s=n===Oe.minuteElement;l<a?(l=i+l+m(!u)+(m(u)&&m(!Oe.amPM)),s&&H(void 0,-1,Oe.hourElement)):l>i&&(l=n===Oe.hourElement?l-i-m(!Oe.amPM):a,s&&H(void 0,1,Oe.hourElement)),Oe.amPM&&u&&(1===r?l+o===23:Math.abs(l-o)>r)&&(Oe.amPM.textContent=Oe.l10n.amPM[m(Oe.amPM.textContent===Oe.l10n.amPM[0])]),n.value=f(l)}}var Oe={};Oe.parseDate=w(Oe),Oe._animationLoop=[],Oe._handlers=[],Oe._bind=I,Oe._setHoursFromDate=E,Oe.changeMonth=$,Oe.changeYear=te,Oe.clear=G,Oe.close=V,Oe._createElement=r,Oe.destroy=Z,Oe.isEnabled=ne,Oe.jumpToDate=j,Oe.open=oe,Oe.redraw=de,Oe.set=ge,Oe.setDate=ve,Oe.toggle=we;var ke={locale:[ue]};return function(){Oe.element=Oe.input=e,Oe.isOpen=!1,le(),ue(),De(),ye(),s(),Oe.isMobile||R(),A(),(Oe.selectedDates.length||Oe.config.noCalendar)&&(Oe.config.enableTime&&E(Oe.config.noCalendar?Oe.latestSelectedDateObj||Oe.config.minDate:void 0),Se(!1)),Oe.showTimeInput=Oe.selectedDates.length>0||Oe.config.noCalendar,void 0!==Oe.weekWrapper&&void 0!==Oe.daysContainer&&(Oe.calendarContainer.style.width=Oe.daysContainer.offsetWidth+Oe.weekWrapper.offsetWidth+"px");var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!Oe.isMobile&&t&&se(),Ce("onReady")}(),Oe}function s(e,t){for(var n=Array.prototype.slice.call(e),a=[],i=0;i<n.length;i++){var r=n[i];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=u(r,t||{}),a.push(r._flatpickr)}catch(e){console.error(e)}}return 1===a.length?a[0]:a}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var d=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},f=function(e){return("0"+e).slice(-2)},m=function(e){return!0===e?1:0},g=function(e){return e instanceof Array?e:[e]},p=function(){},v={D:p,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours(parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*m(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t){var n=parseInt(t);return new Date(e.getFullYear(),0,2+7*(n-1),0,0,0,0)},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours(parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:p,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},w:p,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},h={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},y={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[y.w(e,t,n)]},F:function(e,t,n){return C(y.n(e,t,n)-1,!1,t)},G:function(e,t,n){return f(y.h(e,t,n))},H:function(e){return f(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[m(e.getHours()>11)]},M:function(e,t){return C(e.getMonth(),!0,t)},S:function(e){return f(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return e.getFullYear()},d:function(e){return f(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return f(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return f(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},D={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"]},b=function(e){var t=e.config,n=void 0===t?E:t,a=e.l10n,i=void 0===a?D:a;return function(e,t){return void 0!==n.formatDate?n.formatDate(e,t):t.split("").map(function(t,a,r){return y[t]&&"\\"!==r[a-1]?y[t](e,i,n):"\\"!==t?t:""}).join("")}},w=function(e){var t=e.config,n=void 0===t?E:t,a=e.l10n,i=void 0===a?D:a;return function(e,t,a){if(0===e||e){var r,o=e;if(e instanceof Date)r=new Date(e.getTime());else if("string"!=typeof e&&void 0!==e.toFixed)r=new Date(e);else if("string"==typeof e){var c=t||(n||E).dateFormat,l=String(e).trim();if("today"===l)r=new Date,a=!0;else if(/Z$/.test(l)||/GMT$/.test(l))r=new Date(e);else if(n&&n.parseDate)r=n.parseDate(e,c);else{r=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);for(var u=void 0,s=[],d=0,f=0,m="";d<c.length;d++){var g=c[d],p="\\"===g,y="\\"===c[d-1]||p;if(h[g]&&!y){m+=h[g];var D=new RegExp(m).exec(e);D&&(u=!0)&&s["Y"!==g?"push":"unshift"]({fn:v[g],val:D[++f]})}else p||(m+=".");s.forEach(function(e){var t=e.fn,n=e.val;return r=t(r,n,i)||r})}r=u?r:void 0}}return r instanceof Date?(!0===a&&r.setHours(0,0,0,0),r):void n.errorHandler(new Error("Invalid date provided: "+o))}}},C=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},M=function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},x={DAY:864e5},E={_disable:[],_enable:[],allowInput:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enable:[],enableSeconds:!1,enableTime:!1,errorHandler:console.warn,getWeek:M,hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};"function"!=typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var a=0,i=t;a<i.length;a++){var r=i[a];!function(t){t&&Object.keys(t).forEach(function(n){return e[n]=t[n]})}(r)}return e});var T=300;"undefined"!=typeof HTMLElement&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return s(this,e)},HTMLElement.prototype.flatpickr=function(e){return s([this],e)});var S;S=function(e,t){return e instanceof NodeList?s(e,t):"string"==typeof e?s(window.document.querySelectorAll(e),t):s([e],t)},"object"==typeof window&&(window.flatpickr=S),S.defaultConfig=E,S.l10ns={en:d({},D),default:d({},D)},S.localize=function(e){S.l10ns.default=d({},S.l10ns.default,e)},S.setDefaults=function(e){S.defaultConfig=d({},S.defaultConfig,e)},S.parseDate=w({}),S.formatDate=b({}),S.compareDates=a,"undefined"!=typeof jQuery&&(jQuery.fn.flatpickr=function(e){return s(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))};var _=S;e.default=_,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll(".gallery-wrapper");if(!e)return!1;[].forEach.call(e,function(e){var t=e.querySelector(".add-gallery-images"),n=(0,c.default)(e,".image-gallery-hidden"),a=(0,l.removeItems)(n,l.onRemoveImage),i=(0,l.dragItems)(n,l.onDragImage),o=(0,r.default)(e,{list:".gallery-images",onDrag:i,onRemove:a,listTemplate:u}),s=wp.media({title:"Choose Media",button:{text:"Use Selected Media"},multiple:!0});t.addEventListener("click",function(e){e.preventDefault(),s.open()}),s.on("select",function(){s.state().get("selection").toJSON().forEach(function(e){o.add(e),n.add(e.id)})})})};var i=n(1),r=a(i),o=n(2),c=a(o),l=n(3),u=function(e){return'<li class="gallery-image-item"><span class="gallery-iamge-id">'+e.id+'</span><img src="'+e.url+'" class="gallery-image"/><span><svg class="remove-gallery-image" viewBox="0 0 20 20">\n  <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8 8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n</svg></span></li>'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2YTQ1ODBhMjhmZmQ3NTAxZTQwYyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc2VyaWFsaXplZC1pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vdGV4dC1saXN0LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2RyYWd1bGEuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9lbWl0dGVyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGlja3kvdGlja3ktYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3VzdG9tLWV2ZW50L2luZGV4LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9hdXRvLWl0ZW0uanMiLCJ3ZWJwYWNrOi8vLy4vaW1hZ2UtdXBsb2Fkcy5qcyIsIndlYnBhY2s6Ly8vLi9kYXRlcGlja2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuanMiLCJ3ZWJwYWNrOi8vLy4vZ2FsbGVyeS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwidmFsdWUiLCJkZWZhdWx0IiwicGFyZW50IiwiYXJncyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yIiwicmVnaXN0ZXJEcmFnRXZlbnRzIiwib25EcmFnIiwicmVnaXN0ZXJSZW1vdmVFdmVudHMiLCJvblJlbW92ZSIsImFkZCIsImh0bWwiLCJsaXN0VGVtcGxhdGUiLCJsaXN0SXRlbSIsImRvY3VtZW50IiwiY3JlYXRlUmFuZ2UiLCJjcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQiLCJhcHBlbmRDaGlsZCIsIl9kcmFndWxhIiwiX2RyYWd1bGEyIiwib2JqIiwibGlzdEl0ZW1zIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsImlubmVySFRNTCIsInJlbW92ZUNoaWxkIiwiY2FsbGJhY2siLCJvbiIsImVsIiwiaGlkZGVuSW5wdXQiLCJoaWRkZW5FbCIsImdldEN1cnJlbnRWYWx1ZSIsIkpTT04iLCJwYXJzZSIsImFkZFZhbHVlIiwiY29uY2F0IiwicmVtb3ZlVmFsdWUiLCJzdHJpbmdpZnkiLCJyZW1vdmUiLCJ1cGRhdGUiLCJ2YWx1ZXMiLCJyZW1vdmVJdGVtcyIsIkhpZGRlbiIsImRyYWdJdGVtcyIsIm9uRHJhZ09iamVjdCIsInJlZHVjZSIsImFjYyIsImlkIiwiZGF0YXNldCIsInRpdGxlIiwib25EcmFnVGV4dCIsIm9uRHJhZ0ltYWdlIiwicGFyc2VJbnQiLCJvblJlbW92ZU9iamVjdCIsImN1cnJlbnRWYWx1ZSIsIm5ld1ZhbHVlIiwiZmlsdGVyIiwiY3VycmVudCIsIm9uUmVtb3ZlVGV4dCIsIm9uUmVtb3ZlSW1hZ2UiLCJhdXRvc3VnZ2VzdCIsImVuZHBvaW50Iiwib25TZWxlY3QiLCJvbkVtcHR5IiwieGhyIiwibGVuZ3RoIiwiY2xhc3NMaXN0IiwiZ2V0T3B0aW9ucyIsInVwZGF0ZU9wdGlvbnMiLCJvbkF1dG9TdWdnZXN0SW5wdXQiLCJpbnB1dCIsImlucHV0VmFsdWUiLCJsaXN0TmFtZSIsImdldEF0dHJpYnV0ZSIsImxpc3RPcHRpb25zIiwiZ2V0RWxlbWVudEJ5SWQiLCJjaGlsZE5vZGVzIiwibWF0Y2giLCJvcHRpb24iLCJxdWVyeSIsImJ1aWxkUXVlcnkiLCJ1cmwiLCJhYm9ydCIsIlhNTEh0dHBSZXF1ZXN0IiwiZXZ0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsImlzSlNPTiIsInJlc3BvbnNlVGV4dCIsInJlc3VsdHMiLCJtZXNzYWdlIiwib3BlbiIsInNlbmQiLCJlcnJvciIsInJlc3BvbnNlIiwiY29uc29sZSIsIndhcm4iLCJBcnJheSIsImlzQXJyYXkiLCJjcmVhdGVPcHRpb25zIiwiZGF0YWxpc3QiLCJuZXdPcHRpb25zIiwicmVzdWx0IiwiY3JlYXRlT3B0aW9uIiwicmVuZGVyZWQiLCJzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0xvd2VyQ2FzZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfaW5kZXgiLCJfdGV4dExpc3QiLCJfdGV4dExpc3QyIiwiX2F1dG9zdWdnZXN0TGlzdCIsIl9hdXRvc3VnZ2VzdExpc3QyIiwiX2xpc3QiLCJfYXV0b0l0ZW0iLCJfYXV0b0l0ZW0yIiwiX2ltYWdlVXBsb2FkcyIsIl9pbWFnZVVwbG9hZHMyIiwiX2RhdGVwaWNrZXIiLCJfZGF0ZXBpY2tlcjIiLCJfZ2FsbGVyeSIsIl9nYWxsZXJ5MiIsImNyZWF0ZVRleHRJdGVtIiwiY3JlYXRlQXV0b1N1Z2dlc3RJdGVtIiwiYnV0dG9uIiwiaGlkZGVuIiwibGlzdEZpZWxkcyIsImZvckVhY2giLCJsaXN0RmllbGQiLCJ0ZXh0SW5wdXQiLCJhZGRCdXR0b24iLCJfc2VyaWFsaXplZElucHV0MiIsIl91dGlsaXRpZXMiLCJkcmFnIiwiTGlzdCIsIl9saXN0MiIsImFzc2lnbiIsImtleUNvZGUiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXJpYWxpemVkSW5wdXQiLCJnbG9iYWwiLCJkcmFndWxhIiwiaW5pdGlhbENvbnRhaW5lcnMiLCJvcHRpb25zIiwiaXNDb250YWluZXIiLCJkcmFrZSIsImNvbnRhaW5lcnMiLCJpbmRleE9mIiwiZXZlbnRzIiwib3AiLCJ0b3VjaHkiLCJkb2N1bWVudEVsZW1lbnQiLCJncmFiIiwicmVsZWFzZSIsImV2ZW50dWFsTW92ZW1lbnRzIiwic3RhcnRCZWNhdXNlTW91c2VNb3ZlZCIsIm1vdmVtZW50cyIsImNyb3NzdmVudCIsInByZXZlbnRHcmFiYmVkIiwiZGVzdHJveSIsIl9ncmFiYmVkIiwiX21vdmVYIiwiY2xpZW50WCIsIl9tb3ZlWSIsImNsaWVudFkiLCJ3aGljaE1vdXNlQnV0dG9uIiwibWV0YUtleSIsImN0cmxLZXkiLCJpdGVtIiwiY29udGV4dCIsImNhblN0YXJ0IiwidHlwZSIsImlzSW5wdXQiLCJmb2N1cyIsImlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiIsImdldENvb3JkIiwiZG9jIiwiZWxlbWVudEZyb21Qb2ludCIsImdyYWJiZWQiLCJlbmQiLCJzdGFydCIsIm9mZnNldCIsImdldE9mZnNldCIsIl9pdGVtIiwiX29mZnNldFgiLCJsZWZ0IiwiX29mZnNldFkiLCJ0b3AiLCJjbGFzc2VzIiwiX2NvcHkiLCJyZW5kZXJNaXJyb3JJbWFnZSIsImRyYWdnaW5nIiwiX21pcnJvciIsImhhbmRsZSIsImdldFBhcmVudCIsImludmFsaWQiLCJzb3VyY2UiLCJtb3ZlcyIsIm5leHRFbCIsImNhbk1vdmUiLCJtYW51YWxTdGFydCIsImlzQ29weSIsImNsb25lTm9kZSIsImVtaXQiLCJfc291cmNlIiwiX2luaXRpYWxTaWJsaW5nIiwiX2N1cnJlbnRTaWJsaW5nIiwiaW52YWxpZFRhcmdldCIsImRyb3AiLCJ1bmdyYWIiLCJlbGVtZW50QmVoaW5kQ3Vyc29yIiwiZ2V0RWxlbWVudEJlaGluZFBvaW50IiwiZHJvcFRhcmdldCIsImZpbmREcm9wVGFyZ2V0IiwiY29weVNvcnRTb3VyY2UiLCJyZW1vdmVPblNwaWxsIiwiY2FuY2VsIiwiaXNJbml0aWFsUGxhY2VtZW50IiwiY2xlYW51cCIsInJldmVydCIsInJldmVydHMiLCJhcmd1bWVudHMiLCJyZXZlcnRPblNwaWxsIiwiaW5pdGlhbCIsImluc2VydEJlZm9yZSIsInJlbW92ZU1pcnJvckltYWdlIiwicm0iLCJfcmVuZGVyVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfbGFzdERyb3BUYXJnZXQiLCJzaWJsaW5nIiwiaW1tZWRpYXRlIiwiZ2V0SW1tZWRpYXRlQ2hpbGQiLCJyZWZlcmVuY2UiLCJnZXRSZWZlcmVuY2UiLCJhY2NlcHRzIiwibW92ZWQiLCJ4IiwieSIsInN0eWxlIiwiY2hhbmdlZCIsInNwaWxsT3ZlciIsInNwaWxsT3V0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiZ2V0UmVjdFdpZHRoIiwiaGVpZ2h0IiwiZ2V0UmVjdEhlaWdodCIsIm1pcnJvckNvbnRhaW5lciIsInJlc29sdmUiLCJhZnRlciIsImhvcml6b250YWwiLCJkaXJlY3Rpb24iLCJsZW4iLCJjaGlsZHJlbiIsImNvbnRhaW5lciIsImNvcHkiLCJhbHdheXMiLCJuZXZlciIsImJvZHkiLCJlbWl0dGVyIiwiZm4iLCJ0b3VjaCIsIm1vdXNldXAiLCJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJwb2ludGVycyIsIm1pY3Jvc29mdCIsIm5hdmlnYXRvciIsInBvaW50ZXJFbmFibGVkIiwibXNQb2ludGVyRW5hYmxlZCIsInRvdWNoZXMiLCJ3aGljaCIsImJ1dHRvbnMiLCJnZXRTY3JvbGwiLCJzY3JvbGxQcm9wIiwib2Zmc2V0UHJvcCIsImNsaWVudEhlaWdodCIsInBvaW50Iiwic3RhdGUiLCJjbGFzc05hbWUiLCJyaWdodCIsImJvdHRvbSIsInBhcmVudE5vZGUiLCJpc0VkaXRhYmxlIiwiY29udGVudEVkaXRhYmxlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsImdldEV2ZW50SG9zdCIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNvb3JkIiwiaG9zdCIsIm1pc3NNYXAiLCJwYWdlWCIsInBhZ2VZIiwiYXRvYSIsImRlYm91bmNlIiwidGhpbmciLCJvcHRzIiwidW5kZWZpbmVkIiwicHVzaCIsIm9uY2UiLCJfb25jZSIsIm9mZiIsImV0Iiwic3BsaWNlIiwiZW1pdHRlclNuYXBzaG90Iiwic2hpZnQiLCJhcHBseSIsInNsaWNlIiwiY3R4IiwidGhyb3dzIiwibGlzdGVuIiwiYXN5bmMiLCJhIiwidGlja3kiLCJzZXRJbW1lZGlhdGUiLCJ0aWNrIiwic2kiLCJzZXRUaW1lb3V0IiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVvdXQiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsInNlbGYiLCJjbGVhckltbWVkaWF0ZSIsInByb2Nlc3MiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsInJ1biIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImF0dGFjaFRvIiwiZ2V0UHJvdG90eXBlT2YiLCJ0b1N0cmluZyIsIm5leHRUaWNrIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiZXZlbnQiLCJkYXRhIiwiYXR0YWNoRXZlbnQiLCJNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJwb3J0MSIsInBvcnQyIiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdCIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJhZGRFdmVudEVhc3kiLCJjYXB0dXJpbmciLCJhZGRFdmVudEhhcmQiLCJ3cmFwIiwicmVtb3ZlRXZlbnRFYXN5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50SGFyZCIsImxpc3RlbmVyIiwidW53cmFwIiwiZGV0YWNoRXZlbnQiLCJmYWJyaWNhdGVFdmVudCIsIm1vZGVsIiwiZXZlbnRtYXAiLCJjdXN0b21FdmVudCIsImRldGFpbCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJkaXNwYXRjaEV2ZW50IiwiZmlyZUV2ZW50Iiwid3JhcHBlckZhY3RvcnkiLCJvcmlnaW5hbEV2ZW50Iiwic3JjRWxlbWVudCIsInJldHVyblZhbHVlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwid3JhcHBlciIsImhhcmRDYWNoZSIsImVsZW1lbnQiLCJmaW5kIiwiYWRkRXZlbnQiLCJyZW1vdmVFdmVudCIsImZhYnJpY2F0ZSIsIk5hdGl2ZUN1c3RvbUV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJmb28iLCJwYXJhbXMiLCJpbml0Q3VzdG9tRXZlbnQiLCJidWJibGVzIiwiY2FuY2VsYWJsZSIsIkJvb2xlYW4iLCJldmVudG5hbWUiLCJyb24iLCJ0ZXN0IiwibG9va3VwQ2xhc3MiLCJjYWNoZWQiLCJjYWNoZSIsImxhc3RJbmRleCIsIlJlZ0V4cCIsImFkZENsYXNzIiwicm1DbGFzcyIsInJlcGxhY2UiLCJ0cmltIiwiZmllbGRzIiwiYXV0b0xpc3QiLCJlbE5hbWUiLCJPTUdGaWVsZHMiLCJiYXNlVVJMIiwicmVzb3VyY2UiLCJfYXV0b3N1Z2dlc3QyIiwiX2F1dG9zdWdnZXN0IiwiYXV0b0l0ZW0iLCJpbWFnZVVwbG9hZHMiLCJmZWF0dXJlZEltYWdlV3JhcCIsIm1hcCIsInJlbW92ZUltYWdlIiwicmVwbGFjZUltYWdlIiwic2V0SW1hZ2UiLCJmZWF0dXJlZEltYWdlVGFnIiwiZmVhdHVyZWRJbWFnZUlEIiwiZmVhdHVyZWRJbWFnZVRpdGxlIiwibWVkaWFGcmFtZSIsIndwIiwibWVkaWEiLCJ0ZXh0IiwibXVsdGlwbGUiLCJhdHRhY2htZW50IiwiZmlyc3QiLCJ0b0pTT04iLCJ0b2dnbGUiLCJzZXRBdHRyaWJ1dGUiLCJzaXplcyIsInRodW1ibmFpbCIsImljb24iLCJmaWxlbmFtZSIsImRhdGVwaWNrZXJzIiwiZGF0ZUZpZWxkIiwiY3VycmVudERhdGUiLCJkYXRlIiwiX2ZsYXRwaWNrcjIiLCJhbHRJbnB1dCIsImFsdEZvcm1hdCIsImRhdGVGb3JtYXQiLCJkZWZhdWx0RGF0ZSIsIl9mbGF0cGlja3IiLCJmYWN0b3J5IiwiZnVuYyIsIndhaXQiLCJtb3VzZURlbHRhIiwid2hlZWxEZWx0YSIsImRlbHRhWSIsImNvbXBhcmVEYXRlcyIsImRhdGUxIiwiZGF0ZTIiLCJ0aW1lbGVzcyIsIkRhdGUiLCJnZXRUaW1lIiwic2V0SG91cnMiLCJ0b2dnbGVDbGFzcyIsImVsZW0iLCJib29sIiwidGFnIiwiY29udGVudCIsInRleHRDb250ZW50IiwiY2xlYXJOb2RlIiwibm9kZSIsImZpcnN0Q2hpbGQiLCJmaW5kUGFyZW50IiwiY29uZGl0aW9uIiwiY3JlYXRlTnVtYmVySW5wdXQiLCJpbnB1dENsYXNzTmFtZSIsIm51bUlucHV0IiwiYXJyb3dVcCIsImFycm93RG93biIsInBhdHRlcm4iLCJrZXkiLCJGbGF0cGlja3JJbnN0YW5jZSIsImluc3RhbmNlQ29uZmlnIiwic2V0dXBIZWxwZXJGdW5jdGlvbnMiLCJ1dGlscyIsImdldERheXNJbk1vbnRoIiwibW9udGgiLCJ5ciIsImN1cnJlbnRNb250aCIsImN1cnJlbnRZZWFyIiwibDEwbiIsImRheXNJbk1vbnRoIiwiYmluZFRvSW5zdGFuY2UiLCJiaW5kIiwidXBkYXRlVGltZSIsImNvbmZpZyIsIm5vQ2FsZW5kYXIiLCJzZWxlY3RlZERhdGVzIiwic2V0RGF0ZSIsIm1pbkRhdGUiLCJkZWZhdWx0SG91ciIsImRlZmF1bHRNaW51dGUiLCJkZWZhdWx0U2Vjb25kcyIsInNldEhvdXJzRnJvbUlucHV0cyIsInVwZGF0ZVZhbHVlIiwidGltZVdyYXBwZXIiLCJERUJPVU5DRURfQ0hBTkdFX01TIiwiYW1wbTJtaWxpdGFyeSIsImhvdXIiLCJhbVBNIiwiaW50IiwibWlsaXRhcnkyYW1wbSIsImhvdXJFbGVtZW50IiwibWludXRlRWxlbWVudCIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJzZWNvbmRFbGVtZW50IiwibGltaXRNaW5Ib3VycyIsIm1pblRpbWUiLCJtaW5EYXRlSGFzVGltZSIsImxhdGVzdFNlbGVjdGVkRGF0ZU9iaiIsIm1heFRpbWUiLCJtYXhEYXRlIiwibWF4RGF0ZUhhc1RpbWUiLCJtaW4iLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJtYXgiLCJzZXRIb3Vyc0Zyb21EYXRlIiwiZGF0ZU9iaiIsImdldFNlY29uZHMiLCJpc01vYmlsZSIsInBhZCIsInRpbWVfMjRociIsIm9uWWVhcklucHV0IiwieWVhciIsImRlbHRhIiwiY3VycmVudFllYXJFbGVtZW50IiwiYmx1ciIsImNoYW5nZVllYXIiLCJoYW5kbGVyIiwiZXYiLCJfaGFuZGxlcnMiLCJvbkNsaWNrIiwidHJpZ2dlckNoYW5nZSIsInRyaWdnZXJFdmVudCIsImJpbmRFdmVudHMiLCJzZXR1cE1vYmlsZSIsImRlYm91bmNlZFJlc2l6ZSIsIm9uUmVzaXplIiwiX2RlYm91bmNlZENoYW5nZSIsIm1vZGUiLCJkYXlzQ29udGFpbmVyIiwidXNlckFnZW50Iiwib25Nb3VzZU92ZXIiLCJvbktleURvd24iLCJzdGF0aWMiLCJfaW5wdXQiLCJpbmxpbmUiLCJvbnRvdWNoc3RhcnQiLCJkb2N1bWVudENsaWNrIiwiY2FwdHVyZSIsImNsaWNrT3BlbnMiLCJtb250aE5hdiIsIm9uTW9udGhOYXZTY3JvbGwiLCJvbk1vbnRoTmF2Q2xpY2siLCJzZWxlY3REYXRlIiwiYW5pbWF0ZSIsImFuaW1hdGVEYXlzIiwiYW5pbWF0ZU1vbnRocyIsInRpbWVDb250YWluZXIiLCJzZWxUZXh0Iiwic2VsZWN0IiwidGltZUluY3JlbWVudCIsInBhc3NpdmUiLCJwcm9jZXNzUG9zdERheUFuaW1hdGlvbiIsIl9hbmltYXRpb25Mb29wIiwiZiIsImFuaW1hdGlvbk5hbWUiLCJsYXN0Q2hpbGQiLCJkYXlzIiwibmF2aWdhdGlvbkN1cnJlbnRNb250aCIsIm5hdiIsInByZXZpb3VzU2libGluZyIsIm9sZEN1ck1vbnRoIiwianVtcFRvRGF0ZSIsImp1bXBEYXRlIiwianVtcFRvIiwicGFyc2VEYXRlIiwibm93IiwiZ2V0RnVsbFllYXIiLCJnZXRNb250aCIsImVycm9ySGFuZGxlciIsInJlZHJhdyIsImluY3JlbWVudE51bUlucHV0IiwiY29udGFpbnMiLCJpbnB1dEVsZW0iLCJidWlsZCIsImZyYWdtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImNhbGVuZGFyQ29udGFpbmVyIiwidGFiSW5kZXgiLCJidWlsZE1vbnRoTmF2IiwiaW5uZXJDb250YWluZXIiLCJ3ZWVrTnVtYmVycyIsIl9hIiwiYnVpbGRXZWVrcyIsIndlZWtXcmFwcGVyIiwickNvbnRhaW5lciIsImJ1aWxkV2Vla2RheXMiLCJidWlsZERheXMiLCJlbmFibGVUaW1lIiwiYnVpbGRUaW1lIiwiY3VzdG9tQXBwZW5kIiwiYXBwZW5kVG8iLCJjcmVhdGVEYXkiLCJkYXlOdW1iZXIiLCJkYXRlSXNFbmFibGVkIiwiaXNFbmFibGVkIiwiZGF5RWxlbWVudCIsImdldERhdGUiLCIkaSIsImZvcm1hdERhdGUiLCJhcmlhRGF0ZUZvcm1hdCIsInRvZGF5RGF0ZUVsZW0iLCJpc0RhdGVTZWxlY3RlZCIsInNlbGVjdGVkRGF0ZUVsZW0iLCJtaW5SYW5nZURhdGUiLCJtYXhSYW5nZURhdGUiLCJpc0RhdGVJblJhbmdlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiZ2V0V2VlayIsImZvY3VzT25EYXkiLCJjdXJyZW50SW5kZXgiLCJuZXdJbmRleCIsInRhcmdldE5vZGUiLCJjaGFuZ2VNb250aCIsImFmdGVyRGF5QW5pbSIsImZpcnN0T2ZNb250aCIsImdldERheSIsImZpcnN0RGF5T2ZXZWVrIiwiaXNSYW5nZU1vZGUiLCJwcmV2TW9udGhEYXlzIiwiZGF5SW5kZXgiLCJkYXlOdW0iLCJfaGlkZVByZXZNb250aEFycm93IiwiX2hpZGVOZXh0TW9udGhBcnJvdyIsInVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgiLCJkYXlDb250YWluZXIiLCJtb250aE5hdkZyYWdtZW50IiwicHJldk1vbnRoTmF2IiwicHJldkFycm93IiwiY3VycmVudE1vbnRoRWxlbWVudCIsInNjcm9sbFRpdGxlIiwieWVhcklucHV0IiwidGFiaW5kZXgiLCJkaXNhYmxlZCIsIm5leHRNb250aE5hdiIsIm5leHRBcnJvdyIsIl9faGlkZVByZXZNb250aEFycm93Iiwic2V0IiwiZGlzcGxheSIsIl9faGlkZU5leHRNb250aEFycm93Iiwic2VwYXJhdG9yIiwiaG91cklucHV0IiwibWludXRlSW5wdXQiLCJob3VySW5jcmVtZW50IiwibWludXRlSW5jcmVtZW50IiwiZW5hYmxlU2Vjb25kcyIsInNlY29uZElucHV0IiwidG9nZ2xlVGl0bGUiLCJ3ZWVrZGF5Q29udGFpbmVyIiwid2Vla2RheXMiLCJzaG9ydGhhbmQiLCJqb2luIiwid2Vla0FiYnJldmlhdGlvbiIsImlzX29mZnNldCIsImZyb21fa2V5Ym9hcmQiLCJtb250aFRvU3RyIiwic2hvcnRoYW5kQ3VycmVudE1vbnRoIiwiYWN0aXZlRWxlbWVudCIsImluZGV4XzEiLCJjbGVhciIsInRyaWdnZXJDaGFuZ2VFdmVudCIsIm1vYmlsZUlucHV0Iiwic2hvd1RpbWVJbnB1dCIsImlzT3BlbiIsImgiLCJfdHlwZSIsInJlbW92ZUF0dHJpYnV0ZSIsImsiLCJfIiwiaXNDYWxlbmRhckVsZW0iLCJpc0NhbGVuZGFyRWxlbWVudCIsInBhdGgiLCJsb3N0Rm9jdXMiLCJyZWxhdGVkVGFyZ2V0IiwiaXNJZ25vcmVkIiwiaWdub3JlZEZvY3VzRWxlbWVudHMiLCJzb21lIiwibmV3WWVhciIsIm5ld1llYXJOdW0iLCJpc05ld1llYXIiLCJkYXRlVG9DaGVjayIsImVuYWJsZSIsImRpc2FibGUiLCJwYXJzZWQiLCJmcm9tIiwidG8iLCJjYWxlbmRhckVsZW0iLCJhbGxvd0lucHV0IiwiYWxsb3dLZXlkb3duIiwiYWxsb3dJbmxpbmVLZXlkb3duIiwiaXNUaW1lT2JqIiwiZGVsdGFfMSIsImNoYXJBdCIsImhvdmVyRGF0ZSIsImluaXRpYWxEYXRlIiwicmFuZ2VTdGFydERhdGUiLCJyYW5nZUVuZERhdGUiLCJjb250YWluc0Rpc2FibGVkIiwidCIsImR1cmF0aW9uIiwiREFZIiwidGltZXN0YW1wIiwib3V0T2ZSYW5nZSIsImRheUVsZW0iLCJwb3NpdGlvbkNhbGVuZGFyIiwicG9zaXRpb25FbGVtZW50IiwiY2xpY2siLCJ3YXNPcGVuIiwibWluTWF4RGF0ZVNldHRlciIsImludmVyc2VEYXRlT2JqIiwicGFyc2VDb25maWciLCJib29sT3B0cyIsImhvb2tzIiwiX19hc3NpZ24iLCJmbGF0cGlja3IiLCJkZWZhdWx0Q29uZmlnIiwidXNlckNvbmZpZyIsImZvcm1hdHMkJDEiLCJfZW5hYmxlIiwiZGF0ZXMiLCJwYXJzZURhdGVSdWxlcyIsIl9kaXNhYmxlIiwiX21pbkRhdGUiLCJfbWF4RGF0ZSIsIm1pbk1heFRpbWVTZXR0ZXIiLCJ2YWwiLCJfbWluVGltZSIsIl9tYXhUaW1lIiwiYXJyYXlpZnkiLCJwbHVnaW5zIiwicGx1Z2luQ29uZiIsImRpc2FibGVNb2JpbGUiLCJzZXR1cExvY2FsZSIsImxvY2FsZSIsImwxMG5zIiwidG9rZW5SZWdleCIsIksiLCJjcmVhdGVEYXRlRm9ybWF0dGVyIiwiY3VzdG9tUG9zaXRpb25FbGVtZW50IiwiX3Bvc2l0aW9uRWxlbWVudCIsImNhbGVuZGFySGVpZ2h0IiwiY2hpbGQiLCJvZmZzZXRIZWlnaHQiLCJjYWxlbmRhcldpZHRoIiwib2Zmc2V0V2lkdGgiLCJjb25maWdQb3MiLCJwb3NpdGlvbiIsImlucHV0Qm91bmRzIiwiZGlzdGFuY2VGcm9tQm90dG9tIiwiaW5uZXJIZWlnaHQiLCJzaG93T25Ub3AiLCJwYWdlWU9mZnNldCIsInBhZ2VYT2Zmc2V0IiwicmlnaHRNb3N0IiwiZm9jdXNBbmRDbG9zZSIsImlzU2VsZWN0YWJsZSIsImRheSIsInNlbGVjdGVkRGF0ZSIsInNob3VsZENoYW5nZU1vbnRoIiwic2VsZWN0ZWRJbmRleCIsInNvcnQiLCJiIiwiY2xvc2VPblNlbGVjdCIsInNpbmdsZSIsInJhbmdlIiwiQ0FMTEJBQ0tTIiwic2V0U2VsZWN0ZWREYXRlIiwiaW5wdXREYXRlIiwiZm9ybWF0Iiwic3BsaXQiLCJjb25qdW5jdGlvbiIsInJhbmdlU2VwYXJhdG9yIiwiYXJyIiwicnVsZSIsInNldHVwRGF0ZXMiLCJwcmVsb2FkZWREYXRlIiwiX3Nob3dUaW1lSW5wdXQiLCJzZXR1cElucHV0cyIsIm5vZGVOYW1lIiwiYWx0SW5wdXRDbGFzcyIsInBsYWNlaG9sZGVyIiwicmVxdWlyZWQiLCJpbnB1dFR5cGUiLCJzdGVwIiwibW9iaWxlRm9ybWF0U3RyIiwiZGVmYXVsdFZhbHVlIiwiam9pbkNoYXIiLCJkT2JqIiwiaXNZZWFyIiwiaXNQcmV2TW9udGgiLCJpc05leHRNb250aCIsImlzS2V5RG93biIsInBhcnNlRmxvYXQiLCJjdXJWYWx1ZSIsImlzSG91ckVsZW0iLCJpc01pbnV0ZUVsZW0iLCJhYnMiLCJjcmVhdGVEYXRlUGFyc2VyIiwiX2JpbmQiLCJfc2V0SG91cnNGcm9tRGF0ZSIsIl9jcmVhdGVFbGVtZW50IiwiaXNTYWZhcmkiLCJub2RlTGlzdCIsIm5vZGVzIiwiaW5zdGFuY2VzIiwibnVtYmVyIiwiZG9fbm90aGluZyIsInJldkZvcm1hdCIsIkQiLCJGIiwibW9udGhOYW1lIiwic2V0TW9udGgiLCJtb250aHMiLCJsb25naGFuZCIsIkciLCJIIiwiSiIsIk0iLCJzaG9ydE1vbnRoIiwiUyIsInNldFNlY29uZHMiLCJVIiwidW5peFNlY29uZHMiLCJXIiwid2Vla051bSIsIndlZWtOdW1iZXIiLCJZIiwic2V0RnVsbFllYXIiLCJaIiwiSVNPRGF0ZSIsInNldE1pbnV0ZXMiLCJqIiwidyIsImZvcm1hdHMiLCJ0b0lTT1N0cmluZyIsIm9yZGluYWwiLCJTdHJpbmciLCJzdWJzdHJpbmciLCJlbmdsaXNoIiwibnRoIiwiX2IiLCJkZWZhdWx0cyIsIl9jIiwiZnJtdCIsImdpdmVuRm9ybWF0IiwicGFyc2VkRGF0ZSIsImRhdGVfb3JpZyIsInRvRml4ZWQiLCJkYXRlc3RyIiwibWF0Y2hlZCIsIm9wcyIsIm1hdGNoSW5kZXgiLCJyZWdleFN0ciIsInRva2VuIiwiaXNCYWNrU2xhc2giLCJlc2NhcGVkIiwiZXhlYyIsIm1vbnRoTnVtYmVyIiwiZ2l2ZW5EYXRlIiwid2VlazEiLCJyb3VuZCIsIm9uQ2hhbmdlIiwib25DbG9zZSIsIm9uRGF5Q3JlYXRlIiwib25EZXN0cm95Iiwib25Nb250aENoYW5nZSIsIm9uT3BlbiIsIm9uUGFyc2VDb25maWciLCJvblJlYWR5Iiwib25WYWx1ZVVwZGF0ZSIsIm9uWWVhckNoYW5nZSIsIm9uUHJlQ2FsZW5kYXJQb3NpdGlvbiIsIl9pIiwiVHlwZUVycm9yIiwiYXJnc18xIiwia2V5cyIsIkhUTUxFbGVtZW50IiwiSFRNTENvbGxlY3Rpb24iLCJOb2RlTGlzdCIsInNlbGVjdG9yIiwiZW4iLCJsb2NhbGl6ZSIsInNldERlZmF1bHRzIiwialF1ZXJ5IiwiZnBfaW5jciIsImZsYXRwaWNrciQxIiwiZ2FsbGVyeVNlY3Rpb25zIiwiZ2FsbGVyeSIsImFkZEltYWdlIiwiaW1hZ2VJdGVtIiwiaW1hZ2UiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FV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QUFHLFNBQVUsV0FDRm9jLEVBQ2pCdE0sUUFDQTNTLElBQUksYUFDSndmLFNBRVN0VyxRQUFRLFNBQUFvVyxHQUNsQjdWLEVBQUtoSSxJQUFJNmQsR0FDVDFiLEVBQU9uQyxJQUFJNmQsRUFBV3JiLFVBbEQ5QixJQUFBbUUsR0FBQXRKLEVBQUEsRzFCMHpJSTRLLEVBQVM1QixFQUF1Qk0sRzBCenpJcEMwQixFQUFBaEwsRUFBQSxHMUI2eklJd0ssRUFBb0J4QixFQUF1QmdDLEcwQjV6SS9DUCxFQUFBekssRUFBQSxHQXNETTArQixFQUFZLFNBQUFDLEdBQ2hCLHVFQUNFQSxFQUFNeDVCLEdBRFIsb0JBR0V3NUIsRUFBTXQzQixJQUhSIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGFyZ3MpIHtcbiAgICB2YXIgbGlzdCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGFyZ3MubGlzdCk7XG5cbiAgICByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgYXJncy5vbkRyYWcpO1xuICAgIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzKGxpc3QsIGFyZ3Mub25SZW1vdmUpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBodG1sID0gYXJncy5saXN0VGVtcGxhdGUodmFsdWUpO1xuICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG5cbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbnZhciBfZHJhZ3VsYSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cbnZhciBfZHJhZ3VsYTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kcmFndWxhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gZnVuY3Rpb24gcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgb25SZW1vdmUpIHtcbiAgICB2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG4gICAgbGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSAnc3ZnJyA9PT0gZS50YXJnZXQudGFnTmFtZSA/IGUudGFyZ2V0IDogZS50YXJnZXQuY2xvc2VzdCgnc3ZnJyk7XG5cbiAgICAgICAgaWYgKCdzdmcnID09PSB0YXJnZXQudGFnTmFtZSkge1xuICAgICAgICAgICAgdmFyIGxpc3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGxpc3RJdGVtKTtcbiAgICAgICAgICAgIG9uUmVtb3ZlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxpc3RJdGVtcztcbn07XG5cbnZhciByZWdpc3RlckRyYWdFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgY2FsbGJhY2spIHtcbiAgICB2YXIgZHJha2UgPSAoMCwgX2RyYWd1bGEyLmRlZmF1bHQpKFtsaXN0XSk7XG5cbiAgICBkcmFrZS5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuICAgICAgICBjYWxsYmFjayhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGhpZGRlbklucHV0KSB7XG4gIHZhciBoaWRkZW5FbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGhpZGRlbklucHV0KTtcblxuICB2YXIgZ2V0Q3VycmVudFZhbHVlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlKCkge1xuICAgIHJldHVybiBoaWRkZW5FbC52YWx1ZSA/IEpTT04ucGFyc2UoaGlkZGVuRWwudmFsdWUpIDogW107XG4gIH07XG5cbiAgdmFyIGFkZFZhbHVlID0gZnVuY3Rpb24gYWRkVmFsdWUodmFsdWUpIHtcbiAgICB2YXIgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5jb25jYXQodmFsdWUpO1xuICB9O1xuXG4gIHZhciByZW1vdmVWYWx1ZSA9IGZ1bmN0aW9uIHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkge1xuICAgIHZhciBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICByZXR1cm4gb25SZW1vdmUoY3VycmVudFZhbHVlLCB2YWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShhZGRWYWx1ZSh2YWx1ZSkpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUodmFsdWUsIG9uUmVtb3ZlKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkpO1xuICAgIH0sXG4gICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWVzKSB7XG4gICAgICBoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlcyk7XG4gICAgfVxuICB9O1xufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgcmVtb3ZlSXRlbXMgPSBleHBvcnRzLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZSkge1xuICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgSGlkZGVuLnJlbW92ZSh2YWx1ZSwgb25SZW1vdmUpO1xuICB9O1xufTtcblxudmFyIGRyYWdJdGVtcyA9IGV4cG9ydHMuZHJhZ0l0ZW1zID0gZnVuY3Rpb24gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobGlzdCwgbGlzdEl0ZW1zKSB7XG4gICAgdmFyIHZhbHVlcyA9IG9uRHJhZyhsaXN0LCBsaXN0SXRlbXMpO1xuICAgIEhpZGRlbi51cGRhdGUodmFsdWVzKTtcbiAgfTtcbn07XG5cbnZhciBvbkRyYWdPYmplY3QgPSBleHBvcnRzLm9uRHJhZ09iamVjdCA9IGZ1bmN0aW9uIG9uRHJhZ09iamVjdChsaXN0LCBsaXN0SXRlbXMpIHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICB2YXIgdmFsdWUgPSB7XG4gICAgICBpZDogbGlzdEl0ZW0uZGF0YXNldC5pZCxcbiAgICAgIHRpdGxlOiBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MXG4gICAgfTtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgfSwgW10pO1xufTtcblxudmFyIG9uRHJhZ1RleHQgPSBleHBvcnRzLm9uRHJhZ1RleHQgPSBmdW5jdGlvbiBvbkRyYWdUZXh0KGxpc3QsIGxpc3RJdGVtcykge1xuICByZXR1cm4gW10ucmVkdWNlLmNhbGwobGlzdEl0ZW1zLCBmdW5jdGlvbiAoYWNjLCBsaXN0SXRlbSkge1xuICAgIHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG4gICAgcmV0dXJuIGFjYy5jb25jYXQoW3ZhbHVlXSk7XG4gIH0sIFtdKTtcbn07XG5cbnZhciBvbkRyYWdJbWFnZSA9IGV4cG9ydHMub25EcmFnSW1hZ2UgPSBmdW5jdGlvbiBvbkRyYWdJbWFnZShsaXN0LCBsaXN0SXRlbXMpIHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcbiAgICB2YXIgdmFsdWUgPSBwYXJzZUludChsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MKTtcbiAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgfSwgW10pO1xufTtcblxudmFyIG9uUmVtb3ZlT2JqZWN0ID0gZXhwb3J0cy5vblJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlT2JqZWN0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWU7XG4gIH0pO1xufTtcblxudmFyIG9uUmVtb3ZlVGV4dCA9IGV4cG9ydHMub25SZW1vdmVUZXh0ID0gZnVuY3Rpb24gb25SZW1vdmVUZXh0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudCAhPT0gbmV3VmFsdWU7XG4gIH0pO1xufTtcblxudmFyIG9uUmVtb3ZlSW1hZ2UgPSBleHBvcnRzLm9uUmVtb3ZlSW1hZ2UgPSBmdW5jdGlvbiBvblJlbW92ZUltYWdlKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcbiAgICByZXR1cm4gY3VycmVudCAhPT0gcGFyc2VJbnQobmV3VmFsdWUpO1xuICB9KTtcbn07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhdXRvc3VnZ2VzdCwgZW5kcG9pbnQsIG9uU2VsZWN0LCBvbkVtcHR5KSB7XG5cbiAgICBpZiAoIWF1dG9zdWdnZXN0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gZmFsc2U7XG5cbiAgICBhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICgwID09PSBlLnRhcmdldC52YWx1ZS5sZW5ndGggJiYgb25FbXB0eSkge1xuICAgICAgICAgICAgb25FbXB0eSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKDMgPiBlLnRhcmdldC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF1dG9zdWdnZXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcbiAgICAgICAgeGhyID0gZ2V0T3B0aW9ucyh4aHIsIHVwZGF0ZU9wdGlvbnMsIGF1dG9zdWdnZXN0LCBlbmRwb2ludCk7XG4gICAgfSk7XG4gICAgYXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICBvblNlbGVjdCh2YWx1ZSwgYXV0b3N1Z2dlc3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG52YXIgb25BdXRvU3VnZ2VzdElucHV0ID0gZnVuY3Rpb24gb25BdXRvU3VnZ2VzdElucHV0KGUpIHtcbiAgICB2YXIgaW5wdXQgPSBlLnRhcmdldDtcbiAgICB2YXIgaW5wdXRWYWx1ZSA9IGlucHV0LnZhbHVlO1xuICAgIHZhciBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICAgIHZhciBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG4gICAgdmFyIG1hdGNoID0gW10ucmVkdWNlLmNhbGwobGlzdE9wdGlvbnMsIGZ1bmN0aW9uIChhY2MsIG9wdGlvbikge1xuICAgICAgICBpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdCh7XG4gICAgICAgICAgICAgICAgaWQ6IG9wdGlvbi5kYXRhc2V0LmlkLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBvcHRpb24udmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuIDAgPT09IG1hdGNoLmxlbmd0aCA/IGZhbHNlIDogbWF0Y2hbMF07XG59O1xuXG52YXIgZ2V0T3B0aW9ucyA9IGZ1bmN0aW9uIGdldE9wdGlvbnMoeGhyLCBjYWxsYmFjaywgaW5wdXQsIGVuZHBvaW50KSB7XG4gICAgdmFyIHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG4gICAgdmFyIHVybCA9IGVuZHBvaW50ICsgcXVlcnk7XG5cbiAgICBpZiAoeGhyKSB7XG4gICAgICAgIHhoci5hYm9ydCgpO1xuICAgIH1cblxuICAgIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY2FsbGJhY2soZmFsc2UsIGV2dCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0ICYmIGlzSlNPTih4aHIucmVzcG9uc2VUZXh0KSkge1xuICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIHsgcmVzdWx0czogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgaW5wdXQ6IGlucHV0IH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZVRleHQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soeyBtZXNzYWdlOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSwgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBjYWxsYmFjayhldnQsIGZhbHNlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY2FsbGJhY2sodHJ1ZSwgZmFsc2UpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG4gICAgeGhyLnNlbmQoKTtcblxuICAgIHJldHVybiB4aHI7XG59O1xuXG52YXIgdXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoZXJyb3IsIHJlc3BvbnNlKSB7XG4gICAgaWYgKGVycm9yKSB7XG5cbiAgICAgICAgaWYgKHRydWUgPT09IGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBlcnJvci5pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnJvcik7XG4gICAgfVxuXG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyZXNwb25zZS5yZXN1bHRzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCk7XG4gICAgfVxufTtcblxudmFyIGNyZWF0ZU9wdGlvbnMgPSBmdW5jdGlvbiBjcmVhdGVPcHRpb25zKHJlc3VsdHMsIGlucHV0KSB7XG4gICAgdmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgdmFyIGRhdGFsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpO1xuXG4gICAgdmFyIG5ld09wdGlvbnMgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCByZXN1bHQpIHtcbiAgICAgICAgdmFyIG9wdGlvbiA9IGNyZWF0ZU9wdGlvbihyZXN1bHQpO1xuICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChvcHRpb24pO1xuICAgIH0sICcnKTtcblxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICBkYXRhbGlzdC5pbm5lckhUTUwgPSBuZXdPcHRpb25zO1xufTtcblxudmFyIGNyZWF0ZU9wdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAnPG9wdGlvbiBkYXRhLWlkPScgKyB2YWx1ZS5pZCArICcgdmFsdWU9XCInICsgdmFsdWUudGl0bGUucmVuZGVyZWQgKyAnXCI+Jztcbn07XG5cbnZhciBpc0pTT04gPSBmdW5jdGlvbiBpc0pTT04oc3RyKSB7XG5cbiAgICBpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBKU09OLnBhcnNlKHN0cik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07XG5cbnZhciBidWlsZFF1ZXJ5ID0gZnVuY3Rpb24gYnVpbGRRdWVyeSh2YWx1ZSkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWUudG9Mb3dlckNhc2UoKSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXG52YXIgX3RleHRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxudmFyIF90ZXh0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90ZXh0TGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0TGlzdCk7XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9hdXRvSXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXG52YXIgX2F1dG9JdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9JdGVtKTtcblxudmFyIF9pbWFnZVVwbG9hZHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblxudmFyIF9pbWFnZVVwbG9hZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW1hZ2VVcGxvYWRzKTtcblxudmFyIF9kYXRlcGlja2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cbnZhciBfZGF0ZXBpY2tlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kYXRlcGlja2VyKTtcblxudmFyIF9nYWxsZXJ5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cbnZhciBfZ2FsbGVyeTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nYWxsZXJ5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZVRleHRJdGVtID0gZnVuY3Rpb24gY3JlYXRlVGV4dEl0ZW0odmFsdWUpIHtcbiAgcmV0dXJuICc8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59O1xuXG52YXIgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gZnVuY3Rpb24gY3JlYXRlQXV0b1N1Z2dlc3RJdGVtKHZhbHVlKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIiBkYXRhLWlkPVwiJyArIHZhbHVlLmlkICsgJ1wiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlLnRpdGxlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAoMCwgX2ltYWdlVXBsb2FkczIuZGVmYXVsdCkoKTtcbiAgKDAsIF90ZXh0TGlzdDIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy50ZXh0LWxpc3QnLFxuICAgIGJ1dHRvbjogJy50ZXh0LWxpc3QtYWRkJyxcbiAgICBsaXN0OiAnLnRleHQtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcudGV4dC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVUZXh0SXRlbVxuICB9KTtcblxuICAoMCwgX2F1dG9zdWdnZXN0TGlzdDIuZGVmYXVsdCkoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgICBpbnB1dDogJ2F1dG9zdWdnZXN0LWxpc3QtaW5wdXQnLFxuICAgIGxpc3Q6ICcuYXV0b3N1Z2dlc3QtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtXG4gIH0pO1xuXG4gICgwLCBfYXV0b0l0ZW0yLmRlZmF1bHQpKHtcbiAgICBwYXJlbnQ6ICcuYXV0b3N1Z2dlc3Qtd3JhcHBlcicsXG4gICAgaW5wdXQ6ICcuYXV0b3N1Z2dlc3QtaW5wdXQnLFxuICAgIGhpZGRlbjogJy5hdXRvc3VnZ2VzdC1oaWRkZW4nXG4gIH0pO1xuXG4gICgwLCBfZGF0ZXBpY2tlcjIuZGVmYXVsdCkoKTtcbiAgKDAsIF9nYWxsZXJ5Mi5kZWZhdWx0KSgpO1xufSk7XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBsaXN0RmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoIWxpc3RGaWVsZHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbChsaXN0RmllbGRzLCBmdW5jdGlvbiAobGlzdEZpZWxkKSB7XG4gICAgICAgIHZhciB0ZXh0SW5wdXQgPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT10ZXh0XScpO1xuICAgICAgICB2YXIgYWRkQnV0dG9uID0gbGlzdEZpZWxkLnF1ZXJ5U2VsZWN0b3IoYXJncy5idXR0b24pO1xuICAgICAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGxpc3RGaWVsZCwgYXJncy5oaWRkZW4pO1xuICAgICAgICB2YXIgcmVtb3ZlID0gKDAsIF91dGlsaXRpZXMucmVtb3ZlSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vblJlbW92ZVRleHQpO1xuICAgICAgICB2YXIgZHJhZyA9ICgwLCBfdXRpbGl0aWVzLmRyYWdJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uRHJhZ1RleHQpO1xuICAgICAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkobGlzdEZpZWxkLCBPYmplY3QuYXNzaWduKGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlIH0pKTtcblxuICAgICAgICBsaXN0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKDEzID09PSBlLmtleUNvZGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgTGlzdC5hZGQodGV4dElucHV0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICBIaWRkZW4uYWRkKHRleHRJbnB1dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBMaXN0LmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCh0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxudmFyIF9saXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9saXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xpc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfc2VyaWFsaXplZElucHV0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlcmlhbGl6ZWRJbnB1dCk7XG5cbnZhciBfdXRpbGl0aWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgZW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG52YXIgY3Jvc3N2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG52YXIgY2xhc3NlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgYXRvYSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xudmFyIGRlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIHRpY2t5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UgKGZuLCBhcmdzLCBjdHgpIHtcbiAgaWYgKCFmbikgeyByZXR1cm47IH1cbiAgdGlja3koZnVuY3Rpb24gcnVuICgpIHtcbiAgICBmbi5hcHBseShjdHggfHwgbnVsbCwgYXJncyB8fCBbXSk7XG4gIH0pO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihzZXRJbW1lZGlhdGUpIHt2YXIgc2kgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nLCB0aWNrO1xuaWYgKHNpKSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcbn0gZWxzZSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0VGltZW91dChmbiwgMCk7IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGljaztcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcbl9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVpZGF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2VsZiAmJiBzZWxmLnNldEltbWVkaWF0ZSB8fCBnbG9iYWwgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSB8fCB0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHNlbGYgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSB8fCBnbG9iYWwgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlIHx8IHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZTtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSkpXG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgY3VzdG9tRXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcbnZhciBldmVudG1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xudmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbnZhciBhZGRFdmVudCA9IGFkZEV2ZW50RWFzeTtcbnZhciByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50RWFzeTtcbnZhciBoYXJkQ2FjaGUgPSBbXTtcblxuaWYgKCFnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICBhZGRFdmVudCA9IGFkZEV2ZW50SGFyZDtcbiAgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEhhcmQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZEV2ZW50LFxuICByZW1vdmU6IHJlbW92ZUV2ZW50LFxuICBmYWJyaWNhdGU6IGZhYnJpY2F0ZUV2ZW50XG59O1xuXG5mdW5jdGlvbiBhZGRFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZWwuYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIHdyYXAoZWwsIHR5cGUsIGZuKSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBsaXN0ZW5lciA9IHVud3JhcChlbCwgdHlwZSwgZm4pO1xuICBpZiAobGlzdGVuZXIpIHtcbiAgICByZXR1cm4gZWwuZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmYWJyaWNhdGVFdmVudCAoZWwsIHR5cGUsIG1vZGVsKSB7XG4gIHZhciBlID0gZXZlbnRtYXAuaW5kZXhPZih0eXBlKSA9PT0gLTEgPyBtYWtlQ3VzdG9tRXZlbnQoKSA6IG1ha2VDbGFzc2ljRXZlbnQoKTtcbiAgaWYgKGVsLmRpc3BhdGNoRXZlbnQpIHtcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGUpO1xuICB9IGVsc2Uge1xuICAgIGVsLmZpcmVFdmVudCgnb24nICsgdHlwZSwgZSk7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUNsYXNzaWNFdmVudCAoKSB7XG4gICAgdmFyIGU7XG4gICAgaWYgKGRvYy5jcmVhdGVFdmVudCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgIGUuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUpO1xuICAgIH0gZWxzZSBpZiAoZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDdXN0b21FdmVudCAoKSB7XG4gICAgcmV0dXJuIG5ldyBjdXN0b21FdmVudCh0eXBlLCB7IGRldGFpbDogbW9kZWwgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gd3JhcHBlckZhY3RvcnkgKGVsLCB0eXBlLCBmbikge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcHBlciAob3JpZ2luYWxFdmVudCkge1xuICAgIHZhciBlID0gb3JpZ2luYWxFdmVudCB8fCBnbG9iYWwuZXZlbnQ7XG4gICAgZS50YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCA9IGUucHJldmVudERlZmF1bHQgfHwgZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCkgeyBlLnJldHVyblZhbHVlID0gZmFsc2U7IH07XG4gICAgZS5zdG9wUHJvcGFnYXRpb24gPSBlLnN0b3BQcm9wYWdhdGlvbiB8fCBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24gKCkgeyBlLmNhbmNlbEJ1YmJsZSA9IHRydWU7IH07XG4gICAgZS53aGljaCA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xuICAgIGZuLmNhbGwoZWwsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiB3cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIHdyYXBwZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKSB8fCB3cmFwcGVyRmFjdG9yeShlbCwgdHlwZSwgZm4pO1xuICBoYXJkQ2FjaGUucHVzaCh7XG4gICAgd3JhcHBlcjogd3JhcHBlcixcbiAgICBlbGVtZW50OiBlbCxcbiAgICB0eXBlOiB0eXBlLFxuICAgIGZuOiBmblxuICB9KTtcbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbmZ1bmN0aW9uIHVud3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpID0gZmluZChlbCwgdHlwZSwgZm4pO1xuICBpZiAoaSkge1xuICAgIHZhciB3cmFwcGVyID0gaGFyZENhY2hlW2ldLndyYXBwZXI7XG4gICAgaGFyZENhY2hlLnNwbGljZShpLCAxKTsgLy8gZnJlZSB1cCBhIHRhZCBvZiBtZW1vcnlcbiAgICByZXR1cm4gd3JhcHBlcjtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGksIGl0ZW07XG4gIGZvciAoaSA9IDA7IGkgPCBoYXJkQ2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICBpdGVtID0gaGFyZENhY2hlW2ldO1xuICAgIGlmIChpdGVtLmVsZW1lbnQgPT09IGVsICYmIGl0ZW0udHlwZSA9PT0gdHlwZSAmJiBpdGVtLmZuID09PSBmbikge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG59XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBldmVudG1hcCA9IFtdO1xudmFyIGV2ZW50bmFtZSA9ICcnO1xudmFyIHJvbiA9IC9eb24vO1xuXG5mb3IgKGV2ZW50bmFtZSBpbiBnbG9iYWwpIHtcbiAgaWYgKHJvbi50ZXN0KGV2ZW50bmFtZSkpIHtcbiAgICBldmVudG1hcC5wdXNoKGV2ZW50bmFtZS5zbGljZSgyKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBldmVudG1hcDtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuXG4gICAgdmFyIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCFmaWVsZHMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGZ1bmN0aW9uIChhdXRvTGlzdCkge1xuICAgICAgICB2YXIgSGlkZGVuID0gKDAsIF9zZXJpYWxpemVkSW5wdXQyLmRlZmF1bHQpKGF1dG9MaXN0LCBhcmdzLmhpZGRlbik7XG4gICAgICAgIHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlT2JqZWN0KTtcbiAgICAgICAgdmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdPYmplY3QpO1xuICAgICAgICB2YXIgTGlzdCA9ICgwLCBfbGlzdDIuZGVmYXVsdCkoYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmUgfSkpO1xuICAgICAgICB2YXIgaW5wdXQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtbGlzdC1pbnB1dCcpO1xuICAgICAgICB2YXIgZWxOYW1lID0gJ2F1dG9MaXN0XycgKyBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICAgICAgdmFyIGVuZHBvaW50ID0gT01HRmllbGRzLmJhc2VVUkwgKyAnL3dwLWpzb24vd3AvdjIvJyArIHdpbmRvd1tlbE5hbWVdLnJlc291cmNlICsgJz9zZWFyY2g9JztcblxuICAgICAgICAoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShpbnB1dCwgZW5kcG9pbnQsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXQpIHtcbiAgICAgICAgICAgIExpc3QuYWRkKHZhbHVlKTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICBIaWRkZW4uYWRkKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHZhciBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuICAgIGlmICghZmllbGRzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBmdW5jdGlvbiAoYXV0b0l0ZW0pIHtcbiAgICAgICAgdmFyIGhpZGRlbiA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoYXJncy5oaWRkZW4pO1xuICAgICAgICB2YXIgaW5wdXQgPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCcuYXV0b3N1Z2dlc3QtaW5wdXQnKTtcbiAgICAgICAgdmFyIGVsTmFtZSA9ICdhdXRvTGlzdF8nICsgaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG4gICAgICAgIHZhciBlbmRwb2ludCA9IE9NR0ZpZWxkcy5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyB3aW5kb3dbZWxOYW1lXS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG5cbiAgICAgICAgKDAsIF9hdXRvc3VnZ2VzdDIuZGVmYXVsdCkoaW5wdXQsIGVuZHBvaW50LCBmdW5jdGlvbiAodmFsdWUsIGlucHV0KSB7XG4gICAgICAgICAgICBoaWRkZW4udmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGhpZGRlbi52YWx1ZSA9ICcnO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gaW1hZ2VVcGxvYWRzO1xuZnVuY3Rpb24gaW1hZ2VVcGxvYWRzKCkge1xuXHR2YXIgZmVhdHVyZWRJbWFnZVdyYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLW1lZGlhLXVwbG9hZCcpO1xuXG5cdGlmIChmZWF0dXJlZEltYWdlV3JhcC5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRbXS5tYXAuY2FsbChmZWF0dXJlZEltYWdlV3JhcCwgZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHQvLyB2YXIgSW1hZ2VXcmFwSWQgPSBpdGVtLmF0dHJpYnV0ZS5pZDtcblx0XHR2YXIgcmVtb3ZlSW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUtaW1hZ2UnKTtcblx0XHR2YXIgcmVwbGFjZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVwbGFjZS1pbWFnZScpO1xuXHRcdHZhciBzZXRJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnNldC1pbWFnZScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGFnID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdhLnJlcGxhY2UtaW1hZ2UgaW1nJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VJRCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGl0bGUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy50aHVtYm5haWwtdGl0bGUnKTtcblx0XHR2YXIgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcblx0XHRcdHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcblx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHR0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJ1xuXHRcdFx0fSxcblx0XHRcdG11bHRpcGxlOiBmYWxzZVxuXHRcdH0pO1xuXG5cdFx0bWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIGF0dGFjaG1lbnQgPSBtZWRpYUZyYW1lLnN0YXRlKCkuZ2V0KCdzZWxlY3Rpb24nKS5maXJzdCgpLnRvSlNPTigpO1xuXG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gYXR0YWNobWVudC5pZDtcblx0XHRcdGlmIChhdHRhY2htZW50Lmhhc093blByb3BlcnR5KCdzaXplcycpKSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50LnNpemVzLnRodW1ibmFpbC51cmwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGFjaG1lbnQuaWNvbik7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChmZWF0dXJlZEltYWdlVGl0bGUpIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRpdGxlLmlubmVySFRNTCA9IGF0dGFjaG1lbnQuZmlsZW5hbWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZW1vdmVJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZSgnaGFzLWltYWdlJyk7XG5cdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgJycpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZUlELnZhbHVlID0gJyc7XG5cdFx0fSk7XG5cblx0XHRyZXBsYWNlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtZWRpYUZyYW1lLm9wZW4oKTtcblx0XHR9KTtcblxuXHRcdHNldEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0bWVkaWFGcmFtZS5vcGVuKCk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBkYXRlcGlja2VycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlcGlja2VyLWlucHV0Jyk7XG5cbiAgaWYgKCFkYXRlcGlja2Vycykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIFtdLmZvckVhY2guY2FsbChkYXRlcGlja2VycywgZnVuY3Rpb24gKGRhdGVGaWVsZCkge1xuICAgIHZhciBjdXJyZW50RGF0ZSA9IGRhdGVGaWVsZC5kYXRhc2V0LmRhdGU7XG5cbiAgICAoMCwgX2ZsYXRwaWNrcjIuZGVmYXVsdCkoZGF0ZUZpZWxkLCB7XG4gICAgICBhbHRJbnB1dDogdHJ1ZSxcbiAgICAgIGFsdEZvcm1hdDogJ0YgaiwgWScsXG4gICAgICBkYXRlRm9ybWF0OiAnVScsXG4gICAgICBkZWZhdWx0RGF0ZTogIWN1cnJlbnREYXRlID8gJycgOiBjdXJyZW50RGF0ZVxuICAgIH0pO1xuICB9KTtcbn07XG5cbnZhciBfZmxhdHBpY2tyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cbnZhciBfZmxhdHBpY2tyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZsYXRwaWNrcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pLFxuLyogMjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogZmxhdHBpY2tyIHY0LjIuMywgQGxpY2Vuc2UgTUlUICovXG4oZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHQgdHJ1ZSA/IGZhY3RvcnkoZXhwb3J0cykgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcblx0KGZhY3RvcnkoKGdsb2JhbC5mbGF0cGlja3IgPSB7fSkpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcblxyXG5cclxudmFyIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcblxudmFyIHBhZCA9IGZ1bmN0aW9uIChudW1iZXIpIHsgcmV0dXJuIChcIjBcIiArIG51bWJlcikuc2xpY2UoLTIpOyB9O1xyXG52YXIgaW50ID0gZnVuY3Rpb24gKGJvb2wpIHsgcmV0dXJuIChib29sID09PSB0cnVlID8gMSA6IDApOyB9O1xyXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcclxuICAgIGlmIChpbW1lZGlhdGUgPT09IHZvaWQgMCkgeyBpbW1lZGlhdGUgPSBmYWxzZTsgfVxyXG4gICAgdmFyIHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICB0aW1lb3V0ICE9PSBudWxsICYmIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpXHJcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgIH0sIHdhaXQpO1xyXG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpXHJcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICB9O1xyXG59XHJcbnZhciBhcnJheWlmeSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xyXG59O1xyXG5mdW5jdGlvbiBtb3VzZURlbHRhKGUpIHtcclxuICAgIHZhciBkZWx0YSA9IGUud2hlZWxEZWx0YSB8fCAtZS5kZWx0YVk7XHJcbiAgICByZXR1cm4gZGVsdGEgPj0gMCA/IDEgOiAtMTtcclxufVxuXG52YXIgZG9fbm90aGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfTtcclxudmFyIHJldkZvcm1hdCA9IHtcclxuICAgIEQ6IGRvX25vdGhpbmcsXHJcbiAgICBGOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGhOYW1lLCBsb2NhbGUpIHtcclxuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTtcclxuICAgIH0sXHJcbiAgICBHOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikge1xyXG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XHJcbiAgICB9LFxyXG4gICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcclxuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKHBhcnNlRmxvYXQoaG91cikpO1xyXG4gICAgfSxcclxuICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcclxuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcclxuICAgIH0sXHJcbiAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhkYXRlT2JqLmdldEhvdXJzKCkgJSAxMiArXHJcbiAgICAgICAgICAgIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sIFwiaVwiKS50ZXN0KGFtUE0pKSk7XHJcbiAgICB9LFxyXG4gICAgTTogZnVuY3Rpb24gKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xyXG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgobG9jYWxlLm1vbnRocy5zaG9ydGhhbmQuaW5kZXhPZihzaG9ydE1vbnRoKSk7XHJcbiAgICB9LFxyXG4gICAgUzogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcclxuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XHJcbiAgICB9LFxyXG4gICAgVTogZnVuY3Rpb24gKF8sIHVuaXhTZWNvbmRzKSB7IHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhTZWNvbmRzKSAqIDEwMDApOyB9LFxyXG4gICAgVzogZnVuY3Rpb24gKGRhdGVPYmosIHdlZWtOdW0pIHtcclxuICAgICAgICB2YXIgd2Vla051bWJlciA9IHBhcnNlSW50KHdlZWtOdW0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XHJcbiAgICB9LFxyXG4gICAgWTogZnVuY3Rpb24gKGRhdGVPYmosIHllYXIpIHtcclxuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKHBhcnNlRmxvYXQoeWVhcikpO1xyXG4gICAgfSxcclxuICAgIFo6IGZ1bmN0aW9uIChfLCBJU09EYXRlKSB7IHJldHVybiBuZXcgRGF0ZShJU09EYXRlKTsgfSxcclxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcclxuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcclxuICAgIH0sXHJcbiAgICBoOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikge1xyXG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XHJcbiAgICB9LFxyXG4gICAgaTogZnVuY3Rpb24gKGRhdGVPYmosIG1pbnV0ZXMpIHtcclxuICAgICAgICBkYXRlT2JqLnNldE1pbnV0ZXMocGFyc2VGbG9hdChtaW51dGVzKSk7XHJcbiAgICB9LFxyXG4gICAgajogZnVuY3Rpb24gKGRhdGVPYmosIGRheSkge1xyXG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xyXG4gICAgfSxcclxuICAgIGw6IGRvX25vdGhpbmcsXHJcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGgpIHtcclxuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XHJcbiAgICB9LFxyXG4gICAgbjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xyXG4gICAgfSxcclxuICAgIHM6IGZ1bmN0aW9uIChkYXRlT2JqLCBzZWNvbmRzKSB7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xyXG4gICAgfSxcclxuICAgIHc6IGRvX25vdGhpbmcsXHJcbiAgICB5OiBmdW5jdGlvbiAoZGF0ZU9iaiwgeWVhcikge1xyXG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIoMjAwMCArIHBhcnNlRmxvYXQoeWVhcikpO1xyXG4gICAgfSxcclxufTtcclxudmFyIHRva2VuUmVnZXggPSB7XHJcbiAgICBEOiBcIihcXFxcdyspXCIsXHJcbiAgICBGOiBcIihcXFxcdyspXCIsXHJcbiAgICBHOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgSDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIEo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXFxcXHcrXCIsXHJcbiAgICBLOiBcIlwiLFxyXG4gICAgTTogXCIoXFxcXHcrKVwiLFxyXG4gICAgUzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIFU6IFwiKC4rKVwiLFxyXG4gICAgVzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIFk6IFwiKFxcXFxkezR9KVwiLFxyXG4gICAgWjogXCIoLispXCIsXHJcbiAgICBkOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgaDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIGk6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXHJcbiAgICBqOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgbDogXCIoXFxcXHcrKVwiLFxyXG4gICAgbTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIG46IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXHJcbiAgICBzOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgdzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIHk6IFwiKFxcXFxkezJ9KVwiLFxyXG59O1xyXG52YXIgZm9ybWF0cyA9IHtcclxuICAgIFo6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7IH0sXHJcbiAgICBEOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xyXG4gICAgfSxcclxuICAgIEY6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihmb3JtYXRzLm4oZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSAtIDEsIGZhbHNlLCBsb2NhbGUpO1xyXG4gICAgfSxcclxuICAgIEc6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcclxuICAgIH0sXHJcbiAgICBIOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSk7IH0sXHJcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5vcmRpbmFsICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBkYXRlLmdldERhdGUoKSArIGxvY2FsZS5vcmRpbmFsKGRhdGUuZ2V0RGF0ZSgpKVxyXG4gICAgICAgICAgICA6IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgfSxcclxuICAgIEs6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldOyB9LFxyXG4gICAgTTogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGRhdGUuZ2V0TW9udGgoKSwgdHJ1ZSwgbG9jYWxlKTtcclxuICAgIH0sXHJcbiAgICBTOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTsgfSxcclxuICAgIFU6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldFRpbWUoKSAvIDEwMDA7IH0sXHJcbiAgICBXOiBmdW5jdGlvbiAoZGF0ZSwgXywgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XHJcbiAgICB9LFxyXG4gICAgWTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKTsgfSxcclxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpOyB9LFxyXG4gICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LFxyXG4gICAgaTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldE1pbnV0ZXMoKSk7IH0sXHJcbiAgICBqOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXREYXRlKCk7IH0sXHJcbiAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5sb25naGFuZFtkYXRlLmdldERheSgpXTtcclxuICAgIH0sXHJcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LFxyXG4gICAgbjogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0TW9udGgoKSArIDE7IH0sXHJcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7IH0sXHJcbiAgICB3OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXREYXkoKTsgfSxcclxuICAgIHk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMik7IH0sXHJcbn07XG5cbnZhciBlbmdsaXNoID0ge1xyXG4gICAgd2Vla2RheXM6IHtcclxuICAgICAgICBzaG9ydGhhbmQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcclxuICAgICAgICBsb25naGFuZDogW1xyXG4gICAgICAgICAgICBcIlN1bmRheVwiLFxyXG4gICAgICAgICAgICBcIk1vbmRheVwiLFxyXG4gICAgICAgICAgICBcIlR1ZXNkYXlcIixcclxuICAgICAgICAgICAgXCJXZWRuZXNkYXlcIixcclxuICAgICAgICAgICAgXCJUaHVyc2RheVwiLFxyXG4gICAgICAgICAgICBcIkZyaWRheVwiLFxyXG4gICAgICAgICAgICBcIlNhdHVyZGF5XCIsXHJcbiAgICAgICAgXSxcclxuICAgIH0sXHJcbiAgICBtb250aHM6IHtcclxuICAgICAgICBzaG9ydGhhbmQ6IFtcclxuICAgICAgICAgICAgXCJKYW5cIixcclxuICAgICAgICAgICAgXCJGZWJcIixcclxuICAgICAgICAgICAgXCJNYXJcIixcclxuICAgICAgICAgICAgXCJBcHJcIixcclxuICAgICAgICAgICAgXCJNYXlcIixcclxuICAgICAgICAgICAgXCJKdW5cIixcclxuICAgICAgICAgICAgXCJKdWxcIixcclxuICAgICAgICAgICAgXCJBdWdcIixcclxuICAgICAgICAgICAgXCJTZXBcIixcclxuICAgICAgICAgICAgXCJPY3RcIixcclxuICAgICAgICAgICAgXCJOb3ZcIixcclxuICAgICAgICAgICAgXCJEZWNcIixcclxuICAgICAgICBdLFxyXG4gICAgICAgIGxvbmdoYW5kOiBbXHJcbiAgICAgICAgICAgIFwiSmFudWFyeVwiLFxyXG4gICAgICAgICAgICBcIkZlYnJ1YXJ5XCIsXHJcbiAgICAgICAgICAgIFwiTWFyY2hcIixcclxuICAgICAgICAgICAgXCJBcHJpbFwiLFxyXG4gICAgICAgICAgICBcIk1heVwiLFxyXG4gICAgICAgICAgICBcIkp1bmVcIixcclxuICAgICAgICAgICAgXCJKdWx5XCIsXHJcbiAgICAgICAgICAgIFwiQXVndXN0XCIsXHJcbiAgICAgICAgICAgIFwiU2VwdGVtYmVyXCIsXHJcbiAgICAgICAgICAgIFwiT2N0b2JlclwiLFxyXG4gICAgICAgICAgICBcIk5vdmVtYmVyXCIsXHJcbiAgICAgICAgICAgIFwiRGVjZW1iZXJcIixcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXHJcbiAgICBmaXJzdERheU9mV2VlazogMCxcclxuICAgIG9yZGluYWw6IGZ1bmN0aW9uIChudGgpIHtcclxuICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDtcclxuICAgICAgICBpZiAocyA+IDMgJiYgcyA8IDIxKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xyXG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInN0XCI7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIm5kXCI7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInJkXCI7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXHJcbiAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXHJcbiAgICBzY3JvbGxUaXRsZTogXCJTY3JvbGwgdG8gaW5jcmVtZW50XCIsXHJcbiAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcclxuICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXHJcbn07XG5cbnZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlT2JqLCBmcm10KSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5mb3JtYXREYXRlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuZm9ybWF0RGF0ZShkYXRlT2JqLCBmcm10KTtcclxuICAgICAgICByZXR1cm4gZnJtdFxyXG4gICAgICAgICAgICAuc3BsaXQoXCJcIilcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRzW2NdICYmIGFycltpIC0gMV0gIT09IFwiXFxcXFwiXHJcbiAgICAgICAgICAgICAgICA/IGZvcm1hdHNbY10oZGF0ZU9iaiwgbDEwbiwgY29uZmlnKVxyXG4gICAgICAgICAgICAgICAgOiBjICE9PSBcIlxcXFxcIiA/IGMgOiBcIlwiO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5qb2luKFwiXCIpO1xyXG4gICAgfTtcclxufTtcclxudmFyIGNyZWF0ZURhdGVQYXJzZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUsIGdpdmVuRm9ybWF0LCB0aW1lbGVzcykge1xyXG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKVxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIHZhciBwYXJzZWREYXRlO1xyXG4gICAgICAgIHZhciBkYXRlX29yaWcgPSBkYXRlO1xyXG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSlcclxuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgICAgICAgICBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZXN0ciA9IFN0cmluZyhkYXRlKS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlc3RyID09PSBcInRvZGF5XCIpIHtcclxuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fFxyXG4gICAgICAgICAgICAgICAgL0dNVCQvLnRlc3QoZGF0ZXN0cikpXHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKVxyXG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVkID0gdm9pZCAwLCBvcHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gZm9ybWF0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlblJlZ2V4W3Rva2VuXSAmJiAhZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaGVkID0gdHJ1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiBtYXRjaFsrK21hdGNoSW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzQmFja1NsYXNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSBcIi5cIjtcclxuICAgICAgICAgICAgICAgICAgICBvcHMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX2EuZm4sIHZhbCA9IF9hLnZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChwYXJzZWREYXRlID0gZm4ocGFyc2VkRGF0ZSwgdmFsLCBsMTBuKSB8fCBwYXJzZWREYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBtYXRjaGVkID8gcGFyc2VkRGF0ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIShwYXJzZWREYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6IFwiICsgZGF0ZV9vcmlnKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcclxuICAgIH07XHJcbn07XHJcbmZ1bmN0aW9uIGNvbXBhcmVEYXRlcyhkYXRlMSwgZGF0ZTIsIHRpbWVsZXNzKSB7XHJcbiAgICBpZiAodGltZWxlc3MgPT09IHZvaWQgMCkgeyB0aW1lbGVzcyA9IHRydWU7IH1cclxuICAgIGlmICh0aW1lbGVzcyAhPT0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUxLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkgLVxyXG4gICAgICAgICAgICBuZXcgRGF0ZShkYXRlMi5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XHJcbn1cclxuXHJcbnZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gKG1vbnRoTnVtYmVyLCBzaG9ydGhhbmQsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07IH07XHJcbnZhciBnZXRXZWVrID0gZnVuY3Rpb24gKGdpdmVuRGF0ZSkge1xyXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcclxuICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcclxuICAgIHJldHVybiAoMSArXHJcbiAgICAgICAgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC1cclxuICAgICAgICAgICAgMyArXHJcbiAgICAgICAgICAgICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgL1xyXG4gICAgICAgICAgICA3KSk7XHJcbn07XHJcbnZhciBkdXJhdGlvbiA9IHtcclxuICAgIERBWTogODY0MDAwMDAsXHJcbn07XG5cbnZhciBkZWZhdWx0cyA9IHtcclxuICAgIF9kaXNhYmxlOiBbXSxcclxuICAgIF9lbmFibGU6IFtdLFxyXG4gICAgYWxsb3dJbnB1dDogZmFsc2UsXHJcbiAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXHJcbiAgICBhbHRJbnB1dDogZmFsc2UsXHJcbiAgICBhbHRJbnB1dENsYXNzOiBcImZvcm0tY29udHJvbCBpbnB1dFwiLFxyXG4gICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJlxyXG4gICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpID09PSAtMSxcclxuICAgIGFyaWFEYXRlRm9ybWF0OiBcIkYgaiwgWVwiLFxyXG4gICAgY2xpY2tPcGVuczogdHJ1ZSxcclxuICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXHJcbiAgICBjb25qdW5jdGlvbjogXCIsIFwiLFxyXG4gICAgZGF0ZUZvcm1hdDogXCJZLW0tZFwiLFxyXG4gICAgZGVmYXVsdEhvdXI6IDEyLFxyXG4gICAgZGVmYXVsdE1pbnV0ZTogMCxcclxuICAgIGRlZmF1bHRTZWNvbmRzOiAwLFxyXG4gICAgZGlzYWJsZTogW10sXHJcbiAgICBkaXNhYmxlTW9iaWxlOiBmYWxzZSxcclxuICAgIGVuYWJsZTogW10sXHJcbiAgICBlbmFibGVTZWNvbmRzOiBmYWxzZSxcclxuICAgIGVuYWJsZVRpbWU6IGZhbHNlLFxyXG4gICAgZXJyb3JIYW5kbGVyOiBjb25zb2xlLndhcm4sXHJcbiAgICBnZXRXZWVrOiBnZXRXZWVrLFxyXG4gICAgaG91ckluY3JlbWVudDogMSxcclxuICAgIGlnbm9yZWRGb2N1c0VsZW1lbnRzOiBbXSxcclxuICAgIGlubGluZTogZmFsc2UsXHJcbiAgICBsb2NhbGU6IFwiZGVmYXVsdFwiLFxyXG4gICAgbWludXRlSW5jcmVtZW50OiA1LFxyXG4gICAgbW9kZTogXCJzaW5nbGVcIixcclxuICAgIG5leHRBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTEzLjIwNyA4LjQ3MmwtNy44NTQgNy44NTQtMC43MDctMC43MDcgNy4xNDYtNy4xNDYtNy4xNDYtNy4xNDggMC43MDctMC43MDcgNy44NTQgNy44NTR6JyAvPjwvc3ZnPlwiLFxyXG4gICAgbm9DYWxlbmRhcjogZmFsc2UsXHJcbiAgICBvbkNoYW5nZTogW10sXHJcbiAgICBvbkNsb3NlOiBbXSxcclxuICAgIG9uRGF5Q3JlYXRlOiBbXSxcclxuICAgIG9uRGVzdHJveTogW10sXHJcbiAgICBvbktleURvd246IFtdLFxyXG4gICAgb25Nb250aENoYW5nZTogW10sXHJcbiAgICBvbk9wZW46IFtdLFxyXG4gICAgb25QYXJzZUNvbmZpZzogW10sXHJcbiAgICBvblJlYWR5OiBbXSxcclxuICAgIG9uVmFsdWVVcGRhdGU6IFtdLFxyXG4gICAgb25ZZWFyQ2hhbmdlOiBbXSxcclxuICAgIG9uUHJlQ2FsZW5kYXJQb3NpdGlvbjogW10sXHJcbiAgICBwbHVnaW5zOiBbXSxcclxuICAgIHBvc2l0aW9uOiBcImF1dG9cIixcclxuICAgIHBvc2l0aW9uRWxlbWVudDogdW5kZWZpbmVkLFxyXG4gICAgcHJldkFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPlwiLFxyXG4gICAgc2hvcnRoYW5kQ3VycmVudE1vbnRoOiBmYWxzZSxcclxuICAgIHN0YXRpYzogZmFsc2UsXHJcbiAgICB0aW1lXzI0aHI6IGZhbHNlLFxyXG4gICAgd2Vla051bWJlcnM6IGZhbHNlLFxyXG4gICAgd3JhcDogZmFsc2UsXHJcbn07XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsZW0sIGNsYXNzTmFtZSwgYm9vbCkge1xyXG4gICAgaWYgKGJvb2wgPT09IHRydWUpXHJcbiAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgY29udGVudCkge1xyXG4gICAgdmFyIGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XHJcbiAgICBjb250ZW50ID0gY29udGVudCB8fCBcIlwiO1xyXG4gICAgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIGUudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgcmV0dXJuIGU7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcclxuICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpXHJcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xyXG59XHJcbmZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSwgY29uZGl0aW9uKSB7XHJcbiAgICBpZiAoY29uZGl0aW9uKG5vZGUpKVxyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKVxyXG4gICAgICAgIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHtcclxuICAgIHZhciB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcIm51bUlucHV0V3JhcHBlclwiKSwgbnVtSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJudW1JbnB1dCBcIiArIGlucHV0Q2xhc3NOYW1lKSwgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dVcFwiKSwgYXJyb3dEb3duID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJhcnJvd0Rvd25cIik7XHJcbiAgICBudW1JbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICBudW1JbnB1dC5wYXR0ZXJuID0gXCJcXFxcZCpcIjtcclxuICAgIGlmIChvcHRzICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdHMpXHJcbiAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7XHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG51bUlucHV0KTtcclxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dVcCk7XHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7XHJcbiAgICByZXR1cm4gd3JhcHBlcjtcclxufVxuXG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgT2JqZWN0LmFzc2lnbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoc291cmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAodGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XSk7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGFyZ3NfMSA9IGFyZ3M7IF9hIDwgYXJnc18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJnc18xW19hXTtcclxuICAgICAgICAgICAgX2xvb3BfMShzb3VyY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfTtcclxufVxuXG52YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDtcclxuZnVuY3Rpb24gRmxhdHBpY2tySW5zdGFuY2UoZWxlbWVudCwgaW5zdGFuY2VDb25maWcpIHtcclxuICAgIHZhciBzZWxmID0ge307XHJcbiAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoc2VsZik7XHJcbiAgICBzZWxmLl9hbmltYXRpb25Mb29wID0gW107XHJcbiAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xyXG4gICAgc2VsZi5fYmluZCA9IGJpbmQ7XHJcbiAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcclxuICAgIHNlbGYuY2hhbmdlTW9udGggPSBjaGFuZ2VNb250aDtcclxuICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7XHJcbiAgICBzZWxmLmNsZWFyID0gY2xlYXI7XHJcbiAgICBzZWxmLmNsb3NlID0gY2xvc2U7XHJcbiAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcclxuICAgIHNlbGYuZGVzdHJveSA9IGRlc3Ryb3k7XHJcbiAgICBzZWxmLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcclxuICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XHJcbiAgICBzZWxmLm9wZW4gPSBvcGVuO1xyXG4gICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XHJcbiAgICBzZWxmLnNldCA9IHNldDtcclxuICAgIHNlbGYuc2V0RGF0ZSA9IHNldERhdGU7XHJcbiAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcclxuICAgIGZ1bmN0aW9uIHNldHVwSGVscGVyRnVuY3Rpb25zKCkge1xyXG4gICAgICAgIHNlbGYudXRpbHMgPSB7XHJcbiAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9udGggPT09IHZvaWQgMCkgeyBtb250aCA9IHNlbGYuY3VycmVudE1vbnRoOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeXIgPT09IHZvaWQgMCkgeyB5ciA9IHNlbGYuY3VycmVudFllYXI7IH1cclxuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyOTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIHNlbGYuZWxlbWVudCA9IHNlbGYuaW5wdXQgPSBlbGVtZW50O1xyXG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgcGFyc2VDb25maWcoKTtcclxuICAgICAgICBzZXR1cExvY2FsZSgpO1xyXG4gICAgICAgIHNldHVwSW5wdXRzKCk7XHJcbiAgICAgICAgc2V0dXBEYXRlcygpO1xyXG4gICAgICAgIHNldHVwSGVscGVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKVxyXG4gICAgICAgICAgICBidWlsZCgpO1xyXG4gICAgICAgIGJpbmRFdmVudHMoKTtcclxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXJcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8IHNlbGYuY29uZmlnLm1pbkRhdGVcclxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnNob3dUaW1lSW5wdXQgPVxyXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyO1xyXG4gICAgICAgIGlmIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWQgJiYgc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIub2Zmc2V0V2lkdGggKyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xyXG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBiaW5kVG9JbnN0YW5jZShmbikge1xyXG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVGltZShlKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICAgICAgOiBuZXcgRGF0ZSgpLnNldEhvdXJzKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyLCBzZWxmLmNvbmZpZy5kZWZhdWx0TWludXRlLCBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcywgMCksIGZhbHNlKTtcclxuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRpbWVXcmFwcGVyKGUpO1xyXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJpbnB1dFwiKSB7XHJcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xyXG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgICAgIH0sIERFQk9VTkNFRF9DSEFOR0VfTVMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFtcG0ybWlsaXRhcnkoaG91ciwgYW1QTSkge1xyXG4gICAgICAgIHJldHVybiBob3VyICUgMTIgKyAxMiAqIGludChhbVBNID09PSBzZWxmLmwxMG4uYW1QTVsxXSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBtaWxpdGFyeTJhbXBtKGhvdXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGhvdXIgJSAyNCkge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTI7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91ciAlIDEyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbUlucHV0cygpIHtcclxuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHNlbGYubWludXRlRWxlbWVudCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIGhvdXJzID0gKHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUuc2xpY2UoLTIpLCAxMCkgfHwgMCkgJSAyNCwgbWludXRlcyA9IChwYXJzZUludChzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwLCBzZWNvbmRzID0gc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyAocGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MFxyXG4gICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBob3VycyA9IGFtcG0ybWlsaXRhcnkoaG91cnMsIHNlbGYuYW1QTS50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgdmFyIGxpbWl0TWluSG91cnMgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICYmXHJcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PVxyXG4gICAgICAgICAgICAgICAgICAgIDApO1xyXG4gICAgICAgIHZhciBsaW1pdE1heEhvdXJzID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJlxyXG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT1cclxuICAgICAgICAgICAgICAgICAgICAwKTtcclxuICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xyXG4gICAgICAgICAgICB2YXIgbWF4VGltZSA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhUaW1lXHJcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGU7XHJcbiAgICAgICAgICAgIGhvdXJzID0gTWF0aC5taW4oaG91cnMsIG1heFRpbWUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKVxyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpbWl0TWluSG91cnMpIHtcclxuICAgICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWluVGltZVxyXG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5taW5EYXRlO1xyXG4gICAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xyXG4gICAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSlcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBNYXRoLm1heChtaW51dGVzLCBtaW5UaW1lLmdldE1pbnV0ZXMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xyXG4gICAgICAgIHZhciBkYXRlID0gZGF0ZU9iaiB8fCBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iajtcclxuICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICAgICAgc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcclxuICAgICAgICBpZiAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5zZXRIb3Vycyhob3VycyAlIDI0LCBtaW51dGVzLCBzZWNvbmRzIHx8IDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNlbGYuaG91ckVsZW1lbnQgfHwgIXNlbGYubWludXRlRWxlbWVudCB8fCBzZWxmLmlzTW9iaWxlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyXHJcbiAgICAgICAgICAgID8gKDEyICsgaG91cnMpICUgMTIgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKVxyXG4gICAgICAgICAgICA6IGhvdXJzKTtcclxuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7XHJcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVtpbnQoaG91cnMgPj0gMTIpXTtcclxuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uWWVhcklucHV0KGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpICsgKGV2ZW50LmRlbHRhIHx8IDApO1xyXG4gICAgICAgIGlmICh5ZWFyLnRvU3RyaW5nKCkubGVuZ3RoID09PSA0IHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmJsdXIoKTtcclxuICAgICAgICAgICAgaWYgKCEvW15cXGRdLy50ZXN0KHllYXIudG9TdHJpbmcoKSkpXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmZvckVhY2goZnVuY3Rpb24gKGV2KSB7IHJldHVybiBiaW5kKGVsZW1lbnQsIGV2LCBoYW5kbGVyLCBvcHRpb25zKTsgfSk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGJpbmQoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTsgfSk7XHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcclxuICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHsgZWxlbWVudDogZWxlbWVudCwgZXZlbnQ6IGV2ZW50LCBoYW5kbGVyOiBoYW5kbGVyIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25DbGljayhoYW5kbGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgZXZ0LndoaWNoID09PSAxICYmIGhhbmRsZXIoZXZ0KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdHJpZ2dlckNoYW5nZSgpIHtcclxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLndyYXApIHtcclxuICAgICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtXCIgKyBldnQgKyBcIl1cIiksIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBcImNsaWNrXCIsIHNlbGZbZXZ0XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlKSB7XHJcbiAgICAgICAgICAgIHNldHVwTW9iaWxlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRlYm91bmNlZFJlc2l6ZSA9IGRlYm91bmNlKG9uUmVzaXplLCA1MCk7XHJcbiAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlID0gZGVib3VuY2UodHJpZ2dlckNoYW5nZSwgREVCT1VOQ0VEX0NIQU5HRV9NUyk7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxyXG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgJiZcclxuICAgICAgICAgICAgIS9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlcclxuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb25Nb3VzZU92ZXIoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcclxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYylcclxuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJrZXlkb3duXCIsIG9uS2V5RG93bik7XHJcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5pbmxpbmUgJiYgIXNlbGYuY29uZmlnLnN0YXRpYylcclxuICAgICAgICAgICAgYmluZCh3aW5kb3csIFwicmVzaXplXCIsIGRlYm91bmNlZFJlc2l6ZSk7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQuYm9keSwgXCJ0b3VjaHN0YXJ0XCIsIGRvY3VtZW50Q2xpY2spO1xyXG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LmJvZHksIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soZG9jdW1lbnRDbGljaykpO1xyXG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LmJvZHksIFwiZm9jdXNcIiwgZG9jdW1lbnRDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcclxuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJtb3VzZWRvd25cIiwgb25DbGljayhzZWxmLm9wZW4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgXCJ3aGVlbFwiLCBvbk1vbnRoTmF2U2Nyb2xsKTtcclxuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKG9uTW9udGhOYXZDbGljaykpO1xyXG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFtcImtleXVwXCIsIFwiaW5jcmVtZW50XCJdLCBvblllYXJJbnB1dCk7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGVjdERhdGUpKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBbXCJ3ZWJraXRBbmltYXRpb25FbmRcIiwgXCJhbmltYXRpb25lbmRcIl0sIGFuaW1hdGVEYXlzKTtcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgW1wid2Via2l0QW5pbWF0aW9uRW5kXCIsIFwiYW5pbWF0aW9uZW5kXCJdLCBhbmltYXRlTW9udGhzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxUZXh0ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5zZWxlY3QoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcIndoZWVsXCIsIFwiaW5wdXRcIiwgXCJpbmNyZW1lbnRcIl0sIHVwZGF0ZVRpbWUpO1xyXG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayh0aW1lSW5jcmVtZW50KSk7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBbXCJ3aGVlbFwiLCBcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgYmluZChbc2VsZi5ob3VyRWxlbWVudCwgc2VsZi5taW51dGVFbGVtZW50XSwgW1wiZm9jdXNcIiwgXCJjbGlja1wiXSwgc2VsVGV4dCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5hbVBNLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzUG9zdERheUFuaW1hdGlvbigpIHtcclxuICAgICAgICBzZWxmLl9hbmltYXRpb25Mb29wLmZvckVhY2goZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYoKTsgfSk7XHJcbiAgICAgICAgc2VsZi5fYW5pbWF0aW9uTG9vcCA9IFtdO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZURheXMoZSkge1xyXG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgJiYgc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGUuYW5pbWF0aW9uTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZwU2xpZGVMZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmxhc3RDaGlsZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIubGFzdENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZUxlZnROZXdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHNlbGYuZGF5c0NvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzID0gc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1Bvc3REYXlBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJmcFNsaWRlUmlnaHRcIjpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwic2xpZGVSaWdodE5ld1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5sYXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5cyA9IHNlbGYuZGF5c0NvbnRhaW5lci5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NQb3N0RGF5QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZU1vbnRocyhlKSB7XHJcbiAgICAgICAgc3dpdGNoIChlLmFuaW1hdGlvbk5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImZwU2xpZGVMZWZ0TmV3XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJmcFNsaWRlUmlnaHROZXdcIjpcclxuICAgICAgICAgICAgICAgIHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aC5jbGFzc0xpc3QucmVtb3ZlKFwic2xpZGVMZWZ0TmV3XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5uYXZpZ2F0aW9uQ3VycmVudE1vbnRoLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZVJpZ2h0TmV3XCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hdiA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuYXYubmV4dFNpYmxpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAvY3Vyci8udGVzdChuYXYubmV4dFNpYmxpbmcuY2xhc3NOYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1vbnRoTmF2LnJlbW92ZUNoaWxkKG5hdi5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobmF2LnByZXZpb3VzU2libGluZyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC9jdXJyLy50ZXN0KG5hdi5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1vbnRoTmF2LnJlbW92ZUNoaWxkKG5hdi5wcmV2aW91c1NpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vbGRDdXJNb250aCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUpIHtcclxuICAgICAgICB2YXIganVtcFRvID0ganVtcERhdGUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKVxyXG4gICAgICAgICAgICA6IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8XHJcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3dcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jb25maWcubWF4RGF0ZSA8IHNlbGYubm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4RGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93KTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoanVtcFRvICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0ganVtcFRvLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgZS5tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsganVtcFRvO1xyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcclxuICAgICAgICBpZiAofmUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiYXJyb3dcIikpXHJcbiAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KGUsIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikgPyAxIDogLTEpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaW5jcmVtZW50TnVtSW5wdXQoZSwgZGVsdGEsIGlucHV0RWxlbSkge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBlICYmIGUudGFyZ2V0O1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fFxyXG4gICAgICAgICAgICAodGFyZ2V0ICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KFwiaW5jcmVtZW50XCIpO1xyXG4gICAgICAgIGV2ZW50LmRlbHRhID0gZGVsdGE7XHJcbiAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBidWlsZCgpIHtcclxuICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWNhbGVuZGFyXCIpO1xyXG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTtcclxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRNb250aE5hdigpKTtcclxuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy53ZWVrTnVtYmVycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hID0gYnVpbGRXZWVrcygpLCB3ZWVrV3JhcHBlciA9IF9hLndlZWtXcmFwcGVyLCB3ZWVrTnVtYmVycyA9IF9hLndlZWtOdW1iZXJzO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLndlZWtOdW1iZXJzID0gd2Vla051bWJlcnM7XHJcbiAgICAgICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5yQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1yQ29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItZGF5c1wiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJ1aWxkRGF5cygpO1xyXG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpO1xyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzZWxmLmlubmVyQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRUaW1lKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJhbmdlTW9kZVwiLCBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpO1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYW5pbWF0ZVwiLCBzZWxmLmNvbmZpZy5hbmltYXRlKTtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgICB2YXIgY3VzdG9tQXBwZW5kID0gc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCAmJiBzZWxmLmNvbmZpZy5hcHBlbmRUby5ub2RlVHlwZTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lIHx8IHNlbGYuY29uZmlnLnN0YXRpYykge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbUFwcGVuZCAmJiBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgc2VsZi5faW5wdXQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5hcHBlbmRUby5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgc2VsZi5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpXHJcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFwcGVuZFRvXHJcbiAgICAgICAgICAgICAgICA6IHdpbmRvdy5kb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIGRheU51bWJlciwgaSkge1xyXG4gICAgICAgIHZhciBkYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKGRhdGUsIHRydWUpLCBkYXlFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItZGF5IFwiICsgY2xhc3NOYW1lLCBkYXRlLmdldERhdGUoKS50b1N0cmluZygpKTtcclxuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xyXG4gICAgICAgIGRheUVsZW1lbnQuJGkgPSBpO1xyXG4gICAgICAgIGRheUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmZvcm1hdERhdGUoZGF0ZSwgc2VsZi5jb25maWcuYXJpYURhdGVGb3JtYXQpKTtcclxuICAgICAgICBpZiAoY29tcGFyZURhdGVzKGRhdGUsIHNlbGYubm93KSA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xyXG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgZGF5RWxlbWVudC50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBpZiAoaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gZGF5RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID09PSAwKTtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcImVuZFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA9PT0gMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1pblJhbmdlRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA+IHNlbGYubWluUmFuZ2VEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPSBkYXRlO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXNbMF0gJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWF4UmFuZ2VEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlIDwgc2VsZi5tYXhSYW5nZURhdGUgJiZcclxuICAgICAgICAgICAgICAgIGRhdGUgPiBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKVxyXG4gICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWluUmFuZ2VEYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWF4UmFuZ2VEYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIChkYXRlIDwgc2VsZi5taW5SYW5nZURhdGUgfHwgZGF0ZSA+IHNlbGYubWF4UmFuZ2VEYXRlKSlcclxuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLndlZWtOdW1iZXJzICYmXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZSAhPT0gXCJwcmV2TW9udGhEYXlcIiAmJlxyXG4gICAgICAgICAgICBkYXlOdW1iZXIgJSA3ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25EYXlDcmVhdGVcIiwgZGF5RWxlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIGRheUVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBmb2N1c09uRGF5KGN1cnJlbnRJbmRleCwgb2Zmc2V0KSB7XHJcbiAgICAgICAgdmFyIG5ld0luZGV4ID0gY3VycmVudEluZGV4ICsgb2Zmc2V0IHx8IDAsIHRhcmdldE5vZGUgPSAoY3VycmVudEluZGV4ICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBzZWxmLmRheXMuY2hpbGROb2Rlc1tuZXdJbmRleF1cclxuICAgICAgICAgICAgOiBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gfHxcclxuICAgICAgICAgICAgICAgIHNlbGYudG9kYXlEYXRlRWxlbSB8fFxyXG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzLmNoaWxkTm9kZXNbMF0pO1xyXG4gICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUgfHwgc2VsZi5kYXlzLmNoaWxkTm9kZXNbbmV3SW5kZXhdO1xyXG4gICAgICAgICAgICB0YXJnZXROb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0YXJnZXROb2RlID09PSB1bmRlZmluZWQgJiYgb2Zmc2V0ICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKDEsIHRydWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IG5ld0luZGV4ICUgNDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAob2Zmc2V0IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VNb250aCgtMSwgdHJ1ZSwgdW5kZWZpbmVkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIG5ld0luZGV4ICs9IDQyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhZnRlckRheUFuaW0oZm9jdXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb2N1cygpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWZ0ZXJEYXlBbmltKGZuKSB7XHJcbiAgICAgICAgc2VsZi5jb25maWcuYW5pbWF0ZSA9PT0gdHJ1ZSA/IHNlbGYuX2FuaW1hdGlvbkxvb3AucHVzaChmbikgOiBmbigpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYnVpbGREYXlzKGRlbHRhKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpcnN0T2ZNb250aCA9IChuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSkuZ2V0RGF5KCkgLVxyXG4gICAgICAgICAgICBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgK1xyXG4gICAgICAgICAgICA3KSAlXHJcbiAgICAgICAgICAgIDcsIGlzUmFuZ2VNb2RlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiO1xyXG4gICAgICAgIHZhciBwcmV2TW9udGhEYXlzID0gc2VsZi51dGlscy5nZXREYXlzSW5Nb250aCgoc2VsZi5jdXJyZW50TW9udGggLSAxICsgMTIpICUgMTIpO1xyXG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgoKSwgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLCBkYXlJbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYgc2VsZi53ZWVrTnVtYmVycy5maXJzdENoaWxkKVxyXG4gICAgICAgICAgICBzZWxmLndlZWtOdW1iZXJzLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICBpZiAoaXNSYW5nZU1vZGUpIHtcclxuICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCAtIDEsIGRheU51bWJlcik7XHJcbiAgICAgICAgICAgIHNlbGYubWF4UmFuZ2VEYXRlID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGggKyAxLCAoNDIgLSBmaXJzdE9mTW9udGgpICUgZGF5c0luTW9udGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwicHJldk1vbnRoRGF5XCIsIG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoIC0gMSwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcclxuICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJcIiwgbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGg7IGRheU51bSsrLCBkYXlJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwibmV4dE1vbnRoRGF5XCIsIG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1JhbmdlTW9kZSAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxICYmIGRheXMuY2hpbGROb2Rlc1swXSkge1xyXG4gICAgICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKCEhc2VsZi5taW5SYW5nZURhdGUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPiBkYXlzLmNoaWxkTm9kZXNbMF0uZGF0ZU9iaik7XHJcbiAgICAgICAgICAgIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgfHxcclxuICAgICAgICAgICAgICAgICAgICAoISFzZWxmLm1heFJhbmdlRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCArIDEsIDEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XHJcbiAgICAgICAgZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRheXMpO1xyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYW5pbWF0ZSB8fCBkZWx0YSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aCA+IDEpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVsdGEgJiYgZGVsdGEgPj0gMClcclxuICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRheUNvbnRhaW5lcik7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGRheUNvbnRhaW5lciwgc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIHNlbGYuZGF5cyA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZE5vZGVzWzBdO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcclxuICAgICAgICB2YXIgbW9udGhOYXZGcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhcIik7XHJcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xyXG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImN1ci1tb250aFwiKTtcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XHJcbiAgICAgICAgdmFyIHllYXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiY3VyLXllYXJcIiwgeyB0YWJpbmRleDogXCItMVwiIH0pO1xyXG4gICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50ID0geWVhcklucHV0LmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpXHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSkge1xyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID1cclxuICAgICAgICAgICAgICAgICEhc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLm5leHRNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLW5leHQtbW9udGhcIik7XHJcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xyXG4gICAgICAgIHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY3VycmVudC1tb250aFwiKTtcclxuICAgICAgICBzZWxmLm5hdmlnYXRpb25DdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoc2VsZi5jdXJyZW50TW9udGhFbGVtZW50KTtcclxuICAgICAgICBzZWxmLm5hdmlnYXRpb25DdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoeWVhcklucHV0KTtcclxuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcclxuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aCk7XHJcbiAgICAgICAgbW9udGhOYXZGcmFnbWVudC5hcHBlbmRDaGlsZChzZWxmLm5leHRNb250aE5hdik7XHJcbiAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aE5hdkZyYWdtZW50KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyAhPT0gYm9vbClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByZXZNb250aE5hdi5zdHlsZS5kaXNwbGF5ID0gYm9vbCA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdzsgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgIT09IGJvb2wpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuc3R5bGUuZGlzcGxheSA9IGJvb2wgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgPSBib29sO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcclxuICAgICAgICByZXR1cm4gc2VsZi5tb250aE5hdjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNUaW1lXCIpO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKVxyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItdGltZVwiKTtcclxuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xyXG4gICAgICAgIHZhciBob3VySW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1ob3VyXCIpO1xyXG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuY2hpbGROb2Rlc1swXTtcclxuICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1taW51dGVcIik7XHJcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50ID0gbWludXRlSW5wdXQuY2hpbGROb2Rlc1swXTtcclxuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxyXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldEhvdXJzKClcclxuICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy50aW1lXzI0aHJcclxuICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuZGVmYXVsdEhvdXJcclxuICAgICAgICAgICAgICAgIDogbWlsaXRhcnkyYW1wbShzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikpO1xyXG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxyXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKVxyXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUpO1xyXG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiLCBzZWxmLmNvbmZpZy5taW51dGVJbmNyZW1lbnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjBcIiA6IFwiMVwiKTtcclxuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XHJcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIFwiMFwiKTtcclxuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgXCI1OVwiKTtcclxuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRpdGxlID0gc2VsZi5taW51dGVFbGVtZW50LnRpdGxlID0gc2VsZi5sMTBuLnNjcm9sbFRpdGxlO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VySW5wdXQpO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnRpbWVfMjRocilcclxuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0aW1lMjRoclwiKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlU2Vjb25kcykge1xyXG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcclxuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50ID0gc2Vjb25kSW5wdXQuY2hpbGROb2Rlc1swXTtcclxuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXHJcbiAgICAgICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcyk7XHJcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSk7XHJcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpO1xyXG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKTtcclxuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKSk7XHJcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcudGltZV8yNGhyKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmpcclxuICAgICAgICAgICAgICAgID8gc2VsZi5ob3VyRWxlbWVudC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikgPiAxMSldKTtcclxuICAgICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xyXG4gICAgICAgICAgICBzZWxmLmFtUE0udGFiSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuYW1QTSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxmLnRpbWVDb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBidWlsZFdlZWtkYXlzKCkge1xyXG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKVxyXG4gICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlzXCIpO1xyXG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcclxuICAgICAgICB2YXIgd2Vla2RheXMgPSBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLnNsaWNlKCk7XHJcbiAgICAgICAgaWYgKGZpcnN0RGF5T2ZXZWVrID4gMCAmJiBmaXJzdERheU9mV2VlayA8IHdlZWtkYXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB3ZWVrZGF5cyA9IHdlZWtkYXlzLnNwbGljZShmaXJzdERheU9mV2Vlaywgd2Vla2RheXMubGVuZ3RoKS5jb25jYXQod2Vla2RheXMuc3BsaWNlKDAsIGZpcnN0RGF5T2ZXZWVrKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlxcbiAgICA8c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cXG4gICAgICBcIiArIHdlZWtkYXlzLmpvaW4oXCI8L3NwYW4+PHNwYW4gY2xhc3M9ZmxhdHBpY2tyLXdlZWtkYXk+XCIpICsgXCJcXG4gICAgPC9zcGFuPlxcbiAgICBcIjtcclxuICAgICAgICByZXR1cm4gc2VsZi53ZWVrZGF5Q29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYnVpbGRXZWVrcygpIHtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNXZWVrc1wiKTtcclxuICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWt3cmFwcGVyXCIpO1xyXG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlcIiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTtcclxuICAgICAgICB2YXIgd2Vla051bWJlcnMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtzXCIpO1xyXG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3ZWVrV3JhcHBlcjogd2Vla1dyYXBwZXIsXHJcbiAgICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVycyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlTW9udGgodmFsdWUsIGlzX29mZnNldCwgYW5pbWF0ZSwgZnJvbV9rZXlib2FyZCkge1xyXG4gICAgICAgIGlmIChpc19vZmZzZXQgPT09IHZvaWQgMCkgeyBpc19vZmZzZXQgPSB0cnVlOyB9XHJcbiAgICAgICAgaWYgKGFuaW1hdGUgPT09IHZvaWQgMCkgeyBhbmltYXRlID0gc2VsZi5jb25maWcuYW5pbWF0ZTsgfVxyXG4gICAgICAgIGlmIChmcm9tX2tleWJvYXJkID09PSB2b2lkIDApIHsgZnJvbV9rZXlib2FyZCA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIGRlbHRhID0gaXNfb2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xyXG4gICAgICAgIGlmICgoZGVsdGEgPCAwICYmIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdykgfHxcclxuICAgICAgICAgICAgKGRlbHRhID4gMCAmJiBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggKz0gZGVsdGE7XHJcbiAgICAgICAgaWYgKHNlbGYuY3VycmVudE1vbnRoIDwgMCB8fCBzZWxmLmN1cnJlbnRNb250aCA+IDExKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSAoc2VsZi5jdXJyZW50TW9udGggKyAxMikgJSAxMjtcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidWlsZERheXMoYW5pbWF0ZSA/IGRlbHRhIDogdW5kZWZpbmVkKTtcclxuICAgICAgICBpZiAoIWFuaW1hdGUpIHtcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5hdiA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aDtcclxuICAgICAgICBpZiAoZGVsdGEgPCAwKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChuYXYubmV4dFNpYmxpbmcgJiZcclxuICAgICAgICAgICAgICAgIC9jdXJyLy50ZXN0KG5hdi5uZXh0U2libGluZy5jbGFzc05hbWUpKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5tb250aE5hdi5yZW1vdmVDaGlsZChuYXYubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkZWx0YSA+IDApIHtcclxuICAgICAgICAgICAgd2hpbGUgKG5hdi5wcmV2aW91c1NpYmxpbmcgJiZcclxuICAgICAgICAgICAgICAgIC9jdXJyLy50ZXN0KG5hdi5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lKSlcclxuICAgICAgICAgICAgICAgIHNlbGYubW9udGhOYXYucmVtb3ZlQ2hpbGQobmF2LnByZXZpb3VzU2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYub2xkQ3VyTW9udGggPSBzZWxmLm5hdmlnYXRpb25DdXJyZW50TW9udGg7XHJcbiAgICAgICAgc2VsZi5uYXZpZ2F0aW9uQ3VycmVudE1vbnRoID0gc2VsZi5tb250aE5hdi5pbnNlcnRCZWZvcmUoc2VsZi5vbGRDdXJNb250aC5jbG9uZU5vZGUodHJ1ZSksIGRlbHRhID4gMCA/IHNlbGYub2xkQ3VyTW9udGgubmV4dFNpYmxpbmcgOiBzZWxmLm9sZEN1ck1vbnRoKTtcclxuICAgICAgICB2YXIgZGF5c0NvbnRhaW5lciA9IHNlbGYuZGF5c0NvbnRhaW5lcjtcclxuICAgICAgICBpZiAoZGF5c0NvbnRhaW5lci5maXJzdENoaWxkICYmIGRheXNDb250YWluZXIubGFzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRheXNDb250YWluZXIuZmlyc3RDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2xpZGVMZWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgZGF5c0NvbnRhaW5lci5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNsaWRlTGVmdE5ld1wiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYub2xkQ3VyTW9udGguY2xhc3NMaXN0LmFkZChcInNsaWRlTGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aC5jbGFzc0xpc3QuYWRkKFwic2xpZGVMZWZ0TmV3XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRlbHRhIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgZGF5c0NvbnRhaW5lci5maXJzdENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVJpZ2h0TmV3XCIpO1xyXG4gICAgICAgICAgICAgICAgZGF5c0NvbnRhaW5lci5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNsaWRlUmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9sZEN1ck1vbnRoLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5uYXZpZ2F0aW9uQ3VycmVudE1vbnRoLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVJpZ2h0TmV3XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoRWxlbWVudCA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aFxyXG4gICAgICAgICAgICAuZmlyc3RDaGlsZDtcclxuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudCA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aC5sYXN0Q2hpbGRcclxuICAgICAgICAgICAgLmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xyXG4gICAgICAgIGlmIChzZWxmLm9sZEN1ck1vbnRoLmZpcnN0Q2hpbGQpXHJcbiAgICAgICAgICAgIHNlbGYub2xkQ3VyTW9udGguZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoc2VsZi5jdXJyZW50TW9udGggLSBkZWx0YSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pO1xyXG4gICAgICAgIGFmdGVyRGF5QW5pbShmdW5jdGlvbiAoKSB7IHJldHVybiB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpOyB9KTtcclxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCAmJlxyXG4gICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuJGkpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4XzEgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LiRpO1xyXG4gICAgICAgICAgICBhZnRlckRheUFuaW0oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9jdXNPbkRheShpbmRleF8xLCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH1cclxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcclxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dClcclxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpXHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xyXG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBzZXRIb3VycyhzZWxmLmNvbmZpZy5kZWZhdWx0SG91ciwgc2VsZi5jb25maWcuZGVmYXVsdE1pbnV0ZSwgc2VsZi5jb25maWcuZGVmYXVsdFNlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnJlZHJhdygpO1xyXG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpXHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcclxuICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DbG9zZVwiKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGVzdHJveVwiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5faGFuZGxlcnMubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIHZhciBoID0gc2VsZi5faGFuZGxlcnNbaV07XHJcbiAgICAgICAgICAgIGguZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGguZXZlbnQsIGguaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzID0gW107XHJcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLm1vYmlsZUlucHV0KTtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpXHJcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcclxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcclxuICAgICAgICAgICAgZGVsZXRlIHNlbGYuYWx0SW5wdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IHNlbGYuaW5wdXQuX3R5cGU7XHJcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZsYXRwaWNrci1pbnB1dFwiKTtcclxuICAgICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcclxuICAgICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgXCJfc2hvd1RpbWVJbnB1dFwiLFxyXG4gICAgICAgICAgICBcImxhdGVzdFNlbGVjdGVkRGF0ZU9ialwiLFxyXG4gICAgICAgICAgICBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIixcclxuICAgICAgICAgICAgXCJfaGlkZVByZXZNb250aEFycm93XCIsXHJcbiAgICAgICAgICAgIFwiX19oaWRlTmV4dE1vbnRoQXJyb3dcIixcclxuICAgICAgICAgICAgXCJfX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxyXG4gICAgICAgICAgICBcImlzTW9iaWxlXCIsXHJcbiAgICAgICAgICAgIFwiaXNPcGVuXCIsXHJcbiAgICAgICAgICAgIFwic2VsZWN0ZWREYXRlRWxlbVwiLFxyXG4gICAgICAgICAgICBcIm1pbkRhdGVIYXNUaW1lXCIsXHJcbiAgICAgICAgICAgIFwibWF4RGF0ZUhhc1RpbWVcIixcclxuICAgICAgICAgICAgXCJkYXlzXCIsXHJcbiAgICAgICAgICAgIFwiZGF5c0NvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcIl9pbnB1dFwiLFxyXG4gICAgICAgICAgICBcIl9wb3NpdGlvbkVsZW1lbnRcIixcclxuICAgICAgICAgICAgXCJpbm5lckNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcInJDb250YWluZXJcIixcclxuICAgICAgICAgICAgXCJtb250aE5hdlwiLFxyXG4gICAgICAgICAgICBcInRvZGF5RGF0ZUVsZW1cIixcclxuICAgICAgICAgICAgXCJjYWxlbmRhckNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcIndlZWtkYXlDb250YWluZXJcIixcclxuICAgICAgICAgICAgXCJwcmV2TW9udGhOYXZcIixcclxuICAgICAgICAgICAgXCJuZXh0TW9udGhOYXZcIixcclxuICAgICAgICAgICAgXCJjdXJyZW50TW9udGhFbGVtZW50XCIsXHJcbiAgICAgICAgICAgIFwiY3VycmVudFllYXJFbGVtZW50XCIsXHJcbiAgICAgICAgICAgIFwibmF2aWdhdGlvbkN1cnJlbnRNb250aFwiLFxyXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcclxuICAgICAgICAgICAgXCJjb25maWdcIixcclxuICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxmW2tdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gJiYgc2VsZi5jb25maWcuYXBwZW5kVG8uY29udGFpbnMoZWxlbSkpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZG9jdW1lbnRDbGljayhlKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcclxuICAgICAgICAgICAgdmFyIGlzQ2FsZW5kYXJFbGVtZW50ID0gaXNDYWxlbmRhckVsZW0oZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCB8fFxyXG4gICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSB8fFxyXG4gICAgICAgICAgICAgICAgKGUucGF0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGUucGF0aC5pbmRleE9mICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKH5lLnBhdGguaW5kZXhPZihzZWxmLmlucHV0KSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB+ZS5wYXRoLmluZGV4T2Yoc2VsZi5hbHRJbnB1dCkpKTtcclxuICAgICAgICAgICAgdmFyIGxvc3RGb2N1cyA9IGUudHlwZSA9PT0gXCJibHVyXCJcclxuICAgICAgICAgICAgICAgID8gaXNJbnB1dCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGUucmVsYXRlZFRhcmdldCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFpc0NhbGVuZGFyRWxlbShlLnJlbGF0ZWRUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICA6ICFpc0lucHV0ICYmICFpc0NhbGVuZGFyRWxlbWVudDtcclxuICAgICAgICAgICAgdmFyIGlzSWdub3JlZCA9ICFzZWxmLmNvbmZpZy5pZ25vcmVkRm9jdXNFbGVtZW50cy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5jb250YWlucyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobG9zdEZvY3VzICYmIGlzSWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikge1xyXG4gICAgICAgIGlmICghbmV3WWVhciB8fFxyXG4gICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikgJiZcclxuICAgICAgICAgICAgICAgIG5ld1llYXIgPFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHNlbGYuY3VycmVudFllYXJFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWluXCIpKSkgfHxcclxuICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXJFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpICYmXHJcbiAgICAgICAgICAgICAgICBuZXdZZWFyID5cclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiKSkpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLCBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBuZXdZZWFyTnVtO1xyXG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBuZXdZZWFyTnVtIHx8IHNlbGYuY3VycmVudFllYXI7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5taW4oc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05ld1llYXIpIHtcclxuICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZChkYXRlLCB0aW1lbGVzcykge1xyXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxyXG4gICAgICAgIHZhciBkYXRlVG9DaGVjayA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHVuZGVmaW5lZCwgdGltZWxlc3MpO1xyXG4gICAgICAgIGlmICgoc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxyXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZVRvQ2hlY2ssIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRpbWVsZXNzICE9PSB1bmRlZmluZWQgPyB0aW1lbGVzcyA6ICFzZWxmLm1pbkRhdGVIYXNUaW1lKSA8IDApIHx8XHJcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxyXG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5tYXhEYXRlSGFzVGltZSkgPiAwKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIGJvb2wgPSBzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoID4gMCwgYXJyYXkgPSBib29sID8gc2VsZi5jb25maWcuZW5hYmxlIDogc2VsZi5jb25maWcuZGlzYWJsZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgZCA9IHZvaWQgMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGQgPSBhcnJheVtpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiZcclxuICAgICAgICAgICAgICAgIGQoZGF0ZVRvQ2hlY2spKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSBcInN0cmluZ1wiICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSBzZWxmLnBhcnNlRGF0ZShkLCB1bmRlZmluZWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZCAmJiBwYXJzZWQuZ2V0VGltZSgpID09PSBkYXRlVG9DaGVjay5nZXRUaW1lKClcclxuICAgICAgICAgICAgICAgICAgICA/IGJvb2xcclxuICAgICAgICAgICAgICAgICAgICA6ICFib29sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICBkLmZyb20gJiZcclxuICAgICAgICAgICAgICAgIGQudG8gJiZcclxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPD0gZC50by5nZXRUaW1lKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICFib29sO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcclxuICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcclxuICAgICAgICB2YXIgY2FsZW5kYXJFbGVtID0gaXNDYWxlbmRhckVsZW0oZS50YXJnZXQpO1xyXG4gICAgICAgIHZhciBhbGxvd0lucHV0ID0gc2VsZi5jb25maWcuYWxsb3dJbnB1dDtcclxuICAgICAgICB2YXIgYWxsb3dLZXlkb3duID0gc2VsZi5pc09wZW4gJiYgKCFhbGxvd0lucHV0IHx8ICFpc0lucHV0KTtcclxuICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgJiYgaXNJbnB1dCkge1xyXG4gICAgICAgICAgICBpZiAoYWxsb3dJbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5ibHVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNhbGVuZGFyRWxlbSB8fCBhbGxvd0tleWRvd24gfHwgYWxsb3dJbmxpbmVLZXlkb3duKSB7XHJcbiAgICAgICAgICAgIHZhciBpc1RpbWVPYmogPSAhIXNlbGYudGltZUNvbnRhaW5lciAmJlxyXG4gICAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZU9iailcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdERhdGUoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ2OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YV8xID0gZS5rZXlDb2RlID09PSAzOSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZS5jdHJsS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZS50YXJnZXQuJGksIGRlbHRhXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU1vbnRoKGRlbHRhXzEsIHRydWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5ob3VyRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUua2V5Q29kZSA9PT0gNDAgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiBlLnRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZS50YXJnZXQuJGksIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RpbWVPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCBkZWx0YSAqIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmIHNlbGYuaG91ckVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHNlbGYuaG91ckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYuc2Vjb25kRWxlbWVudCB8fCBzZWxmLmFtUE0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5hbVBNKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGUudGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25LZXlEb3duXCIsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uTW91c2VPdmVyKGVsZW0pIHtcclxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fFxyXG4gICAgICAgICAgICAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpIHx8XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikgfHxcclxuICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW0uZGF0ZU9iaiwgaW5pdGlhbERhdGUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHVuZGVmaW5lZCwgdHJ1ZSksIHJhbmdlU3RhcnREYXRlID0gTWF0aC5taW4oaG92ZXJEYXRlLmdldFRpbWUoKSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZS5nZXRUaW1lKCksIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpLCBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgdCA9IHJhbmdlU3RhcnREYXRlOyB0IDwgcmFuZ2VFbmREYXRlOyB0ICs9IGR1cmF0aW9uLkRBWSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSwgZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIHZhciBvdXRPZlJhbmdlID0gdGltZXN0YW1wIDwgc2VsZi5taW5SYW5nZURhdGUuZ2V0VGltZSgpIHx8XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgPiBzZWxmLm1heFJhbmdlRGF0ZS5nZXRUaW1lKCksIGRheUVsZW0gPSBzZWxmLmRheXMuY2hpbGROb2Rlc1tpXTtcclxuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBbXCJpblJhbmdlXCIsIFwic3RhcnRSYW5nZVwiLCBcImVuZFJhbmdlXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIFtcInN0YXJ0UmFuZ2VcIiwgXCJpblJhbmdlXCIsIFwiZW5kUmFuZ2VcIiwgXCJub3RBbGxvd2VkXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBtaW5SYW5nZURhdGUgPSBNYXRoLm1heChzZWxmLm1pblJhbmdlRGF0ZS5nZXRUaW1lKCksIHJhbmdlU3RhcnREYXRlKSwgbWF4UmFuZ2VEYXRlID0gTWF0aC5taW4oc2VsZi5tYXhSYW5nZURhdGUuZ2V0VGltZSgpLCByYW5nZUVuZERhdGUpO1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoaG92ZXJEYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdID8gXCJzdGFydFJhbmdlXCIgOiBcImVuZFJhbmdlXCIpO1xyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZS5nZXRUaW1lKCkpXHJcbiAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlLmdldFRpbWUoKSlcclxuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xyXG4gICAgICAgICAgICBpZiAodGltZXN0YW1wID49IG1pblJhbmdlRGF0ZSAmJiB0aW1lc3RhbXAgPD0gbWF4UmFuZ2VEYXRlKVxyXG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkYXRlID0gc2VsZi5kYXlzLmNoaWxkTm9kZXNbaV0uZGF0ZU9iajsgaSA8IDQyOyBpKyssIGRhdGUgPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzLmNoaWxkTm9kZXNbaV0gJiZcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXMuY2hpbGROb2Rlc1tpXS5kYXRlT2JqKSB7XHJcbiAgICAgICAgICAgIF9sb29wXzEoaSwgZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcclxuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcigpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHtcclxuICAgICAgICBpZiAocG9zaXRpb25FbGVtZW50ID09PSB2b2lkIDApIHsgcG9zaXRpb25FbGVtZW50ID0gc2VsZi5faW5wdXQ7IH1cclxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSkge1xyXG4gICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQgJiYgZS50YXJnZXQuYmx1cigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi5faW5wdXQuZGlzYWJsZWQgfHwgc2VsZi5jb25maWcuaW5saW5lKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcclxuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKCF3YXNPcGVuKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XHJcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcclxuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcihwb3NpdGlvbkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZU9iaiA9IChzZWxmLmNvbmZpZ1tcIl9cIiArIHR5cGUgKyBcIkRhdGVcIl0gPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KSk7XHJcbiAgICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XHJcbiAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGZbdHlwZSA9PT0gXCJtaW5cIiA/IFwibWluRGF0ZUhhc1RpbWVcIiA6IFwibWF4RGF0ZUhhc1RpbWVcIl0gPVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0SG91cnMoKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0U2Vjb25kcygpID4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBzZWxmLnNlbGVjdGVkRGF0ZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBpc0VuYWJsZWQoZCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgcmVkcmF3KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50W3R5cGVdID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPVxyXG4gICAgICAgICAgICAgICAgICAgICEhaW52ZXJzZURhdGVPYmogJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VEYXRlT2JqLmdldEZ1bGxZZWFyKCkgPT09IGRhdGVPYmouZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZUNvbmZpZygpIHtcclxuICAgICAgICB2YXIgYm9vbE9wdHMgPSBbXHJcbiAgICAgICAgICAgIFwid3JhcFwiLFxyXG4gICAgICAgICAgICBcIndlZWtOdW1iZXJzXCIsXHJcbiAgICAgICAgICAgIFwiYWxsb3dJbnB1dFwiLFxyXG4gICAgICAgICAgICBcImNsaWNrT3BlbnNcIixcclxuICAgICAgICAgICAgXCJ0aW1lXzI0aHJcIixcclxuICAgICAgICAgICAgXCJlbmFibGVUaW1lXCIsXHJcbiAgICAgICAgICAgIFwibm9DYWxlbmRhclwiLFxyXG4gICAgICAgICAgICBcImFsdElucHV0XCIsXHJcbiAgICAgICAgICAgIFwic2hvcnRoYW5kQ3VycmVudE1vbnRoXCIsXHJcbiAgICAgICAgICAgIFwiaW5saW5lXCIsXHJcbiAgICAgICAgICAgIFwic3RhdGljXCIsXHJcbiAgICAgICAgICAgIFwiZW5hYmxlU2Vjb25kc1wiLFxyXG4gICAgICAgICAgICBcImRpc2FibGVNb2JpbGVcIixcclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciBob29rcyA9IFtcclxuICAgICAgICAgICAgXCJvbkNoYW5nZVwiLFxyXG4gICAgICAgICAgICBcIm9uQ2xvc2VcIixcclxuICAgICAgICAgICAgXCJvbkRheUNyZWF0ZVwiLFxyXG4gICAgICAgICAgICBcIm9uRGVzdHJveVwiLFxyXG4gICAgICAgICAgICBcIm9uS2V5RG93blwiLFxyXG4gICAgICAgICAgICBcIm9uTW9udGhDaGFuZ2VcIixcclxuICAgICAgICAgICAgXCJvbk9wZW5cIixcclxuICAgICAgICAgICAgXCJvblBhcnNlQ29uZmlnXCIsXHJcbiAgICAgICAgICAgIFwib25SZWFkeVwiLFxyXG4gICAgICAgICAgICBcIm9uVmFsdWVVcGRhdGVcIixcclxuICAgICAgICAgICAgXCJvblllYXJDaGFuZ2VcIixcclxuICAgICAgICAgICAgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIixcclxuICAgICAgICBdO1xyXG4gICAgICAgIHNlbGYuY29uZmlnID0gX19hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKTtcclxuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XHJcbiAgICAgICAgdmFyIGZvcm1hdHMkJDEgPSB7fTtcclxuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcclxuICAgICAgICBzZWxmLmNvbmZpZy5mb3JtYXREYXRlID0gdXNlckNvbmZpZy5mb3JtYXREYXRlO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJlbmFibGVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGUgfHwgW107IH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZSB8fCBbXTsgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9kaXNhYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSkge1xyXG4gICAgICAgICAgICBmb3JtYXRzJCQxLmRhdGVGb3JtYXQgPSB1c2VyQ29uZmlnLm5vQ2FsZW5kYXJcclxuICAgICAgICAgICAgICAgID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgOiBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ICtcclxuICAgICAgICAgICAgICAgICAgICBcIiBIOmlcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlckNvbmZpZy5hbHRJbnB1dCAmJiB1c2VyQ29uZmlnLmVuYWJsZVRpbWUgJiYgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHMkJDEuYWx0Rm9ybWF0ID0gdXNlckNvbmZpZy5ub0NhbGVuZGFyXHJcbiAgICAgICAgICAgICAgICA/IFwiaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6UyBLXCIgOiBcIiBLXCIpXHJcbiAgICAgICAgICAgICAgICA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiIGg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpICsgXCIgS1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1pbkRhdGVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5EYXRlOyB9LFxyXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIiksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heERhdGVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LFxyXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtYXhcIiksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1pbk1heFRpbWVTZXR0ZXIgPSBmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSBcIm1pblwiID8gXCJfbWluVGltZVwiIDogXCJfbWF4VGltZVwiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgXCJIOmlcIik7XHJcbiAgICAgICAgfTsgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7IH0sXHJcbiAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1pblwiKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4VGltZVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21heFRpbWU7IH0sXHJcbiAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBmb3JtYXRzJCQxLCB1c2VyQ29uZmlnKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2xPcHRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSB0cnVlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSBcInRydWVcIjtcclxuICAgICAgICBmb3IgKHZhciBpID0gaG9va3MubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZ1tob29rc1tpXV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va3NbaV1dID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va3NbaV1dIHx8IFtdKS5tYXAoYmluZFRvSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5jb25maWcucGx1Z2lucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbaV0oc2VsZikgfHwge307XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAofmhvb2tzLmluZGV4T2Yoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoYmluZFRvSW5zdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5jb25maWdba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdXNlckNvbmZpZ1trZXldID09PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBwbHVnaW5Db25mW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5pc01vYmlsZSA9XHJcbiAgICAgICAgICAgICFzZWxmLmNvbmZpZy5kaXNhYmxlTW9iaWxlICYmXHJcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuaW5saW5lICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmXHJcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoICYmXHJcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiZcclxuICAgICAgICAgICAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0dXBMb2NhbGUoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSBcIiArIHNlbGYuY29uZmlnLmxvY2FsZSkpO1xyXG4gICAgICAgIHNlbGYubDEwbiA9IF9fYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgdHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gXCJvYmplY3RcIlxyXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmxvY2FsZVxyXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCJcclxuICAgICAgICAgICAgICAgID8gZmxhdHBpY2tyLmwxMG5zW3NlbGYuY29uZmlnLmxvY2FsZV1cclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcclxuICAgICAgICB0b2tlblJlZ2V4LksgPSBcIihcIiArIHNlbGYubDEwbi5hbVBNWzBdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMF0udG9Mb3dlckNhc2UoKSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMV0udG9Mb3dlckNhc2UoKSArIFwiKVwiO1xyXG4gICAgICAgIHNlbGYuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoc2VsZik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwb3NpdGlvbkNhbGVuZGFyKGN1c3RvbVBvc2l0aW9uRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uRWxlbWVudCA9IGN1c3RvbVBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9wb3NpdGlvbkVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7IHJldHVybiBhY2MgKyBjaGlsZC5vZmZzZXRIZWlnaHQ7IH0sIDApLCBjYWxlbmRhcldpZHRoID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lci5vZmZzZXRXaWR0aCwgY29uZmlnUG9zID0gc2VsZi5jb25maWcucG9zaXRpb24sIGlucHV0Qm91bmRzID0gcG9zaXRpb25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sIHNob3dPblRvcCA9IGNvbmZpZ1BvcyA9PT0gXCJhYm92ZVwiIHx8XHJcbiAgICAgICAgICAgIChjb25maWdQb3MgIT09IFwiYmVsb3dcIiAmJlxyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiZcclxuICAgICAgICAgICAgICAgIGlucHV0Qm91bmRzLnRvcCA+IGNhbGVuZGFySGVpZ2h0KTtcclxuICAgICAgICB2YXIgdG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0ICtcclxuICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICtcclxuICAgICAgICAgICAgKCFzaG93T25Ub3AgPyBwb3NpdGlvbkVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMiA6IC1jYWxlbmRhckhlaWdodCAtIDIpO1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dUb3BcIiwgIXNob3dPblRvcCk7XHJcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgbGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCArIGlucHV0Qm91bmRzLmxlZnQ7XHJcbiAgICAgICAgdmFyIHJpZ2h0ID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBpbnB1dEJvdW5kcy5yaWdodDtcclxuICAgICAgICB2YXIgcmlnaHRNb3N0ID0gbGVmdCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJpZ2h0TW9zdFwiLCByaWdodE1vc3QpO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcclxuICAgICAgICBpZiAoIXJpZ2h0TW9zdCkge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgYnVpbGRXZWVrZGF5cygpO1xyXG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcclxuICAgICAgICBidWlsZERheXMoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XHJcbiAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcclxuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xKVxyXG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2xvc2UsIDApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IGZ1bmN0aW9uIChkYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRheS5jbGFzc0xpc3QgJiZcclxuICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmXHJcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGVkXCIpICYmXHJcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcIm5vdEFsbG93ZWRcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdCA9IGZpbmRQYXJlbnQoZS50YXJnZXQsIGlzU2VsZWN0YWJsZSk7XHJcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0O1xyXG4gICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0YXJnZXQuZGF0ZU9iai5nZXRUaW1lKCkpKTtcclxuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKSAhPT0gc2VsZi5jdXJyZW50TW9udGggJiZcclxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIilcclxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW3NlbGVjdGVkRGF0ZV07XHJcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gaXNEYXRlU2VsZWN0ZWQoc2VsZWN0ZWREYXRlKTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnB1c2goc2VsZWN0ZWREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xyXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xyXG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSAhPT0gMClcclxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XHJcbiAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7XHJcbiAgICAgICAgICAgIHZhciBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICBpZiAoaXNOZXdZZWFyKVxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidWlsZERheXMoKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lICYmXHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgJiZcclxuICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5jb25maWcubWluRGF0ZSkgPT09IDApXHJcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubWluRGF0ZSk7XHJcbiAgICAgICAgdXBkYXRlVmFsdWUoKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSlcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiAoc2VsZi5zaG93VGltZUlucHV0ID0gdHJ1ZSk7IH0sIDUwKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID1cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYubWluUmFuZ2VEYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWluUmFuZ2VEYXRlID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXMuY2hpbGROb2Rlc1swXS5kYXRlT2JqKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLm1heFJhbmdlRGF0ZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGggKyAxLCAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNob3VsZENoYW5nZU1vbnRoKVxyXG4gICAgICAgICAgICBmb2N1c09uRGF5KHRhcmdldC4kaSwgMCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBhZnRlckRheUFuaW0oZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVFbGVtICYmIHNlbGYuc2VsZWN0ZWREYXRlRWxlbS5mb2N1cygpOyB9KTtcclxuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA0NTEpO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBzaW5nbGUgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmICFzZWxmLmNvbmZpZy5lbmFibGVUaW1lO1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiZcclxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy5lbmFibGVUaW1lO1xyXG4gICAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgdmFyIENBTExCQUNLUyA9IHtcclxuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZV0sXHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHtcclxuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb24gPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIG9wdGlvbik7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBDQUxMQkFDS1Nbb3B0aW9uXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnJlZHJhdygpO1xyXG4gICAgICAgIGp1bXBUb0RhdGUoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkRGF0ZShpbnB1dERhdGUsIGZvcm1hdCkge1xyXG4gICAgICAgIHZhciBkYXRlcyA9IFtdO1xyXG4gICAgICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkLCBmb3JtYXQpOyB9KTtcclxuICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaW5nbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm11bHRpcGxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IGRhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZCBpbnN0YW5jZW9mIERhdGUgJiYgaXNFbmFibGVkKGQsIGZhbHNlKTsgfSk7XHJcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7IH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHtcclxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2UgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmIChmb3JtYXQgPT09IHZvaWQgMCkgeyBmb3JtYXQgPSBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0OyB9XHJcbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xyXG4gICAgICAgIHNldFNlbGVjdGVkRGF0ZShkYXRlLCBmb3JtYXQpO1xyXG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xyXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XHJcbiAgICAgICAganVtcFRvRGF0ZSgpO1xyXG4gICAgICAgIHNldEhvdXJzRnJvbURhdGUoKTtcclxuICAgICAgICB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKTtcclxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSlcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZURhdGVSdWxlcyhhcnIpIHtcclxuICAgICAgICByZXR1cm4gYXJyXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcInN0cmluZ1wiIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fFxyXG4gICAgICAgICAgICAgICAgcnVsZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShydWxlLCB1bmRlZmluZWQsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICBydWxlLmZyb20gJiZcclxuICAgICAgICAgICAgICAgIHJ1bGUudG8pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogc2VsZi5wYXJzZURhdGUocnVsZS50bywgdW5kZWZpbmVkKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBydWxlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0dXBEYXRlcygpIHtcclxuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcclxuICAgICAgICBzZWxmLm5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIHByZWxvYWRlZERhdGUgPSBzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSB8fCBzZWxmLmlucHV0LnZhbHVlO1xyXG4gICAgICAgIGlmIChwcmVsb2FkZWREYXRlKVxyXG4gICAgICAgICAgICBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XHJcbiAgICAgICAgdmFyIGluaXRpYWxEYXRlID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aFxyXG4gICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlc1swXVxyXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpID4gc2VsZi5ub3cuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcclxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0VGltZSgpIDwgc2VsZi5ub3cuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdztcclxuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gaW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGluaXRpYWxEYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhUaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWF4VGltZSwgXCJIOmlcIik7XHJcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9XHJcbiAgICAgICAgICAgICEhc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFNlY29uZHMoKSA+IDApO1xyXG4gICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgPVxyXG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1heERhdGUgJiZcclxuICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCkgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJzaG93VGltZUlucHV0XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9zaG93VGltZUlucHV0OyB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zaG93VGltZUlucHV0ID0gYm9vbDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwic2hvd1RpbWVJbnB1dFwiLCBib29sKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaXNPcGVuICYmIHBvc2l0aW9uQ2FsZW5kYXIoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkge1xyXG4gICAgICAgIHNlbGYuaW5wdXQgPSBzZWxmLmNvbmZpZy53cmFwXHJcbiAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaW5wdXRdXCIpXHJcbiAgICAgICAgICAgIDogZWxlbWVudDtcclxuICAgICAgICBpZiAoIXNlbGYuaW5wdXQpIHtcclxuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZWxlbWVudCBzcGVjaWZpZWRcIikpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuaW5wdXQuX3R5cGUgPSBzZWxmLmlucHV0LnR5cGU7XHJcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xyXG4gICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcclxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBcIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xyXG4gICAgICAgICAgICBzZWxmLl9pbnB1dCA9IHNlbGYuYWx0SW5wdXQ7XHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcclxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmlucHV0LnBhcmVudE5vZGUpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpXHJcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgc2VsZi5fcG9zaXRpb25FbGVtZW50ID0gc2VsZi5jb25maWcucG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX2lucHV0O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0dXBNb2JpbGUoKSB7XHJcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IHNlbGYuY29uZmlnLmVuYWJsZVRpbWVcclxuICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gXCJ0aW1lXCIgOiBcImRhdGV0aW1lLWxvY2FsXCJcclxuICAgICAgICAgICAgOiBcImRhdGVcIjtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHNlbGYuaW5wdXQuY2xhc3NOYW1lICsgXCIgZmxhdHBpY2tyLW1vYmlsZVwiKTtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBzZWxmLmlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikgfHwgXCJhbnlcIjtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnR5cGUgPSBpbnB1dFR5cGU7XHJcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7XHJcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgc2VsZi5tb2JpbGVGb3JtYXRTdHIgPVxyXG4gICAgICAgICAgICBpbnB1dFR5cGUgPT09IFwiZGF0ZXRpbWUtbG9jYWxcIlxyXG4gICAgICAgICAgICAgICAgPyBcIlktbS1kXFxcXFRIOmk6U1wiXHJcbiAgICAgICAgICAgICAgICA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCIgPyBcIlktbS1kXCIgOiBcIkg6aTpTXCI7XHJcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSlcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5taW4gPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgXCJZLW0tZFwiKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSlcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5tYXggPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWF4RGF0ZSwgXCJZLW0tZFwiKTtcclxuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzZWxmLnNldERhdGUoZS50YXJnZXQudmFsdWUsIGZhbHNlLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmlzT3BlbilcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2xvc2UoKTtcclxuICAgICAgICBzZWxmLm9wZW4oKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChldmVudCwgZGF0YSkge1xyXG4gICAgICAgIHZhciBob29rcyA9IHNlbGYuY29uZmlnW2V2ZW50XTtcclxuICAgICAgICBpZiAoaG9va3MgIT09IHVuZGVmaW5lZCAmJiBob29rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQgPT09IFwib25DaGFuZ2VcIikge1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJpbnB1dFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xyXG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcclxuICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGYuc2VsZWN0ZWREYXRlc1tpXSwgZGF0ZSkgPT09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIGk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgfHwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA8IDIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID49IDAgJiZcclxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSkgPD0gMCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyIHx8IHNlbGYuaXNNb2JpbGUgfHwgIXNlbGYubW9udGhOYXYpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBtb250aFRvU3RyKHNlbGYuY3VycmVudE1vbnRoLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcclxuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC52YWx1ZSA9IHNlbGYuY3VycmVudFllYXIudG9TdHJpbmcoKTtcclxuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKClcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jdXJyZW50WWVhciA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSk7XHJcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID1cclxuICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKClcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkge1xyXG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IHRydWU7IH1cclxuICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xyXG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5tb2JpbGVGb3JtYXRTdHIpIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmZvcm1hdERhdGUoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYubW9iaWxlRm9ybWF0U3RyKVxyXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGpvaW5DaGFyID0gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiXHJcbiAgICAgICAgICAgID8gc2VsZi5jb25maWcuY29uanVuY3Rpb25cclxuICAgICAgICAgICAgOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3I7XHJcbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlc1xyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkT2JqKSB7IHJldHVybiBzZWxmLmZvcm1hdERhdGUoZE9iaiwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7IH0pXHJcbiAgICAgICAgICAgIC5qb2luKGpvaW5DaGFyKTtcclxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXNcclxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRPYmopIHsgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBzZWxmLmNvbmZpZy5hbHRGb3JtYXQpOyB9KVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oam9pbkNoYXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpXHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbk1vbnRoTmF2U2Nyb2xsKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGlzWWVhciA9IHNlbGYuY3VycmVudFllYXJFbGVtZW50LnBhcmVudE5vZGUgJiZcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucGFyZW50Tm9kZS5jb250YWlucyhlLnRhcmdldCk7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQgfHwgaXNZZWFyKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IG1vdXNlRGVsdGEoZSk7XHJcbiAgICAgICAgICAgIGlmIChpc1llYXIpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciArIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gc2VsZi5jdXJyZW50WWVhci50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlTW9udGgoZGVsdGEsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbk1vbnRoTmF2Q2xpY2soZSkge1xyXG4gICAgICAgIHZhciBpc1ByZXZNb250aCA9IHNlbGYucHJldk1vbnRoTmF2LmNvbnRhaW5zKGUudGFyZ2V0KTtcclxuICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhlLnRhcmdldCk7XHJcbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKVxyXG4gICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7XHJcbiAgICAgICAgZWxzZSBpZiAoZS50YXJnZXQgPT09IHNlbGYuY3VycmVudFllYXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuc2VsZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJhcnJvd1VwXCIpXHJcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7XHJcbiAgICAgICAgZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcImFycm93RG93blwiKVxyXG4gICAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIDEpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgaXNLZXlEb3duID0gZS50eXBlID09PSBcImtleWRvd25cIiwgaW5wdXQgPSBlLnRhcmdldDtcclxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xyXG4gICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpLCBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIpKSwgY3VyVmFsdWUgPSBwYXJzZUludChpbnB1dC52YWx1ZSwgMTApLCBkZWx0YSA9IGUuZGVsdGEgfHxcclxuICAgICAgICAgICAgKGlzS2V5RG93blxyXG4gICAgICAgICAgICAgICAgPyBlLndoaWNoID09PSAzOCA/IDEgOiAtMVxyXG4gICAgICAgICAgICAgICAgOiBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgZS53aGVlbERlbHRhIHx8IC1lLmRlbHRhWSkpIHx8IDApO1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1clZhbHVlICsgc3RlcCAqIGRlbHRhO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IG1pbikge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50KCFpc0hvdXJFbGVtKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQodW5kZWZpbmVkLCAtMSwgc2VsZi5ob3VyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID1cclxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTWludXRlRWxlbSlcclxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gJiZcclxuICAgICAgICAgICAgICAgIGlzSG91ckVsZW0gJiZcclxuICAgICAgICAgICAgICAgIChzdGVwID09PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXdWYWx1ZSArIGN1clZhbHVlID09PSAyM1xyXG4gICAgICAgICAgICAgICAgICAgIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0KCk7XHJcbiAgICByZXR1cm4gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcclxuICAgIHZhciBub2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcclxuICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLl9mbGF0cGlja3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTtcclxuICAgICAgICAgICAgaW5zdGFuY2VzLnB1c2gobm9kZS5fZmxhdHBpY2tyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFuY2VzLmxlbmd0aCA9PT0gMSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcclxufVxyXG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuZmxhdHBpY2tyID0gTm9kZUxpc3QucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xyXG4gICAgfTtcclxuICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xyXG4gICAgfTtcclxufVxyXG52YXIgZmxhdHBpY2tyO1xyXG5mbGF0cGlja3IgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbmZpZykge1xyXG4gICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgTm9kZUxpc3QpXHJcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Ioc2VsZWN0b3IsIGNvbmZpZyk7XHJcbiAgICBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xyXG4gICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcclxufTtcclxuaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcbiAgICB3aW5kb3cuZmxhdHBpY2tyID0gZmxhdHBpY2tyO1xyXG5mbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IGRlZmF1bHRzO1xyXG5mbGF0cGlja3IubDEwbnMgPSB7XHJcbiAgICBlbjogX19hc3NpZ24oe30sIGVuZ2xpc2gpLFxyXG4gICAgZGVmYXVsdDogX19hc3NpZ24oe30sIGVuZ2xpc2gpLFxyXG59O1xyXG5mbGF0cGlja3IubG9jYWxpemUgPSBmdW5jdGlvbiAobDEwbikge1xyXG4gICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQsIGwxMG4pO1xyXG59O1xyXG5mbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IF9fYXNzaWduKHt9LCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZywgY29uZmlnKTtcclxufTtcclxuZmxhdHBpY2tyLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoe30pO1xyXG5mbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pO1xyXG5mbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xyXG5pZiAodHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgalF1ZXJ5LmZuLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xyXG4gICAgfTtcclxufVxyXG5EYXRlLnByb3RvdHlwZS5mcF9pbmNyID0gZnVuY3Rpb24gKGRheXMpIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksIHRoaXMuZ2V0TW9udGgoKSwgdGhpcy5nZXREYXRlKCkgKyAodHlwZW9mIGRheXMgPT09IFwic3RyaW5nXCIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7XHJcbn07XHJcbnZhciBmbGF0cGlja3IkMSA9IGZsYXRwaWNrcjtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gZmxhdHBpY2tyJDE7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG5cblxuLyoqKi8gfSksXG4vKiAyNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBnYWxsZXJ5U2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ2FsbGVyeS13cmFwcGVyJyk7XG5cbiAgaWYgKCFnYWxsZXJ5U2VjdGlvbnMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBbXS5mb3JFYWNoLmNhbGwoZ2FsbGVyeVNlY3Rpb25zLCBmdW5jdGlvbiAoZ2FsbGVyeSkge1xuICAgIHZhciBhZGRJbWFnZSA9IGdhbGxlcnkucXVlcnlTZWxlY3RvcignLmFkZC1nYWxsZXJ5LWltYWdlcycpO1xuICAgIHZhciBIaWRkZW4gPSAoMCwgX3NlcmlhbGl6ZWRJbnB1dDIuZGVmYXVsdCkoZ2FsbGVyeSwgJy5pbWFnZS1nYWxsZXJ5LWhpZGRlbicpO1xuXG4gICAgdmFyIHJlbW92ZSA9ICgwLCBfdXRpbGl0aWVzLnJlbW92ZUl0ZW1zKShIaWRkZW4sIF91dGlsaXRpZXMub25SZW1vdmVJbWFnZSk7XG4gICAgdmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdJbWFnZSk7XG4gICAgdmFyIExpc3QgPSAoMCwgX2xpc3QyLmRlZmF1bHQpKGdhbGxlcnksIHtcbiAgICAgIGxpc3Q6ICcuZ2FsbGVyeS1pbWFnZXMnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogaW1hZ2VJdGVtXG4gICAgfSk7XG5cbiAgICB2YXIgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcbiAgICAgIHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcbiAgICAgIGJ1dHRvbjoge1xuICAgICAgICB0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJ1xuICAgICAgfSxcbiAgICAgIG11bHRpcGxlOiB0cnVlXG4gICAgfSk7XG5cbiAgICBhZGRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG1lZGlhRnJhbWUub3BlbigpO1xuICAgIH0pO1xuXG4gICAgbWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGF0dGFjaG1lbnRzID0gbWVkaWFGcmFtZS5zdGF0ZSgpLmdldCgnc2VsZWN0aW9uJykudG9KU09OKCk7XG5cbiAgICAgIGF0dGFjaG1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGF0dGFjaG1lbnQpIHtcbiAgICAgICAgTGlzdC5hZGQoYXR0YWNobWVudCk7XG4gICAgICAgIEhpZGRlbi5hZGQoYXR0YWNobWVudC5pZCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfc2VyaWFsaXplZElucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VyaWFsaXplZElucHV0KTtcblxudmFyIF91dGlsaXRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgaW1hZ2VJdGVtID0gZnVuY3Rpb24gaW1hZ2VJdGVtKGltYWdlKSB7XG4gIHJldHVybiAnPGxpIGNsYXNzPVwiZ2FsbGVyeS1pbWFnZS1pdGVtXCI+PHNwYW4gY2xhc3M9XCJnYWxsZXJ5LWlhbWdlLWlkXCI+JyArIGltYWdlLmlkICsgJzwvc3Bhbj48aW1nIHNyYz1cIicgKyBpbWFnZS51cmwgKyAnXCIgY2xhc3M9XCJnYWxsZXJ5LWltYWdlXCIvPjxzcGFuPjxzdmcgY2xhc3M9XCJyZW1vdmUtZ2FsbGVyeS1pbWFnZVwiIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cXG4gIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG48L3N2Zz48L3NwYW4+PC9saT4nO1xufTtcblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleC5idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA2YTQ1ODBhMjhmZmQ3NTAxZTQwYyIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgZHJhZ3VsYSBmcm9tICdkcmFndWxhJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIHBhcmVudCwgYXJncyApIHtcbiAgICBjb25zdCBsaXN0ID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoYXJncy5saXN0KTtcblxuICAgIHJlZ2lzdGVyRHJhZ0V2ZW50cyhsaXN0LCBhcmdzLm9uRHJhZyk7XG4gICAgcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgYXJncy5vblJlbW92ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhZGQ6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBodG1sID0gYXJncy5saXN0VGVtcGxhdGUoIHZhbHVlICk7XG4gICAgICAgICAgICBjb25zdCBsaXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGh0bWwpO1xuXG4gICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKCBsaXN0SXRlbSApO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCByZWdpc3RlclJlbW92ZUV2ZW50cyA9IChsaXN0LCBvblJlbW92ZSkgPT4ge1xuICAgIGNvbnN0IGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblxuICAgIGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSAoJ3N2ZycgPT09IGUudGFyZ2V0LnRhZ05hbWUpID8gZS50YXJnZXQgOiBlLnRhcmdldC5jbG9zZXN0KCdzdmcnKTtcblxuICAgICAgICBpZiAoICdzdmcnID09PSB0YXJnZXQudGFnTmFtZSApIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcbiAgICAgICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQoIGxpc3RJdGVtICk7XG4gICAgICAgICAgICBvblJlbW92ZSggdmFsdWUgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxpc3RJdGVtcztcbn1cblxuY29uc3QgcmVnaXN0ZXJEcmFnRXZlbnRzID0gKGxpc3QsIGNhbGxiYWNrKSA9PiB7XG4gICAgY29uc3QgZHJha2UgPSBkcmFndWxhKFtsaXN0XSk7XG5cbiAgICBkcmFrZS5vbignZHJhZ2VuZCcsIChlbCkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyk7XG4gICAgICAgIGNhbGxiYWNrKGxpc3QsIGxpc3RJdGVtcyk7XG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saXN0LmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocGFyZW50LCBoaWRkZW5JbnB1dCkge1xuICBjb25zdCBoaWRkZW5FbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGhpZGRlbklucHV0KTtcblxuICBjb25zdCBnZXRDdXJyZW50VmFsdWUgPSAoKSA9PlxuICAgIGhpZGRlbkVsLnZhbHVlID8gSlNPTi5wYXJzZShoaWRkZW5FbC52YWx1ZSkgOiBbXTtcblxuICBjb25zdCBhZGRWYWx1ZSA9IHZhbHVlID0+IHtcbiAgICBjb25zdCBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcbiAgICByZXR1cm4gY3VycmVudFZhbHVlLmNvbmNhdCh2YWx1ZSk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlVmFsdWUgPSAodmFsdWUsIG9uUmVtb3ZlKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG4gICAgcmV0dXJuIG9uUmVtb3ZlKGN1cnJlbnRWYWx1ZSwgdmFsdWUpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgYWRkOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShhZGRWYWx1ZSh2YWx1ZSkpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbih2YWx1ZSwgb25SZW1vdmUpIHtcbiAgICAgIGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkocmVtb3ZlVmFsdWUodmFsdWUsIG9uUmVtb3ZlKSk7XG4gICAgfSxcbiAgICB1cGRhdGU6IGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgaGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZXMpO1xuICAgIH0sXG4gIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zZXJpYWxpemVkLWlucHV0LmpzIiwiZXhwb3J0IGNvbnN0IHJlbW92ZUl0ZW1zID0gKEhpZGRlbiwgb25SZW1vdmUpID0+IHtcbiAgcmV0dXJuIHZhbHVlID0+IHtcbiAgICBIaWRkZW4ucmVtb3ZlKHZhbHVlLCBvblJlbW92ZSk7XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZHJhZ0l0ZW1zID0gKEhpZGRlbiwgb25EcmFnKSA9PiB7XG4gIHJldHVybiAobGlzdCwgbGlzdEl0ZW1zKSA9PiB7XG4gICAgY29uc3QgdmFsdWVzID0gb25EcmFnKGxpc3QsIGxpc3RJdGVtcyk7XG4gICAgSGlkZGVuLnVwZGF0ZSh2YWx1ZXMpO1xuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IG9uRHJhZ09iamVjdCA9IChsaXN0LCBsaXN0SXRlbXMpID0+IHtcbiAgcmV0dXJuIFtdLnJlZHVjZS5jYWxsKFxuICAgIGxpc3RJdGVtcyxcbiAgICAoYWNjLCBsaXN0SXRlbSkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSB7XG4gICAgICAgIGlkOiBsaXN0SXRlbS5kYXRhc2V0LmlkLFxuICAgICAgICB0aXRsZTogbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTCxcbiAgICAgIH07XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uRHJhZ1RleHQgPSAobGlzdCwgbGlzdEl0ZW1zKSA9PiB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChcbiAgICBsaXN0SXRlbXMsXG4gICAgKGFjYywgbGlzdEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcbiAgICAgIHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuICAgIH0sXG4gICAgW10sXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnSW1hZ2UgPSAobGlzdCwgbGlzdEl0ZW1zKSA9PiB7XG4gIHJldHVybiBbXS5yZWR1Y2UuY2FsbChcbiAgICBsaXN0SXRlbXMsXG4gICAgKGFjYywgbGlzdEl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQobGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTCk7XG4gICAgICByZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcbiAgICB9LFxuICAgIFtdLFxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uUmVtb3ZlT2JqZWN0ID0gKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoY3VycmVudCA9PiBjdXJyZW50LnRpdGxlICE9PSBuZXdWYWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25SZW1vdmVUZXh0ID0gKGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoY3VycmVudCA9PiBjdXJyZW50ICE9PSBuZXdWYWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25SZW1vdmVJbWFnZSA9IChjdXJyZW50VmFsdWUsIG5ld1ZhbHVlKSA9PiB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKGN1cnJlbnQgPT4gY3VycmVudCAhPT0gcGFyc2VJbnQobmV3VmFsdWUpKTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi91dGlsaXRpZXMuanMiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiggYXV0b3N1Z2dlc3QsIGVuZHBvaW50LCBvblNlbGVjdCwgb25FbXB0eSApIHtcblxuICAgIGlmICggISBhdXRvc3VnZ2VzdCApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCB4aHIgPSBmYWxzZTtcblxuICAgIGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsIChlKSA9PiB7XG4gICAgICAgIGlmICggMCA9PT0gZS50YXJnZXQudmFsdWUubGVuZ3RoICAmJiBvbkVtcHR5KSB7XG4gICAgICAgICAgICBvbkVtcHR5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIDMgPiBlLnRhcmdldC52YWx1ZS5sZW5ndGggKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBhdXRvc3VnZ2VzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICAgIHhociA9IGdldE9wdGlvbnMoIHhociwgdXBkYXRlT3B0aW9ucywgYXV0b3N1Z2dlc3QsIGVuZHBvaW50ICk7XG5cbiAgICB9ICk7XG4gICAgYXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lciggJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cbiAgICAgICAgaWYgKCB2YWx1ZSApIHtcbiAgICAgICAgICAgIG9uU2VsZWN0KCB2YWx1ZSwgYXV0b3N1Z2dlc3QgKTtcbiAgICAgICAgfVxuICAgIH0gKTtcbn1cblxuY29uc3Qgb25BdXRvU3VnZ2VzdElucHV0ID0gKGUpID0+IHtcbiAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZTtcbiAgICBjb25zdCBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuICAgIGNvbnN0IGxpc3RPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpLmNoaWxkTm9kZXNcblxuICAgIGNvbnN0IG1hdGNoID0gW10ucmVkdWNlLmNhbGwoIGxpc3RPcHRpb25zLCAoIGFjYywgb3B0aW9uICkgPT4ge1xuICAgICAgICBpZiAoIG9wdGlvbi52YWx1ZSA9PT0gaW5wdXRWYWx1ZSApIHtcbiAgICAgICAgICAgIHJldHVybiBhY2MuY29uY2F0KHtcbiAgICAgICAgICAgICAgICBpZDogb3B0aW9uLmRhdGFzZXQuaWQsXG4gICAgICAgICAgICAgICAgdGl0bGU6IG9wdGlvbi52YWx1ZVxuICAgICAgICAgICAgfSkgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgW10pO1xuXG4gICAgcmV0dXJuICggMCA9PT0gbWF0Y2gubGVuZ3RoICkgPyBmYWxzZSA6ICBtYXRjaFswXTtcbn1cblxuY29uc3QgZ2V0T3B0aW9ucyA9ICggeGhyLCBjYWxsYmFjaywgaW5wdXQsIGVuZHBvaW50ICkgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG4gICAgY29uc3QgdXJsID0gZW5kcG9pbnQgKyBxdWVyeTtcblxuICAgIGlmICggeGhyICkge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICB9XG5cbiAgICB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKCBmYWxzZSwgZXZ0ICk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICYmIGlzSlNPTiggeGhyLnJlc3BvbnNlVGV4dCApICkge1xuICAgICAgICAgICAgY2FsbGJhY2soZmFsc2UsIHsgcmVzdWx0czogSlNPTi5wYXJzZSggeGhyLnJlc3BvbnNlVGV4dCApLCBpbnB1dDogaW5wdXQgfSApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCB4aHIucmVzcG9uc2VUZXh0ICYmIGlzSlNPTiggeGhyLnJlc3BvbnNlVGV4dCApICkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCB7IG1lc3NhZ2U6IEpTT04ucGFyc2UoIHhoci5yZXNwb25zZVRleHQgKSwgaW5wdXQ6IGlucHV0IH0sIGZhbHNlICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIChldnQpID0+IHtcbiAgICAgICAgY2FsbGJhY2soIGV2dCwgZmFsc2UgKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsIChldnQpID0+IHtcbiAgICAgICAgY2FsbGJhY2soIHRydWUsIGZhbHNlICk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG5cbiAgICB4aHIuc2VuZCgpO1xuXG4gICAgcmV0dXJuIHhocjtcbn1cblxuY29uc3QgdXBkYXRlT3B0aW9ucyA9ICggZXJyb3IsIHJlc3BvbnNlICkgPT4ge1xuICAgIGlmICggZXJyb3IgKSB7XG5cbiAgICAgICAgaWYgKCB0cnVlID09PSBlcnJvciApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVycm9yLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgY29uc29sZS53YXJuKCBlcnJvciApO1xuICAgIH1cblxuICAgIGlmICggcmVzcG9uc2UgKSB7XG4gICAgICAgIGlmICggISBBcnJheS5pc0FycmF5KCByZXNwb25zZS5yZXN1bHRzICkgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjcmVhdGVPcHRpb25zKCByZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCApO1xuICAgIH1cbn1cblxuY29uc3QgY3JlYXRlT3B0aW9ucyA9ICggcmVzdWx0cywgaW5wdXQgKSA9PiB7XG4gICAgY29uc3QgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcbiAgICBjb25zdCBkYXRhbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKTtcblxuICAgIGNvbnN0IG5ld09wdGlvbnMgPSByZXN1bHRzLnJlZHVjZSggKGFjYywgcmVzdWx0KSA9PiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbiA9IGNyZWF0ZU9wdGlvbiggcmVzdWx0ICk7XG4gICAgICAgIHJldHVybiBhY2MuY29uY2F0KCBvcHRpb24gKTtcbiAgICB9LCAnJyApO1xuXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIGRhdGFsaXN0LmlubmVySFRNTCA9IG5ld09wdGlvbnM7XG59XG5cbmNvbnN0IGNyZWF0ZU9wdGlvbiA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiBgPG9wdGlvbiBkYXRhLWlkPSR7dmFsdWUuaWR9IHZhbHVlPVwiJHt2YWx1ZS50aXRsZS5yZW5kZXJlZH1cIj5gO1xufVxuXG5jb25zdCBpc0pTT04gPSAoc3RyKSA9PiB7XG5cbiAgICBpZiggdHlwZW9mKCBzdHIgKSAhPT0gJ3N0cmluZycgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgSlNPTi5wYXJzZShzdHIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmNvbnN0IGJ1aWxkUXVlcnkgPSAodmFsdWUpID0+IHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QuanMiLCJpbXBvcnQgYmFzZUNzcyBmcm9tICcuLi9jc3MvaW5kZXguY3NzJztcbmltcG9ydCB0ZXh0TGlzdCBmcm9tICcuL3RleHQtbGlzdCc7XG5pbXBvcnQgYXV0b0xpc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdC1saXN0JztcbmltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgYXV0b0l0ZW0gZnJvbSAnLi9hdXRvLWl0ZW0nO1xuaW1wb3J0IGltYWdlVXBsb2FkcyBmcm9tICcuL2ltYWdlLXVwbG9hZHMnO1xuaW1wb3J0IGRhdGVwaWNrZXIgZnJvbSAnLi9kYXRlcGlja2VyJztcbmltcG9ydCBnYWxsZXJ5IGZyb20gJy4vZ2FsbGVyeSc7XG5cbmNvbnN0IGNyZWF0ZVRleHRJdGVtID0gdmFsdWUgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCI+XG4gICAgICAgIDxzcGFuPiR7dmFsdWV9PC9zcGFuPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuY29uc3QgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gdmFsdWUgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCIgZGF0YS1pZD1cIiR7dmFsdWUuaWR9XCI+XG4gICAgICAgIDxzcGFuPiR7dmFsdWUudGl0bGV9PC9zcGFuPlxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOCA4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICBpbWFnZVVwbG9hZHMoKTtcbiAgdGV4dExpc3Qoe1xuICAgIHBhcmVudDogJy50ZXh0LWxpc3QnLFxuICAgIGJ1dHRvbjogJy50ZXh0LWxpc3QtYWRkJyxcbiAgICBsaXN0OiAnLnRleHQtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcudGV4dC1saXN0LWhpZGRlbicsXG4gICAgbGlzdFRlbXBsYXRlOiBjcmVhdGVUZXh0SXRlbSxcbiAgfSk7XG5cbiAgYXV0b0xpc3Qoe1xuICAgIHBhcmVudDogJy5hdXRvc3VnZ2VzdC1saXN0JyxcbiAgICBpbnB1dDogJ2F1dG9zdWdnZXN0LWxpc3QtaW5wdXQnLFxuICAgIGxpc3Q6ICcuYXV0b3N1Z2dlc3QtbGlzdC1saXN0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtbGlzdC1oaWRkZW4nLFxuICAgIGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtLFxuICB9KTtcblxuICBhdXRvSXRlbSh7XG4gICAgcGFyZW50OiAnLmF1dG9zdWdnZXN0LXdyYXBwZXInLFxuICAgIGlucHV0OiAnLmF1dG9zdWdnZXN0LWlucHV0JyxcbiAgICBoaWRkZW46ICcuYXV0b3N1Z2dlc3QtaGlkZGVuJyxcbiAgfSk7XG5cbiAgZGF0ZXBpY2tlcigpO1xuICBnYWxsZXJ5KCk7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2luZGV4LmpzIiwiaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7IHJlbW92ZUl0ZW1zLCBkcmFnSXRlbXMsIG9uRHJhZ1RleHQsIG9uUmVtb3ZlVGV4dCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIGFyZ3MgKSB7XG4gICAgY29uc3QgbGlzdEZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG4gICAgaWYgKCAhIGxpc3RGaWVsZHMgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBbXS5mb3JFYWNoLmNhbGwoIGxpc3RGaWVsZHMsICggbGlzdEZpZWxkICkgPT4ge1xuICAgICAgICBjb25zdCB0ZXh0SW5wdXQgPSBsaXN0RmllbGQucXVlcnlTZWxlY3RvciggJ2lucHV0W3R5cGU9dGV4dF0nICk7XG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IGxpc3RGaWVsZC5xdWVyeVNlbGVjdG9yKCBhcmdzLmJ1dHRvbiApO1xuICAgICAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oIGxpc3RGaWVsZCwgYXJncy5oaWRkZW4gKTtcbiAgICAgICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoIEhpZGRlbiwgb25SZW1vdmVUZXh0ICk7XG4gICAgICAgIGNvbnN0IGRyYWcgPSBkcmFnSXRlbXMoIEhpZGRlbiwgb25EcmFnVGV4dCApO1xuICAgICAgICBjb25zdCBMaXN0ID0gbGlzdCggbGlzdEZpZWxkLCBPYmplY3QuYXNzaWduKCBhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZX0gKSApO1xuXG4gICAgICAgIGxpc3RGaWVsZC5hZGRFdmVudExpc3RlbmVyKCAna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCAxMyA9PT0gZS5rZXlDb2RlICkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBMaXN0LmFkZCggdGV4dElucHV0LnZhbHVlICk7XG4gICAgICAgICAgICAgICAgSGlkZGVuLmFkZCggdGV4dElucHV0LnZhbHVlICk7XG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKTtcblxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIExpc3QuYWRkKCB0ZXh0SW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCggdGV4dElucHV0LnZhbHVlICk7XG4gICAgICAgICAgICB0ZXh0SW5wdXQudmFsdWUgPSAnJztcbiAgICAgICAgfSApO1xuXG4gICAgfSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vdGV4dC1saXN0LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJ2NvbnRyYS9lbWl0dGVyJyk7XG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XG52YXIgY2xhc3NlcyA9IHJlcXVpcmUoJy4vY2xhc3NlcycpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvZHJhZ3VsYS9kcmFndWxhLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGF0b2EgPSByZXF1aXJlKCdhdG9hJyk7XG52YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvYXRvYS9hdG9hLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB0aWNreSA9IHJlcXVpcmUoJ3RpY2t5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVib3VuY2UgKGZuLCBhcmdzLCBjdHgpIHtcbiAgaWYgKCFmbikgeyByZXR1cm47IH1cbiAgdGlja3koZnVuY3Rpb24gcnVuICgpIHtcbiAgICBmbi5hcHBseShjdHggfHwgbnVsbCwgYXJncyB8fCBbXSk7XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHNpID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJywgdGljaztcbmlmIChzaSkge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldEltbWVkaWF0ZShmbik7IH07XG59IGVsc2Uge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldFRpbWVvdXQoZm4sIDApOyB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRpY2s7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvdGlja3kvdGlja3ktYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuLy8gT24gc29tZSBleG90aWMgZW52aXJvbm1lbnRzLCBpdCdzIG5vdCBjbGVhciB3aGljaCBvYmplY3QgYHNldGltbWVpZGF0ZWAgd2FzXG4vLyBhYmxlIHRvIGluc3RhbGwgb250by4gIFNlYXJjaCBlYWNoIHBvc3NpYmlsaXR5IGluIHRoZSBzYW1lIG9yZGVyIGFzIHRoZVxuLy8gYHNldGltbWVkaWF0ZWAgbGlicmFyeS5cbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2VsZiAmJiBzZWxmLnNldEltbWVkaWF0ZSB8fCBnbG9iYWwgJiYgZ2xvYmFsLnNldEltbWVkaWF0ZSB8fCB0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IHNlbGYgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSB8fCBnbG9iYWwgJiYgZ2xvYmFsLmNsZWFySW1tZWRpYXRlIHx8IHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGN1c3RvbUV2ZW50ID0gcmVxdWlyZSgnY3VzdG9tLWV2ZW50Jyk7XG52YXIgZXZlbnRtYXAgPSByZXF1aXJlKCcuL2V2ZW50bWFwJyk7XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGxpc3RlbmVyID0gdW53cmFwKGVsLCB0eXBlLCBmbik7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvY3Jvc3N2ZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciBOYXRpdmVDdXN0b21FdmVudCA9IGdsb2JhbC5DdXN0b21FdmVudDtcblxuZnVuY3Rpb24gdXNlTmF0aXZlICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcCA9IG5ldyBOYXRpdmVDdXN0b21FdmVudCgnY2F0JywgeyBkZXRhaWw6IHsgZm9vOiAnYmFyJyB9IH0pO1xuICAgIHJldHVybiAgJ2NhdCcgPT09IHAudHlwZSAmJiAnYmFyJyA9PT0gcC5kZXRhaWwuZm9vO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENyb3NzLWJyb3dzZXIgYEN1c3RvbUV2ZW50YCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQuQ3VzdG9tRXZlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VOYXRpdmUoKSA/IE5hdGl2ZUN1c3RvbUV2ZW50IDpcblxuLy8gSUUgPj0gOVxuJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID8gZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgfSBlbHNlIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UsIHZvaWQgMCk7XG4gIH1cbiAgcmV0dXJuIGU7XG59IDpcblxuLy8gSUUgPD0gOFxuZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gIGUudHlwZSA9IHR5cGU7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmJ1YmJsZXMgPSBCb29sZWFuKHBhcmFtcy5idWJibGVzKTtcbiAgICBlLmNhbmNlbGFibGUgPSBCb29sZWFuKHBhcmFtcy5jYW5jZWxhYmxlKTtcbiAgICBlLmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gIH0gZWxzZSB7XG4gICAgZS5idWJibGVzID0gZmFsc2U7XG4gICAgZS5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgZS5kZXRhaWwgPSB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9jdXN0b20tZXZlbnQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL2FyY2hzeXN0ZW1zL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9hcmNoc3lzdGVtcy92ZW5kb3Ivb21nLWZpZWxkcy9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9ldmVudG1hcC5qc1xuLy8gbW9kdWxlIGlkID0gMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGUgPSB7fTtcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG52YXIgZW5kID0gJyg/OlxcXFxzfCQpJztcblxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xuICB2YXIgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBjYWNoZWQgPSBuZXcgUmVnRXhwKHN0YXJ0ICsgY2xhc3NOYW1lICsgZW5kLCAnZycpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIHZhciBjdXJyZW50ID0gZWwuY2xhc3NOYW1lO1xuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9IGVsc2UgaWYgKCFsb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJtQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobG9va3VwQ2xhc3MoY2xhc3NOYW1lKSwgJyAnKS50cmltKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZENsYXNzLFxuICBybTogcm1DbGFzc1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9hcmNoc3lzdGVtcy9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvYXJjaHN5c3RlbXMvdmVuZG9yL29tZy1maWVsZHMvbm9kZV9tb2R1bGVzL2RyYWd1bGEvY2xhc3Nlcy5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7IHJlbW92ZUl0ZW1zLCBkcmFnSXRlbXMsIG9uRHJhZ09iamVjdCwgb25SZW1vdmVPYmplY3QgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKCBhcmdzICkge1xuXG4gICAgY29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoICEgZmllbGRzICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgW10uZm9yRWFjaC5jYWxsKCBmaWVsZHMsICggYXV0b0xpc3QgKSA9PiB7XG4gICAgICAgIGNvbnN0IEhpZGRlbiA9IGhpZGRlbiggYXV0b0xpc3QsIGFyZ3MuaGlkZGVuICk7XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKCBIaWRkZW4sIG9uUmVtb3ZlT2JqZWN0ICk7XG4gICAgICAgIGNvbnN0IGRyYWcgPSBkcmFnSXRlbXMoIEhpZGRlbiwgb25EcmFnT2JqZWN0ICk7XG4gICAgICAgIGNvbnN0IExpc3QgPSBsaXN0KCBhdXRvTGlzdCwgT2JqZWN0LmFzc2lnbiggYXJncywgeyBvbkRyYWc6IGRyYWcsIG9uUmVtb3ZlOiByZW1vdmV9ICkgKTtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCAnLmF1dG9zdWdnZXN0LWxpc3QtaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IGVsTmFtZSA9IGBhdXRvTGlzdF8ke2lucHV0LmdldEF0dHJpYnV0ZSggJ2xpc3QnICl9YDtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtPTUdGaWVsZHMuYmFzZVVSTH0vd3AtanNvbi93cC92Mi8ke3dpbmRvd1tlbE5hbWVdLnJlc291cmNlfT9zZWFyY2g9YDtcblxuICAgICAgICBhdXRvU3VnZ2VzdCggaW5wdXQsIGVuZHBvaW50LCAodmFsdWUsIGlucHV0KSA9PiB7XG4gICAgICAgICAgICBMaXN0LmFkZCh2YWx1ZSk7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgSGlkZGVuLmFkZCggdmFsdWUgKTtcbiAgICAgICAgfSk7XG4gICAgfSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsImltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oIGFyZ3MgKSB7XG4gICAgY29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cbiAgICBpZiAoICEgZmllbGRzICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgW10uZm9yRWFjaC5jYWxsKCBmaWVsZHMsICggYXV0b0l0ZW0gKSA9PiB7XG4gICAgICAgIGNvbnN0IGhpZGRlbiA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoYXJncy5oaWRkZW4pO1xuICAgICAgICBjb25zdCBpbnB1dCA9IGF1dG9JdGVtLnF1ZXJ5U2VsZWN0b3IoICcuYXV0b3N1Z2dlc3QtaW5wdXQnICk7XG4gICAgICAgIGNvbnN0IGVsTmFtZSA9IGBhdXRvTGlzdF8ke2lucHV0LmdldEF0dHJpYnV0ZSggJ2xpc3QnICl9YDtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHtPTUdGaWVsZHMuYmFzZVVSTH0vd3AtanNvbi93cC92Mi8ke3dpbmRvd1tlbE5hbWVdLnJlc291cmNlfT9zZWFyY2g9YDtcblxuICAgICAgICBhdXRvU3VnZ2VzdChcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgZW5kcG9pbnQsXG4gICAgICAgICAgICAodmFsdWUsIGlucHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgaGlkZGVuLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoIHZhbHVlICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGhpZGRlbi52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG8taXRlbS5qcyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGltYWdlVXBsb2FkcygpIHtcblx0dmFyIGZlYXR1cmVkSW1hZ2VXcmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmN1c3RvbS1tZWRpYS11cGxvYWQnKTtcblxuXHRpZiAoIGZlYXR1cmVkSW1hZ2VXcmFwLmxlbmd0aCA9PT0gMCApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRbXS5tYXAuY2FsbCggZmVhdHVyZWRJbWFnZVdyYXAsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHQvLyB2YXIgSW1hZ2VXcmFwSWQgPSBpdGVtLmF0dHJpYnV0ZS5pZDtcblx0XHR2YXIgcmVtb3ZlSW1hZ2UgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5yZW1vdmUtaW1hZ2UnKTtcblx0XHR2YXIgcmVwbGFjZUltYWdlID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcucmVwbGFjZS1pbWFnZScpO1xuXHRcdHZhciBzZXRJbWFnZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnNldC1pbWFnZScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGFnID0gaXRlbS5xdWVyeVNlbGVjdG9yKCdhLnJlcGxhY2UtaW1hZ2UgaW1nJyk7XG5cdFx0dmFyIGZlYXR1cmVkSW1hZ2VJRCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImhpZGRlblwiXScpO1xuXHRcdHZhciBmZWF0dXJlZEltYWdlVGl0bGUgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoICcudGh1bWJuYWlsLXRpdGxlJyApO1xuXHRcdHZhciBtZWRpYUZyYW1lID0gd3AubWVkaWEoe1xuXHRcdFx0dGl0bGU6ICdDaG9vc2UgTWVkaWEnLFxuXHRcdFx0YnV0dG9uOiB7XG5cdFx0XHRcdHRleHQ6ICdVc2UgU2VsZWN0ZWQgTWVkaWEnXG5cdFx0XHR9LFxuXHRcdFx0bXVsdGlwbGU6IGZhbHNlXG5cdFx0fSk7XG5cblx0XHRtZWRpYUZyYW1lLm9uKCdzZWxlY3QnLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBhdHRhY2htZW50ID0gbWVkaWFGcmFtZS5zdGF0ZSgpLmdldCgnc2VsZWN0aW9uJykuZmlyc3QoKS50b0pTT04oKTtcblxuXHRcdFx0aXRlbS5jbGFzc0xpc3QudG9nZ2xlKCdoYXMtaW1hZ2UnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VJRC52YWx1ZSA9IGF0dGFjaG1lbnQuaWQ7XG5cdFx0XHRpZiAoYXR0YWNobWVudC5oYXNPd25Qcm9wZXJ0eSgnc2l6ZXMnKSkge1xuXHRcdFx0XHRmZWF0dXJlZEltYWdlVGFnLnNldEF0dHJpYnV0ZSgnc3JjJywgYXR0YWNobWVudC5zaXplcy50aHVtYm5haWwudXJsKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZlYXR1cmVkSW1hZ2VUYWcuc2V0QXR0cmlidXRlKCdzcmMnLCBhdHRhY2htZW50Lmljb24pO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZlYXR1cmVkSW1hZ2VUaXRsZSApIHtcblx0XHRcdFx0ZmVhdHVyZWRJbWFnZVRpdGxlLmlubmVySFRNTCA9IGF0dGFjaG1lbnQuZmlsZW5hbWU7XG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXHRcdHJlbW92ZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC50b2dnbGUoJ2hhcy1pbWFnZScpO1xuXHRcdFx0ZmVhdHVyZWRJbWFnZVRhZy5zZXRBdHRyaWJ1dGUoJ3NyYycsICcnKTtcblx0XHRcdGZlYXR1cmVkSW1hZ2VJRC52YWx1ZSA9ICcnO1xuXHRcdH0pO1xuXG5cdFx0cmVwbGFjZUltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtZWRpYUZyYW1lLm9wZW4oKTtcblx0XHR9KTtcblxuXHRcdHNldEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRtZWRpYUZyYW1lLm9wZW4oKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vaW1hZ2UtdXBsb2Fkcy5qcyIsImltcG9ydCBmbGF0cGlja3IgZnJvbSAnZmxhdHBpY2tyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGRhdGVwaWNrZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRhdGVwaWNrZXItaW5wdXQnKTtcblxuICBpZiAoIWRhdGVwaWNrZXJzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGRhdGVwaWNrZXJzLCBkYXRlRmllbGQgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZUZpZWxkLmRhdGFzZXQuZGF0ZTtcblxuICAgIGZsYXRwaWNrcihkYXRlRmllbGQsIHtcbiAgICAgIGFsdElucHV0OiB0cnVlLFxuICAgICAgYWx0Rm9ybWF0OiAnRiBqLCBZJyxcbiAgICAgIGRhdGVGb3JtYXQ6ICdVJyxcbiAgICAgIGRlZmF1bHREYXRlOiAhY3VycmVudERhdGUgPyAnJyA6IGN1cnJlbnREYXRlLFxuICAgIH0pO1xuICB9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2RhdGVwaWNrZXIuanMiLCIvKiBmbGF0cGlja3IgdjQuMi4zLCBAbGljZW5zZSBNSVQgKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IGZhY3RvcnkoZXhwb3J0cykgOlxuXHR0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoWydleHBvcnRzJ10sIGZhY3RvcnkpIDpcblx0KGZhY3RvcnkoKGdsb2JhbC5mbGF0cGlja3IgPSB7fSkpKTtcbn0odGhpcywgKGZ1bmN0aW9uIChleHBvcnRzKSB7ICd1c2Ugc3RyaWN0JztcblxuLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcblxyXG5cclxudmFyIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufTtcblxudmFyIHBhZCA9IGZ1bmN0aW9uIChudW1iZXIpIHsgcmV0dXJuIChcIjBcIiArIG51bWJlcikuc2xpY2UoLTIpOyB9O1xyXG52YXIgaW50ID0gZnVuY3Rpb24gKGJvb2wpIHsgcmV0dXJuIChib29sID09PSB0cnVlID8gMSA6IDApOyB9O1xyXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcclxuICAgIGlmIChpbW1lZGlhdGUgPT09IHZvaWQgMCkgeyBpbW1lZGlhdGUgPSBmYWxzZTsgfVxyXG4gICAgdmFyIHRpbWVvdXQ7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICB0aW1lb3V0ICE9PSBudWxsICYmIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpXHJcbiAgICAgICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgIH0sIHdhaXQpO1xyXG4gICAgICAgIGlmIChpbW1lZGlhdGUgJiYgIXRpbWVvdXQpXHJcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICB9O1xyXG59XHJcbnZhciBhcnJheWlmeSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiBBcnJheSA/IG9iaiA6IFtvYmpdO1xyXG59O1xyXG5mdW5jdGlvbiBtb3VzZURlbHRhKGUpIHtcclxuICAgIHZhciBkZWx0YSA9IGUud2hlZWxEZWx0YSB8fCAtZS5kZWx0YVk7XHJcbiAgICByZXR1cm4gZGVsdGEgPj0gMCA/IDEgOiAtMTtcclxufVxuXG52YXIgZG9fbm90aGluZyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfTtcclxudmFyIHJldkZvcm1hdCA9IHtcclxuICAgIEQ6IGRvX25vdGhpbmcsXHJcbiAgICBGOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGhOYW1lLCBsb2NhbGUpIHtcclxuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKGxvY2FsZS5tb250aHMubG9uZ2hhbmQuaW5kZXhPZihtb250aE5hbWUpKTtcclxuICAgIH0sXHJcbiAgICBHOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikge1xyXG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XHJcbiAgICB9LFxyXG4gICAgSDogZnVuY3Rpb24gKGRhdGVPYmosIGhvdXIpIHtcclxuICAgICAgICBkYXRlT2JqLnNldEhvdXJzKHBhcnNlRmxvYXQoaG91cikpO1xyXG4gICAgfSxcclxuICAgIEo6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcclxuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcclxuICAgIH0sXHJcbiAgICBLOiBmdW5jdGlvbiAoZGF0ZU9iaiwgYW1QTSwgbG9jYWxlKSB7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRIb3VycyhkYXRlT2JqLmdldEhvdXJzKCkgJSAxMiArXHJcbiAgICAgICAgICAgIDEyICogaW50KG5ldyBSZWdFeHAobG9jYWxlLmFtUE1bMV0sIFwiaVwiKS50ZXN0KGFtUE0pKSk7XHJcbiAgICB9LFxyXG4gICAgTTogZnVuY3Rpb24gKGRhdGVPYmosIHNob3J0TW9udGgsIGxvY2FsZSkge1xyXG4gICAgICAgIGRhdGVPYmouc2V0TW9udGgobG9jYWxlLm1vbnRocy5zaG9ydGhhbmQuaW5kZXhPZihzaG9ydE1vbnRoKSk7XHJcbiAgICB9LFxyXG4gICAgUzogZnVuY3Rpb24gKGRhdGVPYmosIHNlY29uZHMpIHtcclxuICAgICAgICBkYXRlT2JqLnNldFNlY29uZHMocGFyc2VGbG9hdChzZWNvbmRzKSk7XHJcbiAgICB9LFxyXG4gICAgVTogZnVuY3Rpb24gKF8sIHVuaXhTZWNvbmRzKSB7IHJldHVybiBuZXcgRGF0ZShwYXJzZUZsb2F0KHVuaXhTZWNvbmRzKSAqIDEwMDApOyB9LFxyXG4gICAgVzogZnVuY3Rpb24gKGRhdGVPYmosIHdlZWtOdW0pIHtcclxuICAgICAgICB2YXIgd2Vla051bWJlciA9IHBhcnNlSW50KHdlZWtOdW0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlT2JqLmdldEZ1bGxZZWFyKCksIDAsIDIgKyAod2Vla051bWJlciAtIDEpICogNywgMCwgMCwgMCwgMCk7XHJcbiAgICB9LFxyXG4gICAgWTogZnVuY3Rpb24gKGRhdGVPYmosIHllYXIpIHtcclxuICAgICAgICBkYXRlT2JqLnNldEZ1bGxZZWFyKHBhcnNlRmxvYXQoeWVhcikpO1xyXG4gICAgfSxcclxuICAgIFo6IGZ1bmN0aW9uIChfLCBJU09EYXRlKSB7IHJldHVybiBuZXcgRGF0ZShJU09EYXRlKTsgfSxcclxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlT2JqLCBkYXkpIHtcclxuICAgICAgICBkYXRlT2JqLnNldERhdGUocGFyc2VGbG9hdChkYXkpKTtcclxuICAgIH0sXHJcbiAgICBoOiBmdW5jdGlvbiAoZGF0ZU9iaiwgaG91cikge1xyXG4gICAgICAgIGRhdGVPYmouc2V0SG91cnMocGFyc2VGbG9hdChob3VyKSk7XHJcbiAgICB9LFxyXG4gICAgaTogZnVuY3Rpb24gKGRhdGVPYmosIG1pbnV0ZXMpIHtcclxuICAgICAgICBkYXRlT2JqLnNldE1pbnV0ZXMocGFyc2VGbG9hdChtaW51dGVzKSk7XHJcbiAgICB9LFxyXG4gICAgajogZnVuY3Rpb24gKGRhdGVPYmosIGRheSkge1xyXG4gICAgICAgIGRhdGVPYmouc2V0RGF0ZShwYXJzZUZsb2F0KGRheSkpO1xyXG4gICAgfSxcclxuICAgIGw6IGRvX25vdGhpbmcsXHJcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZU9iaiwgbW9udGgpIHtcclxuICAgICAgICBkYXRlT2JqLnNldE1vbnRoKHBhcnNlRmxvYXQobW9udGgpIC0gMSk7XHJcbiAgICB9LFxyXG4gICAgbjogZnVuY3Rpb24gKGRhdGVPYmosIG1vbnRoKSB7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRNb250aChwYXJzZUZsb2F0KG1vbnRoKSAtIDEpO1xyXG4gICAgfSxcclxuICAgIHM6IGZ1bmN0aW9uIChkYXRlT2JqLCBzZWNvbmRzKSB7XHJcbiAgICAgICAgZGF0ZU9iai5zZXRTZWNvbmRzKHBhcnNlRmxvYXQoc2Vjb25kcykpO1xyXG4gICAgfSxcclxuICAgIHc6IGRvX25vdGhpbmcsXHJcbiAgICB5OiBmdW5jdGlvbiAoZGF0ZU9iaiwgeWVhcikge1xyXG4gICAgICAgIGRhdGVPYmouc2V0RnVsbFllYXIoMjAwMCArIHBhcnNlRmxvYXQoeWVhcikpO1xyXG4gICAgfSxcclxufTtcclxudmFyIHRva2VuUmVnZXggPSB7XHJcbiAgICBEOiBcIihcXFxcdyspXCIsXHJcbiAgICBGOiBcIihcXFxcdyspXCIsXHJcbiAgICBHOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgSDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIEo6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXFxcXHcrXCIsXHJcbiAgICBLOiBcIlwiLFxyXG4gICAgTTogXCIoXFxcXHcrKVwiLFxyXG4gICAgUzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIFU6IFwiKC4rKVwiLFxyXG4gICAgVzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIFk6IFwiKFxcXFxkezR9KVwiLFxyXG4gICAgWjogXCIoLispXCIsXHJcbiAgICBkOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgaDogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIGk6IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXHJcbiAgICBqOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgbDogXCIoXFxcXHcrKVwiLFxyXG4gICAgbTogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIG46IFwiKFxcXFxkXFxcXGR8XFxcXGQpXCIsXHJcbiAgICBzOiBcIihcXFxcZFxcXFxkfFxcXFxkKVwiLFxyXG4gICAgdzogXCIoXFxcXGRcXFxcZHxcXFxcZClcIixcclxuICAgIHk6IFwiKFxcXFxkezJ9KVwiLFxyXG59O1xyXG52YXIgZm9ybWF0cyA9IHtcclxuICAgIFo6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7IH0sXHJcbiAgICBEOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5zaG9ydGhhbmRbZm9ybWF0cy53KGRhdGUsIGxvY2FsZSwgb3B0aW9ucyldO1xyXG4gICAgfSxcclxuICAgIEY6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbW9udGhUb1N0cihmb3JtYXRzLm4oZGF0ZSwgbG9jYWxlLCBvcHRpb25zKSAtIDEsIGZhbHNlLCBsb2NhbGUpO1xyXG4gICAgfSxcclxuICAgIEc6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gcGFkKGZvcm1hdHMuaChkYXRlLCBsb2NhbGUsIG9wdGlvbnMpKTtcclxuICAgIH0sXHJcbiAgICBIOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0SG91cnMoKSk7IH0sXHJcbiAgICBKOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZS5vcmRpbmFsICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBkYXRlLmdldERhdGUoKSArIGxvY2FsZS5vcmRpbmFsKGRhdGUuZ2V0RGF0ZSgpKVxyXG4gICAgICAgICAgICA6IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgfSxcclxuICAgIEs6IGZ1bmN0aW9uIChkYXRlLCBsb2NhbGUpIHsgcmV0dXJuIGxvY2FsZS5hbVBNW2ludChkYXRlLmdldEhvdXJzKCkgPiAxMSldOyB9LFxyXG4gICAgTTogZnVuY3Rpb24gKGRhdGUsIGxvY2FsZSkge1xyXG4gICAgICAgIHJldHVybiBtb250aFRvU3RyKGRhdGUuZ2V0TW9udGgoKSwgdHJ1ZSwgbG9jYWxlKTtcclxuICAgIH0sXHJcbiAgICBTOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTsgfSxcclxuICAgIFU6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBkYXRlLmdldFRpbWUoKSAvIDEwMDA7IH0sXHJcbiAgICBXOiBmdW5jdGlvbiAoZGF0ZSwgXywgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFdlZWsoZGF0ZSk7XHJcbiAgICB9LFxyXG4gICAgWTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0RnVsbFllYXIoKTsgfSxcclxuICAgIGQ6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBwYWQoZGF0ZS5nZXREYXRlKCkpOyB9LFxyXG4gICAgaDogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIChkYXRlLmdldEhvdXJzKCkgJSAxMiA/IGRhdGUuZ2V0SG91cnMoKSAlIDEyIDogMTIpOyB9LFxyXG4gICAgaTogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHBhZChkYXRlLmdldE1pbnV0ZXMoKSk7IH0sXHJcbiAgICBqOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXREYXRlKCk7IH0sXHJcbiAgICBsOiBmdW5jdGlvbiAoZGF0ZSwgbG9jYWxlKSB7XHJcbiAgICAgICAgcmV0dXJuIGxvY2FsZS53ZWVrZGF5cy5sb25naGFuZFtkYXRlLmdldERheSgpXTtcclxuICAgIH0sXHJcbiAgICBtOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpOyB9LFxyXG4gICAgbjogZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIGRhdGUuZ2V0TW9udGgoKSArIDE7IH0sXHJcbiAgICBzOiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXRTZWNvbmRzKCk7IH0sXHJcbiAgICB3OiBmdW5jdGlvbiAoZGF0ZSkgeyByZXR1cm4gZGF0ZS5nZXREYXkoKTsgfSxcclxuICAgIHk6IGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBTdHJpbmcoZGF0ZS5nZXRGdWxsWWVhcigpKS5zdWJzdHJpbmcoMik7IH0sXHJcbn07XG5cbnZhciBlbmdsaXNoID0ge1xyXG4gICAgd2Vla2RheXM6IHtcclxuICAgICAgICBzaG9ydGhhbmQ6IFtcIlN1blwiLCBcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiXSxcclxuICAgICAgICBsb25naGFuZDogW1xyXG4gICAgICAgICAgICBcIlN1bmRheVwiLFxyXG4gICAgICAgICAgICBcIk1vbmRheVwiLFxyXG4gICAgICAgICAgICBcIlR1ZXNkYXlcIixcclxuICAgICAgICAgICAgXCJXZWRuZXNkYXlcIixcclxuICAgICAgICAgICAgXCJUaHVyc2RheVwiLFxyXG4gICAgICAgICAgICBcIkZyaWRheVwiLFxyXG4gICAgICAgICAgICBcIlNhdHVyZGF5XCIsXHJcbiAgICAgICAgXSxcclxuICAgIH0sXHJcbiAgICBtb250aHM6IHtcclxuICAgICAgICBzaG9ydGhhbmQ6IFtcclxuICAgICAgICAgICAgXCJKYW5cIixcclxuICAgICAgICAgICAgXCJGZWJcIixcclxuICAgICAgICAgICAgXCJNYXJcIixcclxuICAgICAgICAgICAgXCJBcHJcIixcclxuICAgICAgICAgICAgXCJNYXlcIixcclxuICAgICAgICAgICAgXCJKdW5cIixcclxuICAgICAgICAgICAgXCJKdWxcIixcclxuICAgICAgICAgICAgXCJBdWdcIixcclxuICAgICAgICAgICAgXCJTZXBcIixcclxuICAgICAgICAgICAgXCJPY3RcIixcclxuICAgICAgICAgICAgXCJOb3ZcIixcclxuICAgICAgICAgICAgXCJEZWNcIixcclxuICAgICAgICBdLFxyXG4gICAgICAgIGxvbmdoYW5kOiBbXHJcbiAgICAgICAgICAgIFwiSmFudWFyeVwiLFxyXG4gICAgICAgICAgICBcIkZlYnJ1YXJ5XCIsXHJcbiAgICAgICAgICAgIFwiTWFyY2hcIixcclxuICAgICAgICAgICAgXCJBcHJpbFwiLFxyXG4gICAgICAgICAgICBcIk1heVwiLFxyXG4gICAgICAgICAgICBcIkp1bmVcIixcclxuICAgICAgICAgICAgXCJKdWx5XCIsXHJcbiAgICAgICAgICAgIFwiQXVndXN0XCIsXHJcbiAgICAgICAgICAgIFwiU2VwdGVtYmVyXCIsXHJcbiAgICAgICAgICAgIFwiT2N0b2JlclwiLFxyXG4gICAgICAgICAgICBcIk5vdmVtYmVyXCIsXHJcbiAgICAgICAgICAgIFwiRGVjZW1iZXJcIixcclxuICAgICAgICBdLFxyXG4gICAgfSxcclxuICAgIGRheXNJbk1vbnRoOiBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV0sXHJcbiAgICBmaXJzdERheU9mV2VlazogMCxcclxuICAgIG9yZGluYWw6IGZ1bmN0aW9uIChudGgpIHtcclxuICAgICAgICB2YXIgcyA9IG50aCAlIDEwMDtcclxuICAgICAgICBpZiAocyA+IDMgJiYgcyA8IDIxKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xyXG4gICAgICAgIHN3aXRjaCAocyAlIDEwKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInN0XCI7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcIm5kXCI7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInJkXCI7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0aFwiO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByYW5nZVNlcGFyYXRvcjogXCIgdG8gXCIsXHJcbiAgICB3ZWVrQWJicmV2aWF0aW9uOiBcIldrXCIsXHJcbiAgICBzY3JvbGxUaXRsZTogXCJTY3JvbGwgdG8gaW5jcmVtZW50XCIsXHJcbiAgICB0b2dnbGVUaXRsZTogXCJDbGljayB0byB0b2dnbGVcIixcclxuICAgIGFtUE06IFtcIkFNXCIsIFwiUE1cIl0sXHJcbn07XG5cbnZhciBjcmVhdGVEYXRlRm9ybWF0dGVyID0gZnVuY3Rpb24gKF9hKSB7XHJcbiAgICB2YXIgX2IgPSBfYS5jb25maWcsIGNvbmZpZyA9IF9iID09PSB2b2lkIDAgPyBkZWZhdWx0cyA6IF9iLCBfYyA9IF9hLmwxMG4sIGwxMG4gPSBfYyA9PT0gdm9pZCAwID8gZW5nbGlzaCA6IF9jO1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkYXRlT2JqLCBmcm10KSB7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5mb3JtYXREYXRlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWcuZm9ybWF0RGF0ZShkYXRlT2JqLCBmcm10KTtcclxuICAgICAgICByZXR1cm4gZnJtdFxyXG4gICAgICAgICAgICAuc3BsaXQoXCJcIilcclxuICAgICAgICAgICAgLm1hcChmdW5jdGlvbiAoYywgaSwgYXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRzW2NdICYmIGFycltpIC0gMV0gIT09IFwiXFxcXFwiXHJcbiAgICAgICAgICAgICAgICA/IGZvcm1hdHNbY10oZGF0ZU9iaiwgbDEwbiwgY29uZmlnKVxyXG4gICAgICAgICAgICAgICAgOiBjICE9PSBcIlxcXFxcIiA/IGMgOiBcIlwiO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5qb2luKFwiXCIpO1xyXG4gICAgfTtcclxufTtcclxudmFyIGNyZWF0ZURhdGVQYXJzZXIgPSBmdW5jdGlvbiAoX2EpIHtcclxuICAgIHZhciBfYiA9IF9hLmNvbmZpZywgY29uZmlnID0gX2IgPT09IHZvaWQgMCA/IGRlZmF1bHRzIDogX2IsIF9jID0gX2EubDEwbiwgbDEwbiA9IF9jID09PSB2b2lkIDAgPyBlbmdsaXNoIDogX2M7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUsIGdpdmVuRm9ybWF0LCB0aW1lbGVzcykge1xyXG4gICAgICAgIGlmIChkYXRlICE9PSAwICYmICFkYXRlKVxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIHZhciBwYXJzZWREYXRlO1xyXG4gICAgICAgIHZhciBkYXRlX29yaWcgPSBkYXRlO1xyXG4gICAgICAgIGlmIChkYXRlIGluc3RhbmNlb2YgRGF0ZSlcclxuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgZGF0ZSAhPT0gXCJzdHJpbmdcIiAmJlxyXG4gICAgICAgICAgICBkYXRlLnRvRml4ZWQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSBnaXZlbkZvcm1hdCB8fCAoY29uZmlnIHx8IGRlZmF1bHRzKS5kYXRlRm9ybWF0O1xyXG4gICAgICAgICAgICB2YXIgZGF0ZXN0ciA9IFN0cmluZyhkYXRlKS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmIChkYXRlc3RyID09PSBcInRvZGF5XCIpIHtcclxuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGltZWxlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKC9aJC8udGVzdChkYXRlc3RyKSB8fFxyXG4gICAgICAgICAgICAgICAgL0dNVCQvLnRlc3QoZGF0ZXN0cikpXHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID0gbmV3IERhdGUoZGF0ZSk7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZyAmJiBjb25maWcucGFyc2VEYXRlKVxyXG4gICAgICAgICAgICAgICAgcGFyc2VkRGF0ZSA9IGNvbmZpZy5wYXJzZURhdGUoZGF0ZSwgZm9ybWF0KTtcclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzZWREYXRlID1cclxuICAgICAgICAgICAgICAgICAgICAhY29uZmlnIHx8ICFjb25maWcubm9DYWxlbmRhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgMCwgMSwgMCwgMCwgMCwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBuZXcgRGF0ZShuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcclxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVkID0gdm9pZCAwLCBvcHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBtYXRjaEluZGV4ID0gMCwgcmVnZXhTdHIgPSBcIlwiOyBpIDwgZm9ybWF0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gZm9ybWF0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0JhY2tTbGFzaCA9IHRva2VuID09PSBcIlxcXFxcIjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXNjYXBlZCA9IGZvcm1hdFtpIC0gMV0gPT09IFwiXFxcXFwiIHx8IGlzQmFja1NsYXNoO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlblJlZ2V4W3Rva2VuXSAmJiAhZXNjYXBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSB0b2tlblJlZ2V4W3Rva2VuXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmV3IFJlZ0V4cChyZWdleFN0cikuZXhlYyhkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaGVkID0gdHJ1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wc1t0b2tlbiAhPT0gXCJZXCIgPyBcInB1c2hcIiA6IFwidW5zaGlmdFwiXSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm46IHJldkZvcm1hdFt0b2tlbl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsOiBtYXRjaFsrK21hdGNoSW5kZXhdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIWlzQmFja1NsYXNoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWdleFN0ciArPSBcIi5cIjtcclxuICAgICAgICAgICAgICAgICAgICBvcHMuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gX2EuZm4sIHZhbCA9IF9hLnZhbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChwYXJzZWREYXRlID0gZm4ocGFyc2VkRGF0ZSwgdmFsLCBsMTBuKSB8fCBwYXJzZWREYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhcnNlZERhdGUgPSBtYXRjaGVkID8gcGFyc2VkRGF0ZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIShwYXJzZWREYXRlIGluc3RhbmNlb2YgRGF0ZSkpIHtcclxuICAgICAgICAgICAgY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgcHJvdmlkZWQ6IFwiICsgZGF0ZV9vcmlnKSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdHJ1ZSlcclxuICAgICAgICAgICAgcGFyc2VkRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICByZXR1cm4gcGFyc2VkRGF0ZTtcclxuICAgIH07XHJcbn07XHJcbmZ1bmN0aW9uIGNvbXBhcmVEYXRlcyhkYXRlMSwgZGF0ZTIsIHRpbWVsZXNzKSB7XHJcbiAgICBpZiAodGltZWxlc3MgPT09IHZvaWQgMCkgeyB0aW1lbGVzcyA9IHRydWU7IH1cclxuICAgIGlmICh0aW1lbGVzcyAhPT0gZmFsc2UpIHtcclxuICAgICAgICByZXR1cm4gKG5ldyBEYXRlKGRhdGUxLmdldFRpbWUoKSkuc2V0SG91cnMoMCwgMCwgMCwgMCkgLVxyXG4gICAgICAgICAgICBuZXcgRGF0ZShkYXRlMi5nZXRUaW1lKCkpLnNldEhvdXJzKDAsIDAsIDAsIDApKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XHJcbn1cclxuXHJcbnZhciBtb250aFRvU3RyID0gZnVuY3Rpb24gKG1vbnRoTnVtYmVyLCBzaG9ydGhhbmQsIGxvY2FsZSkgeyByZXR1cm4gbG9jYWxlLm1vbnRoc1tzaG9ydGhhbmQgPyBcInNob3J0aGFuZFwiIDogXCJsb25naGFuZFwiXVttb250aE51bWJlcl07IH07XHJcbnZhciBnZXRXZWVrID0gZnVuY3Rpb24gKGdpdmVuRGF0ZSkge1xyXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShnaXZlbkRhdGUuZ2V0VGltZSgpKTtcclxuICAgIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XHJcbiAgICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgKyAzIC0gKGRhdGUuZ2V0RGF5KCkgKyA2KSAlIDcpO1xyXG4gICAgdmFyIHdlZWsxID0gbmV3IERhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCA0KTtcclxuICAgIHJldHVybiAoMSArXHJcbiAgICAgICAgTWF0aC5yb3VuZCgoKGRhdGUuZ2V0VGltZSgpIC0gd2VlazEuZ2V0VGltZSgpKSAvIDg2NDAwMDAwIC1cclxuICAgICAgICAgICAgMyArXHJcbiAgICAgICAgICAgICh3ZWVrMS5nZXREYXkoKSArIDYpICUgNykgL1xyXG4gICAgICAgICAgICA3KSk7XHJcbn07XHJcbnZhciBkdXJhdGlvbiA9IHtcclxuICAgIERBWTogODY0MDAwMDAsXHJcbn07XG5cbnZhciBkZWZhdWx0cyA9IHtcclxuICAgIF9kaXNhYmxlOiBbXSxcclxuICAgIF9lbmFibGU6IFtdLFxyXG4gICAgYWxsb3dJbnB1dDogZmFsc2UsXHJcbiAgICBhbHRGb3JtYXQ6IFwiRiBqLCBZXCIsXHJcbiAgICBhbHRJbnB1dDogZmFsc2UsXHJcbiAgICBhbHRJbnB1dENsYXNzOiBcImZvcm0tY29udHJvbCBpbnB1dFwiLFxyXG4gICAgYW5pbWF0ZTogdHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIiAmJlxyXG4gICAgICAgIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpID09PSAtMSxcclxuICAgIGFyaWFEYXRlRm9ybWF0OiBcIkYgaiwgWVwiLFxyXG4gICAgY2xpY2tPcGVuczogdHJ1ZSxcclxuICAgIGNsb3NlT25TZWxlY3Q6IHRydWUsXHJcbiAgICBjb25qdW5jdGlvbjogXCIsIFwiLFxyXG4gICAgZGF0ZUZvcm1hdDogXCJZLW0tZFwiLFxyXG4gICAgZGVmYXVsdEhvdXI6IDEyLFxyXG4gICAgZGVmYXVsdE1pbnV0ZTogMCxcclxuICAgIGRlZmF1bHRTZWNvbmRzOiAwLFxyXG4gICAgZGlzYWJsZTogW10sXHJcbiAgICBkaXNhYmxlTW9iaWxlOiBmYWxzZSxcclxuICAgIGVuYWJsZTogW10sXHJcbiAgICBlbmFibGVTZWNvbmRzOiBmYWxzZSxcclxuICAgIGVuYWJsZVRpbWU6IGZhbHNlLFxyXG4gICAgZXJyb3JIYW5kbGVyOiBjb25zb2xlLndhcm4sXHJcbiAgICBnZXRXZWVrOiBnZXRXZWVrLFxyXG4gICAgaG91ckluY3JlbWVudDogMSxcclxuICAgIGlnbm9yZWRGb2N1c0VsZW1lbnRzOiBbXSxcclxuICAgIGlubGluZTogZmFsc2UsXHJcbiAgICBsb2NhbGU6IFwiZGVmYXVsdFwiLFxyXG4gICAgbWludXRlSW5jcmVtZW50OiA1LFxyXG4gICAgbW9kZTogXCJzaW5nbGVcIixcclxuICAgIG5leHRBcnJvdzogXCI8c3ZnIHZlcnNpb249JzEuMScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIDE3IDE3Jz48Zz48L2c+PHBhdGggZD0nTTEzLjIwNyA4LjQ3MmwtNy44NTQgNy44NTQtMC43MDctMC43MDcgNy4xNDYtNy4xNDYtNy4xNDYtNy4xNDggMC43MDctMC43MDcgNy44NTQgNy44NTR6JyAvPjwvc3ZnPlwiLFxyXG4gICAgbm9DYWxlbmRhcjogZmFsc2UsXHJcbiAgICBvbkNoYW5nZTogW10sXHJcbiAgICBvbkNsb3NlOiBbXSxcclxuICAgIG9uRGF5Q3JlYXRlOiBbXSxcclxuICAgIG9uRGVzdHJveTogW10sXHJcbiAgICBvbktleURvd246IFtdLFxyXG4gICAgb25Nb250aENoYW5nZTogW10sXHJcbiAgICBvbk9wZW46IFtdLFxyXG4gICAgb25QYXJzZUNvbmZpZzogW10sXHJcbiAgICBvblJlYWR5OiBbXSxcclxuICAgIG9uVmFsdWVVcGRhdGU6IFtdLFxyXG4gICAgb25ZZWFyQ2hhbmdlOiBbXSxcclxuICAgIG9uUHJlQ2FsZW5kYXJQb3NpdGlvbjogW10sXHJcbiAgICBwbHVnaW5zOiBbXSxcclxuICAgIHBvc2l0aW9uOiBcImF1dG9cIixcclxuICAgIHBvc2l0aW9uRWxlbWVudDogdW5kZWZpbmVkLFxyXG4gICAgcHJldkFycm93OiBcIjxzdmcgdmVyc2lvbj0nMS4xJyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgMTcgMTcnPjxnPjwvZz48cGF0aCBkPSdNNS4yMDcgOC40NzFsNy4xNDYgNy4xNDctMC43MDcgMC43MDctNy44NTMtNy44NTQgNy44NTQtNy44NTMgMC43MDcgMC43MDctNy4xNDcgNy4xNDZ6JyAvPjwvc3ZnPlwiLFxyXG4gICAgc2hvcnRoYW5kQ3VycmVudE1vbnRoOiBmYWxzZSxcclxuICAgIHN0YXRpYzogZmFsc2UsXHJcbiAgICB0aW1lXzI0aHI6IGZhbHNlLFxyXG4gICAgd2Vla051bWJlcnM6IGZhbHNlLFxyXG4gICAgd3JhcDogZmFsc2UsXHJcbn07XG5cbmZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGVsZW0sIGNsYXNzTmFtZSwgYm9vbCkge1xyXG4gICAgaWYgKGJvb2wgPT09IHRydWUpXHJcbiAgICAgICAgcmV0dXJuIGVsZW0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG4gICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWcsIGNsYXNzTmFtZSwgY29udGVudCkge1xyXG4gICAgdmFyIGUgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XHJcbiAgICBjb250ZW50ID0gY29udGVudCB8fCBcIlwiO1xyXG4gICAgZS5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICBpZiAoY29udGVudCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIGUudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgcmV0dXJuIGU7XHJcbn1cclxuZnVuY3Rpb24gY2xlYXJOb2RlKG5vZGUpIHtcclxuICAgIHdoaWxlIChub2RlLmZpcnN0Q2hpbGQpXHJcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xyXG59XHJcbmZ1bmN0aW9uIGZpbmRQYXJlbnQobm9kZSwgY29uZGl0aW9uKSB7XHJcbiAgICBpZiAoY29uZGl0aW9uKG5vZGUpKVxyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgZWxzZSBpZiAobm9kZS5wYXJlbnROb2RlKVxyXG4gICAgICAgIHJldHVybiBmaW5kUGFyZW50KG5vZGUucGFyZW50Tm9kZSwgY29uZGl0aW9uKTtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlTnVtYmVySW5wdXQoaW5wdXRDbGFzc05hbWUsIG9wdHMpIHtcclxuICAgIHZhciB3cmFwcGVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcIm51bUlucHV0V3JhcHBlclwiKSwgbnVtSW5wdXQgPSBjcmVhdGVFbGVtZW50KFwiaW5wdXRcIiwgXCJudW1JbnB1dCBcIiArIGlucHV0Q2xhc3NOYW1lKSwgYXJyb3dVcCA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiYXJyb3dVcFwiKSwgYXJyb3dEb3duID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJhcnJvd0Rvd25cIik7XHJcbiAgICBudW1JbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICBudW1JbnB1dC5wYXR0ZXJuID0gXCJcXFxcZCpcIjtcclxuICAgIGlmIChvcHRzICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9wdHMpXHJcbiAgICAgICAgICAgIG51bUlucHV0LnNldEF0dHJpYnV0ZShrZXksIG9wdHNba2V5XSk7XHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG51bUlucHV0KTtcclxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoYXJyb3dVcCk7XHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFycm93RG93bik7XHJcbiAgICByZXR1cm4gd3JhcHBlcjtcclxufVxuXG5pZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgT2JqZWN0LmFzc2lnbiA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcclxuICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIGFyZ3NbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIHRocm93IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoc291cmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHNvdXJjZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAodGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XSk7IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmb3IgKHZhciBfYSA9IDAsIGFyZ3NfMSA9IGFyZ3M7IF9hIDwgYXJnc18xLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJnc18xW19hXTtcclxuICAgICAgICAgICAgX2xvb3BfMShzb3VyY2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgfTtcclxufVxuXG52YXIgREVCT1VOQ0VEX0NIQU5HRV9NUyA9IDMwMDtcclxuZnVuY3Rpb24gRmxhdHBpY2tySW5zdGFuY2UoZWxlbWVudCwgaW5zdGFuY2VDb25maWcpIHtcclxuICAgIHZhciBzZWxmID0ge307XHJcbiAgICBzZWxmLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoc2VsZik7XHJcbiAgICBzZWxmLl9hbmltYXRpb25Mb29wID0gW107XHJcbiAgICBzZWxmLl9oYW5kbGVycyA9IFtdO1xyXG4gICAgc2VsZi5fYmluZCA9IGJpbmQ7XHJcbiAgICBzZWxmLl9zZXRIb3Vyc0Zyb21EYXRlID0gc2V0SG91cnNGcm9tRGF0ZTtcclxuICAgIHNlbGYuY2hhbmdlTW9udGggPSBjaGFuZ2VNb250aDtcclxuICAgIHNlbGYuY2hhbmdlWWVhciA9IGNoYW5nZVllYXI7XHJcbiAgICBzZWxmLmNsZWFyID0gY2xlYXI7XHJcbiAgICBzZWxmLmNsb3NlID0gY2xvc2U7XHJcbiAgICBzZWxmLl9jcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudDtcclxuICAgIHNlbGYuZGVzdHJveSA9IGRlc3Ryb3k7XHJcbiAgICBzZWxmLmlzRW5hYmxlZCA9IGlzRW5hYmxlZDtcclxuICAgIHNlbGYuanVtcFRvRGF0ZSA9IGp1bXBUb0RhdGU7XHJcbiAgICBzZWxmLm9wZW4gPSBvcGVuO1xyXG4gICAgc2VsZi5yZWRyYXcgPSByZWRyYXc7XHJcbiAgICBzZWxmLnNldCA9IHNldDtcclxuICAgIHNlbGYuc2V0RGF0ZSA9IHNldERhdGU7XHJcbiAgICBzZWxmLnRvZ2dsZSA9IHRvZ2dsZTtcclxuICAgIGZ1bmN0aW9uIHNldHVwSGVscGVyRnVuY3Rpb25zKCkge1xyXG4gICAgICAgIHNlbGYudXRpbHMgPSB7XHJcbiAgICAgICAgICAgIGdldERheXNJbk1vbnRoOiBmdW5jdGlvbiAobW9udGgsIHlyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9udGggPT09IHZvaWQgMCkgeyBtb250aCA9IHNlbGYuY3VycmVudE1vbnRoOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeXIgPT09IHZvaWQgMCkgeyB5ciA9IHNlbGYuY3VycmVudFllYXI7IH1cclxuICAgICAgICAgICAgICAgIGlmIChtb250aCA9PT0gMSAmJiAoKHlyICUgNCA9PT0gMCAmJiB5ciAlIDEwMCAhPT0gMCkgfHwgeXIgJSA0MDAgPT09IDApKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyOTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmwxMG4uZGF5c0luTW9udGhbbW9udGhdO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgICAgIHNlbGYuZWxlbWVudCA9IHNlbGYuaW5wdXQgPSBlbGVtZW50O1xyXG4gICAgICAgIHNlbGYuaXNPcGVuID0gZmFsc2U7XHJcbiAgICAgICAgcGFyc2VDb25maWcoKTtcclxuICAgICAgICBzZXR1cExvY2FsZSgpO1xyXG4gICAgICAgIHNldHVwSW5wdXRzKCk7XHJcbiAgICAgICAgc2V0dXBEYXRlcygpO1xyXG4gICAgICAgIHNldHVwSGVscGVyRnVuY3Rpb25zKCk7XHJcbiAgICAgICAgaWYgKCFzZWxmLmlzTW9iaWxlKVxyXG4gICAgICAgICAgICBidWlsZCgpO1xyXG4gICAgICAgIGJpbmRFdmVudHMoKTtcclxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXJcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8IHNlbGYuY29uZmlnLm1pbkRhdGVcclxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdXBkYXRlVmFsdWUoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnNob3dUaW1lSW5wdXQgPVxyXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID4gMCB8fCBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyO1xyXG4gICAgICAgIGlmIChzZWxmLndlZWtXcmFwcGVyICE9PSB1bmRlZmluZWQgJiYgc2VsZi5kYXlzQ29udGFpbmVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS53aWR0aCA9XHJcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIub2Zmc2V0V2lkdGggKyBzZWxmLndlZWtXcmFwcGVyLm9mZnNldFdpZHRoICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgICAgIGlmICghc2VsZi5pc01vYmlsZSAmJiBpc1NhZmFyaSkge1xyXG4gICAgICAgICAgICBwb3NpdGlvbkNhbGVuZGFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyaWdnZXJFdmVudChcIm9uUmVhZHlcIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBiaW5kVG9JbnN0YW5jZShmbikge1xyXG4gICAgICAgIHJldHVybiBmbi5iaW5kKHNlbGYpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVGltZShlKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm5vQ2FsZW5kYXIgJiYgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLnNldERhdGUoc2VsZi5jb25maWcubWluRGF0ZSAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICAgICAgOiBuZXcgRGF0ZSgpLnNldEhvdXJzKHNlbGYuY29uZmlnLmRlZmF1bHRIb3VyLCBzZWxmLmNvbmZpZy5kZWZhdWx0TWludXRlLCBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcywgMCksIGZhbHNlKTtcclxuICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XHJcbiAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRpbWVXcmFwcGVyKGUpO1xyXG4gICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKGUudHlwZSAhPT0gXCJpbnB1dFwiKSB7XHJcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xyXG4gICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21JbnB1dHMoKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgICAgIH0sIERFQk9VTkNFRF9DSEFOR0VfTVMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGFtcG0ybWlsaXRhcnkoaG91ciwgYW1QTSkge1xyXG4gICAgICAgIHJldHVybiBob3VyICUgMTIgKyAxMiAqIGludChhbVBNID09PSBzZWxmLmwxMG4uYW1QTVsxXSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBtaWxpdGFyeTJhbXBtKGhvdXIpIHtcclxuICAgICAgICBzd2l0Y2ggKGhvdXIgJSAyNCkge1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTI7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaG91ciAlIDEyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbUlucHV0cygpIHtcclxuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHNlbGYubWludXRlRWxlbWVudCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIGhvdXJzID0gKHBhcnNlSW50KHNlbGYuaG91ckVsZW1lbnQudmFsdWUuc2xpY2UoLTIpLCAxMCkgfHwgMCkgJSAyNCwgbWludXRlcyA9IChwYXJzZUludChzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUsIDEwKSB8fCAwKSAlIDYwLCBzZWNvbmRzID0gc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyAocGFyc2VJbnQoc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlLCAxMCkgfHwgMCkgJSA2MFxyXG4gICAgICAgICAgICA6IDA7XHJcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBob3VycyA9IGFtcG0ybWlsaXRhcnkoaG91cnMsIHNlbGYuYW1QTS50ZXh0Q29udGVudCk7XHJcbiAgICAgICAgdmFyIGxpbWl0TWluSG91cnMgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWluRGF0ZUhhc1RpbWUgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqICYmXHJcbiAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRydWUpID09PVxyXG4gICAgICAgICAgICAgICAgICAgIDApO1xyXG4gICAgICAgIHZhciBsaW1pdE1heEhvdXJzID0gc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1heERhdGVIYXNUaW1lICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAmJlxyXG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0cnVlKSA9PT1cclxuICAgICAgICAgICAgICAgICAgICAwKTtcclxuICAgICAgICBpZiAobGltaXRNYXhIb3Vycykge1xyXG4gICAgICAgICAgICB2YXIgbWF4VGltZSA9IHNlbGYuY29uZmlnLm1heFRpbWUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhUaW1lXHJcbiAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGU7XHJcbiAgICAgICAgICAgIGhvdXJzID0gTWF0aC5taW4oaG91cnMsIG1heFRpbWUuZ2V0SG91cnMoKSk7XHJcbiAgICAgICAgICAgIGlmIChob3VycyA9PT0gbWF4VGltZS5nZXRIb3VycygpKVxyXG4gICAgICAgICAgICAgICAgbWludXRlcyA9IE1hdGgubWluKG1pbnV0ZXMsIG1heFRpbWUuZ2V0TWludXRlcygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpbWl0TWluSG91cnMpIHtcclxuICAgICAgICAgICAgdmFyIG1pblRpbWUgPSBzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWluVGltZVxyXG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5taW5EYXRlO1xyXG4gICAgICAgICAgICBob3VycyA9IE1hdGgubWF4KGhvdXJzLCBtaW5UaW1lLmdldEhvdXJzKCkpO1xyXG4gICAgICAgICAgICBpZiAoaG91cnMgPT09IG1pblRpbWUuZ2V0SG91cnMoKSlcclxuICAgICAgICAgICAgICAgIG1pbnV0ZXMgPSBNYXRoLm1heChtaW51dGVzLCBtaW5UaW1lLmdldE1pbnV0ZXMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldEhvdXJzKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldEhvdXJzRnJvbURhdGUoZGF0ZU9iaikge1xyXG4gICAgICAgIHZhciBkYXRlID0gZGF0ZU9iaiB8fCBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iajtcclxuICAgICAgICBpZiAoZGF0ZSlcclxuICAgICAgICAgICAgc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpLCBkYXRlLmdldE1pbnV0ZXMoKSwgZGF0ZS5nZXRTZWNvbmRzKCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0SG91cnMoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpIHtcclxuICAgICAgICBpZiAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iai5zZXRIb3Vycyhob3VycyAlIDI0LCBtaW51dGVzLCBzZWNvbmRzIHx8IDAsIDApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNlbGYuaG91ckVsZW1lbnQgfHwgIXNlbGYubWludXRlRWxlbWVudCB8fCBzZWxmLmlzTW9iaWxlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZCghc2VsZi5jb25maWcudGltZV8yNGhyXHJcbiAgICAgICAgICAgID8gKDEyICsgaG91cnMpICUgMTIgKyAxMiAqIGludChob3VycyAlIDEyID09PSAwKVxyXG4gICAgICAgICAgICA6IGhvdXJzKTtcclxuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQudmFsdWUgPSBwYWQobWludXRlcyk7XHJcbiAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVtpbnQoaG91cnMgPj0gMTIpXTtcclxuICAgICAgICBpZiAoc2VsZi5zZWNvbmRFbGVtZW50ICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC52YWx1ZSA9IHBhZChzZWNvbmRzKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uWWVhcklucHV0KGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHllYXIgPSBwYXJzZUludChldmVudC50YXJnZXQudmFsdWUpICsgKGV2ZW50LmRlbHRhIHx8IDApO1xyXG4gICAgICAgIGlmICh5ZWFyLnRvU3RyaW5nKCkubGVuZ3RoID09PSA0IHx8IGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmJsdXIoKTtcclxuICAgICAgICAgICAgaWYgKCEvW15cXGRdLy50ZXN0KHllYXIudG9TdHJpbmcoKSkpXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VZZWFyKHllYXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJpbmQoZWxlbWVudCwgZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgcmV0dXJuIGV2ZW50LmZvckVhY2goZnVuY3Rpb24gKGV2KSB7IHJldHVybiBiaW5kKGVsZW1lbnQsIGV2LCBoYW5kbGVyLCBvcHRpb25zKTsgfSk7XHJcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZm9yRWFjaChmdW5jdGlvbiAoZWwpIHsgcmV0dXJuIGJpbmQoZWwsIGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTsgfSk7XHJcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyLCBvcHRpb25zKTtcclxuICAgICAgICBzZWxmLl9oYW5kbGVycy5wdXNoKHsgZWxlbWVudDogZWxlbWVudCwgZXZlbnQ6IGV2ZW50LCBoYW5kbGVyOiBoYW5kbGVyIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25DbGljayhoYW5kbGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgZXZ0LndoaWNoID09PSAxICYmIGhhbmRsZXIoZXZ0KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdHJpZ2dlckNoYW5nZSgpIHtcclxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNoYW5nZVwiKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJpbmRFdmVudHMoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLndyYXApIHtcclxuICAgICAgICAgICAgW1wib3BlblwiLCBcImNsb3NlXCIsIFwidG9nZ2xlXCIsIFwiY2xlYXJcIl0uZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNlbGYuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtXCIgKyBldnQgKyBcIl1cIiksIGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiaW5kKGVsLCBcImNsaWNrXCIsIHNlbGZbZXZ0XSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLmlzTW9iaWxlKSB7XHJcbiAgICAgICAgICAgIHNldHVwTW9iaWxlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGRlYm91bmNlZFJlc2l6ZSA9IGRlYm91bmNlKG9uUmVzaXplLCA1MCk7XHJcbiAgICAgICAgc2VsZi5fZGVib3VuY2VkQ2hhbmdlID0gZGVib3VuY2UodHJpZ2dlckNoYW5nZSwgREVCT1VOQ0VEX0NIQU5HRV9NUyk7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJlxyXG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIgJiZcclxuICAgICAgICAgICAgIS9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSlcclxuICAgICAgICAgICAgYmluZChzZWxmLmRheXNDb250YWluZXIsIFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb25Nb3VzZU92ZXIoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCBcImtleWRvd25cIiwgb25LZXlEb3duKTtcclxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYylcclxuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJrZXlkb3duXCIsIG9uS2V5RG93bik7XHJcbiAgICAgICAgaWYgKCFzZWxmLmNvbmZpZy5pbmxpbmUgJiYgIXNlbGYuY29uZmlnLnN0YXRpYylcclxuICAgICAgICAgICAgYmluZCh3aW5kb3csIFwicmVzaXplXCIsIGRlYm91bmNlZFJlc2l6ZSk7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgYmluZCh3aW5kb3cuZG9jdW1lbnQuYm9keSwgXCJ0b3VjaHN0YXJ0XCIsIGRvY3VtZW50Q2xpY2spO1xyXG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LmJvZHksIFwibW91c2Vkb3duXCIsIG9uQ2xpY2soZG9jdW1lbnRDbGljaykpO1xyXG4gICAgICAgIGJpbmQod2luZG93LmRvY3VtZW50LmJvZHksIFwiZm9jdXNcIiwgZG9jdW1lbnRDbGljaywgeyBjYXB0dXJlOiB0cnVlIH0pO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbGlja09wZW5zID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi5faW5wdXQsIFwiZm9jdXNcIiwgc2VsZi5vcGVuKTtcclxuICAgICAgICAgICAgYmluZChzZWxmLl9pbnB1dCwgXCJtb3VzZWRvd25cIiwgb25DbGljayhzZWxmLm9wZW4pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgXCJ3aGVlbFwiLCBvbk1vbnRoTmF2U2Nyb2xsKTtcclxuICAgICAgICAgICAgYmluZChzZWxmLm1vbnRoTmF2LCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKG9uTW9udGhOYXZDbGljaykpO1xyXG4gICAgICAgICAgICBiaW5kKHNlbGYubW9udGhOYXYsIFtcImtleXVwXCIsIFwiaW5jcmVtZW50XCJdLCBvblllYXJJbnB1dCk7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKHNlbGVjdERhdGUpKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLmFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5kYXlzQ29udGFpbmVyLCBbXCJ3ZWJraXRBbmltYXRpb25FbmRcIiwgXCJhbmltYXRpb25lbmRcIl0sIGFuaW1hdGVEYXlzKTtcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5tb250aE5hdiwgW1wid2Via2l0QW5pbWF0aW9uRW5kXCIsIFwiYW5pbWF0aW9uZW5kXCJdLCBhbmltYXRlTW9udGhzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi50aW1lQ29udGFpbmVyICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc2VsZi5taW51dGVFbGVtZW50ICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxUZXh0ID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5zZWxlY3QoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYmluZChzZWxmLnRpbWVDb250YWluZXIsIFtcIndoZWVsXCIsIFwiaW5wdXRcIiwgXCJpbmNyZW1lbnRcIl0sIHVwZGF0ZVRpbWUpO1xyXG4gICAgICAgICAgICBiaW5kKHNlbGYudGltZUNvbnRhaW5lciwgXCJtb3VzZWRvd25cIiwgb25DbGljayh0aW1lSW5jcmVtZW50KSk7XHJcbiAgICAgICAgICAgIGJpbmQoc2VsZi50aW1lQ29udGFpbmVyLCBbXCJ3aGVlbFwiLCBcImlucHV0XCIsIFwiaW5jcmVtZW50XCJdLCBzZWxmLl9kZWJvdW5jZWRDaGFuZ2UsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgYmluZChbc2VsZi5ob3VyRWxlbWVudCwgc2VsZi5taW51dGVFbGVtZW50XSwgW1wiZm9jdXNcIiwgXCJjbGlja1wiXSwgc2VsVGV4dCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlY29uZEVsZW1lbnQgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5zZWNvbmRFbGVtZW50LCBcImZvY3VzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuc2Vjb25kRWxlbWVudCAmJiBzZWxmLnNlY29uZEVsZW1lbnQuc2VsZWN0KCk7IH0pO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGJpbmQoc2VsZi5hbVBNLCBcIm1vdXNlZG93blwiLCBvbkNsaWNrKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlVGltZShlKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwcm9jZXNzUG9zdERheUFuaW1hdGlvbigpIHtcclxuICAgICAgICBzZWxmLl9hbmltYXRpb25Mb29wLmZvckVhY2goZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYoKTsgfSk7XHJcbiAgICAgICAgc2VsZi5fYW5pbWF0aW9uTG9vcCA9IFtdO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZURheXMoZSkge1xyXG4gICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIgJiYgc2VsZi5kYXlzQ29udGFpbmVyLmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGUuYW5pbWF0aW9uTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImZwU2xpZGVMZWZ0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmxhc3RDaGlsZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIubGFzdENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZUxlZnROZXdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLnJlbW92ZUNoaWxkKHNlbGYuZGF5c0NvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYXlzID0gc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc1Bvc3REYXlBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJmcFNsaWRlUmlnaHRcIjpcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuZmlyc3RDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKFwic2xpZGVSaWdodE5ld1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5sYXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGF5cyA9IHNlbGYuZGF5c0NvbnRhaW5lci5maXJzdENoaWxkO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NQb3N0RGF5QW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYW5pbWF0ZU1vbnRocyhlKSB7XHJcbiAgICAgICAgc3dpdGNoIChlLmFuaW1hdGlvbk5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImZwU2xpZGVMZWZ0TmV3XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJmcFNsaWRlUmlnaHROZXdcIjpcclxuICAgICAgICAgICAgICAgIHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aC5jbGFzc0xpc3QucmVtb3ZlKFwic2xpZGVMZWZ0TmV3XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5uYXZpZ2F0aW9uQ3VycmVudE1vbnRoLmNsYXNzTGlzdC5yZW1vdmUoXCJzbGlkZVJpZ2h0TmV3XCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hdiA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aDtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuYXYubmV4dFNpYmxpbmcgJiZcclxuICAgICAgICAgICAgICAgICAgICAvY3Vyci8udGVzdChuYXYubmV4dFNpYmxpbmcuY2xhc3NOYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1vbnRoTmF2LnJlbW92ZUNoaWxkKG5hdi5uZXh0U2libGluZyk7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobmF2LnByZXZpb3VzU2libGluZyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC9jdXJyLy50ZXN0KG5hdi5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lKSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLm1vbnRoTmF2LnJlbW92ZUNoaWxkKG5hdi5wcmV2aW91c1NpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5vbGRDdXJNb250aCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGp1bXBUb0RhdGUoanVtcERhdGUpIHtcclxuICAgICAgICB2YXIganVtcFRvID0ganVtcERhdGUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/IHNlbGYucGFyc2VEYXRlKGp1bXBEYXRlKVxyXG4gICAgICAgICAgICA6IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqIHx8XHJcbiAgICAgICAgICAgICAgICAoc2VsZi5jb25maWcubWluRGF0ZSAmJiBzZWxmLmNvbmZpZy5taW5EYXRlID4gc2VsZi5ub3dcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1heERhdGUgJiYgc2VsZi5jb25maWcubWF4RGF0ZSA8IHNlbGYubm93XHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcubWF4RGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHNlbGYubm93KTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoanVtcFRvICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBqdW1wVG8uZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0ganVtcFRvLmdldE1vbnRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgZS5tZXNzYWdlID0gXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsganVtcFRvO1xyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB0aW1lSW5jcmVtZW50KGUpIHtcclxuICAgICAgICBpZiAofmUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKFwiYXJyb3dcIikpXHJcbiAgICAgICAgICAgIGluY3JlbWVudE51bUlucHV0KGUsIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFycm93VXBcIikgPyAxIDogLTEpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaW5jcmVtZW50TnVtSW5wdXQoZSwgZGVsdGEsIGlucHV0RWxlbSkge1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSBlICYmIGUudGFyZ2V0O1xyXG4gICAgICAgIHZhciBpbnB1dCA9IGlucHV0RWxlbSB8fFxyXG4gICAgICAgICAgICAodGFyZ2V0ICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIHZhciBldmVudCA9IGNyZWF0ZUV2ZW50KFwiaW5jcmVtZW50XCIpO1xyXG4gICAgICAgIGV2ZW50LmRlbHRhID0gZGVsdGE7XHJcbiAgICAgICAgaW5wdXQgJiYgaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBidWlsZCgpIHtcclxuICAgICAgICB2YXIgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLWNhbGVuZGFyXCIpO1xyXG4gICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIudGFiSW5kZXggPSAtMTtcclxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLm5vQ2FsZW5kYXIpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRNb250aE5hdigpKTtcclxuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItaW5uZXJDb250YWluZXJcIik7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy53ZWVrTnVtYmVycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hID0gYnVpbGRXZWVrcygpLCB3ZWVrV3JhcHBlciA9IF9hLndlZWtXcmFwcGVyLCB3ZWVrTnVtYmVycyA9IF9hLndlZWtOdW1iZXJzO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZCh3ZWVrV3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLndlZWtOdW1iZXJzID0gd2Vla051bWJlcnM7XHJcbiAgICAgICAgICAgICAgICBzZWxmLndlZWtXcmFwcGVyID0gd2Vla1dyYXBwZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5yQ29udGFpbmVyID0gY3JlYXRlRWxlbWVudChcImRpdlwiLCBcImZsYXRwaWNrci1yQ29udGFpbmVyXCIpO1xyXG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRXZWVrZGF5cygpKTtcclxuICAgICAgICAgICAgaWYgKCFzZWxmLmRheXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItZGF5c1wiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuZGF5c0NvbnRhaW5lci50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJ1aWxkRGF5cygpO1xyXG4gICAgICAgICAgICBzZWxmLnJDb250YWluZXIuYXBwZW5kQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgc2VsZi5pbm5lckNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxmLnJDb250YWluZXIpO1xyXG4gICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChzZWxmLmlubmVyQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLmVuYWJsZVRpbWUpIHtcclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoYnVpbGRUaW1lKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJhbmdlTW9kZVwiLCBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpO1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYW5pbWF0ZVwiLCBzZWxmLmNvbmZpZy5hbmltYXRlKTtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgICB2YXIgY3VzdG9tQXBwZW5kID0gc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZCAmJiBzZWxmLmNvbmZpZy5hcHBlbmRUby5ub2RlVHlwZTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lIHx8IHNlbGYuY29uZmlnLnN0YXRpYykge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc2VsZi5jb25maWcuaW5saW5lID8gXCJpbmxpbmVcIiA6IFwic3RhdGljXCIpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuaW5saW5lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbUFwcGVuZCAmJiBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgc2VsZi5faW5wdXQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5hcHBlbmRUby5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5jb25maWcuc3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3Itd3JhcHBlclwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmVsZW1lbnQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3JhcHBlciwgc2VsZi5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5lbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmFsdElucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2VsZi5hbHRJbnB1dCk7XHJcbiAgICAgICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNlbGYuY2FsZW5kYXJDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuc3RhdGljICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpXHJcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5hcHBlbmRUbyAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLmFwcGVuZFRvXHJcbiAgICAgICAgICAgICAgICA6IHdpbmRvdy5kb2N1bWVudC5ib2R5KS5hcHBlbmRDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZURheShjbGFzc05hbWUsIGRhdGUsIGRheU51bWJlciwgaSkge1xyXG4gICAgICAgIHZhciBkYXRlSXNFbmFibGVkID0gaXNFbmFibGVkKGRhdGUsIHRydWUpLCBkYXlFbGVtZW50ID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItZGF5IFwiICsgY2xhc3NOYW1lLCBkYXRlLmdldERhdGUoKS50b1N0cmluZygpKTtcclxuICAgICAgICBkYXlFbGVtZW50LmRhdGVPYmogPSBkYXRlO1xyXG4gICAgICAgIGRheUVsZW1lbnQuJGkgPSBpO1xyXG4gICAgICAgIGRheUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBzZWxmLmZvcm1hdERhdGUoZGF0ZSwgc2VsZi5jb25maWcuYXJpYURhdGVGb3JtYXQpKTtcclxuICAgICAgICBpZiAoY29tcGFyZURhdGVzKGRhdGUsIHNlbGYubm93KSA9PT0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLnRvZGF5RGF0ZUVsZW0gPSBkYXlFbGVtZW50O1xyXG4gICAgICAgICAgICBkYXlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRhdGVJc0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgZGF5RWxlbWVudC50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICBpZiAoaXNEYXRlU2VsZWN0ZWQoZGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVFbGVtID0gZGF5RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcInN0YXJ0UmFuZ2VcIiwgc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID09PSAwKTtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhkYXlFbGVtZW50LCBcImVuZFJhbmdlXCIsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzFdKSA9PT0gMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzWzBdICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1pblJhbmdlRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgZGF0ZSA+IHNlbGYubWluUmFuZ2VEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPSBkYXRlO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXNbMF0gJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWF4UmFuZ2VEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlIDwgc2VsZi5tYXhSYW5nZURhdGUgJiZcclxuICAgICAgICAgICAgICAgIGRhdGUgPiBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpIHtcclxuICAgICAgICAgICAgaWYgKGlzRGF0ZUluUmFuZ2UoZGF0ZSkgJiYgIWlzRGF0ZVNlbGVjdGVkKGRhdGUpKVxyXG4gICAgICAgICAgICAgICAgZGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDEgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWluUmFuZ2VEYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYubWF4UmFuZ2VEYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIChkYXRlIDwgc2VsZi5taW5SYW5nZURhdGUgfHwgZGF0ZSA+IHNlbGYubWF4UmFuZ2VEYXRlKSlcclxuICAgICAgICAgICAgICAgIGRheUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLndlZWtOdW1iZXJzICYmXHJcbiAgICAgICAgICAgIGNsYXNzTmFtZSAhPT0gXCJwcmV2TW9udGhEYXlcIiAmJlxyXG4gICAgICAgICAgICBkYXlOdW1iZXIgJSA3ID09PSAxKSB7XHJcbiAgICAgICAgICAgIHNlbGYud2Vla051bWJlcnMuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYmVmb3JlZW5kXCIsIFwiPHNwYW4gY2xhc3M9J2ZsYXRwaWNrci1kYXknPlwiICsgc2VsZi5jb25maWcuZ2V0V2VlayhkYXRlKSArIFwiPC9zcGFuPlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25EYXlDcmVhdGVcIiwgZGF5RWxlbWVudCk7XHJcbiAgICAgICAgcmV0dXJuIGRheUVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBmb2N1c09uRGF5KGN1cnJlbnRJbmRleCwgb2Zmc2V0KSB7XHJcbiAgICAgICAgdmFyIG5ld0luZGV4ID0gY3VycmVudEluZGV4ICsgb2Zmc2V0IHx8IDAsIHRhcmdldE5vZGUgPSAoY3VycmVudEluZGV4ICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgPyBzZWxmLmRheXMuY2hpbGROb2Rlc1tuZXdJbmRleF1cclxuICAgICAgICAgICAgOiBzZWxmLnNlbGVjdGVkRGF0ZUVsZW0gfHxcclxuICAgICAgICAgICAgICAgIHNlbGYudG9kYXlEYXRlRWxlbSB8fFxyXG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzLmNoaWxkTm9kZXNbMF0pO1xyXG4gICAgICAgIHZhciBmb2N1cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGFyZ2V0Tm9kZSA9IHRhcmdldE5vZGUgfHwgc2VsZi5kYXlzLmNoaWxkTm9kZXNbbmV3SW5kZXhdO1xyXG4gICAgICAgICAgICB0YXJnZXROb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIpXHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXROb2RlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0YXJnZXROb2RlID09PSB1bmRlZmluZWQgJiYgb2Zmc2V0ICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNoYW5nZU1vbnRoKDEsIHRydWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IG5ld0luZGV4ICUgNDI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAob2Zmc2V0IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jaGFuZ2VNb250aCgtMSwgdHJ1ZSwgdW5kZWZpbmVkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIG5ld0luZGV4ICs9IDQyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhZnRlckRheUFuaW0oZm9jdXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb2N1cygpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYWZ0ZXJEYXlBbmltKGZuKSB7XHJcbiAgICAgICAgc2VsZi5jb25maWcuYW5pbWF0ZSA9PT0gdHJ1ZSA/IHNlbGYuX2FuaW1hdGlvbkxvb3AucHVzaChmbikgOiBmbigpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYnVpbGREYXlzKGRlbHRhKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZpcnN0T2ZNb250aCA9IChuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCwgMSkuZ2V0RGF5KCkgLVxyXG4gICAgICAgICAgICBzZWxmLmwxMG4uZmlyc3REYXlPZldlZWsgK1xyXG4gICAgICAgICAgICA3KSAlXHJcbiAgICAgICAgICAgIDcsIGlzUmFuZ2VNb2RlID0gc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiO1xyXG4gICAgICAgIHZhciBwcmV2TW9udGhEYXlzID0gc2VsZi51dGlscy5nZXREYXlzSW5Nb250aCgoc2VsZi5jdXJyZW50TW9udGggLSAxICsgMTIpICUgMTIpO1xyXG4gICAgICAgIHZhciBkYXlzSW5Nb250aCA9IHNlbGYudXRpbHMuZ2V0RGF5c0luTW9udGgoKSwgZGF5cyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgdmFyIGRheU51bWJlciA9IHByZXZNb250aERheXMgKyAxIC0gZmlyc3RPZk1vbnRoLCBkYXlJbmRleCA9IDA7XHJcbiAgICAgICAgaWYgKHNlbGYud2Vla051bWJlcnMgJiYgc2VsZi53ZWVrTnVtYmVycy5maXJzdENoaWxkKVxyXG4gICAgICAgICAgICBzZWxmLndlZWtOdW1iZXJzLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICBpZiAoaXNSYW5nZU1vZGUpIHtcclxuICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPSBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCAtIDEsIGRheU51bWJlcik7XHJcbiAgICAgICAgICAgIHNlbGYubWF4UmFuZ2VEYXRlID0gbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGggKyAxLCAoNDIgLSBmaXJzdE9mTW9udGgpICUgZGF5c0luTW9udGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKDsgZGF5TnVtYmVyIDw9IHByZXZNb250aERheXM7IGRheU51bWJlcisrLCBkYXlJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwicHJldk1vbnRoRGF5XCIsIG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoIC0gMSwgZGF5TnVtYmVyKSwgZGF5TnVtYmVyLCBkYXlJbmRleCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGRheU51bWJlciA9IDE7IGRheU51bWJlciA8PSBkYXlzSW5Nb250aDsgZGF5TnVtYmVyKyssIGRheUluZGV4KyspIHtcclxuICAgICAgICAgICAgZGF5cy5hcHBlbmRDaGlsZChjcmVhdGVEYXkoXCJcIiwgbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGgsIGRheU51bWJlciksIGRheU51bWJlciwgZGF5SW5kZXgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgZGF5TnVtID0gZGF5c0luTW9udGggKyAxOyBkYXlOdW0gPD0gNDIgLSBmaXJzdE9mTW9udGg7IGRheU51bSsrLCBkYXlJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGRheXMuYXBwZW5kQ2hpbGQoY3JlYXRlRGF5KFwibmV4dE1vbnRoRGF5XCIsIG5ldyBEYXRlKHNlbGYuY3VycmVudFllYXIsIHNlbGYuY3VycmVudE1vbnRoICsgMSwgZGF5TnVtICUgZGF5c0luTW9udGgpLCBkYXlOdW0sIGRheUluZGV4KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc1JhbmdlTW9kZSAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxICYmIGRheXMuY2hpbGROb2Rlc1swXSkge1xyXG4gICAgICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgKCEhc2VsZi5taW5SYW5nZURhdGUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPiBkYXlzLmNoaWxkTm9kZXNbMF0uZGF0ZU9iaik7XHJcbiAgICAgICAgICAgIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cgfHxcclxuICAgICAgICAgICAgICAgICAgICAoISFzZWxmLm1heFJhbmdlRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShzZWxmLmN1cnJlbnRZZWFyLCBzZWxmLmN1cnJlbnRNb250aCArIDEsIDEpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIGRheUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJkYXlDb250YWluZXJcIik7XHJcbiAgICAgICAgZGF5Q29udGFpbmVyLmFwcGVuZENoaWxkKGRheXMpO1xyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuYW5pbWF0ZSB8fCBkZWx0YSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBjbGVhck5vZGUoc2VsZi5kYXlzQ29udGFpbmVyKTtcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgd2hpbGUgKHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aCA+IDEpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIucmVtb3ZlQ2hpbGQoc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVsdGEgJiYgZGVsdGEgPj0gMClcclxuICAgICAgICAgICAgc2VsZi5kYXlzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRheUNvbnRhaW5lcik7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZWxmLmRheXNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGRheUNvbnRhaW5lciwgc2VsZi5kYXlzQ29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIHNlbGYuZGF5cyA9IHNlbGYuZGF5c0NvbnRhaW5lci5jaGlsZE5vZGVzWzBdO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYnVpbGRNb250aE5hdigpIHtcclxuICAgICAgICB2YXIgbW9udGhOYXZGcmFnbWVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgc2VsZi5tb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItbW9udGhcIik7XHJcbiAgICAgICAgc2VsZi5wcmV2TW9udGhOYXYgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImZsYXRwaWNrci1wcmV2LW1vbnRoXCIpO1xyXG4gICAgICAgIHNlbGYucHJldk1vbnRoTmF2LmlubmVySFRNTCA9IHNlbGYuY29uZmlnLnByZXZBcnJvdztcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KFwic3BhblwiLCBcImN1ci1tb250aFwiKTtcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XHJcbiAgICAgICAgdmFyIHllYXJJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiY3VyLXllYXJcIiwgeyB0YWJpbmRleDogXCItMVwiIH0pO1xyXG4gICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50ID0geWVhcklucHV0LmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQudGl0bGUgPSBzZWxmLmwxMG4uc2Nyb2xsVGl0bGU7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUpXHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSkge1xyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiLCBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50LmRpc2FibGVkID1cclxuICAgICAgICAgICAgICAgICEhc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLm5leHRNb250aE5hdiA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLW5leHQtbW9udGhcIik7XHJcbiAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuaW5uZXJIVE1MID0gc2VsZi5jb25maWcubmV4dEFycm93O1xyXG4gICAgICAgIHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aCA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItY3VycmVudC1tb250aFwiKTtcclxuICAgICAgICBzZWxmLm5hdmlnYXRpb25DdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoc2VsZi5jdXJyZW50TW9udGhFbGVtZW50KTtcclxuICAgICAgICBzZWxmLm5hdmlnYXRpb25DdXJyZW50TW9udGguYXBwZW5kQ2hpbGQoeWVhcklucHV0KTtcclxuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYucHJldk1vbnRoTmF2KTtcclxuICAgICAgICBtb250aE5hdkZyYWdtZW50LmFwcGVuZENoaWxkKHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aCk7XHJcbiAgICAgICAgbW9udGhOYXZGcmFnbWVudC5hcHBlbmRDaGlsZChzZWxmLm5leHRNb250aE5hdik7XHJcbiAgICAgICAgc2VsZi5tb250aE5hdi5hcHBlbmRDaGlsZChtb250aE5hdkZyYWdtZW50KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJfaGlkZVByZXZNb250aEFycm93XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9faGlkZVByZXZNb250aEFycm93OyB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyAhPT0gYm9vbClcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnByZXZNb250aE5hdi5zdHlsZS5kaXNwbGF5ID0gYm9vbCA/IFwibm9uZVwiIDogXCJibG9ja1wiO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5fX2hpZGVQcmV2TW9udGhBcnJvdyA9IGJvb2w7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIFwiX2hpZGVOZXh0TW9udGhBcnJvd1wiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5fX2hpZGVOZXh0TW9udGhBcnJvdzsgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoYm9vbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgIT09IGJvb2wpXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5uZXh0TW9udGhOYXYuc3R5bGUuZGlzcGxheSA9IGJvb2wgPyBcIm5vbmVcIiA6IFwiYmxvY2tcIjtcclxuICAgICAgICAgICAgICAgIHNlbGYuX19oaWRlTmV4dE1vbnRoQXJyb3cgPSBib29sO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcclxuICAgICAgICByZXR1cm4gc2VsZi5tb250aE5hdjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGJ1aWxkVGltZSgpIHtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNUaW1lXCIpO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyKVxyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJub0NhbGVuZGFyXCIpO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lciA9IGNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgXCJmbGF0cGlja3ItdGltZVwiKTtcclxuICAgICAgICBzZWxmLnRpbWVDb250YWluZXIudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB2YXIgc2VwYXJhdG9yID0gY3JlYXRlRWxlbWVudChcInNwYW5cIiwgXCJmbGF0cGlja3ItdGltZS1zZXBhcmF0b3JcIiwgXCI6XCIpO1xyXG4gICAgICAgIHZhciBob3VySW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1ob3VyXCIpO1xyXG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQgPSBob3VySW5wdXQuY2hpbGROb2Rlc1swXTtcclxuICAgICAgICB2YXIgbWludXRlSW5wdXQgPSBjcmVhdGVOdW1iZXJJbnB1dChcImZsYXRwaWNrci1taW51dGVcIik7XHJcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50ID0gbWludXRlSW5wdXQuY2hpbGROb2Rlc1swXTtcclxuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRhYkluZGV4ID0gc2VsZi5taW51dGVFbGVtZW50LnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxyXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldEhvdXJzKClcclxuICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy50aW1lXzI0aHJcclxuICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuZGVmYXVsdEhvdXJcclxuICAgICAgICAgICAgICAgIDogbWlsaXRhcnkyYW1wbShzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikpO1xyXG4gICAgICAgIHNlbGYubWludXRlRWxlbWVudC52YWx1ZSA9IHBhZChzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9ialxyXG4gICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldE1pbnV0ZXMoKVxyXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmRlZmF1bHRNaW51dGUpO1xyXG4gICAgICAgIHNlbGYuaG91ckVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIsIHNlbGYuY29uZmlnLmhvdXJJbmNyZW1lbnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiLCBzZWxmLmNvbmZpZy5taW51dGVJbmNyZW1lbnQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLmNvbmZpZy50aW1lXzI0aHIgPyBcIjBcIiA6IFwiMVwiKTtcclxuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIsIHNlbGYuY29uZmlnLnRpbWVfMjRociA/IFwiMjNcIiA6IFwiMTJcIik7XHJcbiAgICAgICAgc2VsZi5taW51dGVFbGVtZW50LnNldEF0dHJpYnV0ZShcImRhdGEtbWluXCIsIFwiMFwiKTtcclxuICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgXCI1OVwiKTtcclxuICAgICAgICBzZWxmLmhvdXJFbGVtZW50LnRpdGxlID0gc2VsZi5taW51dGVFbGVtZW50LnRpdGxlID0gc2VsZi5sMTBuLnNjcm9sbFRpdGxlO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChob3VySW5wdXQpO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xyXG4gICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtaW51dGVJbnB1dCk7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLnRpbWVfMjRocilcclxuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0aW1lMjRoclwiKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlU2Vjb25kcykge1xyXG4gICAgICAgICAgICBzZWxmLnRpbWVDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImhhc1NlY29uZHNcIik7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRJbnB1dCA9IGNyZWF0ZU51bWJlcklucHV0KFwiZmxhdHBpY2tyLXNlY29uZFwiKTtcclxuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50ID0gc2Vjb25kSW5wdXQuY2hpbGROb2Rlc1swXTtcclxuICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LnZhbHVlID0gcGFkKHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqXHJcbiAgICAgICAgICAgICAgICA/IHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqLmdldFNlY29uZHMoKVxyXG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kZWZhdWx0U2Vjb25kcyk7XHJcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0ZXBcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc3RlcFwiKSk7XHJcbiAgICAgICAgICAgIHNlbGYuc2Vjb25kRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLW1pblwiLCBzZWxmLm1pbnV0ZUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpO1xyXG4gICAgICAgICAgICBzZWxmLnNlY29uZEVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1tYXhcIiwgc2VsZi5taW51dGVFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKTtcclxuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXRpbWUtc2VwYXJhdG9yXCIsIFwiOlwiKSk7XHJcbiAgICAgICAgICAgIHNlbGYudGltZUNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWNvbmRJbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcudGltZV8yNGhyKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYW1QTSA9IGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLWFtLXBtXCIsIHNlbGYubDEwbi5hbVBNW2ludCgoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmpcclxuICAgICAgICAgICAgICAgID8gc2VsZi5ob3VyRWxlbWVudC52YWx1ZVxyXG4gICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kZWZhdWx0SG91cikgPiAxMSldKTtcclxuICAgICAgICAgICAgc2VsZi5hbVBNLnRpdGxlID0gc2VsZi5sMTBuLnRvZ2dsZVRpdGxlO1xyXG4gICAgICAgICAgICBzZWxmLmFtUE0udGFiSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmFwcGVuZENoaWxkKHNlbGYuYW1QTSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxmLnRpbWVDb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBidWlsZFdlZWtkYXlzKCkge1xyXG4gICAgICAgIGlmICghc2VsZi53ZWVrZGF5Q29udGFpbmVyKVxyXG4gICAgICAgICAgICBzZWxmLndlZWtkYXlDb250YWluZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlzXCIpO1xyXG4gICAgICAgIHZhciBmaXJzdERheU9mV2VlayA9IHNlbGYubDEwbi5maXJzdERheU9mV2VlaztcclxuICAgICAgICB2YXIgd2Vla2RheXMgPSBzZWxmLmwxMG4ud2Vla2RheXMuc2hvcnRoYW5kLnNsaWNlKCk7XHJcbiAgICAgICAgaWYgKGZpcnN0RGF5T2ZXZWVrID4gMCAmJiBmaXJzdERheU9mV2VlayA8IHdlZWtkYXlzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB3ZWVrZGF5cyA9IHdlZWtkYXlzLnNwbGljZShmaXJzdERheU9mV2Vlaywgd2Vla2RheXMubGVuZ3RoKS5jb25jYXQod2Vla2RheXMuc3BsaWNlKDAsIGZpcnN0RGF5T2ZXZWVrKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYud2Vla2RheUNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlxcbiAgICA8c3BhbiBjbGFzcz1mbGF0cGlja3Itd2Vla2RheT5cXG4gICAgICBcIiArIHdlZWtkYXlzLmpvaW4oXCI8L3NwYW4+PHNwYW4gY2xhc3M9ZmxhdHBpY2tyLXdlZWtkYXk+XCIpICsgXCJcXG4gICAgPC9zcGFuPlxcbiAgICBcIjtcclxuICAgICAgICByZXR1cm4gc2VsZi53ZWVrZGF5Q29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gYnVpbGRXZWVrcygpIHtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJoYXNXZWVrc1wiKTtcclxuICAgICAgICB2YXIgd2Vla1dyYXBwZXIgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWt3cmFwcGVyXCIpO1xyXG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIFwiZmxhdHBpY2tyLXdlZWtkYXlcIiwgc2VsZi5sMTBuLndlZWtBYmJyZXZpYXRpb24pKTtcclxuICAgICAgICB2YXIgd2Vla051bWJlcnMgPSBjcmVhdGVFbGVtZW50KFwiZGl2XCIsIFwiZmxhdHBpY2tyLXdlZWtzXCIpO1xyXG4gICAgICAgIHdlZWtXcmFwcGVyLmFwcGVuZENoaWxkKHdlZWtOdW1iZXJzKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB3ZWVrV3JhcHBlcjogd2Vla1dyYXBwZXIsXHJcbiAgICAgICAgICAgIHdlZWtOdW1iZXJzOiB3ZWVrTnVtYmVycyxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2hhbmdlTW9udGgodmFsdWUsIGlzX29mZnNldCwgYW5pbWF0ZSwgZnJvbV9rZXlib2FyZCkge1xyXG4gICAgICAgIGlmIChpc19vZmZzZXQgPT09IHZvaWQgMCkgeyBpc19vZmZzZXQgPSB0cnVlOyB9XHJcbiAgICAgICAgaWYgKGFuaW1hdGUgPT09IHZvaWQgMCkgeyBhbmltYXRlID0gc2VsZi5jb25maWcuYW5pbWF0ZTsgfVxyXG4gICAgICAgIGlmIChmcm9tX2tleWJvYXJkID09PSB2b2lkIDApIHsgZnJvbV9rZXlib2FyZCA9IGZhbHNlOyB9XHJcbiAgICAgICAgdmFyIGRlbHRhID0gaXNfb2Zmc2V0ID8gdmFsdWUgOiB2YWx1ZSAtIHNlbGYuY3VycmVudE1vbnRoO1xyXG4gICAgICAgIGlmICgoZGVsdGEgPCAwICYmIHNlbGYuX2hpZGVQcmV2TW9udGhBcnJvdykgfHxcclxuICAgICAgICAgICAgKGRlbHRhID4gMCAmJiBzZWxmLl9oaWRlTmV4dE1vbnRoQXJyb3cpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgc2VsZi5jdXJyZW50TW9udGggKz0gZGVsdGE7XHJcbiAgICAgICAgaWYgKHNlbGYuY3VycmVudE1vbnRoIDwgMCB8fCBzZWxmLmN1cnJlbnRNb250aCA+IDExKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXIgKz0gc2VsZi5jdXJyZW50TW9udGggPiAxMSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50TW9udGggPSAoc2VsZi5jdXJyZW50TW9udGggKyAxMikgJSAxMjtcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidWlsZERheXMoYW5pbWF0ZSA/IGRlbHRhIDogdW5kZWZpbmVkKTtcclxuICAgICAgICBpZiAoIWFuaW1hdGUpIHtcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25Nb250aENoYW5nZVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG5hdiA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aDtcclxuICAgICAgICBpZiAoZGVsdGEgPCAwKSB7XHJcbiAgICAgICAgICAgIHdoaWxlIChuYXYubmV4dFNpYmxpbmcgJiZcclxuICAgICAgICAgICAgICAgIC9jdXJyLy50ZXN0KG5hdi5uZXh0U2libGluZy5jbGFzc05hbWUpKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5tb250aE5hdi5yZW1vdmVDaGlsZChuYXYubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChkZWx0YSA+IDApIHtcclxuICAgICAgICAgICAgd2hpbGUgKG5hdi5wcmV2aW91c1NpYmxpbmcgJiZcclxuICAgICAgICAgICAgICAgIC9jdXJyLy50ZXN0KG5hdi5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lKSlcclxuICAgICAgICAgICAgICAgIHNlbGYubW9udGhOYXYucmVtb3ZlQ2hpbGQobmF2LnByZXZpb3VzU2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYub2xkQ3VyTW9udGggPSBzZWxmLm5hdmlnYXRpb25DdXJyZW50TW9udGg7XHJcbiAgICAgICAgc2VsZi5uYXZpZ2F0aW9uQ3VycmVudE1vbnRoID0gc2VsZi5tb250aE5hdi5pbnNlcnRCZWZvcmUoc2VsZi5vbGRDdXJNb250aC5jbG9uZU5vZGUodHJ1ZSksIGRlbHRhID4gMCA/IHNlbGYub2xkQ3VyTW9udGgubmV4dFNpYmxpbmcgOiBzZWxmLm9sZEN1ck1vbnRoKTtcclxuICAgICAgICB2YXIgZGF5c0NvbnRhaW5lciA9IHNlbGYuZGF5c0NvbnRhaW5lcjtcclxuICAgICAgICBpZiAoZGF5c0NvbnRhaW5lci5maXJzdENoaWxkICYmIGRheXNDb250YWluZXIubGFzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGRheXNDb250YWluZXIuZmlyc3RDaGlsZC5jbGFzc0xpc3QuYWRkKFwic2xpZGVMZWZ0XCIpO1xyXG4gICAgICAgICAgICAgICAgZGF5c0NvbnRhaW5lci5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNsaWRlTGVmdE5ld1wiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYub2xkQ3VyTW9udGguY2xhc3NMaXN0LmFkZChcInNsaWRlTGVmdFwiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aC5jbGFzc0xpc3QuYWRkKFwic2xpZGVMZWZ0TmV3XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGRlbHRhIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgZGF5c0NvbnRhaW5lci5maXJzdENoaWxkLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVJpZ2h0TmV3XCIpO1xyXG4gICAgICAgICAgICAgICAgZGF5c0NvbnRhaW5lci5sYXN0Q2hpbGQuY2xhc3NMaXN0LmFkZChcInNsaWRlUmlnaHRcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm9sZEN1ck1vbnRoLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5uYXZpZ2F0aW9uQ3VycmVudE1vbnRoLmNsYXNzTGlzdC5hZGQoXCJzbGlkZVJpZ2h0TmV3XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3VycmVudE1vbnRoRWxlbWVudCA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aFxyXG4gICAgICAgICAgICAuZmlyc3RDaGlsZDtcclxuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudCA9IHNlbGYubmF2aWdhdGlvbkN1cnJlbnRNb250aC5sYXN0Q2hpbGRcclxuICAgICAgICAgICAgLmNoaWxkTm9kZXNbMF07XHJcbiAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xyXG4gICAgICAgIGlmIChzZWxmLm9sZEN1ck1vbnRoLmZpcnN0Q2hpbGQpXHJcbiAgICAgICAgICAgIHNlbGYub2xkQ3VyTW9udGguZmlyc3RDaGlsZC50ZXh0Q29udGVudCA9IG1vbnRoVG9TdHIoc2VsZi5jdXJyZW50TW9udGggLSBkZWx0YSwgc2VsZi5jb25maWcuc2hvcnRoYW5kQ3VycmVudE1vbnRoLCBzZWxmLmwxMG4pO1xyXG4gICAgICAgIGFmdGVyRGF5QW5pbShmdW5jdGlvbiAoKSB7IHJldHVybiB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpOyB9KTtcclxuICAgICAgICBpZiAoZnJvbV9rZXlib2FyZCAmJlxyXG4gICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuJGkpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4XzEgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LiRpO1xyXG4gICAgICAgICAgICBhZnRlckRheUFuaW0oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZm9jdXNPbkRheShpbmRleF8xLCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2xlYXIodHJpZ2dlckNoYW5nZUV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2VFdmVudCA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2VFdmVudCA9IHRydWU7IH1cclxuICAgICAgICBzZWxmLmlucHV0LnZhbHVlID0gXCJcIjtcclxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dClcclxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpXHJcbiAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IFtdO1xyXG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBzZXRIb3Vyc0Zyb21EYXRlKHNlbGYuY29uZmlnLm1pbkRhdGUpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBzZXRIb3VycyhzZWxmLmNvbmZpZy5kZWZhdWx0SG91ciwgc2VsZi5jb25maWcuZGVmYXVsdE1pbnV0ZSwgc2VsZi5jb25maWcuZGVmYXVsdFNlY29uZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnJlZHJhdygpO1xyXG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlRXZlbnQpXHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICAgICAgc2VsZi5pc09wZW4gPSBmYWxzZTtcclxuICAgICAgICBpZiAoIXNlbGYuaXNNb2JpbGUpIHtcclxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcclxuICAgICAgICAgICAgc2VsZi5faW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DbG9zZVwiKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uRGVzdHJveVwiKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gc2VsZi5faGFuZGxlcnMubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIHZhciBoID0gc2VsZi5faGFuZGxlcnNbaV07XHJcbiAgICAgICAgICAgIGguZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGguZXZlbnQsIGguaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuX2hhbmRsZXJzID0gW107XHJcbiAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHNlbGYubW9iaWxlSW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLm1vYmlsZUlucHV0KTtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jYWxlbmRhckNvbnRhaW5lciAmJiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnBhcmVudE5vZGUpXHJcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKTtcclxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCkge1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcInRleHRcIjtcclxuICAgICAgICAgICAgaWYgKHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzZWxmLmFsdElucHV0KTtcclxuICAgICAgICAgICAgZGVsZXRlIHNlbGYuYWx0SW5wdXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZWxmLmlucHV0KSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5wdXQudHlwZSA9IHNlbGYuaW5wdXQuX3R5cGU7XHJcbiAgICAgICAgICAgIHNlbGYuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImZsYXRwaWNrci1pbnB1dFwiKTtcclxuICAgICAgICAgICAgc2VsZi5pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcclxuICAgICAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgXCJfc2hvd1RpbWVJbnB1dFwiLFxyXG4gICAgICAgICAgICBcImxhdGVzdFNlbGVjdGVkRGF0ZU9ialwiLFxyXG4gICAgICAgICAgICBcIl9oaWRlTmV4dE1vbnRoQXJyb3dcIixcclxuICAgICAgICAgICAgXCJfaGlkZVByZXZNb250aEFycm93XCIsXHJcbiAgICAgICAgICAgIFwiX19oaWRlTmV4dE1vbnRoQXJyb3dcIixcclxuICAgICAgICAgICAgXCJfX2hpZGVQcmV2TW9udGhBcnJvd1wiLFxyXG4gICAgICAgICAgICBcImlzTW9iaWxlXCIsXHJcbiAgICAgICAgICAgIFwiaXNPcGVuXCIsXHJcbiAgICAgICAgICAgIFwic2VsZWN0ZWREYXRlRWxlbVwiLFxyXG4gICAgICAgICAgICBcIm1pbkRhdGVIYXNUaW1lXCIsXHJcbiAgICAgICAgICAgIFwibWF4RGF0ZUhhc1RpbWVcIixcclxuICAgICAgICAgICAgXCJkYXlzXCIsXHJcbiAgICAgICAgICAgIFwiZGF5c0NvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcIl9pbnB1dFwiLFxyXG4gICAgICAgICAgICBcIl9wb3NpdGlvbkVsZW1lbnRcIixcclxuICAgICAgICAgICAgXCJpbm5lckNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcInJDb250YWluZXJcIixcclxuICAgICAgICAgICAgXCJtb250aE5hdlwiLFxyXG4gICAgICAgICAgICBcInRvZGF5RGF0ZUVsZW1cIixcclxuICAgICAgICAgICAgXCJjYWxlbmRhckNvbnRhaW5lclwiLFxyXG4gICAgICAgICAgICBcIndlZWtkYXlDb250YWluZXJcIixcclxuICAgICAgICAgICAgXCJwcmV2TW9udGhOYXZcIixcclxuICAgICAgICAgICAgXCJuZXh0TW9udGhOYXZcIixcclxuICAgICAgICAgICAgXCJjdXJyZW50TW9udGhFbGVtZW50XCIsXHJcbiAgICAgICAgICAgIFwiY3VycmVudFllYXJFbGVtZW50XCIsXHJcbiAgICAgICAgICAgIFwibmF2aWdhdGlvbkN1cnJlbnRNb250aFwiLFxyXG4gICAgICAgICAgICBcInNlbGVjdGVkRGF0ZUVsZW1cIixcclxuICAgICAgICAgICAgXCJjb25maWdcIixcclxuICAgICAgICBdLmZvckVhY2goZnVuY3Rpb24gKGspIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBzZWxmW2tdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfKSB7IH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzQ2FsZW5kYXJFbGVtKGVsZW0pIHtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYXBwZW5kVG8gJiYgc2VsZi5jb25maWcuYXBwZW5kVG8uY29udGFpbnMoZWxlbSkpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJldHVybiBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLmNvbnRhaW5zKGVsZW0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZG9jdW1lbnRDbGljayhlKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5pbmxpbmUpIHtcclxuICAgICAgICAgICAgdmFyIGlzQ2FsZW5kYXJFbGVtZW50ID0gaXNDYWxlbmRhckVsZW0oZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLmlucHV0IHx8XHJcbiAgICAgICAgICAgICAgICBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dCB8fFxyXG4gICAgICAgICAgICAgICAgc2VsZi5lbGVtZW50LmNvbnRhaW5zKGUudGFyZ2V0KSB8fFxyXG4gICAgICAgICAgICAgICAgKGUucGF0aCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGUucGF0aC5pbmRleE9mICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKH5lLnBhdGguaW5kZXhPZihzZWxmLmlucHV0KSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB+ZS5wYXRoLmluZGV4T2Yoc2VsZi5hbHRJbnB1dCkpKTtcclxuICAgICAgICAgICAgdmFyIGxvc3RGb2N1cyA9IGUudHlwZSA9PT0gXCJibHVyXCJcclxuICAgICAgICAgICAgICAgID8gaXNJbnB1dCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGUucmVsYXRlZFRhcmdldCAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFpc0NhbGVuZGFyRWxlbShlLnJlbGF0ZWRUYXJnZXQpXHJcbiAgICAgICAgICAgICAgICA6ICFpc0lucHV0ICYmICFpc0NhbGVuZGFyRWxlbWVudDtcclxuICAgICAgICAgICAgdmFyIGlzSWdub3JlZCA9ICFzZWxmLmNvbmZpZy5pZ25vcmVkRm9jdXNFbGVtZW50cy5zb21lKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5jb250YWlucyhlLnRhcmdldCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobG9zdEZvY3VzICYmIGlzSWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1vZGUgPT09IFwicmFuZ2VcIiAmJiBzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGVhcihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoYW5nZVllYXIobmV3WWVhcikge1xyXG4gICAgICAgIGlmICghbmV3WWVhciB8fFxyXG4gICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikgJiZcclxuICAgICAgICAgICAgICAgIG5ld1llYXIgPFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHNlbGYuY3VycmVudFllYXJFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWluXCIpKSkgfHxcclxuICAgICAgICAgICAgKHNlbGYuY3VycmVudFllYXJFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpICYmXHJcbiAgICAgICAgICAgICAgICBuZXdZZWFyID5cclxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW1heFwiKSkpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIG5ld1llYXJOdW0gPSBuZXdZZWFyLCBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBuZXdZZWFyTnVtO1xyXG4gICAgICAgIHNlbGYuY3VycmVudFllYXIgPSBuZXdZZWFyTnVtIHx8IHNlbGYuY3VycmVudFllYXI7XHJcbiAgICAgICAgaWYgKHNlbGYuY29uZmlnLm1heERhdGUgJiZcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5taW4oc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWluRGF0ZS5nZXRGdWxsWWVhcigpKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY3VycmVudE1vbnRoID0gTWF0aC5tYXgoc2VsZi5jb25maWcubWluRGF0ZS5nZXRNb250aCgpLCBzZWxmLmN1cnJlbnRNb250aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpc05ld1llYXIpIHtcclxuICAgICAgICAgICAgc2VsZi5yZWRyYXcoKTtcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzRW5hYmxlZChkYXRlLCB0aW1lbGVzcykge1xyXG4gICAgICAgIGlmICh0aW1lbGVzcyA9PT0gdm9pZCAwKSB7IHRpbWVsZXNzID0gdHJ1ZTsgfVxyXG4gICAgICAgIHZhciBkYXRlVG9DaGVjayA9IHNlbGYucGFyc2VEYXRlKGRhdGUsIHVuZGVmaW5lZCwgdGltZWxlc3MpO1xyXG4gICAgICAgIGlmICgoc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxyXG4gICAgICAgICAgICBjb21wYXJlRGF0ZXMoZGF0ZVRvQ2hlY2ssIHNlbGYuY29uZmlnLm1pbkRhdGUsIHRpbWVsZXNzICE9PSB1bmRlZmluZWQgPyB0aW1lbGVzcyA6ICFzZWxmLm1pbkRhdGVIYXNUaW1lKSA8IDApIHx8XHJcbiAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAmJlxyXG4gICAgICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGVUb0NoZWNrLCBzZWxmLmNvbmZpZy5tYXhEYXRlLCB0aW1lbGVzcyAhPT0gdW5kZWZpbmVkID8gdGltZWxlc3MgOiAhc2VsZi5tYXhEYXRlSGFzVGltZSkgPiAwKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghc2VsZi5jb25maWcuZW5hYmxlLmxlbmd0aCAmJiAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmIChkYXRlVG9DaGVjayA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdmFyIGJvb2wgPSBzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoID4gMCwgYXJyYXkgPSBib29sID8gc2VsZi5jb25maWcuZW5hYmxlIDogc2VsZi5jb25maWcuZGlzYWJsZTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgZCA9IHZvaWQgMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGQgPSBhcnJheVtpXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkID09PSBcImZ1bmN0aW9uXCIgJiZcclxuICAgICAgICAgICAgICAgIGQoZGF0ZVRvQ2hlY2spKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGQgaW5zdGFuY2VvZiBEYXRlICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICBkLmdldFRpbWUoKSA9PT0gZGF0ZVRvQ2hlY2suZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJvb2w7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSBcInN0cmluZ1wiICYmIGRhdGVUb0NoZWNrICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSBzZWxmLnBhcnNlRGF0ZShkLCB1bmRlZmluZWQsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZCAmJiBwYXJzZWQuZ2V0VGltZSgpID09PSBkYXRlVG9DaGVjay5nZXRUaW1lKClcclxuICAgICAgICAgICAgICAgICAgICA/IGJvb2xcclxuICAgICAgICAgICAgICAgICAgICA6ICFib29sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjayAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICBkLmZyb20gJiZcclxuICAgICAgICAgICAgICAgIGQudG8gJiZcclxuICAgICAgICAgICAgICAgIGRhdGVUb0NoZWNrLmdldFRpbWUoKSA+PSBkLmZyb20uZ2V0VGltZSgpICYmXHJcbiAgICAgICAgICAgICAgICBkYXRlVG9DaGVjay5nZXRUaW1lKCkgPD0gZC50by5nZXRUaW1lKCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYm9vbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICFib29sO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25LZXlEb3duKGUpIHtcclxuICAgICAgICB2YXIgaXNJbnB1dCA9IGUudGFyZ2V0ID09PSBzZWxmLl9pbnB1dDtcclxuICAgICAgICB2YXIgY2FsZW5kYXJFbGVtID0gaXNDYWxlbmRhckVsZW0oZS50YXJnZXQpO1xyXG4gICAgICAgIHZhciBhbGxvd0lucHV0ID0gc2VsZi5jb25maWcuYWxsb3dJbnB1dDtcclxuICAgICAgICB2YXIgYWxsb3dLZXlkb3duID0gc2VsZi5pc09wZW4gJiYgKCFhbGxvd0lucHV0IHx8ICFpc0lucHV0KTtcclxuICAgICAgICB2YXIgYWxsb3dJbmxpbmVLZXlkb3duID0gc2VsZi5jb25maWcuaW5saW5lICYmIGlzSW5wdXQgJiYgIWFsbG93SW5wdXQ7XHJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgJiYgaXNJbnB1dCkge1xyXG4gICAgICAgICAgICBpZiAoYWxsb3dJbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zZXREYXRlKHNlbGYuX2lucHV0LnZhbHVlLCB0cnVlLCBlLnRhcmdldCA9PT0gc2VsZi5hbHRJbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgID8gc2VsZi5jb25maWcuYWx0Rm9ybWF0XHJcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlLnRhcmdldC5ibHVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcGVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNhbGVuZGFyRWxlbSB8fCBhbGxvd0tleWRvd24gfHwgYWxsb3dJbmxpbmVLZXlkb3duKSB7XHJcbiAgICAgICAgICAgIHZhciBpc1RpbWVPYmogPSAhIXNlbGYudGltZUNvbnRhaW5lciAmJlxyXG4gICAgICAgICAgICAgICAgc2VsZi50aW1lQ29udGFpbmVyLmNvbnRhaW5zKGUudGFyZ2V0KTtcclxuICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTM6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZU9iailcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlVmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdERhdGUoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OlxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ2OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lucHV0ICYmICFzZWxmLmNvbmZpZy5hbGxvd0lucHV0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNsZWFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM3OlxyXG4gICAgICAgICAgICAgICAgY2FzZSAzOTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVGltZU9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmRheXNDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YV8xID0gZS5rZXlDb2RlID09PSAzOSA/IDEgOiAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZS5jdHJsS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZS50YXJnZXQuJGksIGRlbHRhXzEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZU1vbnRoKGRlbHRhXzEsIHRydWUsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5ob3VyRWxlbWVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ob3VyRWxlbWVudC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGUua2V5Q29kZSA9PT0gNDAgPyAxIDogLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lciAmJiBlLnRhcmdldC4kaSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmN0cmxLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvY3VzT25EYXkoZS50YXJnZXQuJGksIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFpc1RpbWVPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2N1c09uRGF5KGUudGFyZ2V0LiRpLCBkZWx0YSAqIDcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLmNvbmZpZy5lbmFibGVUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lT2JqICYmIHNlbGYuaG91ckVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvdXJFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVRpbWUoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RlYm91bmNlZENoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHNlbGYuaG91ckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1pbnV0ZUVsZW1lbnQuc2VsZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYuc2Vjb25kRWxlbWVudCB8fCBzZWxmLmFtUE0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuc2Vjb25kRWxlbWVudCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWNvbmRFbGVtZW50LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0ID09PSBzZWxmLnNlY29uZEVsZW1lbnQgJiYgc2VsZi5hbVBNKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIHNlbGYubDEwbi5hbVBNWzBdLmNoYXJBdCgwKTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPSBzZWxmLmwxMG4uYW1QTVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBzZWxmLmwxMG4uYW1QTVsxXS5jaGFyQXQoMCk6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYuYW1QTSAhPT0gdW5kZWZpbmVkICYmIGUudGFyZ2V0ID09PSBzZWxmLmFtUE0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID0gc2VsZi5sMTBuLmFtUE1bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEhvdXJzRnJvbUlucHV0cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVWYWx1ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25LZXlEb3duXCIsIGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG9uTW91c2VPdmVyKGVsZW0pIHtcclxuICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCAhPT0gMSB8fFxyXG4gICAgICAgICAgICAhZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpIHx8XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZWRcIikgfHxcclxuICAgICAgICAgICAgc2VsZi5taW5SYW5nZURhdGUgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIGhvdmVyRGF0ZSA9IGVsZW0uZGF0ZU9iaiwgaW5pdGlhbERhdGUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLnNlbGVjdGVkRGF0ZXNbMF0sIHVuZGVmaW5lZCwgdHJ1ZSksIHJhbmdlU3RhcnREYXRlID0gTWF0aC5taW4oaG92ZXJEYXRlLmdldFRpbWUoKSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLmdldFRpbWUoKSksIHJhbmdlRW5kRGF0ZSA9IE1hdGgubWF4KGhvdmVyRGF0ZS5nZXRUaW1lKCksIHNlbGYuc2VsZWN0ZWREYXRlc1swXS5nZXRUaW1lKCkpLCBjb250YWluc0Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgZm9yICh2YXIgdCA9IHJhbmdlU3RhcnREYXRlOyB0IDwgcmFuZ2VFbmREYXRlOyB0ICs9IGR1cmF0aW9uLkRBWSkge1xyXG4gICAgICAgICAgICBpZiAoIWlzRW5hYmxlZChuZXcgRGF0ZSh0KSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5zRGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbiAoaSwgZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIHZhciBvdXRPZlJhbmdlID0gdGltZXN0YW1wIDwgc2VsZi5taW5SYW5nZURhdGUuZ2V0VGltZSgpIHx8XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXAgPiBzZWxmLm1heFJhbmdlRGF0ZS5nZXRUaW1lKCksIGRheUVsZW0gPSBzZWxmLmRheXMuY2hpbGROb2Rlc1tpXTtcclxuICAgICAgICAgICAgaWYgKG91dE9mUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcIm5vdEFsbG93ZWRcIik7XHJcbiAgICAgICAgICAgICAgICBbXCJpblJhbmdlXCIsIFwic3RhcnRSYW5nZVwiLCBcImVuZFJhbmdlXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnNEaXNhYmxlZCAmJiAhb3V0T2ZSYW5nZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImNvbnRpbnVlXCI7XHJcbiAgICAgICAgICAgIFtcInN0YXJ0UmFuZ2VcIiwgXCJpblJhbmdlXCIsIFwiZW5kUmFuZ2VcIiwgXCJub3RBbGxvd2VkXCJdLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LnJlbW92ZShjKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBtaW5SYW5nZURhdGUgPSBNYXRoLm1heChzZWxmLm1pblJhbmdlRGF0ZS5nZXRUaW1lKCksIHJhbmdlU3RhcnREYXRlKSwgbWF4UmFuZ2VEYXRlID0gTWF0aC5taW4oc2VsZi5tYXhSYW5nZURhdGUuZ2V0VGltZSgpLCByYW5nZUVuZERhdGUpO1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoaG92ZXJEYXRlIDwgc2VsZi5zZWxlY3RlZERhdGVzWzBdID8gXCJzdGFydFJhbmdlXCIgOiBcImVuZFJhbmdlXCIpO1xyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbERhdGUgPCBob3ZlckRhdGUgJiYgdGltZXN0YW1wID09PSBpbml0aWFsRGF0ZS5nZXRUaW1lKCkpXHJcbiAgICAgICAgICAgICAgICBkYXlFbGVtLmNsYXNzTGlzdC5hZGQoXCJzdGFydFJhbmdlXCIpO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChpbml0aWFsRGF0ZSA+IGhvdmVyRGF0ZSAmJiB0aW1lc3RhbXAgPT09IGluaXRpYWxEYXRlLmdldFRpbWUoKSlcclxuICAgICAgICAgICAgICAgIGRheUVsZW0uY2xhc3NMaXN0LmFkZChcImVuZFJhbmdlXCIpO1xyXG4gICAgICAgICAgICBpZiAodGltZXN0YW1wID49IG1pblJhbmdlRGF0ZSAmJiB0aW1lc3RhbXAgPD0gbWF4UmFuZ2VEYXRlKVxyXG4gICAgICAgICAgICAgICAgZGF5RWxlbS5jbGFzc0xpc3QuYWRkKFwiaW5SYW5nZVwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBkYXRlID0gc2VsZi5kYXlzLmNoaWxkTm9kZXNbaV0uZGF0ZU9iajsgaSA8IDQyOyBpKyssIGRhdGUgPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5kYXlzLmNoaWxkTm9kZXNbaV0gJiZcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXMuY2hpbGROb2Rlc1tpXS5kYXRlT2JqKSB7XHJcbiAgICAgICAgICAgIF9sb29wXzEoaSwgZGF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb25SZXNpemUoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaXNPcGVuICYmICFzZWxmLmNvbmZpZy5zdGF0aWMgJiYgIXNlbGYuY29uZmlnLmlubGluZSlcclxuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcigpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb3BlbihlLCBwb3NpdGlvbkVsZW1lbnQpIHtcclxuICAgICAgICBpZiAocG9zaXRpb25FbGVtZW50ID09PSB2b2lkIDApIHsgcG9zaXRpb25FbGVtZW50ID0gc2VsZi5faW5wdXQ7IH1cclxuICAgICAgICBpZiAoc2VsZi5pc01vYmlsZSkge1xyXG4gICAgICAgICAgICBpZiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQgJiYgZS50YXJnZXQuYmx1cigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dCAhPT0gdW5kZWZpbmVkICYmIHNlbGYubW9iaWxlSW5wdXQuY2xpY2soKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi5faW5wdXQuZGlzYWJsZWQgfHwgc2VsZi5jb25maWcuaW5saW5lKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdmFyIHdhc09wZW4gPSBzZWxmLmlzT3BlbjtcclxuICAgICAgICBzZWxmLmlzT3BlbiA9IHRydWU7XHJcbiAgICAgICAgaWYgKCF3YXNPcGVuKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcIm9wZW5cIik7XHJcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uT3BlblwiKTtcclxuICAgICAgICAgICAgcG9zaXRpb25DYWxlbmRhcihwb3NpdGlvbkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIG1pbk1heERhdGVTZXR0ZXIodHlwZSkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZGF0ZU9iaiA9IChzZWxmLmNvbmZpZ1tcIl9cIiArIHR5cGUgKyBcIkRhdGVcIl0gPSBzZWxmLnBhcnNlRGF0ZShkYXRlLCBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0KSk7XHJcbiAgICAgICAgICAgIHZhciBpbnZlcnNlRGF0ZU9iaiA9IHNlbGYuY29uZmlnW1wiX1wiICsgKHR5cGUgPT09IFwibWluXCIgPyBcIm1heFwiIDogXCJtaW5cIikgKyBcIkRhdGVcIl07XHJcbiAgICAgICAgICAgIGlmIChkYXRlT2JqICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGZbdHlwZSA9PT0gXCJtaW5cIiA/IFwibWluRGF0ZUhhc1RpbWVcIiA6IFwibWF4RGF0ZUhhc1RpbWVcIl0gPVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0SG91cnMoKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iai5nZXRNaW51dGVzKCkgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVPYmouZ2V0U2Vjb25kcygpID4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2VsZi5zZWxlY3RlZERhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBzZWxmLnNlbGVjdGVkRGF0ZXMuZmlsdGVyKGZ1bmN0aW9uIChkKSB7IHJldHVybiBpc0VuYWJsZWQoZCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoICYmIHR5cGUgPT09IFwibWluXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SG91cnNGcm9tRGF0ZShkYXRlT2JqKTtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVZhbHVlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHNlbGYuZGF5c0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgcmVkcmF3KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZU9iaiAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudFllYXJFbGVtZW50W3R5cGVdID0gZGF0ZU9iai5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuZGlzYWJsZWQgPVxyXG4gICAgICAgICAgICAgICAgICAgICEhaW52ZXJzZURhdGVPYmogJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZU9iaiAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludmVyc2VEYXRlT2JqLmdldEZ1bGxZZWFyKCkgPT09IGRhdGVPYmouZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZUNvbmZpZygpIHtcclxuICAgICAgICB2YXIgYm9vbE9wdHMgPSBbXHJcbiAgICAgICAgICAgIFwid3JhcFwiLFxyXG4gICAgICAgICAgICBcIndlZWtOdW1iZXJzXCIsXHJcbiAgICAgICAgICAgIFwiYWxsb3dJbnB1dFwiLFxyXG4gICAgICAgICAgICBcImNsaWNrT3BlbnNcIixcclxuICAgICAgICAgICAgXCJ0aW1lXzI0aHJcIixcclxuICAgICAgICAgICAgXCJlbmFibGVUaW1lXCIsXHJcbiAgICAgICAgICAgIFwibm9DYWxlbmRhclwiLFxyXG4gICAgICAgICAgICBcImFsdElucHV0XCIsXHJcbiAgICAgICAgICAgIFwic2hvcnRoYW5kQ3VycmVudE1vbnRoXCIsXHJcbiAgICAgICAgICAgIFwiaW5saW5lXCIsXHJcbiAgICAgICAgICAgIFwic3RhdGljXCIsXHJcbiAgICAgICAgICAgIFwiZW5hYmxlU2Vjb25kc1wiLFxyXG4gICAgICAgICAgICBcImRpc2FibGVNb2JpbGVcIixcclxuICAgICAgICBdO1xyXG4gICAgICAgIHZhciBob29rcyA9IFtcclxuICAgICAgICAgICAgXCJvbkNoYW5nZVwiLFxyXG4gICAgICAgICAgICBcIm9uQ2xvc2VcIixcclxuICAgICAgICAgICAgXCJvbkRheUNyZWF0ZVwiLFxyXG4gICAgICAgICAgICBcIm9uRGVzdHJveVwiLFxyXG4gICAgICAgICAgICBcIm9uS2V5RG93blwiLFxyXG4gICAgICAgICAgICBcIm9uTW9udGhDaGFuZ2VcIixcclxuICAgICAgICAgICAgXCJvbk9wZW5cIixcclxuICAgICAgICAgICAgXCJvblBhcnNlQ29uZmlnXCIsXHJcbiAgICAgICAgICAgIFwib25SZWFkeVwiLFxyXG4gICAgICAgICAgICBcIm9uVmFsdWVVcGRhdGVcIixcclxuICAgICAgICAgICAgXCJvblllYXJDaGFuZ2VcIixcclxuICAgICAgICAgICAgXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIixcclxuICAgICAgICBdO1xyXG4gICAgICAgIHNlbGYuY29uZmlnID0gX19hc3NpZ24oe30sIGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnKTtcclxuICAgICAgICB2YXIgdXNlckNvbmZpZyA9IF9fYXNzaWduKHt9LCBpbnN0YW5jZUNvbmZpZywgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGVtZW50LmRhdGFzZXQgfHwge30pKSk7XHJcbiAgICAgICAgdmFyIGZvcm1hdHMkJDEgPSB7fTtcclxuICAgICAgICBzZWxmLmNvbmZpZy5wYXJzZURhdGUgPSB1c2VyQ29uZmlnLnBhcnNlRGF0ZTtcclxuICAgICAgICBzZWxmLmNvbmZpZy5mb3JtYXREYXRlID0gdXNlckNvbmZpZy5mb3JtYXREYXRlO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJlbmFibGVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9lbmFibGUgfHwgW107IH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGRhdGVzKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5fZW5hYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLmNvbmZpZywgXCJkaXNhYmxlXCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLmNvbmZpZy5fZGlzYWJsZSB8fCBbXTsgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLl9kaXNhYmxlID0gcGFyc2VEYXRlUnVsZXMoZGF0ZXMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghdXNlckNvbmZpZy5kYXRlRm9ybWF0ICYmIHVzZXJDb25maWcuZW5hYmxlVGltZSkge1xyXG4gICAgICAgICAgICBmb3JtYXRzJCQxLmRhdGVGb3JtYXQgPSB1c2VyQ29uZmlnLm5vQ2FsZW5kYXJcclxuICAgICAgICAgICAgICAgID8gXCJIOmlcIiArICh1c2VyQ29uZmlnLmVuYWJsZVNlY29uZHMgPyBcIjpTXCIgOiBcIlwiKVxyXG4gICAgICAgICAgICAgICAgOiBmbGF0cGlja3IuZGVmYXVsdENvbmZpZy5kYXRlRm9ybWF0ICtcclxuICAgICAgICAgICAgICAgICAgICBcIiBIOmlcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlckNvbmZpZy5hbHRJbnB1dCAmJiB1c2VyQ29uZmlnLmVuYWJsZVRpbWUgJiYgIXVzZXJDb25maWcuYWx0Rm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZvcm1hdHMkJDEuYWx0Rm9ybWF0ID0gdXNlckNvbmZpZy5ub0NhbGVuZGFyXHJcbiAgICAgICAgICAgICAgICA/IFwiaDppXCIgKyAodXNlckNvbmZpZy5lbmFibGVTZWNvbmRzID8gXCI6UyBLXCIgOiBcIiBLXCIpXHJcbiAgICAgICAgICAgICAgICA6IGZsYXRwaWNrci5kZWZhdWx0Q29uZmlnLmFsdEZvcm1hdCArXHJcbiAgICAgICAgICAgICAgICAgICAgKFwiIGg6aVwiICsgKHVzZXJDb25maWcuZW5hYmxlU2Vjb25kcyA/IFwiOlNcIiA6IFwiXCIpICsgXCIgS1wiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1pbkRhdGVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9taW5EYXRlOyB9LFxyXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtaW5cIiksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYuY29uZmlnLCBcIm1heERhdGVcIiwge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuY29uZmlnLl9tYXhEYXRlOyB9LFxyXG4gICAgICAgICAgICBzZXQ6IG1pbk1heERhdGVTZXR0ZXIoXCJtYXhcIiksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIG1pbk1heFRpbWVTZXR0ZXIgPSBmdW5jdGlvbiAodHlwZSkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1t0eXBlID09PSBcIm1pblwiID8gXCJfbWluVGltZVwiIDogXCJfbWF4VGltZVwiXSA9IHNlbGYucGFyc2VEYXRlKHZhbCwgXCJIOmlcIik7XHJcbiAgICAgICAgfTsgfTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWluVGltZVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21pblRpbWU7IH0sXHJcbiAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1pblwiKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZi5jb25maWcsIFwibWF4VGltZVwiLCB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5jb25maWcuX21heFRpbWU7IH0sXHJcbiAgICAgICAgICAgIHNldDogbWluTWF4VGltZVNldHRlcihcIm1heFwiKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICBPYmplY3QuYXNzaWduKHNlbGYuY29uZmlnLCBmb3JtYXRzJCQxLCB1c2VyQ29uZmlnKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJvb2xPcHRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZ1tib29sT3B0c1tpXV0gPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSB0cnVlIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWdbYm9vbE9wdHNbaV1dID09PSBcInRydWVcIjtcclxuICAgICAgICBmb3IgKHZhciBpID0gaG9va3MubGVuZ3RoOyBpLS07KSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbmZpZ1tob29rc1tpXV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jb25maWdbaG9va3NbaV1dID0gYXJyYXlpZnkoc2VsZi5jb25maWdbaG9va3NbaV1dIHx8IFtdKS5tYXAoYmluZFRvSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5jb25maWcucGx1Z2lucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcGx1Z2luQ29uZiA9IHNlbGYuY29uZmlnLnBsdWdpbnNbaV0oc2VsZikgfHwge307XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBwbHVnaW5Db25mKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAofmhvb2tzLmluZGV4T2Yoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBhcnJheWlmeShwbHVnaW5Db25mW2tleV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoYmluZFRvSW5zdGFuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoc2VsZi5jb25maWdba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdXNlckNvbmZpZ1trZXldID09PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnW2tleV0gPSBwbHVnaW5Db25mW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5pc01vYmlsZSA9XHJcbiAgICAgICAgICAgICFzZWxmLmNvbmZpZy5kaXNhYmxlTW9iaWxlICYmXHJcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuaW5saW5lICYmXHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmXHJcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcuZGlzYWJsZS5sZW5ndGggJiZcclxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy5lbmFibGUubGVuZ3RoICYmXHJcbiAgICAgICAgICAgICAgICAhc2VsZi5jb25maWcud2Vla051bWJlcnMgJiZcclxuICAgICAgICAgICAgICAgIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblBhcnNlQ29uZmlnXCIpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0dXBMb2NhbGUoKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmLmNvbmZpZy5sb2NhbGUgIT09IFwib2JqZWN0XCIgJiZcclxuICAgICAgICAgICAgdHlwZW9mIGZsYXRwaWNrci5sMTBuc1tzZWxmLmNvbmZpZy5sb2NhbGVdID09PSBcInVuZGVmaW5lZFwiKVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5lcnJvckhhbmRsZXIobmV3IEVycm9yKFwiZmxhdHBpY2tyOiBpbnZhbGlkIGxvY2FsZSBcIiArIHNlbGYuY29uZmlnLmxvY2FsZSkpO1xyXG4gICAgICAgIHNlbGYubDEwbiA9IF9fYXNzaWduKHt9LCBmbGF0cGlja3IubDEwbnMuZGVmYXVsdCwgdHlwZW9mIHNlbGYuY29uZmlnLmxvY2FsZSA9PT0gXCJvYmplY3RcIlxyXG4gICAgICAgICAgICA/IHNlbGYuY29uZmlnLmxvY2FsZVxyXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLmxvY2FsZSAhPT0gXCJkZWZhdWx0XCJcclxuICAgICAgICAgICAgICAgID8gZmxhdHBpY2tyLmwxMG5zW3NlbGYuY29uZmlnLmxvY2FsZV1cclxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkKTtcclxuICAgICAgICB0b2tlblJlZ2V4LksgPSBcIihcIiArIHNlbGYubDEwbi5hbVBNWzBdICsgXCJ8XCIgKyBzZWxmLmwxMG4uYW1QTVsxXSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMF0udG9Mb3dlckNhc2UoKSArIFwifFwiICsgc2VsZi5sMTBuLmFtUE1bMV0udG9Mb3dlckNhc2UoKSArIFwiKVwiO1xyXG4gICAgICAgIHNlbGYuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoc2VsZik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwb3NpdGlvbkNhbGVuZGFyKGN1c3RvbVBvc2l0aW9uRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvblByZUNhbGVuZGFyUG9zaXRpb25cIik7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uRWxlbWVudCA9IGN1c3RvbVBvc2l0aW9uRWxlbWVudCB8fCBzZWxmLl9wb3NpdGlvbkVsZW1lbnQ7XHJcbiAgICAgICAgdmFyIGNhbGVuZGFySGVpZ2h0ID0gQXJyYXkucHJvdG90eXBlLnJlZHVjZS5jYWxsKHNlbGYuY2FsZW5kYXJDb250YWluZXIuY2hpbGRyZW4sIGZ1bmN0aW9uIChhY2MsIGNoaWxkKSB7IHJldHVybiBhY2MgKyBjaGlsZC5vZmZzZXRIZWlnaHQ7IH0sIDApLCBjYWxlbmRhcldpZHRoID0gc2VsZi5jYWxlbmRhckNvbnRhaW5lci5vZmZzZXRXaWR0aCwgY29uZmlnUG9zID0gc2VsZi5jb25maWcucG9zaXRpb24sIGlucHV0Qm91bmRzID0gcG9zaXRpb25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBkaXN0YW5jZUZyb21Cb3R0b20gPSB3aW5kb3cuaW5uZXJIZWlnaHQgLSBpbnB1dEJvdW5kcy5ib3R0b20sIHNob3dPblRvcCA9IGNvbmZpZ1BvcyA9PT0gXCJhYm92ZVwiIHx8XHJcbiAgICAgICAgICAgIChjb25maWdQb3MgIT09IFwiYmVsb3dcIiAmJlxyXG4gICAgICAgICAgICAgICAgZGlzdGFuY2VGcm9tQm90dG9tIDwgY2FsZW5kYXJIZWlnaHQgJiZcclxuICAgICAgICAgICAgICAgIGlucHV0Qm91bmRzLnRvcCA+IGNhbGVuZGFySGVpZ2h0KTtcclxuICAgICAgICB2YXIgdG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0ICtcclxuICAgICAgICAgICAgaW5wdXRCb3VuZHMudG9wICtcclxuICAgICAgICAgICAgKCFzaG93T25Ub3AgPyBwb3NpdGlvbkVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgMiA6IC1jYWxlbmRhckhlaWdodCAtIDIpO1xyXG4gICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwiYXJyb3dUb3BcIiwgIXNob3dPblRvcCk7XHJcbiAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZi5jYWxlbmRhckNvbnRhaW5lciwgXCJhcnJvd0JvdHRvbVwiLCBzaG93T25Ub3ApO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5pbmxpbmUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB2YXIgbGVmdCA9IHdpbmRvdy5wYWdlWE9mZnNldCArIGlucHV0Qm91bmRzLmxlZnQ7XHJcbiAgICAgICAgdmFyIHJpZ2h0ID0gd2luZG93LmRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGggLSBpbnB1dEJvdW5kcy5yaWdodDtcclxuICAgICAgICB2YXIgcmlnaHRNb3N0ID0gbGVmdCArIGNhbGVuZGFyV2lkdGggPiB3aW5kb3cuZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aDtcclxuICAgICAgICB0b2dnbGVDbGFzcyhzZWxmLmNhbGVuZGFyQ29udGFpbmVyLCBcInJpZ2h0TW9zdFwiLCByaWdodE1vc3QpO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5zdGF0aWMpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnRvcCA9IHRvcCArIFwicHhcIjtcclxuICAgICAgICBpZiAoIXJpZ2h0TW9zdCkge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBsZWZ0ICsgXCJweFwiO1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gXCJhdXRvXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmNhbGVuZGFyQ29udGFpbmVyLnN0eWxlLmxlZnQgPSBcImF1dG9cIjtcclxuICAgICAgICAgICAgc2VsZi5jYWxlbmRhckNvbnRhaW5lci5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHJlZHJhdygpIHtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubm9DYWxlbmRhciB8fCBzZWxmLmlzTW9iaWxlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgYnVpbGRXZWVrZGF5cygpO1xyXG4gICAgICAgIHVwZGF0ZU5hdmlnYXRpb25DdXJyZW50TW9udGgoKTtcclxuICAgICAgICBidWlsZERheXMoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGZvY3VzQW5kQ2xvc2UoKSB7XHJcbiAgICAgICAgc2VsZi5faW5wdXQuZm9jdXMoKTtcclxuICAgICAgICBpZiAod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPT09IC0xKVxyXG4gICAgICAgICAgICBzZWxmLmNsb3NlKCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2xvc2UsIDApO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2VsZWN0RGF0ZShlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgdmFyIGlzU2VsZWN0YWJsZSA9IGZ1bmN0aW9uIChkYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRheS5jbGFzc0xpc3QgJiZcclxuICAgICAgICAgICAgICAgIGRheS5jbGFzc0xpc3QuY29udGFpbnMoXCJmbGF0cGlja3ItZGF5XCIpICYmXHJcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcImRpc2FibGVkXCIpICYmXHJcbiAgICAgICAgICAgICAgICAhZGF5LmNsYXNzTGlzdC5jb250YWlucyhcIm5vdEFsbG93ZWRcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgdCA9IGZpbmRQYXJlbnQoZS50YXJnZXQsIGlzU2VsZWN0YWJsZSk7XHJcbiAgICAgICAgaWYgKHQgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0O1xyXG4gICAgICAgIHZhciBzZWxlY3RlZERhdGUgPSAoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmogPSBuZXcgRGF0ZSh0YXJnZXQuZGF0ZU9iai5nZXRUaW1lKCkpKTtcclxuICAgICAgICB2YXIgc2hvdWxkQ2hhbmdlTW9udGggPSBzZWxlY3RlZERhdGUuZ2V0TW9udGgoKSAhPT0gc2VsZi5jdXJyZW50TW9udGggJiZcclxuICAgICAgICAgICAgc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlRWxlbSA9IHRhcmdldDtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJzaW5nbGVcIilcclxuICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzID0gW3NlbGVjdGVkRGF0ZV07XHJcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJtdWx0aXBsZVwiKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEluZGV4ID0gaXNEYXRlU2VsZWN0ZWQoc2VsZWN0ZWREYXRlKTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkSW5kZXgpXHJcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMuc3BsaWNlKHBhcnNlSW50KHNlbGVjdGVkSW5kZXgpLCAxKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnB1c2goc2VsZWN0ZWREYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAyKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5jbGVhcigpO1xyXG4gICAgICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMucHVzaChzZWxlY3RlZERhdGUpO1xyXG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5zZWxlY3RlZERhdGVzWzBdLCB0cnVlKSAhPT0gMClcclxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmdldFRpbWUoKSAtIGIuZ2V0VGltZSgpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0SG91cnNGcm9tSW5wdXRzKCk7XHJcbiAgICAgICAgaWYgKHNob3VsZENoYW5nZU1vbnRoKSB7XHJcbiAgICAgICAgICAgIHZhciBpc05ld1llYXIgPSBzZWxmLmN1cnJlbnRZZWFyICE9PSBzZWxlY3RlZERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhciA9IHNlbGVjdGVkRGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IHNlbGVjdGVkRGF0ZS5nZXRNb250aCgpO1xyXG4gICAgICAgICAgICBpZiAoaXNOZXdZZWFyKVxyXG4gICAgICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25ZZWFyQ2hhbmdlXCIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbk1vbnRoQ2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidWlsZERheXMoKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICBzZWxmLm1pbkRhdGVIYXNUaW1lICYmXHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVuYWJsZVRpbWUgJiZcclxuICAgICAgICAgICAgY29tcGFyZURhdGVzKHNlbGVjdGVkRGF0ZSwgc2VsZi5jb25maWcubWluRGF0ZSkgPT09IDApXHJcbiAgICAgICAgICAgIHNldEhvdXJzRnJvbURhdGUoc2VsZi5jb25maWcubWluRGF0ZSk7XHJcbiAgICAgICAgdXBkYXRlVmFsdWUoKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuZW5hYmxlVGltZSlcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHJldHVybiAoc2VsZi5zaG93VGltZUlucHV0ID0gdHJ1ZSk7IH0sIDUwKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubW9kZSA9PT0gXCJyYW5nZVwiKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLnNlbGVjdGVkRGF0ZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBvbk1vdXNlT3Zlcih0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5faGlkZVByZXZNb250aEFycm93ID1cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHNlbGYubWluUmFuZ2VEYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWluUmFuZ2VEYXRlID5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRheXMuY2hpbGROb2Rlc1swXS5kYXRlT2JqKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuX2hpZGVOZXh0TW9udGhBcnJvdyA9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93IHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZWxmLm1heFJhbmdlRGF0ZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1heFJhbmdlRGF0ZSA8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoc2VsZi5jdXJyZW50WWVhciwgc2VsZi5jdXJyZW50TW9udGggKyAxLCAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlTmF2aWdhdGlvbkN1cnJlbnRNb250aCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNob3VsZENoYW5nZU1vbnRoKVxyXG4gICAgICAgICAgICBmb2N1c09uRGF5KHRhcmdldC4kaSwgMCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBhZnRlckRheUFuaW0oZnVuY3Rpb24gKCkgeyByZXR1cm4gc2VsZi5zZWxlY3RlZERhdGVFbGVtICYmIHNlbGYuc2VsZWN0ZWREYXRlRWxlbS5mb2N1cygpOyB9KTtcclxuICAgICAgICBpZiAoc2VsZi5ob3VyRWxlbWVudCAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGYuaG91ckVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBzZWxmLmhvdXJFbGVtZW50LnNlbGVjdCgpOyB9LCA0NTEpO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5jbG9zZU9uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBzaW5nbGUgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInNpbmdsZVwiICYmICFzZWxmLmNvbmZpZy5lbmFibGVUaW1lO1xyXG4gICAgICAgICAgICB2YXIgcmFuZ2UgPSBzZWxmLmNvbmZpZy5tb2RlID09PSBcInJhbmdlXCIgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPT09IDIgJiZcclxuICAgICAgICAgICAgICAgICFzZWxmLmNvbmZpZy5lbmFibGVUaW1lO1xyXG4gICAgICAgICAgICBpZiAoc2luZ2xlIHx8IHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb2N1c0FuZENsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdHJpZ2dlckNoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgdmFyIENBTExCQUNLUyA9IHtcclxuICAgICAgICBsb2NhbGU6IFtzZXR1cExvY2FsZV0sXHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gc2V0KG9wdGlvbiwgdmFsdWUpIHtcclxuICAgICAgICBpZiAob3B0aW9uICE9PSBudWxsICYmIHR5cGVvZiBvcHRpb24gPT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VsZi5jb25maWcsIG9wdGlvbik7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnW29wdGlvbl0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgaWYgKENBTExCQUNLU1tvcHRpb25dICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgICAgICBDQUxMQkFDS1Nbb3B0aW9uXS5mb3JFYWNoKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4KCk7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnJlZHJhdygpO1xyXG4gICAgICAgIGp1bXBUb0RhdGUoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldFNlbGVjdGVkRGF0ZShpbnB1dERhdGUsIGZvcm1hdCkge1xyXG4gICAgICAgIHZhciBkYXRlcyA9IFtdO1xyXG4gICAgICAgIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBBcnJheSlcclxuICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGUubWFwKGZ1bmN0aW9uIChkKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkLCBmb3JtYXQpOyB9KTtcclxuICAgICAgICBlbHNlIGlmIChpbnB1dERhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IHR5cGVvZiBpbnB1dERhdGUgPT09IFwibnVtYmVyXCIpXHJcbiAgICAgICAgICAgIGRhdGVzID0gW3NlbGYucGFyc2VEYXRlKGlucHV0RGF0ZSwgZm9ybWF0KV07XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0RGF0ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHNlbGYuY29uZmlnLm1vZGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaW5nbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBkYXRlcyA9IFtzZWxmLnBhcnNlRGF0ZShpbnB1dERhdGUsIGZvcm1hdCldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm11bHRpcGxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZXMgPSBpbnB1dERhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KHNlbGYuY29uZmlnLmNvbmp1bmN0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkYXRlKSB7IHJldHVybiBzZWxmLnBhcnNlRGF0ZShkYXRlLCBmb3JtYXQpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyYW5nZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVzID0gaW5wdXREYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zcGxpdChzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRhdGUpIHsgcmV0dXJuIHNlbGYucGFyc2VEYXRlKGRhdGUsIGZvcm1hdCk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLmVycm9ySGFuZGxlcihuZXcgRXJyb3IoXCJJbnZhbGlkIGRhdGUgc3VwcGxpZWQ6IFwiICsgSlNPTi5zdHJpbmdpZnkoaW5wdXREYXRlKSkpO1xyXG4gICAgICAgIHNlbGYuc2VsZWN0ZWREYXRlcyA9IGRhdGVzLmZpbHRlcihmdW5jdGlvbiAoZCkgeyByZXR1cm4gZCBpbnN0YW5jZW9mIERhdGUgJiYgaXNFbmFibGVkKGQsIGZhbHNlKTsgfSk7XHJcbiAgICAgICAgc2VsZi5zZWxlY3RlZERhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEuZ2V0VGltZSgpIC0gYi5nZXRUaW1lKCk7IH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0cmlnZ2VyQ2hhbmdlLCBmb3JtYXQpIHtcclxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSA9PT0gdm9pZCAwKSB7IHRyaWdnZXJDaGFuZ2UgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmIChmb3JtYXQgPT09IHZvaWQgMCkgeyBmb3JtYXQgPSBzZWxmLmNvbmZpZy5kYXRlRm9ybWF0OyB9XHJcbiAgICAgICAgaWYgKGRhdGUgIT09IDAgJiYgIWRhdGUpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xyXG4gICAgICAgIHNldFNlbGVjdGVkRGF0ZShkYXRlLCBmb3JtYXQpO1xyXG4gICAgICAgIHNlbGYuc2hvd1RpbWVJbnB1dCA9IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGggPiAwO1xyXG4gICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xyXG4gICAgICAgIHNlbGYucmVkcmF3KCk7XHJcbiAgICAgICAganVtcFRvRGF0ZSgpO1xyXG4gICAgICAgIHNldEhvdXJzRnJvbURhdGUoKTtcclxuICAgICAgICB1cGRhdGVWYWx1ZSh0cmlnZ2VyQ2hhbmdlKTtcclxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSlcclxuICAgICAgICAgICAgdHJpZ2dlckV2ZW50KFwib25DaGFuZ2VcIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBwYXJzZURhdGVSdWxlcyhhcnIpIHtcclxuICAgICAgICByZXR1cm4gYXJyXHJcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKHJ1bGUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlID09PSBcInN0cmluZ1wiIHx8XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgcnVsZSA9PT0gXCJudW1iZXJcIiB8fFxyXG4gICAgICAgICAgICAgICAgcnVsZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLnBhcnNlRGF0ZShydWxlLCB1bmRlZmluZWQsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUgJiZcclxuICAgICAgICAgICAgICAgIHR5cGVvZiBydWxlID09PSBcIm9iamVjdFwiICYmXHJcbiAgICAgICAgICAgICAgICBydWxlLmZyb20gJiZcclxuICAgICAgICAgICAgICAgIHJ1bGUudG8pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHNlbGYucGFyc2VEYXRlKHJ1bGUuZnJvbSwgdW5kZWZpbmVkKSxcclxuICAgICAgICAgICAgICAgICAgICB0bzogc2VsZi5wYXJzZURhdGUocnVsZS50bywgdW5kZWZpbmVkKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBydWxlO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0dXBEYXRlcygpIHtcclxuICAgICAgICBzZWxmLnNlbGVjdGVkRGF0ZXMgPSBbXTtcclxuICAgICAgICBzZWxmLm5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgdmFyIHByZWxvYWRlZERhdGUgPSBzZWxmLmNvbmZpZy5kZWZhdWx0RGF0ZSB8fCBzZWxmLmlucHV0LnZhbHVlO1xyXG4gICAgICAgIGlmIChwcmVsb2FkZWREYXRlKVxyXG4gICAgICAgICAgICBzZXRTZWxlY3RlZERhdGUocHJlbG9hZGVkRGF0ZSwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7XHJcbiAgICAgICAgdmFyIGluaXRpYWxEYXRlID0gc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aFxyXG4gICAgICAgICAgICA/IHNlbGYuc2VsZWN0ZWREYXRlc1swXVxyXG4gICAgICAgICAgICA6IHNlbGYuY29uZmlnLm1pbkRhdGUgJiZcclxuICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0VGltZSgpID4gc2VsZi5ub3cuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgICAgICA/IHNlbGYuY29uZmlnLm1pbkRhdGVcclxuICAgICAgICAgICAgICAgIDogc2VsZi5jb25maWcubWF4RGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29uZmlnLm1heERhdGUuZ2V0VGltZSgpIDwgc2VsZi5ub3cuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5tYXhEYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgOiBzZWxmLm5vdztcclxuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyID0gaW5pdGlhbERhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aCA9IGluaXRpYWxEYXRlLmdldE1vbnRoKCk7XHJcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHNlbGYubGF0ZXN0U2VsZWN0ZWREYXRlT2JqID0gc2VsZi5zZWxlY3RlZERhdGVzWzBdO1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5taW5UaW1lICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHNlbGYuY29uZmlnLm1pblRpbWUgPSBzZWxmLnBhcnNlRGF0ZShzZWxmLmNvbmZpZy5taW5UaW1lLCBcIkg6aVwiKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4VGltZSAhPT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5tYXhUaW1lID0gc2VsZi5wYXJzZURhdGUoc2VsZi5jb25maWcubWF4VGltZSwgXCJIOmlcIik7XHJcbiAgICAgICAgc2VsZi5taW5EYXRlSGFzVGltZSA9XHJcbiAgICAgICAgICAgICEhc2VsZi5jb25maWcubWluRGF0ZSAmJlxyXG4gICAgICAgICAgICAgICAgKHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0SG91cnMoKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldE1pbnV0ZXMoKSA+IDAgfHxcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlLmdldFNlY29uZHMoKSA+IDApO1xyXG4gICAgICAgIHNlbGYubWF4RGF0ZUhhc1RpbWUgPVxyXG4gICAgICAgICAgICAhIXNlbGYuY29uZmlnLm1heERhdGUgJiZcclxuICAgICAgICAgICAgICAgIChzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEhvdXJzKCkgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRNaW51dGVzKCkgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZS5nZXRTZWNvbmRzKCkgPiAwKTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwgXCJzaG93VGltZUlucHV0XCIsIHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxmLl9zaG93VGltZUlucHV0OyB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zaG93VGltZUlucHV0ID0gYm9vbDtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLmNhbGVuZGFyQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHNlbGYuY2FsZW5kYXJDb250YWluZXIsIFwic2hvd1RpbWVJbnB1dFwiLCBib29sKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaXNPcGVuICYmIHBvc2l0aW9uQ2FsZW5kYXIoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHNldHVwSW5wdXRzKCkge1xyXG4gICAgICAgIHNlbGYuaW5wdXQgPSBzZWxmLmNvbmZpZy53cmFwXHJcbiAgICAgICAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiW2RhdGEtaW5wdXRdXCIpXHJcbiAgICAgICAgICAgIDogZWxlbWVudDtcclxuICAgICAgICBpZiAoIXNlbGYuaW5wdXQpIHtcclxuICAgICAgICAgICAgc2VsZi5jb25maWcuZXJyb3JIYW5kbGVyKG5ldyBFcnJvcihcIkludmFsaWQgaW5wdXQgZWxlbWVudCBzcGVjaWZpZWRcIikpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuaW5wdXQuX3R5cGUgPSBzZWxmLmlucHV0LnR5cGU7XHJcbiAgICAgICAgc2VsZi5pbnB1dC50eXBlID0gXCJ0ZXh0XCI7XHJcbiAgICAgICAgc2VsZi5pbnB1dC5jbGFzc0xpc3QuYWRkKFwiZmxhdHBpY2tyLWlucHV0XCIpO1xyXG4gICAgICAgIHNlbGYuX2lucHV0ID0gc2VsZi5pbnB1dDtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcuYWx0SW5wdXQpIHtcclxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dCA9IGNyZWF0ZUVsZW1lbnQoc2VsZi5pbnB1dC5ub2RlTmFtZSwgc2VsZi5pbnB1dC5jbGFzc05hbWUgKyBcIiBcIiArIHNlbGYuY29uZmlnLmFsdElucHV0Q2xhc3MpO1xyXG4gICAgICAgICAgICBzZWxmLl9pbnB1dCA9IHNlbGYuYWx0SW5wdXQ7XHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQucGxhY2Vob2xkZXIgPSBzZWxmLmlucHV0LnBsYWNlaG9sZGVyO1xyXG4gICAgICAgICAgICBzZWxmLmFsdElucHV0LmRpc2FibGVkID0gc2VsZi5pbnB1dC5kaXNhYmxlZDtcclxuICAgICAgICAgICAgc2VsZi5hbHRJbnB1dC5yZXF1aXJlZCA9IHNlbGYuaW5wdXQucmVxdWlyZWQ7XHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwidGV4dFwiO1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGYuY29uZmlnLnN0YXRpYyAmJiBzZWxmLmlucHV0LnBhcmVudE5vZGUpXHJcbiAgICAgICAgICAgICAgICBzZWxmLmlucHV0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNlbGYuYWx0SW5wdXQsIHNlbGYuaW5wdXQubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXNlbGYuY29uZmlnLmFsbG93SW5wdXQpXHJcbiAgICAgICAgICAgIHNlbGYuX2lucHV0LnNldEF0dHJpYnV0ZShcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgc2VsZi5fcG9zaXRpb25FbGVtZW50ID0gc2VsZi5jb25maWcucG9zaXRpb25FbGVtZW50IHx8IHNlbGYuX2lucHV0O1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gc2V0dXBNb2JpbGUoKSB7XHJcbiAgICAgICAgdmFyIGlucHV0VHlwZSA9IHNlbGYuY29uZmlnLmVuYWJsZVRpbWVcclxuICAgICAgICAgICAgPyBzZWxmLmNvbmZpZy5ub0NhbGVuZGFyID8gXCJ0aW1lXCIgOiBcImRhdGV0aW1lLWxvY2FsXCJcclxuICAgICAgICAgICAgOiBcImRhdGVcIjtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0ID0gY3JlYXRlRWxlbWVudChcImlucHV0XCIsIHNlbGYuaW5wdXQuY2xhc3NOYW1lICsgXCIgZmxhdHBpY2tyLW1vYmlsZVwiKTtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnN0ZXAgPSBzZWxmLmlucHV0LmdldEF0dHJpYnV0ZShcInN0ZXBcIikgfHwgXCJhbnlcIjtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnRhYkluZGV4ID0gMTtcclxuICAgICAgICBzZWxmLm1vYmlsZUlucHV0LnR5cGUgPSBpbnB1dFR5cGU7XHJcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kaXNhYmxlZCA9IHNlbGYuaW5wdXQuZGlzYWJsZWQ7XHJcbiAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5wbGFjZWhvbGRlciA9IHNlbGYuaW5wdXQucGxhY2Vob2xkZXI7XHJcbiAgICAgICAgc2VsZi5tb2JpbGVGb3JtYXRTdHIgPVxyXG4gICAgICAgICAgICBpbnB1dFR5cGUgPT09IFwiZGF0ZXRpbWUtbG9jYWxcIlxyXG4gICAgICAgICAgICAgICAgPyBcIlktbS1kXFxcXFRIOmk6U1wiXHJcbiAgICAgICAgICAgICAgICA6IGlucHV0VHlwZSA9PT0gXCJkYXRlXCIgPyBcIlktbS1kXCIgOiBcIkg6aTpTXCI7XHJcbiAgICAgICAgaWYgKHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5kZWZhdWx0VmFsdWUgPSBzZWxmLm1vYmlsZUlucHV0LnZhbHVlID0gc2VsZi5mb3JtYXREYXRlKHNlbGYuc2VsZWN0ZWREYXRlc1swXSwgc2VsZi5tb2JpbGVGb3JtYXRTdHIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWluRGF0ZSlcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5taW4gPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWluRGF0ZSwgXCJZLW0tZFwiKTtcclxuICAgICAgICBpZiAoc2VsZi5jb25maWcubWF4RGF0ZSlcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC5tYXggPSBzZWxmLmZvcm1hdERhdGUoc2VsZi5jb25maWcubWF4RGF0ZSwgXCJZLW0tZFwiKTtcclxuICAgICAgICBzZWxmLmlucHV0LnR5cGUgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIGlmIChzZWxmLmFsdElucHV0ICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudHlwZSA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuaW5wdXQucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5wdXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2VsZi5tb2JpbGVJbnB1dCwgc2VsZi5pbnB1dC5uZXh0U2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgYmluZChzZWxmLm1vYmlsZUlucHV0LCBcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzZWxmLnNldERhdGUoZS50YXJnZXQudmFsdWUsIGZhbHNlLCBzZWxmLm1vYmlsZUZvcm1hdFN0cik7XHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uQ2hhbmdlXCIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyRXZlbnQoXCJvbkNsb3NlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmlzT3BlbilcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2xvc2UoKTtcclxuICAgICAgICBzZWxmLm9wZW4oKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJFdmVudChldmVudCwgZGF0YSkge1xyXG4gICAgICAgIHZhciBob29rcyA9IHNlbGYuY29uZmlnW2V2ZW50XTtcclxuICAgICAgICBpZiAoaG9va3MgIT09IHVuZGVmaW5lZCAmJiBob29rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBob29rc1tpXSAmJiBpIDwgaG9va3MubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgICAgICBob29rc1tpXShzZWxmLnNlbGVjdGVkRGF0ZXMsIHNlbGYuaW5wdXQudmFsdWUsIHNlbGYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQgPT09IFwib25DaGFuZ2VcIikge1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJjaGFuZ2VcIikpO1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0LmRpc3BhdGNoRXZlbnQoY3JlYXRlRXZlbnQoXCJpbnB1dFwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRXZlbnQobmFtZSkge1xyXG4gICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtcclxuICAgICAgICBlLmluaXRFdmVudChuYW1lLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICByZXR1cm4gZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzRGF0ZVNlbGVjdGVkKGRhdGUpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29tcGFyZURhdGVzKHNlbGYuc2VsZWN0ZWREYXRlc1tpXSwgZGF0ZSkgPT09IDApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJcIiArIGk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGlzRGF0ZUluUmFuZ2UoZGF0ZSkge1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5tb2RlICE9PSBcInJhbmdlXCIgfHwgc2VsZi5zZWxlY3RlZERhdGVzLmxlbmd0aCA8IDIpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKGNvbXBhcmVEYXRlcyhkYXRlLCBzZWxmLnNlbGVjdGVkRGF0ZXNbMF0pID49IDAgJiZcclxuICAgICAgICAgICAgY29tcGFyZURhdGVzKGRhdGUsIHNlbGYuc2VsZWN0ZWREYXRlc1sxXSkgPD0gMCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiB1cGRhdGVOYXZpZ2F0aW9uQ3VycmVudE1vbnRoKCkge1xyXG4gICAgICAgIGlmIChzZWxmLmNvbmZpZy5ub0NhbGVuZGFyIHx8IHNlbGYuaXNNb2JpbGUgfHwgIXNlbGYubW9udGhOYXYpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQudGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICBtb250aFRvU3RyKHNlbGYuY3VycmVudE1vbnRoLCBzZWxmLmNvbmZpZy5zaG9ydGhhbmRDdXJyZW50TW9udGgsIHNlbGYubDEwbikgKyBcIiBcIjtcclxuICAgICAgICBzZWxmLmN1cnJlbnRZZWFyRWxlbWVudC52YWx1ZSA9IHNlbGYuY3VycmVudFllYXIudG9TdHJpbmcoKTtcclxuICAgICAgICBzZWxmLl9oaWRlUHJldk1vbnRoQXJyb3cgPVxyXG4gICAgICAgICAgICBzZWxmLmNvbmZpZy5taW5EYXRlICE9PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgICAgIChzZWxmLmN1cnJlbnRZZWFyID09PSBzZWxmLmNvbmZpZy5taW5EYXRlLmdldEZ1bGxZZWFyKClcclxuICAgICAgICAgICAgICAgICAgICA/IHNlbGYuY3VycmVudE1vbnRoIDw9IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0TW9udGgoKVxyXG4gICAgICAgICAgICAgICAgICAgIDogc2VsZi5jdXJyZW50WWVhciA8IHNlbGYuY29uZmlnLm1pbkRhdGUuZ2V0RnVsbFllYXIoKSk7XHJcbiAgICAgICAgc2VsZi5faGlkZU5leHRNb250aEFycm93ID1cclxuICAgICAgICAgICAgc2VsZi5jb25maWcubWF4RGF0ZSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgICAgICAoc2VsZi5jdXJyZW50WWVhciA9PT0gc2VsZi5jb25maWcubWF4RGF0ZS5nZXRGdWxsWWVhcigpXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmN1cnJlbnRNb250aCArIDEgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldE1vbnRoKClcclxuICAgICAgICAgICAgICAgICAgICA6IHNlbGYuY3VycmVudFllYXIgPiBzZWxmLmNvbmZpZy5tYXhEYXRlLmdldEZ1bGxZZWFyKCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVmFsdWUodHJpZ2dlckNoYW5nZSkge1xyXG4gICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlID09PSB2b2lkIDApIHsgdHJpZ2dlckNoYW5nZSA9IHRydWU7IH1cclxuICAgICAgICBpZiAoIXNlbGYuc2VsZWN0ZWREYXRlcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xyXG4gICAgICAgIGlmIChzZWxmLm1vYmlsZUlucHV0ICE9PSB1bmRlZmluZWQgJiYgc2VsZi5tb2JpbGVGb3JtYXRTdHIpIHtcclxuICAgICAgICAgICAgc2VsZi5tb2JpbGVJbnB1dC52YWx1ZSA9XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxhdGVzdFNlbGVjdGVkRGF0ZU9iaiAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBzZWxmLmZvcm1hdERhdGUoc2VsZi5sYXRlc3RTZWxlY3RlZERhdGVPYmosIHNlbGYubW9iaWxlRm9ybWF0U3RyKVxyXG4gICAgICAgICAgICAgICAgICAgIDogXCJcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGpvaW5DaGFyID0gc2VsZi5jb25maWcubW9kZSAhPT0gXCJyYW5nZVwiXHJcbiAgICAgICAgICAgID8gc2VsZi5jb25maWcuY29uanVuY3Rpb25cclxuICAgICAgICAgICAgOiBzZWxmLmwxMG4ucmFuZ2VTZXBhcmF0b3I7XHJcbiAgICAgICAgc2VsZi5pbnB1dC52YWx1ZSA9IHNlbGYuc2VsZWN0ZWREYXRlc1xyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChkT2JqKSB7IHJldHVybiBzZWxmLmZvcm1hdERhdGUoZE9iaiwgc2VsZi5jb25maWcuZGF0ZUZvcm1hdCk7IH0pXHJcbiAgICAgICAgICAgIC5qb2luKGpvaW5DaGFyKTtcclxuICAgICAgICBpZiAoc2VsZi5hbHRJbnB1dCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYWx0SW5wdXQudmFsdWUgPSBzZWxmLnNlbGVjdGVkRGF0ZXNcclxuICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24gKGRPYmopIHsgcmV0dXJuIHNlbGYuZm9ybWF0RGF0ZShkT2JqLCBzZWxmLmNvbmZpZy5hbHRGb3JtYXQpOyB9KVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oam9pbkNoYXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSAhPT0gZmFsc2UpXHJcbiAgICAgICAgICAgIHRyaWdnZXJFdmVudChcIm9uVmFsdWVVcGRhdGVcIik7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbk1vbnRoTmF2U2Nyb2xsKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGlzWWVhciA9IHNlbGYuY3VycmVudFllYXJFbGVtZW50LnBhcmVudE5vZGUgJiZcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQucGFyZW50Tm9kZS5jb250YWlucyhlLnRhcmdldCk7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBzZWxmLmN1cnJlbnRNb250aEVsZW1lbnQgfHwgaXNZZWFyKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IG1vdXNlRGVsdGEoZSk7XHJcbiAgICAgICAgICAgIGlmIChpc1llYXIpIHtcclxuICAgICAgICAgICAgICAgIGNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciArIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnZhbHVlID0gc2VsZi5jdXJyZW50WWVhci50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHNlbGYuY2hhbmdlTW9udGgoZGVsdGEsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvbk1vbnRoTmF2Q2xpY2soZSkge1xyXG4gICAgICAgIHZhciBpc1ByZXZNb250aCA9IHNlbGYucHJldk1vbnRoTmF2LmNvbnRhaW5zKGUudGFyZ2V0KTtcclxuICAgICAgICB2YXIgaXNOZXh0TW9udGggPSBzZWxmLm5leHRNb250aE5hdi5jb250YWlucyhlLnRhcmdldCk7XHJcbiAgICAgICAgaWYgKGlzUHJldk1vbnRoIHx8IGlzTmV4dE1vbnRoKVxyXG4gICAgICAgICAgICBjaGFuZ2VNb250aChpc1ByZXZNb250aCA/IC0xIDogMSk7XHJcbiAgICAgICAgZWxzZSBpZiAoZS50YXJnZXQgPT09IHNlbGYuY3VycmVudFllYXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgc2VsZi5jdXJyZW50WWVhckVsZW1lbnQuc2VsZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJhcnJvd1VwXCIpXHJcbiAgICAgICAgICAgIHNlbGYuY2hhbmdlWWVhcihzZWxmLmN1cnJlbnRZZWFyICsgMSk7XHJcbiAgICAgICAgZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NOYW1lID09PSBcImFycm93RG93blwiKVxyXG4gICAgICAgICAgICBzZWxmLmNoYW5nZVllYXIoc2VsZi5jdXJyZW50WWVhciAtIDEpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gdGltZVdyYXBwZXIoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgaXNLZXlEb3duID0gZS50eXBlID09PSBcImtleWRvd25cIiwgaW5wdXQgPSBlLnRhcmdldDtcclxuICAgICAgICBpZiAoc2VsZi5hbVBNICE9PSB1bmRlZmluZWQgJiYgZS50YXJnZXQgPT09IHNlbGYuYW1QTSkge1xyXG4gICAgICAgICAgICBzZWxmLmFtUE0udGV4dENvbnRlbnQgPVxyXG4gICAgICAgICAgICAgICAgc2VsZi5sMTBuLmFtUE1baW50KHNlbGYuYW1QTS50ZXh0Q29udGVudCA9PT0gc2VsZi5sMTBuLmFtUE1bMF0pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1pbiA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1taW5cIikpLCBtYXggPSBwYXJzZUZsb2F0KGlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtbWF4XCIpKSwgc3RlcCA9IHBhcnNlRmxvYXQoaW5wdXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zdGVwXCIpKSwgY3VyVmFsdWUgPSBwYXJzZUludChpbnB1dC52YWx1ZSwgMTApLCBkZWx0YSA9IGUuZGVsdGEgfHxcclxuICAgICAgICAgICAgKGlzS2V5RG93blxyXG4gICAgICAgICAgICAgICAgPyBlLndoaWNoID09PSAzOCA/IDEgOiAtMVxyXG4gICAgICAgICAgICAgICAgOiBNYXRoLm1heCgtMSwgTWF0aC5taW4oMSwgZS53aGVlbERlbHRhIHx8IC1lLmRlbHRhWSkpIHx8IDApO1xyXG4gICAgICAgIHZhciBuZXdWYWx1ZSA9IGN1clZhbHVlICsgc3RlcCAqIGRlbHRhO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQudmFsdWUgIT09IFwidW5kZWZpbmVkXCIgJiYgaW5wdXQudmFsdWUubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgIHZhciBpc0hvdXJFbGVtID0gaW5wdXQgPT09IHNlbGYuaG91ckVsZW1lbnQsIGlzTWludXRlRWxlbSA9IGlucHV0ID09PSBzZWxmLm1pbnV0ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IG1pbikge1xyXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPVxyXG4gICAgICAgICAgICAgICAgICAgIG1heCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW50KCFpc0hvdXJFbGVtKSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChpbnQoaXNIb3VyRWxlbSkgJiYgaW50KCFzZWxmLmFtUE0pKTtcclxuICAgICAgICAgICAgICAgIGlmIChpc01pbnV0ZUVsZW0pXHJcbiAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50TnVtSW5wdXQodW5kZWZpbmVkLCAtMSwgc2VsZi5ob3VyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAobmV3VmFsdWUgPiBtYXgpIHtcclxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID1cclxuICAgICAgICAgICAgICAgICAgICBpbnB1dCA9PT0gc2VsZi5ob3VyRWxlbWVudCA/IG5ld1ZhbHVlIC0gbWF4IC0gaW50KCFzZWxmLmFtUE0pIDogbWluO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzTWludXRlRWxlbSlcclxuICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnROdW1JbnB1dCh1bmRlZmluZWQsIDEsIHNlbGYuaG91ckVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzZWxmLmFtUE0gJiZcclxuICAgICAgICAgICAgICAgIGlzSG91ckVsZW0gJiZcclxuICAgICAgICAgICAgICAgIChzdGVwID09PSAxXHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXdWYWx1ZSArIGN1clZhbHVlID09PSAyM1xyXG4gICAgICAgICAgICAgICAgICAgIDogTWF0aC5hYnMobmV3VmFsdWUgLSBjdXJWYWx1ZSkgPiBzdGVwKSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hbVBNLnRleHRDb250ZW50ID1cclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmwxMG4uYW1QTVtpbnQoc2VsZi5hbVBNLnRleHRDb250ZW50ID09PSBzZWxmLmwxMG4uYW1QTVswXSldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gcGFkKG5ld1ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpbml0KCk7XHJcbiAgICByZXR1cm4gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBfZmxhdHBpY2tyKG5vZGVMaXN0LCBjb25maWcpIHtcclxuICAgIHZhciBub2RlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGVMaXN0KTtcclxuICAgIHZhciBpbnN0YW5jZXMgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtZnAtb21pdFwiKSAhPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAobm9kZS5fZmxhdHBpY2tyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuX2ZsYXRwaWNrci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLl9mbGF0cGlja3IgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZS5fZmxhdHBpY2tyID0gRmxhdHBpY2tySW5zdGFuY2Uobm9kZSwgY29uZmlnIHx8IHt9KTtcclxuICAgICAgICAgICAgaW5zdGFuY2VzLnB1c2gobm9kZS5fZmxhdHBpY2tyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5zdGFuY2VzLmxlbmd0aCA9PT0gMSA/IGluc3RhbmNlc1swXSA6IGluc3RhbmNlcztcclxufVxyXG5pZiAodHlwZW9mIEhUTUxFbGVtZW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICBIVE1MQ29sbGVjdGlvbi5wcm90b3R5cGUuZmxhdHBpY2tyID0gTm9kZUxpc3QucHJvdG90eXBlLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xyXG4gICAgfTtcclxuICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZS5mbGF0cGlja3IgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3IoW3RoaXNdLCBjb25maWcpO1xyXG4gICAgfTtcclxufVxyXG52YXIgZmxhdHBpY2tyO1xyXG5mbGF0cGlja3IgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGNvbmZpZykge1xyXG4gICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgTm9kZUxpc3QpXHJcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Ioc2VsZWN0b3IsIGNvbmZpZyk7XHJcbiAgICBlbHNlIGlmICh0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgcmV0dXJuIF9mbGF0cGlja3Iod2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLCBjb25maWcpO1xyXG4gICAgcmV0dXJuIF9mbGF0cGlja3IoW3NlbGVjdG9yXSwgY29uZmlnKTtcclxufTtcclxuaWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcbiAgICB3aW5kb3cuZmxhdHBpY2tyID0gZmxhdHBpY2tyO1xyXG5mbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IGRlZmF1bHRzO1xyXG5mbGF0cGlja3IubDEwbnMgPSB7XHJcbiAgICBlbjogX19hc3NpZ24oe30sIGVuZ2xpc2gpLFxyXG4gICAgZGVmYXVsdDogX19hc3NpZ24oe30sIGVuZ2xpc2gpLFxyXG59O1xyXG5mbGF0cGlja3IubG9jYWxpemUgPSBmdW5jdGlvbiAobDEwbikge1xyXG4gICAgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQgPSBfX2Fzc2lnbih7fSwgZmxhdHBpY2tyLmwxMG5zLmRlZmF1bHQsIGwxMG4pO1xyXG59O1xyXG5mbGF0cGlja3Iuc2V0RGVmYXVsdHMgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICBmbGF0cGlja3IuZGVmYXVsdENvbmZpZyA9IF9fYXNzaWduKHt9LCBmbGF0cGlja3IuZGVmYXVsdENvbmZpZywgY29uZmlnKTtcclxufTtcclxuZmxhdHBpY2tyLnBhcnNlRGF0ZSA9IGNyZWF0ZURhdGVQYXJzZXIoe30pO1xyXG5mbGF0cGlja3IuZm9ybWF0RGF0ZSA9IGNyZWF0ZURhdGVGb3JtYXR0ZXIoe30pO1xyXG5mbGF0cGlja3IuY29tcGFyZURhdGVzID0gY29tcGFyZURhdGVzO1xyXG5pZiAodHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgalF1ZXJ5LmZuLmZsYXRwaWNrciA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gX2ZsYXRwaWNrcih0aGlzLCBjb25maWcpO1xyXG4gICAgfTtcclxufVxyXG5EYXRlLnByb3RvdHlwZS5mcF9pbmNyID0gZnVuY3Rpb24gKGRheXMpIHtcclxuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksIHRoaXMuZ2V0TW9udGgoKSwgdGhpcy5nZXREYXRlKCkgKyAodHlwZW9mIGRheXMgPT09IFwic3RyaW5nXCIgPyBwYXJzZUludChkYXlzLCAxMCkgOiBkYXlzKSk7XHJcbn07XHJcbnZhciBmbGF0cGlja3IkMSA9IGZsYXRwaWNrcjtcblxuZXhwb3J0c1snZGVmYXVsdCddID0gZmxhdHBpY2tyJDE7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvYXJjaHN5c3RlbXMvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL2FyY2hzeXN0ZW1zL3ZlbmRvci9vbWctZmllbGRzL25vZGVfbW9kdWxlcy9mbGF0cGlja3IvZGlzdC9mbGF0cGlja3IuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImltcG9ydCBsaXN0IGZyb20gJy4vbGlzdCc7XG5pbXBvcnQgaGlkZGVuIGZyb20gJy4vc2VyaWFsaXplZC1pbnB1dCc7XG5pbXBvcnQge1xuICByZW1vdmVJdGVtcyxcbiAgZHJhZ0l0ZW1zLFxuICBvbkRyYWdJbWFnZSxcbiAgb25SZW1vdmVJbWFnZSxcbn0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbigpIHtcbiAgY29uc3QgZ2FsbGVyeVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdhbGxlcnktd3JhcHBlcicpO1xuXG4gIGlmICghZ2FsbGVyeVNlY3Rpb25zKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgW10uZm9yRWFjaC5jYWxsKGdhbGxlcnlTZWN0aW9ucywgZ2FsbGVyeSA9PiB7XG4gICAgY29uc3QgYWRkSW1hZ2UgPSBnYWxsZXJ5LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtZ2FsbGVyeS1pbWFnZXMnKTtcbiAgICBjb25zdCBIaWRkZW4gPSBoaWRkZW4oZ2FsbGVyeSwgJy5pbWFnZS1nYWxsZXJ5LWhpZGRlbicpO1xuXG4gICAgY29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZUltYWdlKTtcbiAgICBjb25zdCBkcmFnID0gZHJhZ0l0ZW1zKEhpZGRlbiwgb25EcmFnSW1hZ2UpO1xuICAgIGNvbnN0IExpc3QgPSBsaXN0KGdhbGxlcnksIHtcbiAgICAgIGxpc3Q6ICcuZ2FsbGVyeS1pbWFnZXMnLFxuICAgICAgb25EcmFnOiBkcmFnLFxuICAgICAgb25SZW1vdmU6IHJlbW92ZSxcbiAgICAgIGxpc3RUZW1wbGF0ZTogaW1hZ2VJdGVtLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbWVkaWFGcmFtZSA9IHdwLm1lZGlhKHtcbiAgICAgIHRpdGxlOiAnQ2hvb3NlIE1lZGlhJyxcbiAgICAgIGJ1dHRvbjoge1xuICAgICAgICB0ZXh0OiAnVXNlIFNlbGVjdGVkIE1lZGlhJyxcbiAgICAgIH0sXG4gICAgICBtdWx0aXBsZTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIGFkZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIG1lZGlhRnJhbWUub3BlbigpO1xuICAgIH0pO1xuXG4gICAgbWVkaWFGcmFtZS5vbignc2VsZWN0JywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBhdHRhY2htZW50cyA9IG1lZGlhRnJhbWVcbiAgICAgICAgLnN0YXRlKClcbiAgICAgICAgLmdldCgnc2VsZWN0aW9uJylcbiAgICAgICAgLnRvSlNPTigpO1xuXG4gICAgICBhdHRhY2htZW50cy5mb3JFYWNoKGF0dGFjaG1lbnQgPT4ge1xuICAgICAgICBMaXN0LmFkZChhdHRhY2htZW50KTtcbiAgICAgICAgSGlkZGVuLmFkZChhdHRhY2htZW50LmlkKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuY29uc3QgaW1hZ2VJdGVtID0gaW1hZ2UgPT4ge1xuICByZXR1cm4gYDxsaSBjbGFzcz1cImdhbGxlcnktaW1hZ2UtaXRlbVwiPjxzcGFuIGNsYXNzPVwiZ2FsbGVyeS1pYW1nZS1pZFwiPiR7XG4gICAgaW1hZ2UuaWRcbiAgfTwvc3Bhbj48aW1nIHNyYz1cIiR7XG4gICAgaW1hZ2UudXJsXG4gIH1cIiBjbGFzcz1cImdhbGxlcnktaW1hZ2VcIi8+PHNwYW4+PHN2ZyBjbGFzcz1cInJlbW92ZS1nYWxsZXJ5LWltYWdlXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LTggOC04ek0xNSAxM2wtMy0zIDMtMy0yLTItMyAzLTMtMy0yIDIgMyAzLTMgMyAyIDIgMy0zIDMgM3pcIj48L3BhdGg+XG48L3N2Zz48L3NwYW4+PC9saT5gO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2dhbGxlcnkuanMiXSwic291cmNlUm9vdCI6IiJ9